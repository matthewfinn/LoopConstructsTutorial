!function(e){function t(t){for(var o,n,r=t[0],s=t[1],a=0,c=[];a<r.length;a++)n=r[a],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&c.push(i[n][0]),i[n]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);for(l&&l(t);c.length;)c.shift()()}var o={},i={21:0};function n(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.e=function(e){var t=[],o=i[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,n){o=i[e]=[t,n]}));t.push(o[2]=r);var s,a=document.createElement("script");a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.src=function(e){return n.p+""+({0:"vendors~catalogModule~discussionModule~errorReportManagerModule~exerciseSuitePage~exercises~faqModul~e1b02c94",1:"vendors~discussionModule~errorReportManagerModule~exerciseSuitePage~faqModule~freePreviewManager~geo~1cb37c06",2:"vendors~discussionModule~geoMapModule~micropurchase~review-report~searchModule~shoppingCartMenuModul~0014fc88",3:"bookPage~discussionParagraphNotificationsModule~editorPage~notesModule~synchronizerProviderModule~te~db17ebda",4:"bookPage~conceptPage~editorPage~epubPage~videoPage",5:"vendors~discussionModule~exerciseSuitePage~exercises~review-report~reviewModule",6:"offlineOperationsModal",7:"annotatedListingsModule",8:"vendors~discussionParagraphNotificationsModule~searchModule~userProfile",9:"vendors~exerciseSuitePage~exercises~tryItManager",10:"vendors~micropurchase~unlockManager~unlockModal",11:"vendors~review-report~reviewModule~termViewer",12:"bookPage~editorPage",13:"editorPage~tocIndexMenu",14:"freePreviewManager~simpleSignupManager",15:"vendors~feedbackModule~reviewModule",16:"vendors~geoMapModule~searchModule",17:"vendors~pdfModule~searchFallbackModule",18:"aboutModule",19:"activityManager",20:"addToCart",22:"appImpressionsModule",23:"audioModule",24:"bookContentProviderFs",25:"bookContentProviderWeb",26:"bookElementAdditionalCommandsMenu",27:"bookPage",28:"bookResourcesMenu",29:"booksModule",30:"catalogModule",31:"catalogPage",32:"conceptPage",33:"contentFeedbackFs",34:"contentFeedbackWeb",35:"discussionModule",36:"discussionParagraphNotificationsModule",37:"downloadManager",38:"downloadProgressButtonsModule",39:"editorPage",40:"epubPage",41:"errorReportManagerModule",42:"exerciseSuitePage",43:"exercises",44:"externalIframesModule",45:"faqModule",46:"feedbackModule",47:"freeEbooksUpsellModule",48:"freePreviewManager",49:"geoMapManager",50:"geoMapModule",51:"getAppModule",52:"helpButtonModule",53:"intersectionFallback",54:"landingPage",55:"libraryPage",56:"linkPreviewer",57:"listingEnvironmentModule",58:"loginManager",59:"markedEntriesTaggerModule",60:"meapModalModule",61:"micropurchase",62:"notesMenuModule",63:"notesModule",64:"pdfModule",65:"pointingSelectionModule",66:"profileImageUpload",67:"progressBarModule",68:"promoManager",69:"promoSpinner",70:"review-report",71:"reviewModule",72:"runnableListingsModule",73:"searchFallbackModule",74:"searchModule",75:"settingsMenu",76:"shoppingCartMenuModule",77:"shoppingCartModule",78:"simpleSignupManager",79:"synchronizerProviderModule",80:"termCleanerModule",81:"termViewer",82:"termViewerEmphasizer",83:"textAddendumModule",84:"textAddonsModule",85:"textMarginaliaModule",86:"textSelectionModule",87:"tocIndexMenu",88:"tourModule",89:"tryItManager",90:"tryItPage",91:"unlockManager",92:"unlockModal",93:"unlockText",94:"updateModule",95:"userActionTrackerManager",96:"userProfile",97:"vendors~codemirror",98:"vendors~discussionParagraphNotificationsModule",99:"vendors~esprima",100:"vendors~exercises",101:"vendors~externalIframesModule",102:"vendors~pdfModule",103:"vendors~searchFallbackModule",104:"vendors~shoppingCartMenuModule",105:"vendors~shoppingCartModule",106:"vendors~termViewer",107:"vendors~termViewerEmphasizer",108:"vendors~userActionTrackerManager",109:"vendors~zoomableImageModule",110:"videoModule",111:"videoPage",112:"visibilityFallback",113:"webImpressionsModule",114:"wishListManager",115:"zoomableImageModule"}[e]||e)+".chunk.js?"+{0:"ff2e164d6909164e42a7",1:"9d3821f532e23a0bad8a",2:"ad93472e4ab9b3e5ecde",3:"8fef4b4214bd4b2a589c",4:"0c916a87adcae1f1d7e9",5:"551a1b5365367ab41358",6:"10ab9ad6c7fae06d8a92",7:"dbd63e190f4715ba8add",8:"4d0e9955f80092df4d6b",9:"9dce8ebe54b208b802ce",10:"6d9e49c5e47831fcc010",11:"46d8423ea4650d9f3f79",12:"000aa686bd7d97495fc5",13:"63b51f3bc59ce125bdb1",14:"4ddf2621bebcdaab2a2a",15:"5a3a9a5d066c8cd3dd1d",16:"5b40f862ac73a3c7571d",17:"aea71674a1becd6f8c37",18:"5b8be3bee8f59c7b7acc",19:"2d143c900d159bed8ada",20:"1b9cbe803cd88b9ce8ea",22:"e9cad13229f65124bb86",23:"ee6b5f3215d8d2722531",24:"f97d2d69019a4e48dd1a",25:"d4ce94517b98d5d4ddc0",26:"16f3df9ea5ff33b415eb",27:"5cb960196e3a713f0286",28:"496b9ad3afb9b9b646e6",29:"dd6564b9fc1e5564a4cf",30:"82baaefd17e51820a0d5",31:"3e8fc7cf97e4b6684e97",32:"a7bf237c7415fd6c0510",33:"d559d03e4d03e53ca28d",34:"9fded971764dd0e4ddc8",35:"7925b37cbc58aba9c0cd",36:"ae483dc926b53cec2abb",37:"e0906575c67f243bdbb4",38:"7dcfa5e9364ce6fef5f2",39:"b3ab07de2b020707c02b",40:"c26d21fb7db4c5550239",41:"cd1b774f2ef955f28c2f",42:"d51c3c628c3a1ca1785c",43:"11042406fee30c2659fa",44:"970caa1c6a1931dd6323",45:"6f5c2d4e31833a16bb4d",46:"2b922d0df3cfdb3cc824",47:"61298fc75fe594cb87f1",48:"5f524fd66c81be326c81",49:"97f6ce0b28468be34eb8",50:"733901c846986b6739ef",51:"db287df4d8da237bdeda",52:"bd29ad3c4d237e067899",53:"7f871ac8491c79ad4e87",54:"7b6eb577164f8b5c3698",55:"2ab1f3469d673a29d9ca",56:"dbb26cb6304acac44fff",57:"135113ecd7c7194af9f8",58:"f6f7d300293785f15923",59:"88aff03bc28915fac881",60:"712ae1a2e8afbcf8e4a9",61:"3a01a82ae400ac795fb0",62:"b0a31be242330b0645bd",63:"8321d5a8b796bce5f6ea",64:"ef986ab338d58ed254f2",65:"c933d159a9520ff16c6b",66:"a22a80ba8d44cd5eb0ee",67:"d01012af16b7b80b01ee",68:"0046de7d490fef98e51c",69:"c919e0f8ab98b4fc0c9f",70:"c85436817c995243c649",71:"a55c710eeebd28bd155b",72:"a6859896c82455a833f8",73:"30b90e76a234fcaddfe9",74:"5fcd55dc82aaea393291",75:"1a8f8f8787397ee154b6",76:"5e5dacb45c14dba9d007",77:"8d6496567ff872853373",78:"6ed6b7d5c39b78594b5e",79:"1cfd45c91d14207723f0",80:"41202bc9c77cc1f02e5b",81:"d472875122b5cec13d1a",82:"95cc39d96ab781a4a231",83:"c40b51dd7b46b553d92b",84:"b658b19c0cd09eb3f172",85:"563e403fd28dde6e8a19",86:"f7b6b01216a7a3b06f22",87:"b3e156d8c72a1177dccd",88:"ef56cf0ce4ef8f25e056",89:"e0bafa891a709e8b9402",90:"189abba0bf0b36a8fa89",91:"65cbb3a93f27ef23b510",92:"15ae8f88934baf57f757",93:"7d8388d2fc461ef7a353",94:"e355696586646051400c",95:"b798e4ba42d039da7771",96:"eb4997c8134fc24130f9",97:"09ef18f500270d1b6d1e",98:"b3cd153764e45e32c6e0",99:"d6c1bf7906ace1be7ba2",100:"f290635d7f136431e162",101:"8649a0297cadd4a9cc15",102:"1ef6b3ba369321effdfe",103:"465d13ffacaeecda7ea5",104:"2109080d0041f7091170",105:"807d7d790a701cfbcd33",106:"8ce07df3b19b1a244cef",107:"b6f7b5a87cd0483edd38",108:"9a59d204ea0b0d700b88",109:"e474d317ce45307f57ae",110:"3ea83e3e613a8c34a9bd",111:"70c237e3b32d5057e63b",112:"0a565ea167fc7a81e689",113:"05841a229e878023d1ba",114:"0149d838903c0bf7ae49",115:"20324a7c0f72e2f7dd0e"}[e]}(e);var l=new Error;s=function(t){a.onerror=a.onload=null,clearTimeout(c);var o=i[e];if(0!==o){if(o){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",l.name="ChunkLoadError",l.type=n,l.request=r,o[1](l)}i[e]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:a})}),12e4);a.onerror=a.onload=s,document.head.appendChild(a)}return Promise.all(t)},n.m=e,n.c=o,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://d19npu3b8zepp3.cloudfront.net/bin/js/",n.oe=function(e){throw console.error(e),e};var r=window.webpackJsonp=window.webpackJsonp||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var a=0;a<r.length;a++)t(r[a]);var l=s;n(n.s=56)}([function(e,t,o){"use strict";var i,n;o.d(t,"a",(function(){return i})),function(e){e[e.Unknown=0]="Unknown",e[e.Browser=1]="Browser",e[e.Cordova=2]="Cordova",e[e.Electron=3]="Electron"}(i||(i={})),function(e){e[e.Unknown=0]="Unknown",e[e.Android=1]="Android",e[e.Linux=2]="Linux",e[e.MacOS=3]="MacOS",e[e.iOs=4]="iOs",e[e.Windows=5]="Windows",e[e.WindowsMobile=6]="WindowsMobile"}(n||(n={}));const r=460,s=690,a=900,l=1070,c=window.cordova||null,d=$(window);t.b=new class{constructor(){this.deviceReadyPromise=new Promise((e,t)=>{$(document).ready(()=>e(this.getDeviceInfo()))})}isGoogleMobileScreenSize(){return d.width()<r}isSmallScreenSize(){return d.width()<s}isMediumOrLargeScreenSize(){return d.width()>=s}isLargeScreenSize(){return d.width()>=a}isExtraLargeScreenSize(){return d.width()>=l}loadDeviceInfo(){return this.deviceReadyPromise}getDeviceInfo(){return{isTouchDevice:this.isTouchDevice(),platform:this.getPlatform(),os:this.getOS(),platformString:this.getPlatformString(),isIE:this.isIE(),isIOS:this.isIOS(),isAndroid:this.isAndroid()}}isTouchEventOnTouchDevice(e){return!!this.isTouchDevice()&&0===(e||"").indexOf("touch")}isTouchDevice(){return"ontouchstart"in window||!!window.navigator.maxTouchPoints}isIE(){return!!navigator.userAgent.match(/msie|trident|edge/i)}isMacOs(){return(navigator.platform||"").toLowerCase().indexOf("mac")>=0}isWindows(){return(navigator.platform||"").toLowerCase().indexOf("win")>=0}isLinux(){return(navigator.platform||"").toLowerCase().indexOf("linux")>=0}isAndroid(){const e=navigator.userAgent||navigator.vendor||"";return/android/i.test(e)}isIOS(){const e=(navigator.userAgent||navigator.vendor||"").toLowerCase();return/(iphone|ipod|ipad).*/.test(e)}isSafari(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}isCordova(){return this.getPlatform()===i.Cordova}isIOSCordova(){return this.isCordova()&&this.isIOS()}isApp(){}getPlatform(){return i.Browser}getPlatformAndOsString(){return this.getPlatformString()+"-"+this.getOSString()}getPlatformString(){return"browser"}getOSString(){return c&&c.platformId||navigator.platform}getOS(){if(c)switch(c.platformId){case"osx":case"macos":return n.MacOS;case"android":return n.Android;case"ios":return n.iOs;default:return n.Unknown}}isConnected(){return this.isCordova()?this.cordovaIsConnected():navigator.onLine}cordovaIsConnected(){return navigator&&navigator.connection&&navigator.connection.type?["ethernet","wifi","2g","3g","4g","cellular","5g"].indexOf(navigator.connection.type)>0:navigator.onLine}confirm(e,t){const o=window.navigator;this.isCordova()&&o&&o.notification&&o.notification.confirm?o.notification.confirm(e,t,"livebook"):confirm(e)&&t()}}},function(e,t,o){"use strict";var i=o(0);let n="",r="",s="";const a=void 0;let l=".manning.com",c="",d="",u="",h="",g="",m="",p="https://www.manning.com/";const f="https://manning-content.s3.amazonaws.com";let b=function(){let e=document.location.href,t=document.location.href.indexOf("#");if(t<0)return e;return e.substring(0,t)}();let w=i.b.getPlatformAndOsString();n="livebook.manning.com",r="drek4537l1klr.cloudfront.net",s="https://livevideo-be.manning.com",c=p,d="https://livebook.manning.com/",u="https://livevideo.manning.com/",m="https://d19npu3b8zepp3.cloudfront.net/",h="https://images.manning.com/",g="https://drek4537l1klr.cloudfront.net/";t.a=new class{constructor(){this.platform=w,this.marketplaceBaseUrl=c,this.liveBookBaseUrl=d,this.liveVideoBaseUrl=u,this.marketplaceBaseImageUrl=h,this.liveBookBaseImageUrl=g,this.awsPublicUrl=`https://${r}`}getProtocol(){return a?"https://":document.location.href.startsWith("https")?"https://":"http://"}getServerUrl(){return n}getAppRoot(){return`${this.getProtocol()}${this.getServerUrl()}/`}getLivebookCdn(){return i.b.isApp()?"":m}getLivebookBaseUrl(){return d}getLivevideoBaseUrl(){return u}navigateToLocation(e){e.startsWith(".")&&(e=e.substring(1)),page.redirect(e)}urlExists(e){return new Promise((t,o)=>{$.ajax({url:e,type:"HEAD",dataType:"text"}).done(e=>{t(!0)}).fail(e=>{t(!1)})})}getFromPublicS3(e,t,o,i,n,r){return this.getFromS3(this.getAwsUrl(`/${e}/${null!=t&&t>0?`v-${t}/`:""}${i}/${o}`),n,r,!1)}getFromS3(e,t,o,i=!0){$.ajax({url:e,dataType:i?"json":"text",crossDomain:!0}).done(e=>t(e)).fail(e=>o(e))}attemptLogin(e,t,o,i,n=!0){$.ajax({url:e,type:"post",data:JSON.stringify(i)||{},dataType:n?"json":"text",contentType:n?"application/json":"application/x-www-form-urlencoded",crossDomain:this.isCrossDomain(e),xhrFields:{withCredentials:!0}}).done(e=>t(e)).fail(e=>o(e))}getFromOurBackend(e,t,o,i,n=!0,r=!0,s=!1,a=!1){this.interactWithOurBackend(e,"get",t,o,i,n,r,s,a)}postToOurBackend(e,t,o,i,n=!0,r=!0,s=!1,a=!1){return this.interactWithOurBackend(e,"post",t,o,i,n,r,s,a)}interactWithOurBackend(e,t,o,i,n,r=!0,s=!0,a=!1,l=!1){n=Object.assign({},n,{platform:this.platform});const c={url:e,type:t,async:s,data:l?JSON.stringify(n||{}):n||{},dataType:r?"json":"text",crossDomain:this.isCrossDomain(e),xhrFields:{withCredentials:!0}};return l&&(c.contentType="application/json; charset=utf-8"),$.ajax(c).done(e=>o(e)).fail(e=>{i(e)})}isCrossDomain(e){return!0}getAbsoluteUrl(e){return`${this.getAppRoot()}${e}`}getClientAbsoluteUrl(e){return`${a?"https://livebook.manning.com":document.location.origin}${e}`}getAwsUrl(e){return`${this.getAwsPublic()}${e}`}getLiveVideoUrl(e){return`${u}${u.endsWith("/")?"":"/"}${e}`}getBookCoverUrl(e){return this.getAwsUrl(`/${e}/Figures/cover.jpg`)}getConceptUrl(e,t){return this.getAwsUrl(`/concepts/${e}/${t}.html`)}getBookFigureUrl(e,t,o=""){return this.getAwsUrl(`/${e}/${o?`v-${o}/`:""}Figures/${t}`)}getInteractiveCodeUrl(e,t){return this.getAwsUrl(`/${e}/interactive/${t}`)}getMarketplaceProductCoverUrl(e){return`${h}180/225/resize/${e}`}getMarketplaceHiqhQualityProductCoverUrl(e){return`${h}720/960/resize/${e}`}getMarketplaceImageUrl(e){return`${h}${e}`}getMarketplaceProductUrl(e,t){return`${c}${c.endsWith("/")?"":"/"}${t?"livevideo":"books"}/${e}`}getMarketplaceUrl(e){return`${c}${c.endsWith("/")?"":"/"}${e}`}getProductionMarketplaceUrl(e){return`${p}${e}`}isAbsoluteUrl(e){return!!e&&(e.startsWith("http://")||e.startsWith("https://"))}getMarketplaceS3Url(e){return`${f}/${e}`}getBookUrlFromBook(e){return"string"==typeof e?this.getBookUrl(e):e?this.getBookUrl(e.slug):""}getBookUrl(e){return a?encodeURI(`#!/book/${e}`):encodeURI(`/book/${e}`)}getAbsoluteBookElementUrl(e,t,o){return this.getAbsoluteUrl(this.getBookElementUrl(e,t,o).substring(1))}getBookElementUrl(e,t,o,i){return this.getBookPageUrl("book",e,t,o,i)}getBookExercisesElementUrl(e,t,o,i){return this.getBookPageUrl("exercises",e,t,o,i)}getBookPageUrl(e,t,o,i,n){let r=`/book/${t}/`;return a&&(r="#!"+r),o?((o||i)&&(o||(o="chapter-1"),r+=o+"/",i&&(r+=`v-${i}/`),n&&(r+=`r-${n}/`)),encodeURI(r)):r}getAwsPublic(){return this.awsPublicUrl}clearCookies(){try{void 0}catch(e){console.log("Clear cookies error:",e)}this.deleteCookie("TGC"),this.deleteCookie("JSESSIONID"),this.deleteCookie("m-lb-rm")}deleteCookie(e,t="/"){document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:01 GMT; domain=${l}; path=${t}`}deleteCordovaCookie(){cookieMaster.clearCookies(()=>console.log("Cookies have been cleared"),()=>console.log("Cookies could not be cleared"))}hasCookie(e){return(document.cookie||"").indexOf(e)>=0}hasSsoCookie(){return this.hasCookie("CASTGC")}getCookie(e){var t,o,i,n;if(o=e+"=",i=(t=document.cookie).indexOf("; "+o),n=t.length,-1!==i)i+=2;else if(-1===(i=t.indexOf(o))||0!==i)return null;return-1!==t.indexOf(";",i)&&(n=t.indexOf(";",i)),decodeURI(t.substring(i+o.length,n)).replace(/"/g,"")}isAdditionalInstruction(e){return localStorage&&localStorage.getItem("additionalInstruction")==e}addAdditionalInstructionToExecuteAfterReload(e){localStorage&&localStorage.setItem("additionalInstruction",e)}removeAdditionalInstruction(){localStorage&&localStorage.removeItem("additionalInstruction")}reloadPage(){location.reload(!0)}getInitialPageLocation(){return b}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var i=o(21),n=o(1);const r=void 0;const s=new class{importWebpackModuleWithRetry(e){return new Promise((t,o)=>{e().then(e=>t(e)).catch(n=>{setTimeout(()=>{e().then(e=>t(e)).catch(n=>{setTimeout(()=>{e().then(e=>t(e)).catch(e=>{console.log(e),i.a.showNotification('<div class="code-loading-error-notification">Error loading code: <a href="https://www.refreshyourcache.com/en/home/" target="_blank">clear the browser cache</a>, contact our <a target="_blank" href="mailto:lb-feedback@manning.com">support</a>, or <a href=\'\' onclick=\'location.reload(true)\'>reload livebook</a>.</div>'),$(document).trigger("codeLoadingError",["loadingError",null!=e&&(e.request||e.message)]),o()})},200)})},100)})})}loadSlickSliderCode(){return this.slickSliderCodePromise||(this.slickSliderCodePromise=Promise.all([this.loadJsCode("vendor/slick/slick.min.js"),this.loadCssStylesheet("vendor/slick/slick.min.css")])),this.slickSliderCodePromise}loadHopscotchCode(){return this.hopscotchCodePromise||(this.hopscotchCodePromise=Promise.all([this.loadJsCode("vendor/hopscotch/dist/js/hopscotch.min.js"),this.loadCssStylesheet("vendor/hopscotch/dist/css/hopscotch.min.css")])),this.hopscotchCodePromise}loadHighlightCode(){return this.highlightCodePromise||(this.highlightCodePromise=Promise.all([this.loadJsCode("vendor/highlight.js/highlight.pack.js"),this.loadCssStylesheet("vendor/highlight.js/default.css?with-dark-mode")])),this.highlightCodePromise}loadCodeMirrorCode(){return this.codeMirrorCodePromise||(this.codeMirrorCodePromise=Promise.all([o.e(97).then(o.t.bind(null,67,7)),this.loadCssStylesheet("vendor/codemirror/lib/codemirror.css")])),this.codeMirrorCodePromise}loadClipboardCode(){return this.clipboardCodePromise||(this.clipboardCodePromise=this.loadJsCode("vendor/clipboard/dist/clipboard.min.js")),this.clipboardCodePromise}loadVttCode(){return this.vttCodePromise||(this.vttCodePromise=this.loadJsCode("vendor/vtt/vtt.min.js")),this.vttCodePromise}loadMustacheCode(){return this.mustachePromise||(this.mustachePromise=this.loadJsCode("vendor/mustache/mustache.min.js")),this.mustachePromise}loadVelocityCode(){return this.velocityPromise||(this.velocityPromise=this.loadJsCode("vendor/velocity/velocity.min.js"),this.velocityPromise.then(()=>{$.Velocity&&$.Velocity.RegisterEffect("manning.fromLeftOut",{defaultDuration:350,calls:[[{opacity:[0,1],translateX:-10,translateZ:0}]],reset:{translateX:0}}),$.Velocity&&$.Velocity.RegisterEffect("manning.fromLeftIn",{defaultDuration:400,calls:[[{opacity:[1,0],translateX:[0,-10],translateZ:0}]]})})),this.velocityPromise}loadJsCode(e){return new Promise((t,o)=>{$.getScript((r?"":n.a.getLivebookCdn())+e).then(()=>t()).fail(()=>o())})}loadCssStylesheet(e){return new Promise(t=>{const o=$("<link>");$("head").append(o),o.attr({rel:"stylesheet",type:"text/css",href:(r?"":n.a.getLivebookCdn())+e}),t()})}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return h}));var i=o(5),n=o(17),r=o(27);const s="VISITED_BOOKS";let a;a=n.a.prod;const l=!0,c=!1,d="All ebooks <strong>50% OFF</strong> until April 30th",u="<strong>35% OFF</strong> <span>all print books + free US shipping</span>";const h=new class{constructor(){this.isShoppingCartBusy=!1,this.isUnlockingWholeContentThroughPointingLink=!1,this.isDotdSaleEnabled=l,this.isSiteWideSaleEnabled=c,this.siteWideSaleEbookMessage=d,this.siteWideSaleComboMessage=u,this.shouldImmediatelyOpenBookReview=!1,this.shouldImmediatelyPlayLiveaudio=!1,this.isShoppingCartDisabledInApp=!0,this.refreshDataAfter=24e5,this.pagesHistory=[],this.conceptPageBookInfo=null,this.referrer=document.referrer}isFreePreviewActive(){return this.isInFreePreview}setFreePreviewActive(e){return this.isInFreePreview=e}getDeploymentType(){return a}shouldOfferSimpleSignup(){return!$(document.body).is(".page-is-showing-modal")&&((this.referrer||"").indexOf("google")>=0||document.location.search.indexOf("group=")>=0)}isFirstTimeBookVisit(){if(null==this.book)return!1;try{return!JSON.parse(i.a.getItem(s)||"{}")[this.book.shortName]}catch(e){return!1}}markCurrentBookAsVisited(){if(null!=this.book)try{const e=JSON.parse(i.a.getItem(s)||"{}");e[this.book.shortName]=!0,i.a.setItem(s,JSON.stringify(e))}catch(e){return!1}}addToVisitHistory(e){h.pagesHistory[h.pagesHistory.length-1]!=e&&h.pagesHistory.push(e),-1==(e||"").indexOf("book/")&&r.a.resetLatestBookPage()}wasOnLibraryPageFollowedByOnlyBookPages(){if(null==this.pagesHistory||0==this.pagesHistory.length)return!1;for(let e=this.pagesHistory.length-1;e>=0;e--){const t=this.pagesHistory[e];if("library"==t||"#!/library"==t)return!0;if(!(t.indexOf("book/")>=0))return!1}return!1}popHistoryUpToLibrary(){if(this.wasOnLibraryPageFollowedByOnlyBookPages()){console.log(this.pagesHistory);for(let e=this.pagesHistory.length-1;e>=0;e--){const t=this.pagesHistory[e];if("library"==t||"#!/library"==t){this.pagesHistory.pop();break}if(!(t.indexOf("book/")>=0))break;this.pagesHistory.pop()}console.log(this.pagesHistory)}}getBookTitle(){return h.book?h.book.cleanTitle||h.book.title:null!=this.conceptPageBookInfo?this.conceptPageBookInfo.bookTitle:""}getBookShortName(){return h.book&&h.book.shortName?h.book.shortName:null!=this.conceptPageBookInfo?this.conceptPageBookInfo.bookShortName:""}getBookElementShortName(){return h.bookElement&&h.bookElement.shortName?h.bookElement.shortName:null!=this.conceptPageBookInfo?this.conceptPageBookInfo.bookElementShortName:""}};window.GlobalStateInfo=h},function(e,t,o){"use strict";const i=$(document),n=function(){let e=!1;try{let t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}();t.a=new class{constructor(){this.ids=[],this.userHasBeenActive=!1}onUserHasInteracted(e,t=!1){if(this.userHasBeenActive)return void(e&&e());const o=n=>{this.userHasBeenActive=!0,e&&e(),$(document.body).toggleClass("has-been-interacted",!0),e=null,t&&clearTimeout(i);try{$(document).off("mousemove click keydown touchstart",o)}catch(n){}};var i;$(document).one("mousemove click keydown touchstart",o),t&&(i=setTimeout(o,5e3))}onPassiveEvent(e,t,o){if(e&&e.length&&t&&t.length)for(let i=0;i<e.length;i++)for(let r=0;r<t.length;r++)e[i].addEventListener(t[r],o,!!n&&{passive:!0})}offPassiveEvent(e,t,o){if(e&&e.length&&t&&t.length)for(let i=0;i<e.length;i++)for(let n=0;n<t.length;n++)e[i].removeEventListener(t[n],o)}onEventWithCooldown(e,t,o){if(!o)return;let i=!0;e.on(t,(function(e){if(!i)return;let t;i=!1;try{t=o.apply(this,arguments)}catch(e){console.log(e)}return setTimeout(()=>i=!0,500),t}))}handleDragScroll(e){let t=!1,o=0,i=0;const n=n=>{if(t){Math.abs(i-n.pageX)>=Math.abs(o-n.pageY)?e.scrollLeft(e.scrollLeft()+.1*(i-n.pageX)):e.scrollTop(e.scrollTop()+.1*(o-n.pageY))}};e.mouseleave(),e.on("mousedown",r=>{t=!0,o=r.pageY,i=r.pageX,e.on("mousemove",n)}),e.on("mouseup mouseleave",()=>{t=!1,e.off("mousemove",n)})}handleContainerScroll(e){const t=e.currentTarget,o=e.originalEvent,i=o.wheelDelta||-o.detail,n=$(t).outerHeight(),r=t.scrollTop+n-t.scrollHeight>=0,s=t.scrollTop<=0;if(i<0&&r||i>0&&s){const e=o.deltaX||o.wheelDeltaX,t=o.deltaY||o.wheelDeltaY;if(null!=e&&null!=t&&Math.abs(e)>Math.abs(t))return;o.preventDefault()}else;}onDescendantEventWithCooldown(e,t,o,i){if(!i)return;let n=!0;e.on(t,o,(function(e){if(n){n=!1;try{i.apply(this,arguments)}catch(e){console.log(e)}setTimeout(()=>n=!0,500)}}))}onDelayedMouseEnter(e,t){e&&0!=e.length&&(e.on("mouseenter",e=>{const o=e.currentTarget;clearTimeout(o.timeoutId),o.timeoutId=setTimeout(()=>t&&t(e),100)}),e.on("mouseleave",e=>clearTimeout(e.currentTarget.timeoutId)))}onScrollStop(e,t,o){let i=0;e.on("scroll",e=>{clearTimeout(i),i=this.setTimeout(()=>t&&t(e),o)})}triggerDocumentEventAsync(e,t){setTimeout(()=>i.trigger(e,t),10)}setTimeout(e,t){const o=setTimeout(e,t);return this.ids.push(o),o}clearTimers(){for(const e of this.ids)clearTimeout(e);this.ids=[]}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));const i=new class{getItem(e){try{return localStorage.getItem(e)}catch(t){return console.log("Error getting item from local storage",e),""}}setItem(e,t){try{return localStorage.setItem(e,t)}catch(t){return console.log("Error setting item to local storage",e),""}}saveTemporarily(e,t,o){try{return localStorage.setItem(e,JSON.stringify({value:JSON.stringify(t),timestamp:(new Date).getTime()+o})),t}catch(e){return t}}loadTemporarily(e){try{const t=JSON.parse(localStorage.getItem(e));return!!t&&((new Date).getTime()<t.timestamp&&JSON.parse(t.value))}catch(e){return!1}}remove(e){try{localStorage.removeItem(e)}catch(e){}}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var i=o(0),n=o(1),r=o(14),s=o(8);let a=!1,l=!1;class c{isLoggedIn(e=!1){return e&&(this.isLoggedInPromise=null,r.a.setAuthInfo(null)),null!=r.a.getAuthInfo()?Promise.resolve(r.a.getAuthInfo()):this.isLoggedInPromise?this.isLoggedInPromise:this.isLoggedInPromise=new Promise((e,t)=>{n.a.getFromOurBackend(n.a.getAbsoluteUrl("auth/userIsLoggedIn"),t=>{a=!!t.loggedIn,t.userDetails&&t.userDetails.firstLoginDate&&(t.userDetails.firstLoginDate=s.a.getDateFromString(t.userDetails.firstLoginDate)),t.userDetails&&(l=!!t.userDetails.isAdmin),r.a.setAuthInfo(t),e(t)},()=>{r.a.setAuthInfo(null),a=!1,l=!1,e({loggedIn:!1,status:"not",userDetails:this.getEmptyUserDetails()})})})}createAuthorizedProductsMap(e){const t={};if(!e||!e.length)return t;for(const o of e)t[o]=!0;return t}getEmptyUserDetails(){return{id:-1,firstName:"",lastName:"",email:"",avatarUrl:"",tokenInfo:null,name:"",votes:[],spamCommentIds:[],authorizedProductIds:{},isNewCustomer:!0}}attemptPasswordResetLogin(e,t,o,i){return this.lastEmail=e,null!=this.loginAttemptPromise?this.loginAttemptPromise:this.loginAttemptPromise=new Promise((r,s)=>{n.a.attemptLogin(n.a.getAbsoluteUrl("api/auth/loginAndSetPassword"),e=>{r(e),this.loginAttemptPromise=null},e=>{s(e),this.loginAttemptPromise=null},{username:e,password:t,passwordResetToken:o,chapterToken:i})})}attemptLogin(e,t){return this.lastEmail=e,null!=this.loginAttemptPromise?this.loginAttemptPromise:this.loginAttemptPromise=new Promise((o,i)=>{n.a.attemptLogin(n.a.getAbsoluteUrl("api/auth/login"),e=>{o(e),this.loginAttemptPromise=null},e=>{i(e),this.loginAttemptPromise=null},{username:e,password:t})})}logout(){return new Promise((e,t)=>{n.a.getFromOurBackend(n.a.getAbsoluteUrl("api/auth/logout"),()=>{this.deleteAuthCookies(),e()},()=>{this.deleteAuthCookies(),t()},{},!1)})}isCurrentlyLoggedIn(){return a}isCurrentUserAdmin(){return l}isExistingUser(){try{const e=r.a.getAuthInfo();return!(!e||!e.userDetails)&&!e.userDetails.isNewCustomer}catch(e){}return!1}getUserAccountStatus(e){return new Promise((t,o)=>{n.a.getFromOurBackend(n.a.getAbsoluteUrl("api/registration/userAccountStatus"),e=>{console.log("userAccountStatus: ",e),t(e.userAccountStatus)},e=>{t("UNKNOWN"),console.log("Error retrieving user account status",e)},{email:e})})}registerUser(e,t,o,i,r){return this.lastEmail=o,null!=this.registerUserPromise?this.registerUserPromise:this.registerUserPromise=new Promise((s,a)=>{n.a.postToOurBackend(n.a.getAbsoluteUrl("api/registration/createNewUserAccount"),()=>{$(document).trigger("registrationSubscribeInfo",r),this.registerUserPromise=null,s()},()=>{this.registerUserPromise=null,a()},{firstName:e,lastName:t,email:o,password:i,subscribe:r})})}deleteAuthCookies(){n.a.clearCookies()}}let d=!1,u=!1;class h{constructor(){this.webService=new c}isLoggedIn(e=!1){return i.b.isConnected()?new Promise((t,o)=>this.webService.isLoggedIn(e).then(e=>{this.storeAuthInfo(e),d=e&&e.loggedIn,u=!!(e&&e.userDetails&&e.userDetails.isAdmin),t(e)})):this.loadAuthInfo()}attemptPasswordResetLogin(e,t,o,n){return i.b.isConnected()?this.webService.attemptPasswordResetLogin(e,t,o,n):this.loadAuthInfo()}attemptLogin(e,t){return i.b.isConnected()?this.webService.attemptLogin(e,t):this.loadAuthInfo()}logout(){return new Promise((e,t)=>{this.webService.logout(),this.getFsUtils().writeToFile(this.getFsUtils().getAuthInfoLocation(),"").then(e)})}isCurrentlyLoggedIn(){return d}isCurrentUserAdmin(){return u}isExistingUser(){try{const e=r.a.getAuthInfo();return!(!e||!e.userDetails)&&!e.userDetails.isNewCustomer}catch(e){}return!1}getUserAccountStatus(e){return i.b.isConnected()?this.webService.getUserAccountStatus(e):new Promise((e,t)=>this.loadAuthInfo().then(o=>o?e(o.status):t("No authentication information found")))}registerUser(e,t,o,n,r){if(!i.b.isConnected())throw Error("Device needs connection to internet to register a new user");return this.webService.registerUser(e,t,o,n,r)}loadAuthInfo(){return new Promise((e,t)=>this.getFsUtils().readFile(this.getFsUtils().getAuthInfoLocation()).then(t=>{let o=JSON.parse(t);u=o&&o.userDetails&&!!o.userDetails.isAdmin,d=o&&o.loggedIn,e(o)}))}storeAuthInfo(e){return new Promise((t,o)=>this.getFsUtils().writeToFile(this.getFsUtils().getAuthInfoLocation(),JSON.stringify(e)).then(t))}getFsUtils(){return window.fileSystemUtils}}var g=o(5);const m=new class{constructor(){this.currentlyLoggedIn=!1,this.existingUser=!1,this.authServicePromise=new Promise((e,t)=>{i.b.loadDeviceInfo().then(t=>{e(function(e){switch(e){case i.a.Cordova:case i.a.Electron:return new h;case i.a.Browser:default:return new c}}(t.platform))}).catch(e=>t(e))}),this.authServicePromise.then(e=>{this.currentlyLoggedIn=e.isCurrentlyLoggedIn(),this.existingUser=e.isExistingUser()})}getLatestUserFirstName(){return g.a.getItem("latestUserFirstName")||""}isLoggedIn(e=!1){return new Promise((t,o)=>this.authServicePromise.then(o=>o.isLoggedIn(e).then(e=>{this.currentlyLoggedIn=e.loggedIn,this.currentUserInfo=e,null!=e&&null!=e.userDetails&&e.userDetails.firstName&&g.a.setItem("latestUserFirstName",e.userDetails.firstName),t(e)})))}isCurrentlyLoggedIn(){return this.currentlyLoggedIn}getCurrentUserInfo(){return this.currentUserInfo}isCurrentUserAdmin(){return new Promise((e,t)=>{this.authServicePromise.then(t=>{e(t.isCurrentUserAdmin())}).catch(t=>e(!1))})}isExistingUser(){return this.existingUser}passwordResetLogin(e,t,o,i){return this.lastEmail=e,new Promise((n,r)=>this.authServicePromise.then(s=>s.attemptPasswordResetLogin(e,t,o,i).then(e=>n(e)).catch(e=>r(e))))}attemptLogin(e,t){return this.lastEmail=e,new Promise((o,i)=>this.authServicePromise.then(n=>n.attemptLogin(e,t).then(e=>o(e)).catch(e=>i(e))))}logout(){return new Promise((e,t)=>this.authServicePromise.then(o=>o.logout().then(()=>e()).catch(()=>t())).catch(()=>t()))}registerUser(e,t,o,i,n){return new Promise((r,s)=>this.authServicePromise.then(s=>s.registerUser(e,t,o,i,n).then(()=>r())))}getUserAccountStatus(e){return new Promise((t,o)=>this.authServicePromise.then(o=>o.getUserAccountStatus(e).then(e=>t(e))))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));const i={bookElementRoute:"/book/:book/:bookElement?/:additional?",meapElementRoute:"/book/:book/:bookElement/v-:meapVersion/:additional?",reviewElementRoute:"/book/:book/:bookElement/r-:reviewVersion/:additional?",meapEditorRoute:"/edit/:book/:bookElement/v-:meapVersion/:additional?",editorRoute:"/edit/:book/:bookElement?/:additional?",reviewEditorRoute:"/edit/:book/:bookElement/r-:reviewVersion/:additional?",exerciseSuiteRoute:"/exercise-suite/:exerciseSuite?",videoRoute:"/video/:book",reviewReportRoute:"/review-report/:book/:reviewVersion?",catalogRoute:"/catalog/:category?",conceptRoute:"/concept/:category/:concept",getCurrentRouteInfo(){return this.getRouteInfo(this.getCleanRoute(document.location.hash||document.location.pathname))},getRouteInfo(e){const t={isEditLink:e.indexOf("/edit/")>=0};let o=new page.Route(this.meapElementRoute);return o.match(e,t)?t:(o=new page.Route(this.reviewElementRoute)).match(e,t)?t:(o=new page.Route(this.bookElementRoute)).match(e,t)?t:(o=new page.Route(this.meapEditorRoute)).match(e,t)?t:(o=new page.Route(this.editorRoute)).match(e,t)?t:(o=new page.Route(this.conceptRoute)).match(e,t)?t:null},getCleanRoute(e){const t=e.indexOf("/");return-1===t?e:e.substr(t)}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var i=o(4);const n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"];const s=new class{getAllIndexesOf(e,t){let o,i=0;const n=[];for(;(o=e.indexOf(t,i))>-1;)n.push(o),i=o+t.length;return n}getStartIndex(e,t,o){const i=this.getAllIndexesOf(e,t);if(0==i.length)return-1;if(1==i.length)return i[0];if(!o)return i[0];let n=e.indexOf(o);if(-1==n)return i[0];n+=o.length;for(var r=0;r<i.length;r++)if(i[r]>=n)return i[r];return i[0]}createArrayFromItemsUpTo(e){const t=[];for(let o=0;o<e;o++)t.push(o);return t}getProperties(e){const t=[];if(!e)return t;for(const o in e)t.push(o);return t}isEmailValid(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}hasNumberProperties(e){if(!e)return!1;try{let t=!1;for(const o in e)if(t=!0,"number"!=typeof e[o])return!1;return t}catch(e){return!1}}getShortMonthName(e){return null==e?"":r[e.getMonth()]}getTodaysDateAsString(){const e=(new Date).toISOString(),t=e.indexOf("T");return t<=0?e:e.substring(0,t)}startsWithNumber(e){return null!=(e||"").match(/^\d/)}separateNumber(e){if(!e)return e;const t=(e||"").match(/^\d+/);return null==t?e:t[0]?this.trimAndCollapseMultipleWhitespace(e.replace(t[0],t[0]+" ")):e}joinNumber(e){if(!e)return e;const t=(e||"").match(/^\d+\s/);return null==t?e:t[0]?e.replace(t[0],t[0].trim()):e}formatMoney(e){return(e||0).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}b64DecodeUnicode(e){try{return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}catch(t){return atob(e)}}getArrayIntersection(e,t){const o=[];if(null==e||null==t||0==e.length||0==t.length)return o;for(let i of e)t.indexOf(i)>=0&&o.push(i);return o}groupInto(e,t=10){const o=[];if(!e||0==e.length)return o;let i=[];for(let n=0;n<e.length;n++)n%t==0&&(i=[],o.push(i)),i.push(e[n]);return o}isNumber(e){try{return!isNaN(+e)}catch(e){return!1}}isEmptyObject(e){return!!e&&(0===Object.keys(e).length&&e.constructor===Object)}containsAtLeastOneOf(e,t){if(!e||!t||!t.length)return!1;for(const o of t)if(-1!=e.indexOf(o))return!0;return!1}getTimeoutPromise(e=500){return new Promise(t=>{setTimeout(t,e)})}isToday(e){if(null==e||!(e instanceof Date))return!1;const t=new Date;return e.getDate()==t.getDate()&&e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()}getDifferenceInDays(e,t){if(null==e||null==t)return 0;return Math.round(Math.abs((e.getTime()-t.getTime())/864e5))}getDateFromString(e){let t=new Date(e);try{if("Invalid Date"==t&&e){const o=e.indexOf("T");o>0&&(t=new Date(e.substring(0,o)))}}catch(e){console.log("Error getting date from string",e)}return t}getDateAsString(e){if(!e)return"";const t=e.getMonth(),o=e.getFullYear();return Number.isNaN(t)||Number.isNaN(o)?"":`${n[t]} ${o}`}insertItemAtPosition(e,t,o){e&&e.splice&&e.splice(o||0,0,t)}removeItemFromArray(e,t){if(!e)return null;const o=e.indexOf(t);return o>=0?e.splice(o,1):null}turnIntoMapByProperty(e,t){const o={};for(const i of e)o[i[t]]=i;return o}getUniqueStringItems(e){const t=[],o={};for(let i of e)o[i]||(t.push(i),o[i]=!0);return t}getUniqueNumbers(e){const t=[],o={};for(let i of e)o[i]||(t.push(i),o[i]=!0);return t}getUniqueEntries(e,t){const o=this.turnIntoMapByProperty(e,t),i=[];for(const e in o)i.push(o[e]);return i}getRandomArrayItem(e){return e&&0!==e.length?e[Math.floor(Math.random()*e.length)]:null}getRandomNumber(e,t){return Math.floor(Math.random()*t)+e}getMonthAndYear(e){if(!e)return null;const t=e.toLocaleString("en-us",{month:"long"});return e.getFullYear,`${t} ${e.getFullYear()}`}getAllRegExMatches(e,t){e=new RegExp(e);let o=[],i=[];for(;null!==(i=e.exec(t));)o.push(i[0]);return o}flatten(e){return[].concat.apply([],e)}insertAtPosition(e,t,o){return e?e.slice(0,o)+t+e.slice(o):t}trimAndCollapseMultipleWhitespace(e){return e.trim().replace(/\s{2,}/g," ")}trimEnd(e,t=" "){if(!e)return e;let o=e.length-1;for(;o>=0&&e.charAt(o)==t;)o--;return e.substring(0,o+1)}mapToArray(e){const t=[];for(let o in e)e.hasOwnProperty(o)&&t.push(e[o]);return t}asyncForIn(e,t,o,i=1){e||o&&o();const n=[];for(const t in e)e.hasOwnProperty(t)&&n.push({key:t,value:e[t]});this.asyncEach(n,e=>t&&t(e.key,e.value),()=>o&&o(),i)}asyncEach(e,t,o,n=1){e&&0!=e.length||o&&o();let r=0,s=!1;!function a(){if(s)return;const l=e[r++];l?(t&&t(l),i.a.setTimeout(a,n)):(s=!0,o&&o())}()}randomizeArray(e){if(!e||null==e.length)return;let t,o,i=e.length;for(;0!==i;)o=Math.floor(Math.random()*i),t=e[i-=1],e[i]=e[o],e[o]=t;return e}endsWithOneOf(e,t,o=!1){if(!e)return!1;if(!t||!t.length)return!1;for(let i of t)if(this.endsWith(e,i,o))return!0;return!1}endsWith(e,t,o=!1,i){("number"!=typeof i||!isFinite(i)||Math.floor(i)!==i||i>e.length)&&(i=e.length),o&&(e=(e||"").toLowerCase(),t=(t||"").toLowerCase()),i-=t.length;const n=e.lastIndexOf(t,i);return-1!==n&&n===i}turnToOldFormatShortName(e){return e?this.capitalizeFirstLetter(e.replace("-"," ")):e}capitalizeFirstLetter(e){return null==!e?e:e.substring(0,1).toUpperCase()+e.substring(1)}areApproximatelyEqual(e,t,o=.001){return Math.abs(e-t)<o}getWithoutLastWordOrFullIfSingleWord(e){if(!e)return e;const t=e.lastIndexOf(" ");return-1!=t?e.substring(0,t):e}getLastWordOrEmptyIfSingleWord(e){if(!e)return e;const t=e.lastIndexOf(" ");return-1!=t?e.substring(t):""}getNumberOfWords(e){if(!e||!e.match)return 0;const t=e.match(/\b(\w+)\b/g);return null==t?0:t.length}roundToTwoDecimalPoints(e){return Math.round(100*e)/100}floorToTwoDecimalPoints(e){return Math.floor(100*e)/100}arrayIntersection(e,t){const o=[];if(null==e||0==e.length||null==t||0==t.length)return o;for(const i of e)t.indexOf(i)>=0&&o.push(i);return o}arrayDifference(e,t){const o=[];if(null==e||0==e.length)return o;if(null==t||0==t.length)return o.concat(e);for(const i of e)-1==t.indexOf(i)&&o.push(i);return o}formatTimeInSeconds(e){const t=~~(e/3600),o=~~(e%3600/60),i=e%60;var n="";return t>0&&(n+=t+":"+(o<10?"0":"")),n+=o+":"+(i<10?"0":""),n+=""+i}escapeHtml(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):e}extractDataProperties(e){if(!e)return e;if(!(e instanceof Object))return e;const t={};for(const o in e)e[o]instanceof Function||(t[o]=e[o]);return t}numberWithCommas(e){try{return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(t){return e}}getCurrentTimezone(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return""}}countOccurences(e,t){if(!e||!t)return 0;let o=0,i=0,n=e.length;for(;!((i=t.indexOf(e,i))<0);)o++,i+=n;return o}}},function(e,t,o){"use strict";var i=o(35),n=o(13),r=o(0),s=o(10),a=o(3),l=o(15),c=o(53);const d=$(window),u=$(document);t.a=new class{shouldTocAutomaticallyOpen(e,t){return(!e||!e.pdf)&&((!e||!e.reviewVersion)&&(!(e&&e.book&&e.book.isFreeEbook)&&(!(document.location.href.indexOf("discussion")>=0)&&(!$(document.body).is(".page-is-showing-modal")&&(e&&(e.isBookOverview||a.a.isFirstTimeBookVisit())&&r.b.isExtraLargeScreenSize()&&!s.a.isSpecialPathPartInsteadOfBookElement(t)&&!$(document.body).hasClass("has-text-slide-menu-shown"))))))}showNightMode(){const e=l.a.get("night-mode");$(document.body).toggleClass("night-mode",e),$(document.documentElement).toggleClass("night-mode",e)}isDocumentVisible(){return document.visibilityState&&"visible"===document.visibilityState}getCurrentMainContentTranslateX(){const e=$("#book-main-content-container");return 0==e.length?0:this.getComputedTranslateX(e.get(0))}translateMainContent(e){$("#book-main-content-container").css({transform:`translateX(${e||0}px)`})}loadPlaceholderImages(){const e=$("img[image-src]");e.slice(0,5).each((e,t)=>{const o=$(t);o.attr("src",o.attr("image-src"))}),e.slice(5,e.length).each((e,t)=>{c.a.inViewport(t,()=>{const e=$(t);e.attr("src",e.attr("image-src"))})}),$("img[onload-image-src]").each((e,t)=>{const o=$(t).attr("onload-image-src"),i=new Image;i.onload=()=>{$(t).attr("src",o)},i.src=o})}getAllSectionParagraphs(e){const t=[],o=+e.attr("refid");if(Number.isNaN(o))return t;for(let e=o;e>=0;e--){const o=document.querySelector(`[refid='${e}']`);if(null!=o&&(t.push(o),null!=o.querySelector("h1, h2, h3")))break}let i=$("#book-markup-container").children().last();i.is(".readable-text")||(i=i.children().last());const n=+i.attr("refid");for(let e=o+1;e<=n;e++){const o=document.querySelector(`[refid='${e}']`);if(null==o||null!=o.querySelector("h1, h2, h3"))break;t.push(o)}return t}getSectionHeading(e=""){let t=e.substring("section-".length);return t=t.replace(/\-/g,"."),this.getSectionTitle(t)}getSectionTitle(e){const t=document.querySelectorAll("#book-markup-container h1, #book-markup-container h2, #book-markup-container h3, #book-markup-container h4, #book-markup-container h5"),o=[];for(let e=0;e<t.length;e++){if(0===e)continue;const i=t[e],n=i.textContent.trim();if(n.startsWith("Table")||n.startsWith("Figure")||n.startsWith("Listing"))continue;const r=$(i);r.is(".intro-header")||r.closest(".callout-container").length||o.push(i)}for(let t=0;t<o.length;t++){const n=o[t],r=n.textContent.trim(),s=i.a.extractBookElementIndex(r);if(s===e)return n;if(s===e+".")return n}return this.fallbackForGetSectionTitle(o,e)}fallbackForGetSectionTitle(e,t){if(!e||0===e.length)return null;let o=i.a.extractSegmentedBookElementIndex(t);!!t.match(/^[A-Z]/i)||o.shift();const n=e[0].nodeName,r=[];if(e.forEach(e=>{e.nodeName===n?r.push({heading:e,children:[]}):r[r.length-1]&&r[r.length-1].children.push(e)}),0===o.length)return null;if(1===o.length){const e=+o[0]-1;return r[e]?r[e].heading:null}{const e=+o[0]-1;if(r[e]){const t=+o[1]-1;return r[e].children[t]?r[e].children[t]:r[e].heading}}return null}closeMenuIfTakesTooMuchSpace(e){if(e&&0!==e.length)try{const t=$("#book-main-content-container");if(0===t.length)return;const o=e.offset(),i=t.offset(),n={start:o.left,end:o.left+e.width()},r={start:i.left,end:i.left+t.width()};if(n.start<=r.start){if(n.end<=r.start)return;if(Math.abs(n.end-r.start)/t.width()<=.3)return}else{if(n.start>=r.end)return;if(Math.abs(r.end-n.start)/t.width()<=.3)return}u.trigger("slideMenuCloseRequested")}catch(e){console.log(e)}}hideScrollOnBody(){$(document.body).css({overflow:"hidden"})}showScrollOnBody(){$(document.body).css({overflow:"auto"})}getTopNavBarHeight(e=!1){const t=$("#header");let o=t.length>0?this.getComputedTranslateY(t.get(0)):0;o<0&&(o=0);let i=t.height()-o;return e&&(i-=$("#header-notification-container").height(),i-=$("#header-site-wide-promo-container").height()),Math.max(i,0)}getFooterHeight(){return $("#footer").height()}getNavbarHeightInPx(){return`${this.getTopNavBarHeight()-1}px`}isHeadingVisible(e,t){return null!=e&&0!=e.length&&e.offset().top-10<t}isElementVisible(e){if(!e)return!1;const t=e.getBoundingClientRect(),o=$(window);return t.top>=this.getTopNavBarHeight()&&t.left>=0&&t.bottom<=o.height()-100&&t.right<=o.width()}isElementVisibleEvenALittle(e,t=!1){if(null==e)return!1;const o=e.getBoundingClientRect(),i=o.height,n=$(window),r=o.top+.82*i>=this.getTopNavBarHeight()&&o.bottom<=n.height()+.7*i,s=o.left>=0&&o.right<=n.width();return t?r:r&&s}canBothElementsFitIntoScreen(e,t){const o=$(e),i=$(t),n=o.offset().top,r=i.offset().top,s=n+o.height(),a=r+i.height(),l=Math.min(n,r);return Math.max(s,a)-l<d.height()-$("#footer").height()-this.getTopNavBarHeight()}areElementsVisible(e){for(var t=0;t<e.length;t++)if(!this.isElementVisible(e[t]))return!1;return!0}getElementLineHeight(e){return parseFloat(e.css("line-height"))}getClosestToOffset(e,t){let o,i,n=null,r=t.left,s=t.top;return e.each((function(){const e=$(this),t=e.offset(),a={left:t.left,top:t.top,right:t.left+e.width(),bottom:t.top+e.height()};if(r>=a.left&&r<=a.right&&s>=a.top&&s<=a.bottom)return n=$(this),!1;const l=[{x:a.left,y:a.top},{x:a.right,y:a.top},{x:a.left,y:a.bottom},{x:a.right,y:a.bottom}];for(const e of l){const t=e.x-r,a=e.y-s;o=Math.sqrt(t*t+a*a),(void 0===i||o<i)&&(i=o,n=$(this))}})),n}getComputedTranslateY(e){if(null==e)return 0;const t=getComputedStyle(e),o=t.transform||t.webkitTransform||t.mozTransform;let i=o.match(/^matrix3d\((.+)\)$/);if(i)return parseFloat(i[1].split(", ")[13]);if(i=o.match(/^matrix\((.+)\)$/))return parseFloat(i[1].split(", ")[5]);const n=$(e).attr("style");if(null==n)return 0;const r=n.indexOf("translateY(");return-1==r?0:parseFloat(n.substring(r+"translateY(".length))}getComputedTranslateX(e){if(!e)return 0;const t=$(e).attr("style");if(!t)return 0;const o=t.indexOf("translateX(");if(-1==o)return 0;const i=parseFloat(t.substring(o+"translateX(".length));return isNaN(i)?0:i}getClosestScrambledParagraph(e){if(null==e)return;let t=$(e);if(t.is(".scrambled"))return e;if(!t.is(".readable-text")&&!t.is(".browsable-container")&&0==(t=t.closest(".readable-text, .browsable-container")).length)return null;const o=parseInt(t.attr("refid"));if(Number.isNaN(o))return null;for(let e=o+1;e<o+20;e++){const t=document.querySelector(`.readable-text.scrambled[refid='${e}']`);if(null!=t)return t}return null}getVisibleParagraphs(e=!1){const t=[],o=d.scrollTop()+this.getTopNavBarHeight(),i=this.getLastHeader(o),n=parseInt(i.attr("refid"));for(let o=n;o>=Math.max(n-30,0)&&n>=0;o--){const i=document.getElementById(`${o}`);if(null!=i&&(!e||i.classList.contains("readable-text"))){if(!this.isElementVisibleEvenALittle(i,!0))break;t.push(i)}}for(let o=n+1;o<n+250;o++){const i=document.getElementById(`${o}`);null==i||e&&!i.classList.contains("readable-text")||this.isElementVisibleEvenALittle(i,!0)&&t.push(i)}return t}getLastHeader(e){const t=n.a.getHeadings(),o=t.filter((t,o)=>this.isHeadingVisible($(o),e)).last();return 0==o.length?t.first():o}hasScrambledParagraphs(){return null!=document.querySelector("#book-markup-container > .readable-text.scrambled")}groupParagraphsByScreenSize(){const e={},t=[];$(".readable-text").each((e,o)=>{const i=o.getAttribute("refid");i&&t.push(i)});const o={};for(const i of t)o[i]=document.getElementById(i).offsetTop,e[i]={};const i=$(window).height()-this.getTopNavBarHeight()-this.getFooterHeight();for(const n of t){const t=+n,r=o[n];for(let s=t-1;s>=0&&s>t-10&&void 0!==!o[s];s--)Math.abs(o[s]-r)<i&&(e[n][s]=!0);for(let s=t+1;s<t+10&&void 0!==!o[s];s++)Math.abs(o[s]-r)<i&&(e[n][s]=!0)}return e}}},function(e,t,o){"use strict";t.a=new class{constructor(){this.titleRegExes=[/Chapter (\d+\.?)\s*:?/,/(?:Part|Section|Lesson|Unit) (\d+\.?)/,/Appendix ([A-Z]\.?)/,/^\d+(\.)?\s+/],this.sectionSubsectionRegEx=/^(\d+\.?)+/,this.appendixSectionSubsectionRegEx=/^([A-Z]\.?(?:\d+\.?)+)/,this.bookElementTypeRegex=/^(?:Chapter|Part|Section|Lesson|Unit|Appendix)\s+(?:\d+\.?)/,this.bookElementTypeNumberingRegex=/^\d+\.?\s+/,this.bookElementAppendixRegex=/^[A-Z]\.?\s+/,this.sectionRegEx=/^((\d+|[A-Z])\.)(\d+(\.)?)/,this.subsectionRegEx=/^((\d+|[A-Z])\.)(\d+\.)(\d+(\.)?)/}isSpecialPathPartInsteadOfBookElement(e){return this.isSpecialDiscussionPart(e)||this.isDiscussionErrata(e)||this.isSpecialCommentPart(e)}isSpecialDiscussionPart(e){return"discussion"==e||"discussions"==e}isDiscussionErrata(e){return"discussion-errata"==e}isSpecialCommentPart(e){return 0==(e||"").indexOf("comment-")}isSpecialFreeEbookOpenPart(e){return"fb"==e}isChapterOrAppendix(e){if(!e)return!1;for(const t of this.titleRegExes)if(e.match(t))return!0;return!1}isSection(e){return!!e&&(null!=e.match(this.sectionRegEx)&&!this.isSubsection(e))}isSubsection(e){return!!e&&null!=e.match(this.subsectionRegEx)}extractNumbering(e){if(!e||!e.trim())return"";let t=null;for(const o of this.titleRegExes)if((t=e.match(o))&&t.length>=2)return t[1];return(t=e.match(this.appendixSectionSubsectionRegEx))?t[0]:(t=e.match(this.sectionSubsectionRegEx))?t[0]:""}isLastChapter(e,t){if(!t)return!1;if(-1==t.indexOf("chapter"))return!1;const o=[],i=e.frontMatter,n=e.parts,r=e.backMatter;if(i&&i.length)for(let e=0;e<i.length;e++)o.push(i[e].shortName);if(n&&n.length)for(let e=0;e<n.length;e++){const t=n[e];if(o.push(t.shortName),t.chapters&&t.chapters.length)for(let e=0;e<t.chapters.length;e++)o.push(t.chapters[e].shortName)}if(r&&r.length)for(let e=0;e<r.length;e++)o.push(r[e].shortName);const s=o.indexOf(t);return!(s<0)&&(!o[s+1]||-1==o[s+1].indexOf("chapter")||void 0)}getBookElementOrdinalFromToc(e,t){const o=e.frontMatter,i=e.parts,n=e.backMatter;let r=0;if(o&&o.length)for(let e=0;e<o.length;e++,r++)if(o[e].shortName==t)return r;if(i&&i.length)for(let e=0;e<i.length;e++,r++){const o=i[e];if(o.shortName==t)return r;if(o.chapters&&o.chapters.length)for(let e=0;e<o.chapters.length;e++,r++)if(o.chapters[e].shortName==t)return r}if(n&&n.length)for(let e=0;e<n.length;e++,r++)if(n[e].shortName==t)return r;return-1}extractTitle(e){for(const t of this.titleRegExes){const o=e.match(t);if(o&&o[0]){e=e.replace(o[0],"");break}}return e.replace(this.extractNumbering(e),"")}extractBookElementType(e){let t=e.match(this.bookElementTypeRegex);return null!=t?(t[0]||"").trim():null!=(t=e.match(this.bookElementTypeNumberingRegex))?"Chapter "+(t[0]||"").trim():null!=(t=e.match(this.bookElementAppendixRegex))?"Appendix "+(t[0]||"").trim():""}extractCleanBookElementTitle(e){if(!e)return e;for(const t of this.titleRegExes){const o=e.match(t);if(o)return e.replace(o[0],"")}const t=e.match(this.bookElementAppendixRegex);return null!=t?e.replace(t[0],""):e}beautifyBookElementShortName(e,t=!1){if(!e)return e;let o=e.replace(/-/g," ");return t&&(o=o.replace(/./,o.toUpperCase()[0])),o}}},function(e,t,o){"use strict";var i=o(0);const n=$(document);let r=!1;i.b.loadDeviceInfo().then(e=>{r=e.isIOS});t.a=new class{constructor(){this.isCloseModalDisabled=!1,n.on("keyup",e=>{27==e.keyCode&&this.hideFoundationModal($(".reveal-modal.shown"))}),n.on("click touchstart",".close-reveal-modal, .close-reveal-modal-button, .homepage-link",e=>{this.hideFoundationModal($(e.target).closest(".reveal-modal"))}),n.on("mousedown touchstart",e=>{if($(e.target).closest(".reveal-modal").length)return;const t=$(".reveal-modal.shown");if(t.length){if(t.is("#simple-signup-modal"))return;this.hideFoundationModal(t)}}),this.hideTooltip=this.hideTooltip.bind(this),$(document).on("mouseenter","[data-tooltip]",e=>{if(i.b.isTouchDevice())return;$(e.currentTarget).find(".header-icon.selected").length||(clearTimeout(this.tooltipTimer),this.tooltipTimer=setTimeout(()=>{const t=$(e.currentTarget);t.find(".header-icon.selected").length||this.isHover(t)&&this.showTooltip(t)},500))})}canHaveScrollBar(){return this.canHaveScrollBarPromise?this.canHaveScrollBarPromise:this.canHaveScrollBarPromise=new Promise((e,t)=>{setTimeout(()=>{e(this.getScrollbarWidth()>0)},16)})}getScrollbarWidth(){const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);const t=document.createElement("div");e.appendChild(t);const o=e.offsetWidth-t.offsetWidth;return e.parentNode.removeChild(e),o}cacheImageIfNeeded(e){if(!i.b.isCordova())return;window.fileSystemUtils.getImageCache().then(t=>{t.cacheFile(e.src)}).catch(e=>{})}loadFromCacheIfPossible(e,t,o){if(!i.b.isCordova())return void(t&&t());window.fileSystemUtils.getImageCache().then(i=>{const n=$(e);i.isCached(n.attr("src"),(function(e,r){r?i.useCachedFile(n,o,t):t&&t()}))}).catch(e=>t&&t())}changeElementType(e,t){var o={};$.each(e.attributes,(e,t)=>{o[t.nodeName]=t.nodeValue}),$(e).replaceWith((function(){return $(`<${t} />`,o).append($(this).contents())}))}showTooltipAtAbsolutePosition(e,t){const o=$("#tooltip"),i=o.find(".tooltip-tip");o.find(".tooltip-container").html(t),i.removeClass("tip-down tip-left tip-right tip-up"),o.removeClass("hidden"),i.addClass("tip-up"),o.css({top:e.top,left:e.left,display:"inline-block",position:"absolute"})}showTooltip(e,t=""){e.on("mouseleave",this.hideTooltip);const o=$("#tooltip"),i=o.find(".tooltip-tip");o.find(".tooltip-container").html(t||e.attr("data-title")||e.attr("title")),i.removeClass("tip-down tip-left tip-right tip-up"),o.removeClass("hidden"),o.css({display:"inline-block",position:"fixed"}),e.is(".tooltip-on-the-left")?(i.addClass("tip-right"),o.css({top:e.offset().top-$(window).scrollTop()+e.height()/2-o.height()/2,left:e.offset().left-o.width()-10})):(i.addClass("tip-up"),o.css({top:e.offset().top-$(window).scrollTop()+e.height()+10,left:e.offset().left+e.width()/2-o.width()/2}))}hideTooltip(){$("#tooltip").addClass("hidden")}getFirstVisibleElement(e){if(null==e||0==e.length)return null;for(let t=0;t<e.length;t++){const o=e[t],i=o.getBoundingClientRect();if(i.width>0&&i.height>0&&i.bottom>0)return o}return null}visuallyShowHearting(){const e=$(".header-icon-notification.wish-list-notification"),t=$(".books-button svg");e.removeClass("hidden disappear").addClass("appear"),this.addIconButtonGlow(t),setTimeout(()=>{e.removeClass("appear").addClass("disappear"),this.removeIconButtonGlow(t)},2e3)}getMarginRight(e){if(null==e||0==e.length)return 0;const t=parseFloat(e.css("margin-right"));return Number.isNaN(t)?0:t}swapNodes(e,t){if(!e||!t)return;const o=e.parentNode,i=e.nextSibling===t?e:e.nextSibling;t.parentNode.insertBefore(e,t),o.insertBefore(t,i)}addIconButtonGlow(e){e&&e.length&&(e.addClass("glow"),e.find(".fa, .fal, .far, .fas").addClass("glow-text"),e.off("animationiteration webkitAnimationIteration"))}isHover(e){if(!e||!e.length)return!1;try{return e.is(":hover")}catch(e){return!1}}removeIconButtonGlow(e){if(!e||!e.length)return;let t;e.is(".glow")&&(e.one("animationiteration webkitAnimationIteration",()=>{e.removeClass("glow"),e.find(".fa, .fal, .far, .fas").removeClass("glow-text"),clearTimeout(t)}),t=setTimeout(()=>{e.removeClass("glow"),e.find(".fa, .fal, .far, .fas").removeClass("glow-text")},2100))}showFoundationModal(e){if(!e||!e.length||e.is(".shown"))return;$(document).trigger("modalOpening"),this.isCloseModalDisabled=!0,setTimeout(()=>this.isCloseModalDisabled=!1,400),this.hideFoundationModal($(".reveal-modal.shown"));let t=$(".reveal-modal-bg");t.length||(t=$("<div class='reveal-modal-bg' style='display: none;'></div>"),$("body").append(t)),r&&e.find("input[type=text]").length&&window.scroll(0,0),t.css("display","block"),e.css({top:0,display:"block",visibility:"visible"}),e.addClass("shown"),setTimeout(()=>{e.addClass("transition-in")},16),$("body").addClass("page-is-showing-modal")}hideFoundationModal(e){this.isCloseModalDisabled||e&&e.length&&($("body").removeClass("page-is-showing-modal"),e.is(".close-disabled")||e.is(":not(.shown)")||(e.removeClass("transition-in"),e.addClass("transition-out"),setTimeout(()=>{$(".reveal-modal-bg").css("display","none"),e.css({display:"none",visibility:"hidden"}),e.removeClass("shown").removeClass("transition-out"),n.trigger("modalClosed",e)},250)))}unwrapIntoParent(e){if(!e||0===e.length)return;if(e.length>1){for(let t=0;t<e.length;t++)this.unwrapIntoParent(e.eq(t));return}const t=e[0],o=t.childNodes,i=t.nextSibling,n=t.parentNode;if(e.remove(),i)for(let e=o.length-1;e>=0;e--)n.insertBefore(o[e],i);else for(let e=0;e<o.length;e++)n.appendChild(o[e]);n.normalize()}findFirstPrevious(e,t,o=100){if(!e||0===e.length)return $(null);let i=e,n=0;for(;(i=this.getPreviousElementIncludingTree(i))&&i.length>0;){if(i.is(t))return i;if(i.is("ul, .callout-container")){const e=i.children().last();if(e.is(t))return e;const r=this.findFirstPrevious(e,t,Math.max(o-n,0));if(r.length>0)return r}if(++n>o)break}return $(null)}findFirstNext(e,t,o=100){if(!e||0===e.length)return $(null);let i=e,n=0;for(;(i=this.getFollowingElementIncludingTree(i))&&i.length>0;){if(i.is(t))return i;if(i.is("ul, ol, .callout-container")){const e=i.children().first();if(e.is(t))return e;const o=this.findFirstNext(e,t);if(o.length>0)return o}if(++n>=o)break}return $(null)}getPreviousElementIncludingTree(e){if(!e||0===e.length)return $(null);var t=e.prev();return 0!=t.length?t:e.is("li")?e.parent().prev():$(null)}findFirstPreviousStopAt(e,t,o,i=100){if(!e||0===e.length)return $(null);let n=e,r=0;for(;(n=this.getPreviousElementIncludingTree(n))&&n.length>0;){if(n.is(t))return n;if(0!=n.find(o).length)break;if(n.is("ul, ol, .callout-container")){const e=n.children().last();if(e.is(t))return e;const o=this.findFirstPrevious(e,t,Math.max(i-r,0));if(o.length>0)return o}if(++r>i)break}return $(null)}getFollowingElementIncludingTree(e){if(!e||0===e.length)return $(null);let t=e.next();if(0!=t.length)return t;if(e.is("li"))return e.parent().next();const o=e.closest(".callout-container");return o.length?o.next():$(null)}precedesElement(e,t){if(!e||!t)return 0;const o=e.compareDocumentPosition(t);return o&Node.DOCUMENT_POSITION_DISCONNECTED&&console.log("Node is disconnected!"),o&Node.DOCUMENT_POSITION_PRECEDING}isContainedWithElement(e,t){const o=e.compareDocumentPosition(t);return o&Node.DOCUMENT_POSITION_CONTAINS||o&Node.DOCUMENT_POSITION_CONTAINED_BY}wrapToHtmlElement(e,t,o){return`<${e} ${this.getAttributesString(t)}>${this.escapeHtmlString(o)}</${e}>`}createTextNodeTextRanges(e){const t={value:"",textNodeRanges:[]};for(let o=0;o<e.length;o++){const i=e[o],n=i.nodeValue,r=t.value;t.value+=n,t.textNodeRanges.push({start:r.length,end:t.value.length,textNode:i})}return t}splitRanges(e,t,o){const i=e.textNodeRanges,n=[],r=[],s=[];for(let e=0;e<i.length;e++){const a=i[e];a.end<=t?n.push(a):a.start>=o?s.push(a):r.push(a)}return{previousRanges:n,matchingRanges:r,followingRanges:s}}walkTheDOM(e,t){for(t(e),e=e.firstChild;e;)this.walkTheDOM(e,t),e=e.nextSibling}getAllDescendantTextNodes(e){const t=[];return this.walkTheDOM(e,e=>{3===e.nodeType&&t.push(e)}),t}getTextWidth(e,t){const o=(this.canvas||(this.canvas=document.createElement("canvas"))).getContext("2d");return o.font=t,Math.floor(o.measureText(e).width)}getAttributesString(e){if(!e)return"";let t="";for(const o in e)t+=` ${o}="${e[o]}"`;return t}escapeHtmlString(e=""){return e.replace("<","&lt;").replace(">","&gt;")}getClassNameMatchingRegEx(e,t){if(!e||!t||!e.classList)return;const o=e.classList;for(let e=0;e<o.length;e++)if(o[e].match(t))return o[e]}getFirstBlockAncestor(e){if(null==e)return null;let t=0;for(;null!=e;){e=e.parentNode,t++;const o=$(e).css("display");if("block"===o||"list-item"==o||"flex"==o||"grid"==o||"table"==o)return e;if(t>50)return null}return null}textNodesUnder(e){let t=[];for(e=e.firstChild;e;e=e.nextSibling)3==e.nodeType?t.push(e):t=t.concat(this.textNodesUnder(e));return t}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o(2);const n=new class{requestLogin(e,t){this.getSource().then(({LoginManager:o})=>o.requestLogin(e,t))}requestOpenModal(e,t,o,i=""){this.getSource().then(({LoginManager:n})=>n.openModal(e,t,!1,o,i))}showRegistrationSuccessfulModal(){this.getSource().then(({LoginManager:e})=>e.renderRegistrationSuccessfulModal())}requestLogout(){this.getSource().then(({LoginManager:e})=>e.performLogout())}getSource(){return this.sourcePromise||(this.sourcePromise=i.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(0),o.e(1),o.e(58)]).then(o.bind(null,66))}}},function(e,t,o){"use strict";var i=o(16),n=o(9),r=o(11),s=o(8),a=o(10),l=o(1),c=o(33),d=o(24);const u=40;t.a=new class{constructor(){this.listingRegEx=/listing(\s)+[0-9]+\.[0-9]+/gi,this.figureRegEx=/figure(\s)+[0-9]+\.[0-9]+/gi,this.tableRegEx=/table(\s)+[0-9]+\.[0-9]+/gi,this.browsableRegExes=[this.listingRegEx,this.figureRegEx,this.tableRegEx]}getShortNameChapterTitleMap(e){const t={};if(!e)return t;const o=e=>{if(e){e.shortName&&e.title&&(t[e.shortName]=e.title);for(const t in e)e.hasOwnProperty(t)&&e[t]&&"object"==typeof e[t]&&o(e[t])}};return o(e),t}createBookFromBookData(e){const t=new i.a(e.id,e.manningId,e.title,e.shortName,e.description,e.lastUpdateDate,e.exercisesComingSoon,e.programmingLanguage,e.userOwnsBook,e.userOwnsAudio,l.a.getBookCoverUrl(e.shortName),l.a.getBookUrl(e.slug),e.meap,e.open,e.latestMeapVersion||0,e.highResolutionCover);return t.slug=e.slug,t.offlineFileSizes=e.offlineFileSizes,t.openChapters=e.openChapters||[],t.cleanTitle=this.cleanBookTitle(t.title),t.authors=e.authors,t.isReview=!!e.isReview,t.userCanViewReviews=!!e.userCanViewReviews,t.userIsEditor=!!e.userIsEditor,t.userIsReviewer=!!e.userIsReviewer,t.userIsAuthor=!!e.userIsAuthor,t.userOwnsPBook=!!e.userOwnsPBook,t.userCanDownloadBook=!!e.userCanDownloadBook,t.sisterLicenseId=e.sisterLicenseId,t.associatedLicenseId=e.associatedLicenseId,t.categories=e.categories||"",t.hasAudio=!!e.hasAudio,t.isFreeEbook=!!e.isFreeEbook,t.hasExercises=!!e.hasExercises,t.hasTextAddendums=!!e.hasTextAddendums,t.hasKnowledgeGraph=!!e.hasKnowledgeGraph,t.isKnowledgeGraphAccessible=!!e.isKnowledgeGraphAccessible,t.userOwnsAudio=!!e.userOwnsAudio,t.isParagraphByParagraphUnlockDisabled=!!e.isParagraphByParagraphUnlockDisabled,t.hasBeenDownloaded=!!e.hasBeenDownloaded,t.isbn=e.isbn,null!=e.offlineFileSizes&&(t.offlineFileSizes=e.offlineFileSizes),t}createBookElement(e,t,o,i){const n=new c.a(t,e.id,e.title,e.shortName,e.userOwnsBookElement,e.ordinal,e.wordCount,e.freeWordCount,e.audioLocation,e.subtitlesLocation,e.isOpen,e.meapVersion,e.location,e.isBookOverview);return n.videos=e.videos,n.exercisesLocation=e.exercisesLocation,n.reviewVersion=e.reviewVersion,n.isRollingReview=e.isRollingReview,n.pdf=e.pdf,o&&(n.previousBookElement=new d.a(o.shortName,o.title,o.link||l.a.getBookElementUrl(t.slug,o.shortName,n.meapVersion,n.reviewVersion))),i&&(n.nextBookElement=new d.a(i.shortName,i.title,i.link||l.a.getBookElementUrl(t.slug,i.shortName,n.meapVersion,n.reviewVersion),i.introItems)),n}groupSmallListItemsIfNecessary(e){const t=[],o=[],i=[];for(const n of e){const e=n.closest("ul, ol");if(0==e.length)t.push([n]);else if(this.isListWithLargeItems(e))t.push([n]);else{const t=e.get(0);let r=o.indexOf(t);-1==r&&(o.push(t),i.push([]),r=o.length-1),i[r].push(n)}}return t.concat(i)}insertLoadingBoxes(){try{var e=document.querySelector("#book-content-main-row #book-markup-container");if(!e)return;for(var t=e.querySelectorAll("h2, h3"),o=0;o<t.length;o++){var i=t[o].parentElement;if(null==i.nextElementSibling||null!=i.nextElementSibling.querySelector("h2, h3")){var n=document.createElement("div");n.innerHTML=l();for(var r=0;r<n.children.length;r++)s=n.children[r],(a=i).parentNode.insertBefore(s,a.nextSibling)}}}catch(e){}var s,a;function l(){for(var e=c(1,6),t=[0,10,20,30,40,50,70,90],o="",i=0;i<=e;i++)o+='<div class="readable-text"><span class="placeholder" style="margin-right: '+t[c(0,t.length-1)]+'px"><span class="placeholder-animated-background">&nbsp;</span></span> </div>';return o}function c(e,t){return Math.floor(Math.random()*(t-e+1)+e)}}getHeadingSectionCost(e,t,o){if(null==e||null==t||null==o)return 0;let i=a.a.isChapterOrAppendix(t.text().trim())?e.tokenPrice:this.getSectionSubsectionTokenPrice(a.a.extractNumbering(t.text().trim()),e.sectionSubsectionPrices);if(i<=0)return 0;return 0==this.getContainedScrambledAndUnscrambledParagraphs(t,o).scrambledParagraphs.length?0:i}getSectionSubsectionTokenPrice(e,t){if(null==t||0==t.length)return 0;const o=t.find(t=>t.shortName==e);return null!=o?o.tokenPrice:0}getSectionSubsectionFullTokenPrice(e,t){if(null==t||0==t.length)return 0;const o=t.find(t=>t.shortName==e);return null!=o?o.fullTokenPrice:0}cleanBookTitle(e,t=!1){if(!e)return e;try{const o=e.indexOf(":");e=-1!=o?e.substr(0,o):e,t&&(e=e.replace(/second edition/i,"2nd").replace(/third edition/i,"3rd").replace(/fourth edition/i,"4th").replace(/fifth edition/i,"5th").replace(/sixth edition/i,"6th").replace(/seventh edition/i,"7th").replace(/eight edition/i,"8th").replace(/ninth edition/i,"9th"));const i=e.toLowerCase().indexOf("meap");return-1!=i?e.substr(0,i):e}catch(t){return e}}updateTitle(e){e=(e||"").trim(),document.title=e||"livebook"}updateMetaContent(e){e?$(".meta-description").attr("content",e):this.resetMetaContent()}updateMetaImage(e){e?$(".meta-image").attr("content",e):this.resetMetaImage(),$(".meta-image").attr("content",e)}resetMetaImage(){$(".meta-image").attr("content",l.a.getLivebookCdn()+"assets/images/cover.png")}updateCanonicalLink(e,t,o){$("link[rel='canonical']").attr("href",l.a.getAbsoluteBookElementUrl(e,t,o))}updateStructureScript(){}resetStructureScript(){}resetMetaContent(){$(".meta-description").attr("content","liveBooks are enhanced books. They add narration, interactive exercises, code execution, and other features to eBooks.")}matchesListingRegEx(e){return this.matchesRegEx(e,this.listingRegEx)}matchesFigureRegEx(e){return this.matchesRegEx(e,this.figureRegEx)}matchesTableRegEx(e){return this.matchesRegEx(e,this.tableRegEx)}matchesRegEx(e,t){return!(null==e||""==e||!e.match)&&(null!=t&&e.match(t))}matchesBrowsableRegEx(e){return!(!e||!e.match)&&!!(e.match(this.listingRegEx)||e.match(this.figureRegEx)||e.match(this.tableRegEx))}getContainedScrambledAndUnscrambledParagraphs(e,t){const o={scrambledParagraphs:[],unscrambledParagraphs:[],neverScrambledParagraphs:[]},i=e.text().trim();if(a.a.isChapterOrAppendix(i)){const e=document.querySelectorAll(".readable-text.scrambled");for(let t=0;t<e.length;t++)o.scrambledParagraphs.push(e[t]);const t=document.querySelectorAll(".readable-text.unscrambled");for(let e=0;e<t.length;e++)o.unscrambledParagraphs.push(t[e]);const i=document.querySelectorAll(".readable-text:not(.unscrambled):not(.scrambled)");for(let e=0;e<i.length;e++)o.neverScrambledParagraphs.push(i[e]);return o}const n=t.index(e),r=t.slice(n+1),s=a.a.isSection(i),l=a.a.isSubsection(i);let c=null;r.each((e,t)=>{const o=$(t),i=o.text().trim();if(s){if(a.a.isSection(i))return c=o,!1}else if(l&&(a.a.isSubsection(i)||a.a.isSection(i)))return c=o,!1});let d=parseInt(e.attr("refid")),u=parseInt(null!=c&&c.length>0?c.attr("refid"):$(".readable-text.scrambled:last-of-type, .readable-text.unscrambled:last-of-type").last().attr("refid"));if(!Number.isNaN(d)&&!Number.isNaN(u))for(let e=d;e<=u;e++){const t=document.getElementById(`${e}`),i=$(t);i.is(".readable-text")&&(i.is(".scrambled")?o.scrambledParagraphs.push(t):i.is(".unscrambled")?o.unscrambledParagraphs.push(t):i.hasClass("scrambled")||i.hasClass("unscrambled")||o.neverScrambledParagraphs.push(t))}return o}restoreOriginalHtml(e){if(!e||!e.originalInnerHTML)return;$(e).find(".highlighted-text").off(),e.innerHTML=e.originalInnerHTML,$(document).trigger("originalReadableHtmlRestored",e)}getCodeMirrorSyntaxHighlightMode(e,t=""){if(!e)return"";const o=(e.programmingLanguage||"").toLowerCase();return"n/a"!==o?o:""}getTextFragmentDuration(e){if(!e||!e.cues||0==e.cues.length)return 0;const t=e.cues;return t[t.length-1].endTime-t[0].startTime}extractFileNameNumber(e){if(!e||!e.match)return null;const t=e.match(/([0-9]+)\.[a-zA-Z]+$/);return!t||t.length<2?this.extractNumberFromStringFileNameNumber(e):parseInt(t[1])}extractNumberFromStringFileNameNumber(e){const t=e.match(/([a-zA-Z]+)\.[a-zA-Z]+$/);if(!t||t.length<2)return null;switch(t[1].trim().toLowerCase()){case"one":return 1;case"two":return 2;case"three":return 3;case"four":return 4;case"five":return 5;case"six":return 6;case"seven":return 7;case"eight":return 8;case"nine":return 9}return null}hasBrowsables(e){return!!e&&(null!=e.browsables&&e.browsables.length>0)}getMostImportantBrowsable(e){if(!e||0==e.length)return null;if(1==e.length)return e[0];let t=null,o=null;for(let i=0;i<e.length;i++){const n=e[i];$(n).is(".listing-container")?t=n:o=n}return t||o}getMatchingBrowsable(e,t){if(!e||null==e.length)return null;let o=null;for(let i=0;i<e.length;i++){if(o=e[i],-1!=$(o).find("h5").text().indexOf(t))return o}return o}getNextCueForPlaying(e){if(!e)return null;let t=!1;return $(e).is(".fragment-played")&&(t=!0),!t&&e.lastPlayedCue?e.lastPlayedCue:e.cues?e.cues[0]:null}getAllFocusableElements(){const e=$("#book-markup-container"),t=[];return e.children().each((e,o)=>{if(0==e)return;if(-1!=o.className.indexOf("introduction-summary"))return;const i=$(o);i.is(".callout-container, ul, ol")?(i.is(".callout-container")&&t.push(o),i.find(".readable-text").each((e,o)=>{t.push(o)})):t.push(o)}),t}getTextFragmentElements(){return Array.prototype.slice.call(document.querySelectorAll(".readable-text, .browsable-container"))}getBookmarkableAndNotableItems(){const e=this.getTextFragmentElements();for(let t=1;t<e.length&&"LI"===e[t].nodeName;t++)e.splice(t,1),t--;return e}getTextElementPositionPointCenter(e){return e&&0!==e.length?e.position().top+e.height()/2:0}getTextElementPositionPointTop(e){if(!e||0===e.length)return 0;let t=e.position().top;if(e.find("h1").length>0&&(t+=n.a.getElementLineHeight(e)/2),e.find("h2").length>0&&(t+=n.a.getElementLineHeight(e)/11),e.is(".collapsible-panel")){const o=e.find(".button-collapsible-panel");t=e.position().top+1.5*o.height()}return e.is(".listing-line-group")&&(t=e.offset().top-$("#book-main-content-container").offset().top-n.a.getElementLineHeight(e)),t}elementContainsCueball(e,t){if(!e)return!1;const o=r.a.getAllDescendantTextNodes(e),i=r.a.createTextNodeTextRanges(o);let n=i.value.indexOf(t),s=n+t.length;if(-1===n&&(s=(n=i.value.indexOf(t.replace("<","&lt;").replace(">","&gt;")))+t.length,-1===n))return!1;const a=r.a.splitRanges(i,n,s).matchingRanges;for(let e=0;e<a.length;e++){const t=a[e],o=t.textNode;if(o&&o.nextSibling&&(e!=a.length-1||t.end<=1.1*s)){let e=o.nextSibling;for(;null!=e;){if("IMG"==e.nodeName)return this.extractFileNameNumber(e.src);if("#text"===e.nodeName&&e.textContent.trim())break;e=e.nextSibling}}}return!1}getOwnerSectionHeading(e,t){if(null==e||0==e.length)return null;const o=e.text().trim();if(!a.a.isSubsection(o))return null;for(let o=t.index(e)-1;o>=0;o--){const e=t.eq(o);if(a.a.isSection(e.text().trim()))return e}return null}getHeadings(){return this.getSecAndSubsecFragElements().filter((e,t)=>{const o=$(t),i=o.text().trim();return o.children("h1").length>0||a.a.isChapterOrAppendix(i)||a.a.isSection(i)||a.a.isSubsection(i)})}getSectionHeadings(){return this.getSecAndSubsecFragElements().filter((e,t)=>{const o=$(t).text().trim();return a.a.isSection(o)})}getSecAndSubsecFragElements(){return $(this.getTextFragmentElements()).filter((e,t)=>$(t).children("h1, h2, h3, h4").length>0)}figureOutSectionOrSubsectionTitleFromRefId(e){var t=$(this.getSecAndSubsecFragElements()).filter((t,o)=>parseInt($(o).attr("refId"))<e).last();return/(([0-9]+\.?)+)/.test(t.children("h1, h2, h3, h4").first().text())?t.children("h1, h2, h3, h4").first().text():void 0}figureOutSectionOrSubsectionFromRefId(e){var t=$(this.getSecAndSubsecFragElements()).filter((t,o)=>parseInt($(o).attr("refId"))<e).last();return/(([0-9]+\.?)+)/.test(t.children("h1, h2, h3, h4").first().text())?t.children("h1, h2, h3, h4").first().text().match(/(([0-9]+\.?)+)/)[0]:void 0}getClosestHeading(e,t){let o=parseInt(e.attr("refid"));if((!o||Number.isNaN(o))&&(e.is("ul, ol")&&(o=parseInt(e.children().first().attr("refid"))),!o||Number.isNaN(o)))return null;let i=null;return t.each((e,t)=>{const n=$(t);if(parseInt(n.attr("refid"))>o)return!1;i=n}),i}expandListOfScrambledParagraphsIfNecessary(e){const t=[];for(const o of e){const e=o.closest("ul, ol");if(e.length>0){const o=e.find("li.readable-text.scrambled");this.isListWithLargeItems(e)||o.each((e,o)=>{t.push($(o))})}}const o={},i=[];for(const n of[...e,...t]){const e=n.attr("refid");o[e]||(o[e]=!0,i.push(n))}return i.sort((e,t)=>{return parseInt(e.attr("refid"))-parseInt(t.attr("refid"))}),i}isListWithLargeItems(e){if(null==e||0==e.length)return!1;const t=e.find("li.readable-text");for(let e=0;e<t.length;e++)if(s.a.getNumberOfWords(t.eq(e).text())>=u)return!0;return!1}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var i=o(1),n=o(5),r=o(6);const s=new class{updateAvatarUrl(e){null!=this.authInfo&&i.a.postToOurBackend(i.a.getAbsoluteUrl("api/userInfo/saveAvatarUrl"),()=>{this.authInfo.userDetails.avatarUrl=e,$(document).trigger("requestAvatarUrlUpdate",e)},e=>{$(document).trigger("requestNotification","Error uploading profile image")},{avatarUrl:e})}setAuthInfo(e){this.authInfo=e,null!=this.authInfo&&null!=this.authInfo.userDetails&&(this.authInfo.userDetails.isNewCustomer||n.a.setItem("isBuyer",!0))}getAuthInfo(){return this.authInfo}getUserId(){return null==this.authInfo?0:this.authInfo.userDetails.id}getUserInitials(){return new Promise((e,t)=>{r.a.isLoggedIn().then(t=>e(!!t.loggedIn&&this.extractInitials(t.userDetails.firstName,t.userDetails.lastName))).catch(e=>t(e))})}getUserFullname(){return new Promise((e,t)=>{r.a.isLoggedIn().then(t=>e(t.loggedIn?`${t.userDetails.firstName} ${t.userDetails.lastName}`:"")).catch(e=>t(e))})}extractInitials(e,t){return e&&t?e[0]+t[0]:e&&!t?e[0]:!e&&t?t[0]:""}getUserFirstName(){return new Promise((e,t)=>{r.a.isLoggedIn().then(t=>{t.loggedIn&&t.userDetails.firstName?e(t.userDetails.firstName||""):e("")}).catch(e=>t(e))})}getUserEmail(){return new Promise((e,t)=>{r.a.isLoggedIn().then(t=>e(!!t.loggedIn&&t.userDetails.email)).catch(e=>t(e))})}getAvatarUrl(){return new Promise((e,t)=>{r.a.isLoggedIn().then(t=>e(!!t.loggedIn&&t.userDetails.avatarUrl)).catch(e=>t(e))})}isUserAdmin(){return new Promise((e,t)=>{r.a.isLoggedIn().then(t=>e(!!t.loggedIn&&t.userDetails.isAdmin)).catch(e=>t(e))})}getUserDetails(){return new Promise((e,t)=>{r.a.isLoggedIn().then(t=>{const o=t.loggedIn?t.userDetails:null;o&&(o.name=o.displayName?o.displayName:(o.firstName||"")+" "+(o.lastName||""),o.votes=o.votes||[],o.spamCommentIds=o.spamCommentIds||[],o.authorizedProductIds=o.authorizedProductIds||{}),e(o)}).catch(e=>t(e))})}setTokenInfo(e){this.authInfo&&this.authInfo.userDetails&&(this.authInfo.userDetails.tokenInfo=e)}saveNotificationPreferences(e){return new Promise((t,o)=>{i.a.getFromOurBackend(i.a.getAbsoluteUrl("api/comment/saveNotificationPreferences"),()=>t(),e=>o(e),{value:e})})}getUserProfileInfo(){return new Promise((e,t)=>{i.a.getFromOurBackend(i.a.getAbsoluteUrl("userInfo/getUserInfo"),t=>e(t),e=>t(e))})}setUserProfileInfo(e,t,o,n,r,s,a,l,c,d,u,h,g,m){return new Promise((p,f)=>{const b={};null!=e&&(b.name=e),null!=t&&(b.listWeekdayTimes=t),null!=o&&(b.listWeekendTimes=o),null!=n&&(b.userInfo=n),null!=r&&(b.shareSkillLevel=r),null!=s&&(b.shareHours=s),null!=a&&(b.shareLocation=a),null!=l&&(b.skillLevels=l),null!=c&&(b.selectedSkillDomains=c),null!=d&&(b.languages=d),null!=u&&(b.location=u),null!=h&&(b.locationText=h),null!=g&&(b.avatarUrl=g),null!=m&&(b.displayName=m);JSON.stringify(b);i.a.postToOurBackend(i.a.getAbsoluteUrl("userInfo/setUserInfo"),e=>p(e),e=>f(e),b,!0,!0,!1,!0)})}}},function(e,t,o){"use strict";var i=o(1);class n{fetch(){return this.settingsPromise?this.settingsPromise:this.settingsPromise=new Promise((e,t)=>{i.a.postToOurBackend(i.a.getAbsoluteUrl("api/userInfo/getUserSettings"),t=>{"string"==typeof t&&("[]"===t&&(t="{}"),t=JSON.parse(t)),e(t)},t=>{console.log("Getting settings failed",t),e({})})})}update(e){return new Promise((t,o)=>{i.a.postToOurBackend(i.a.getAbsoluteUrl("api/userInfo/storeUserSettings"),e=>t(),e=>o(),e)})}}var r=o(0);class s{constructor(){this.webService=new n}fetch(){return this.settingsPromise?this.settingsPromise:r.b.isConnected()?new Promise((e,t)=>this.webService.fetch().then(()=>this.loadSettings().then(e))):this.loadSettings()}update(e){return r.b.isConnected()?(this.updateSettings(e),this.webService.update(e)):this.updateSettings(e)}loadSettings(){return new Promise((e,t)=>{this.getFsUtils().readFile(this.getFsUtils().getSettingsLocation()).then(t=>{e(t?JSON.parse(t):{})}).catch(t=>{console.log("No settings present - defaulting",t),e({})})})}updateSettings(e){return new Promise((t,o)=>{this.getFsUtils().writeToFile(this.getFsUtils().getSettingsLocation(),JSON.stringify(e)),t()})}getFsUtils(){return window.fileSystemUtils}}var a=o(5),l=o(6),c=o(9);const d=$(document);t.a=new class{constructor(){this.internalStorage=this.getDefaultSettings(),this.settingsService=new Promise((e,t)=>{r.b.loadDeviceInfo().then(t=>{l.a.isLoggedIn().then(e=>{e.loggedIn?this.fetchSettings():c.a.showNightMode()}),e(this.getSettingsService(t.platform))})})}fetchSettings(){return null!=this.initialSettingsPromise?this.initialSettingsPromise:l.a.isCurrentlyLoggedIn()?this.initialSettingsPromise=new Promise((e,t)=>{this.settingsService.then(o=>{o.fetch().then(t=>{this.internalStorage=Object.assign(this.internalStorage,t),e(this.internalStorage),d.trigger("settingsUpdated",this.internalStorage)}).catch(e=>{t(e),this.initialSettingsPromise=null})})}):Promise.resolve(this.internalStorage)}set(e,t){this.internalStorage[e]!=t&&(this.internalStorage[e]=t,clearTimeout(this.syncTimerID),this.syncTimerID=setTimeout(()=>this.sync(),1500),d.trigger("settingsUpdated",this.internalStorage))}get(e){return this.internalStorage[e]}getHighlightColor(){return this.get("highlightColor")}setHighlightColor(e){this.set("highlightColor",e)}sync(){this.settingsService.then(e=>{e.update(this.internalStorage),a.a.setItem("settings",JSON.stringify(this.internalStorage))})}getSettingsService(e){switch(e){case r.a.Browser:return new n;case r.a.Cordova:case r.a.Electron:return new s}}getDefaultSettings(){let e={"browsable-pause-type":"browsable-pause-pause","sound-effects-enabled":!1,"night-mode":this.getDefaultNightMode(),volume:1,speed:1,"unread-text-visibility":"full-visible",highlightColor:"yellow","text-size":"standard","feedback-submitted":!1,"tour-taken":!1,"tour-offered":!1,"live-audio-disabled":!1,"update-history-on-scroll":!0,"discussions-offered":!1,"discussions-email-notifications-offered":!1,"discussions-code-of-conduct-shown":!1,"stop-showing-error-reports-modal":!1,"error-modal-last-shown":null,"email-subscription-offered":!1,"email-subscription-taken":!1,"settings-menu-highlighted":!1,"position-and-reading-info-disabled":!1,"hide-indexed-terms":!1,appOffered:!1};try{e=Object.assign(e,JSON.parse(a.a.getItem("settings")))}catch(e){}return e}getDefaultNightMode(){try{return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}catch(e){return!1}}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o(8);class n{constructor(e=-1,t=-1,o="",n="",r="",s=null,a=!1,l="",c=!1,d=!1,u="",h="",g=!1,m=!1,p=0,f=""){this.openChapters=[],this.id=e,this.manningId=t,this.shortName=n,this.title=o,this.isMeap=g,this.isOpen=m,this.latestMeapVersion=p,this.description=r,this.lastUpdateDate=i.a.getDateFromString(s),this.exercisesComingSoon=a,this.userOwnsBook=c,this.userOwnsAudio=d,this.programmingLanguage=l,this.bookCoverPath=u,this.bookPath=h,this.highResolutionCover=f,this.offlineFileSizes={audioHighQuality:"",audioMediumQuality:"",audioLowQuality:"",contentSize:""}}static sortBooksDefault(e=[]){e.sort((e,t)=>Math.max(t.lastAccessedTime,null!=t.lastUpdateDate?t.lastUpdateDate.getTime():0)-Math.max(e.lastAccessedTime,null!=e.lastUpdateDate?e.lastUpdateDate.getTime():0))}static sortBooksAlphabetically(e=[]){e.sort((e,t)=>e.title<t.title?-1:e.title>t.title?1:0)}static sortBooksByLastUpdateDate(e=[]){e.sort((e,t)=>t.lastUpdateDate.getTime()-e.lastUpdateDate.getTime())}static sortBooksByLastAccess(e=[]){e.sort((e,t)=>t.lastAccessedTime-e.lastAccessedTime)}}},function(e,t,o){"use strict";var i,n;o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return n})),function(e){e[e.dev=0]="dev",e[e.qa=1]="qa",e[e.prod=2]="prod",e[e.docker=3]="docker",e[e.test=4]="test"}(i||(i={})),function(e){e[e.demo=0]="demo",e[e.marketplace=1]="marketplace",e[e.livebook=2]="livebook",e[e.livevideo=3]="livevideo",e[e.pbc=4]="pbc"}(n||(n={}));const r="http://localhost:3001",s={backend:{demo:r,marketplace:"http://localhost:8080/Marketplace",livebook:"http://localhost:8080",livevideo:"http://localhost:8080",pbc:"http://localhost:8080",base:""},client:{demo:"http://localhost:8080",marketplace:"http://localhost:8080/Marketplace",livebook:"http://localhost:3000",livevideo:"http://livevideo-ui-test.s3-website-us-east-1.amazonaws.com",pbc:"http://pbc-ui-test.s3-website-us-west-2.amazonaws.com",base:""},aws:{livebook:"https://d1557jsc07ldhk.cloudfront.net"},images:{livebook:"https://d1557jsc07ldhk.cloudfront.net",marketplace:"https://images-qa.manning.com"}},a={backend:{demo:r,marketplace:"http://localhost:8080/Marketplace",livebook:"http://localhost:8080",livevideo:"https://livevideo-be-dev.manning.com",pbc:"https://livevideo-be-dev.manning.com",base:""},client:{demo:"http://localhost:8080",marketplace:"http://localhost:8080/Marketplace",livebook:"http://localhost:3000",livevideo:"https://livevideo-qa.manning.com",pbc:"https://liveproject-qa.manning.com",base:""},aws:{livebook:"https://d1557jsc07ldhk.cloudfront.net"},images:{livebook:"https://d1557jsc07ldhk.cloudfront.net",marketplace:"https://images-qa.manning.com"}},l={backend:{demo:r,marketplace:"https://www-qa.manning.com",livebook:"https://livebook-qa.manning.com",livevideo:"https://livevideo-be-dev.manning.com",pbc:"https://livevideo-be-dev.manning.com",base:""},client:{demo:"http://localhost:8080",marketplace:"https://www-qa.manning.com",livebook:"https://livebook-qa.manning.com",livevideo:"https://livevideo-qa.manning.com",pbc:"https://liveproject-qa.manning.com",base:""},aws:{livebook:"https://d1557jsc07ldhk.cloudfront.net"},images:{livebook:"https://d1557jsc07ldhk.cloudfront.net",marketplace:"https://images-qa.manning.com"}},c={backend:{demo:r,marketplace:"https://www.manning.com",livebook:"https://livebook.manning.com",livevideo:"https://livevideo-be.manning.com",pbc:"https://livevideo-be.manning.com",base:""},client:{demo:"http://localhost:8080",marketplace:"https://www.manning.com",livebook:"https://livebook.manning.com",livevideo:"https://livevideo.manning.com",pbc:"https://liveproject.manning.com/",base:""},aws:{livebook:"https://drek4537l1klr.cloudfront.net"},images:{livebook:"https://drek4537l1klr.cloudfront.net",marketplace:"https://images.manning.com"}},d={backend:{demo:r,marketplace:"http://search-test.manning.com",livebook:"https://livebook-qa.manning.com",livevideo:"https://livevideo-be-dev.manning.com",pbc:"https://livevideo-be-dev.manning.com",base:""},client:{demo:"http://localhost:8080",marketplace:"http://search-test.manning.com",livebook:"https://livebook.manning.com",livevideo:"https://livevideo.manning.com",pbc:"https://liveproject.manning.com",base:""},aws:{livebook:"https://drek4537l1klr.cloudfront.net"},images:{livebook:"https://drek4537l1klr.cloudfront.net",marketplace:"https://images-qa.manning.com"}};t.c=new class{getLocalhostLocation(){return r}getConfig(e,t){const o=this.getConfigByDeploymentType(t);switch(e){case n.livebook:o.backend.base=o.backend.livebook,o.client.base=o.client.livebook;break;case n.livevideo:o.backend.base=o.backend.livevideo,o.client.base=o.client.livevideo;break;case n.marketplace:o.backend.base=o.backend.marketplace,o.client.base=o.client.marketplace;break;case n.pbc:o.backend.base=o.backend.pbc,o.client.base=o.client.pbc;break;case n.demo:default:o.backend.base=o.backend.demo,o.client.base=o.client.demo}return o}getConfigByDeploymentType(e){switch(e){case i.qa:return l;case i.prod:return c;case i.docker:return d;case i.test:return s;case i.dev:default:return a}}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var i=o(1),n=o(8),r=o(5);class s{constructor(){this.timeoutInterval=250}getLatestPage(){return Promise.resolve(r.a.getItem("LATEST_BOOK_PAGE"))}storeLatestPage(e){return r.a.setItem("LATEST_BOOK_PAGE",e),Promise.resolve()}fetchAllBooksProgress(){return new Promise((e,t)=>{i.a.getFromOurBackend(i.a.getAbsoluteUrl("api/progress/getAllBooksProgress"),t=>e(t),e=>t(e))})}fetchAudioProgress(e){return new Promise((t,o)=>{i.a.getFromOurBackend(i.a.getAbsoluteUrl("api/progress/getBookElementProgress"),e=>{e&&"null"!=e&&e.text&&"null"!=e.text||t({});try{let o=JSON.parse(e.text);if(!n.a.hasNumberProperties(o)){if(!o.text)return void t({});if(o=JSON.parse(o.text),n.a.hasNumberProperties(o))return void t(o);t({})}t(o)}catch(e){t({})}},e=>o(e),{book:e.book.shortName,bookElement:e.shortName,meapVersion:e.meapVersion})})}storeProgress(e,t,o,i){return new Promise((n,r)=>{i||!this.isStoringProgress?this.postProgress(e,t,o,i,n,r):(console.log("Overlapping store progress, waiting for:",this.timeoutInterval,"ms"),setTimeout(()=>this.postProgress(e,t,o,i,n,r),this.timeoutInterval),this.timeoutInterval=Math.min(this.timeoutInterval+100,750))})}postProgress(e,t,o,n,r,s){return this.isStoringProgress=!0,i.a.postToOurBackend(i.a.getAbsoluteUrl("api/progress/save"),()=>{this.isStoringProgress=!1,r()},e=>{this.isStoringProgress=!1,s(e)},{book:e.book.shortName,bookElement:e.shortName,contentItemIDs:JSON.stringify(t),contentItemID:o,meapVersion:e.meapVersion,reviewVersion:e.reviewVersion},!1,!n)}syncProgressWithServer(e){return e?new Promise((t,o)=>i.a.postToOurBackend(i.a.getAbsoluteUrl("api/progress/syncProgress"),()=>t(!0),e=>document.dispatchEvent(new CustomEvent("sync-error",{detail:{error:e}})),{items:e},!0,!0,!1,!0)):Promise.resolve(!0)}}var a=o(0);class l{constructor(){this.webService=new s}getLatestPage(){return new Promise((e,t)=>{this.getFsUtils().readFile(this.getFsUtils().getLatestProgressLocation()).then(t=>e(t)).catch(e=>t(e))})}storeLatestPage(e){return this.getFsUtils().writeToFile(this.getFsUtils().getLatestProgressLocation(),e)}loadSyncProgressFromFileSystem(){return new Promise((e,t)=>{this.getFsUtils().readFile(this.getFsUtils().getSyncProgressLocation()).then(t=>e(t?JSON.parse(t):[])).catch(e=>t(e))})}loadAllBooksProgressFromFileSystem(){return new Promise((e,t)=>{this.getFsUtils().readFile(this.getFsUtils().getBookProgressLocation()).then(t=>e(JSON.parse(t))).catch(e=>t(e))})}loadBookElementAudioProgressFromFileSystem(e,t){return new Promise((o,i)=>this.getFsUtils().readFile(this.getFsUtils().getBookElementAudioProgressLocation(e,t)).then(e=>{e&&"null"!=e||o({});const t=JSON.parse(e);n.a.hasNumberProperties(t)||o({}),o(t)}).catch(e=>{o({})}))}fetchAllBooksProgress(){return a.b.isConnected()?new Promise((e,t)=>{this.webService.fetchAllBooksProgress().then(t=>{this.getFsUtils().writeToFile(this.getFsUtils().getBookProgressLocation(),JSON.stringify(t)),e(t)}).catch(t=>{this.loadAllBooksProgressFromFileSystem().then(t=>e(t))})}):this.loadAllBooksProgressFromFileSystem()}fetchAudioProgress(e){return new Promise((t,o)=>{const i=this.loadBookElementAudioProgressFromFileSystem(e.book.shortName,e.shortName),n=this.webService.fetchAudioProgress(e);Promise.all([i,n]).then(o=>{const i=Object.assign({},o[0],o[1]);this.storeProgress(e,i,this.getMaxPropertyNumber(i)),t(i)}).catch(i=>this.loadBookElementAudioProgressFromFileSystem(e.book.shortName,e.shortName).then(e=>t(e)).catch(e=>o(e)))})}storeProgress(e,t,o){return this.getUpdatedStoredProgress(this.loadAllBooksProgressFromFileSystem(),e.shortName,e.book.shortName,e.reviewVersion,o).then(i=>{this.getFsUtils().writeToFile(this.getFsUtils().getBookProgressLocation(),JSON.stringify(i)),a.b.isConnected()?this.webService.storeProgress(e,t,o).catch(e=>console.log("Couldn't save book progress to central server")):(n.a.isEmptyObject(t)||this.getFsUtils().writeToFile(this.getFsUtils().getBookElementAudioProgressLocation(e.book.shortName,e.shortName),JSON.stringify(t)),this.getUpdatedStoredProgress(this.loadSyncProgressFromFileSystem(),e.shortName,e.book.shortName,e.reviewVersion,o).then(e=>{this.getFsUtils().writeToFile(this.getFsUtils().getSyncProgressLocation(),JSON.stringify(e))}))})}syncProgressWithServer(){return new Promise((e,t)=>this.loadSyncProgressFromFileSystem().then(o=>{o.length?this.webService.syncProgressWithServer(o).then(t=>{this.getFsUtils().writeToFile(this.getFsUtils().getSyncProgressLocation(),""),e(t)}).catch(e=>t(!1)):e(!0)}))}getUpdatedStoredProgress(e,t,o,i,n){return new Promise((r,s)=>e.then(e=>{let s=e&&e.find(e=>e.bookShortName===o);s?(s.bookElementShortName=t,s.contentItemID=n,s.timeStamp=Date.now(),s.reviewVersion=i):e.push({bookShortName:o,bookElementShortName:t,contentItemID:n,reviewVersion:i,timeStamp:Date.now()}),r(e)}))}getMaxPropertyNumber(e){let t=1;for(const o in e){const e=parseInt(o);!Number.isNaN(e)&&e>t&&(t=e)}return`${t}`}getFsUtils(){return window.fileSystemUtils}}const c=new class{constructor(){this.progressServicePromise=new Promise((e,t)=>{a.b.loadDeviceInfo().then(t=>{e(function(e){switch(e){case a.a.Browser:return new s;case a.a.Cordova:case a.a.Electron:return new l}}(t.platform))}).catch(e=>t(e))}),$(document).on("appActivatedAfterLongTime",()=>{this.allBooksProgressPromise=null})}fetchAllBooksProgress(){return this.allBooksProgressPromise?this.allBooksProgressPromise:this.allBooksProgressPromise=new Promise((e,t)=>{this.progressServicePromise.then(o=>{o.fetchAllBooksProgress().then(t=>e(this.transformBookProgress(t))).catch(e=>t(e))})})}clear(){this.allBooksProgressPromise=null}getBookProgress(e){return new Promise((t,o)=>{this.fetchAllBooksProgress().then(o=>{t(o[e])}).catch(e=>o(e))})}fetchAudioProgress(e){return new Promise((t,o)=>{this.progressServicePromise.then(i=>{i.fetchAudioProgress(e).then(e=>t(e)).catch(e=>o(e))})})}storeProgress(e,t,o,i){return $(document).trigger("progressStore",t),this.syncProgressWithServer(),new Promise((n,r)=>{this.progressServicePromise.then(s=>{s.storeProgress(e,t,o,i).then(e=>n()).catch(e=>r(e))})})}storeLatestPage(e){new Promise((t,o)=>this.progressServicePromise.then(t=>t.storeLatestPage(e)))}getLatestPage(){return new Promise((e,t)=>this.progressServicePromise.then(t=>t.getLatestPage().then(t=>e(t)).catch(t=>e(""))))}syncProgressWithServer(){return new Promise((e,t)=>this.progressServicePromise.then(o=>o.syncProgressWithServer().then(t=>e(t)).catch(e=>{console.error("Failed to synchronize progress with server, error: ",e),t(!1)})))}transformBookProgress(e){const t={};for(const o of e)t[o.bookShortName]=o;return t}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return h}));var i=o(0),n=o(16),r=o(1),s=o(18),a=o(37),l=o(8),c=o(13),d=o(3),u=o(2);const h=new class{constructor(){this.bookElementIntroPromiseMap={},this.tocOwnershipInfoPromiseMap={},this.bookChapterOwnership={},this.startTime=Date.now()}resetCache(){this.relatedProductsPromiseMap={},this.customersAlsoBoughtPromiseMap={},this.bookElementIntroPromiseMap={},this.userEditorBooksShortNamesPromise=null,this.tocOwnershipInfoPromiseMap={},this.bookChapterOwnership={},this.userLibraryPromise=null,this.userLibrary=null,this.userLibraryAndCatalog=null,this.userLibraryAndCatalogPromise=null,this.userLibraryAndSimpleCatalog=null,this.userLibraryAndSimpleCatalogPromise=null,this.bestSellersPromise=null,this.catalogBooks=null,this.catalogPromise=null,this.simpleCatalogBooks=null,this.simpleCatalogPromise=null,this.startTime=Date.now()}markBookAsDownloaded(e){let t=null;if(null!=this.userLibrary)for(const o of this.userLibrary)if(o.shortName==e){t=o,o.hasBeenDownloaded=!0;break}if(null!=this.userLibraryAndCatalog){if(null!=this.userLibraryAndCatalog.userLibrary)for(const o of this.userLibraryAndCatalog.userLibrary)if(o.shortName==e){t=o,o.hasBeenDownloaded=!0;break}if(null!=this.userLibraryAndCatalog.catalog)for(const o of this.userLibraryAndCatalog.catalog)if(o.shortName==e){t=o,o.hasBeenDownloaded=!0;break}}this.getService().then(o=>{o.markBookAsDownloaded(e,null!=t?t.slug:"")})}unmarkBookAsDownloaded(e){let t=null;if(null!=this.userLibrary)for(const o of this.userLibrary)if(o.shortName==e){t=o,o.hasBeenDownloaded=!1;break}if(null!=this.userLibraryAndCatalog){if(null!=this.userLibraryAndCatalog.userLibrary)for(const o of this.userLibraryAndCatalog.userLibrary)if(o.shortName==e){t=o,o.hasBeenDownloaded=!1;break}if(null!=this.userLibraryAndCatalog.catalog)for(const o of this.userLibraryAndCatalog.catalog)if(o.shortName==e){t=o,o.hasBeenDownloaded=!1;break}}this.getService().then(o=>{o.unmarkBookAsDownloaded(e,null!=t?t.slug:"")}),$(document).trigger("bookDeleted",e)}getBookElement(e,t,o,i){return new Promise((n,r)=>{this.getService().then(s=>{s.getBookElement(e,t,o,i).then(e=>n(e)).catch(e=>r(e))}).catch(e=>r(e))})}getBookElementIntro(e,t,o){this.shouldReset()&&this.resetCache();const i=`${e||""}-${t||""}-${o||""}`;return null!=this.bookElementIntroPromiseMap[i]?this.bookElementIntroPromiseMap[i]:this.bookElementIntroPromiseMap[i]=new Promise((i,n)=>{this.getService().then(r=>{r.getBookElementIntro(e,t,o).then(e=>i(e)).catch(e=>n(e))}).catch(e=>n(e))})}getBookElementTokenPrice(e,t,o){return new Promise((i,n)=>{this.getService().then(r=>{r.getBookElementTokenPrice(e,t,o).then(e=>i(e)).catch(e=>n(e))}).catch(e=>n(e))})}deleteBook(e){return new Promise((t,o)=>{this.getService().then(i=>{i.deleteBook(e).then(e=>t()).catch(e=>o(e))}).catch(e=>o(e))})}getUserEditorBooksShortNames(){return this.shouldReset()&&this.resetCache(),this.userEditorBooksShortNamesPromise?this.userEditorBooksShortNamesPromise:this.userEditorBooksShortNamesPromise=new Promise((e,t)=>{this.getService().then(o=>{o.getUserEditorBooksShortNames().then(t=>e(t)).catch(e=>t(e))}).catch(e=>t(e))})}getUsersLibrary(){return this.shouldReset()&&this.resetCache(),null!=this.userLibrary?Promise.resolve(this.userLibrary):this.userLibraryPromise?this.userLibraryPromise:this.userLibraryPromise=new Promise((e,t)=>{Promise.all([this.getUserOwnedProducts(),this.getSimpleCatalog(),s.a.fetchAllBooksProgress(),this.getDownloadedBooksShortNamesAndSlugs(),this.getDownloadableBooksShortNames()]).then(t=>{const o=t[0],i=t[1],r=t[2],s=t[3],a=t[4]||[],l=[],c={};for(const e of i){this.assignBookProgress(e,r);for(const t of o)t.shortName===e.shortName&&(e.userOwnsBook=!t.partialBookOwnership,s[e.shortName]&&(e.hasBeenDownloaded=!0),c[e.shortName]||(c[e.shortName]=!0,l.push(e)),e.partialBookOwnership=t.partialBookOwnership,t.isAudio()&&(e.userOwnsAudio=!0))}const d=null!=a&&1==a.length&&"*"==a[0];l.forEach(e=>{e.lastAccessedTime=Number.isNaN(e.lastAccessedTime)?0:e.lastAccessedTime||0,e.userCanDownloadBook=d||a.indexOf(e.shortName)>=0}),n.a.sortBooksDefault(l),this.userLibrary=l,e(l)}).catch(e=>t(e))})}getUsersLibraryAndSimpleCatalog(e){return this.shouldReset()&&this.resetCache(),null!=this.userLibraryAndSimpleCatalog?Promise.resolve(this.userLibraryAndSimpleCatalog):this.userLibraryAndSimpleCatalogPromise?this.userLibraryAndSimpleCatalogPromise:this.userLibraryAndSimpleCatalogPromise=new Promise((t,o)=>{Promise.all([e?this.getUserOwnedProducts():Promise.resolve([]),this.getSimpleCatalog(),e?s.a.fetchAllBooksProgress():Promise.resolve({}),this.getDownloadedBooksShortNamesAndSlugs(),this.getDownloadableBooksShortNames()]).then(([e,o,i,r,s])=>{const a=[],l={};for(const t of o){r[t.shortName]&&(t.hasBeenDownloaded=!0),this.assignBookProgress(t,i);for(const o of e)o.shortName===t.shortName&&(t.userOwnsBook=!o.partialBookOwnership,t.partialBookOwnership=o.partialBookOwnership,l[t.shortName]||(l[t.shortName]=!0,a.push(t)),o.isAudio()&&(t.userOwnsAudio=!0))}const c=null!=s&&1==s.length&&"*"==s[0];a.forEach(e=>{e.lastAccessedTime=Number.isNaN(e.lastAccessedTime)?0:e.lastAccessedTime||0,e.userCanDownloadBook=c||s.indexOf(e.shortName)>=0}),n.a.sortBooksDefault(a),this.userLibraryAndSimpleCatalog={userLibrary:a,catalog:o},t(this.userLibraryAndSimpleCatalog)}).catch(e=>{o(e)})})}getUsersLibraryAndCatalog(e){return this.shouldReset()&&this.resetCache(),null!=this.userLibraryAndCatalog?Promise.resolve(this.userLibraryAndCatalog):this.userLibraryAndCatalogPromise?this.userLibraryAndCatalogPromise:this.userLibraryAndCatalogPromise=new Promise((t,o)=>{Promise.all([e?this.getUserOwnedProducts():Promise.resolve([]),this.getCatalog(),e?s.a.fetchAllBooksProgress():Promise.resolve({}),this.getDownloadedBooksShortNamesAndSlugs(),this.getDownloadableBooksShortNames()]).then(([e,o,i,r,s])=>{const a=[],l={};for(const t of o){r[t.shortName]&&(t.hasBeenDownloaded=!0),this.assignBookProgress(t,i);for(const o of e)o.shortName===t.shortName&&(t.userOwnsBook=!o.partialBookOwnership,t.partialBookOwnership=o.partialBookOwnership,l[t.shortName]||(l[t.shortName]=!0,a.push(t)),o.isAudio()&&(t.userOwnsAudio=!0))}const c=null!=s&&1==s.length&&"*"==s[0];a.forEach(e=>{e.lastAccessedTime=Number.isNaN(e.lastAccessedTime)?0:e.lastAccessedTime||0,e.userCanDownloadBook=c||s.indexOf(e.shortName)>=0}),n.a.sortBooksDefault(a),this.userLibraryAndCatalog={userLibrary:a,catalog:o},t(this.userLibraryAndCatalog)}).catch(e=>{o(e)})})}getUserOwnedProducts(){return new Promise((e,t)=>{this.getService().then(o=>{o.getUserOwnedProducts().then(t=>{const o=t.filter(e=>a.a.isAcceptableProductType(e.productType)).map(e=>new a.a(e.externalId,e.title,e.productType,e.productPrice,e.partialBookOwnership));e(o)}).catch(e=>t(e))}).catch(e=>t(e))})}getDownloadableBooksShortNames(){return i.b.isApp()?new Promise((e,t)=>{this.getService().then(t=>{t.getDownloadableBooksShortNames().then(t=>e(t)).catch(t=>e([]))}).catch(t=>e([]))}):Promise.resolve([])}getBestsellers(){return this.shouldReset()&&this.resetCache(),this.bestSellersPromise?this.bestSellersPromise:this.bestSellersPromise=new Promise((e,t)=>{this.getService().then(t=>{Promise.all([h.getSimpleCatalog(),t.getBestsellers()]).then(([t,o])=>{const i={};for(let e of o)i[e.id]=!0;e(t.filter(e=>i[e.manningId]))})}).catch(e=>t(e))})}getCompleteBookElementPriceInfo(e,t,o){return new Promise((i,n)=>{this.getService().then(r=>{r.getCompleteBookElementPriceInfo(e,t,o).then(e=>i(e)).catch(e=>n(e))}).catch(e=>n(e))})}getBook(e,t,o){return new Promise((i,n)=>{this.getService().then(r=>{r.getBook(e,t,o).then(e=>i(c.a.createBookFromBookData(e))).catch(e=>n(e))}).catch(e=>n(e))})}getFreePreviewStatus(e){return new Promise((t,o)=>{this.getService().then(i=>{i.getFreePreviewStatus(e).then(e=>t(e)).catch(e=>o(e))})})}getMeaps(){return new Promise((e,t)=>{this.getSimpleCatalog().then(t=>{const o=t.filter(e=>-1!==e.title.indexOf("MEAP"));n.a.sortBooksByLastUpdateDate(o),e(o)}).catch(e=>t(e))})}getPublished(e){return new Promise((e,t)=>{this.getSimpleCatalog().then(t=>{let o=t.filter(e=>!e.isMeap&&!e.isFreeEbook&&!e.isReview);n.a.sortBooksByLastUpdateDate(o),o=o.slice(0,30),e(o)}).catch(e=>t(e))})}getLatestBooks(e){return new Promise((e,t)=>{this.getSimpleCatalog().then(t=>{n.a.sortBooksByLastUpdateDate(t),t=t.slice(0,30).filter(e=>!(e.isReview&&!e.isMeap)),e(t)}).catch(e=>t(e))})}getSimpleCatalog(){return this.shouldReset()&&this.resetCache(),this.simpleCatalogBooks&&this.simpleCatalogBooks.length>0?Promise.resolve(this.simpleCatalogBooks):this.simpleCatalogPromise?this.simpleCatalogPromise:this.simpleCatalogPromise=new Promise((e,t)=>{this.getService().then(o=>{o.getSimpleCatalog().then(t=>{this.simpleCatalogBooks=t.map(e=>this.createCatalogBookFromWebData(e)),this.simpleCatalogBooks.sort((e,t)=>e.lastUpdateDate>t.lastUpdateDate?-1:e.lastUpdateDate<t.lastUpdateDate?1:0),e(this.simpleCatalogBooks)}).catch(e=>t(e))})})}getMediumCatalog(){return this.shouldReset()&&this.resetCache(),this.mediumCatalogBooks&&this.mediumCatalogBooks.length>0?Promise.resolve(this.mediumCatalogBooks):this.mediumCatalogPromise?this.mediumCatalogPromise:this.mediumCatalogPromise=new Promise((e,t)=>{this.getService().then(o=>{o.getMediumCatalog().then(t=>{this.mediumCatalogBooks=t.map(e=>this.createCatalogBookFromWebData(e)),this.mediumCatalogBooks.sort((e,t)=>e.lastUpdateDate>t.lastUpdateDate?-1:e.lastUpdateDate<t.lastUpdateDate?1:0),e(this.mediumCatalogBooks)}).catch(e=>t(e))})})}getCatalog(){return this.shouldReset()&&this.resetCache(),this.catalogBooks&&this.catalogBooks.length>0?Promise.resolve(this.catalogBooks):this.catalogPromise?this.catalogPromise:this.catalogPromise=new Promise((e,t)=>{this.getService().then(o=>{o.getCatalog().then(t=>{this.catalogBooks=t.map(e=>this.createCatalogBookFromWebData(e)),this.catalogBooks.sort((e,t)=>e.lastUpdateDate>t.lastUpdateDate?-1:e.lastUpdateDate<t.lastUpdateDate?1:0),e(this.catalogBooks)}).catch(e=>t(e))})})}getGeneralProducts(e){return new Promise((t,o)=>{this.getService().then(i=>{i.getGeneralProducts(e).then(e=>t(e)).catch(e=>o(e))})})}getBooksFromCatalog(e){return new Promise((t,o)=>{const i={};for(const t of e)i[t]=!0;h.getCatalog().then(e=>t(e.filter(e=>i[e.shortName]))).catch(e=>o(e))})}getRelatedProducts(e){return this.shouldReset()&&this.resetCache(),this.relatedProductsPromiseMap||(this.relatedProductsPromiseMap={}),this.relatedProductsPromiseMap[e]?this.relatedProductsPromiseMap[e]:this.relatedProductsPromiseMap[e]=new Promise((t,o)=>{this.getService().then(o=>{o.getRelatedProducts(e).then(e=>{t(this.expandRelatedProducts(e))}).catch(e=>t([]))})})}getCustomersAlsoBoughtProducts(e){return this.customersAlsoBoughtPromiseMap||(this.customersAlsoBoughtPromiseMap={}),this.customersAlsoBoughtPromiseMap[e]?this.customersAlsoBoughtPromiseMap[e]:this.customersAlsoBoughtPromiseMap[e]=new Promise((t,o)=>{this.getService().then(o=>{o.getCustomersAlsoBoughtProducts(e).then(e=>t(this.expandCustomersAlsoBought(e))).catch(e=>t([]))})})}getChapterOwnership(e){return this.bookChapterOwnership[e]?this.bookChapterOwnership[e]:this.bookChapterOwnership[e]=new Promise((t,o)=>{this.getService().then(i=>{i.getChapterOwnership().then(o=>{m(o[e],e),t(o[e])}).catch(e=>{o(e)})})})}getTocOwnership(e){return this.tocOwnershipInfoPromiseMap[e]?this.tocOwnershipInfoPromiseMap[e]:this.tocOwnershipInfoPromiseMap[e]=new Promise((t,o)=>{this.getService().then(o=>{o.getTocOwnership(e).then(o=>{m(o,e),t(o)})})})}getBooksDetails(e){return new Promise((t,o)=>{this.getService().then(i=>{i.getBooksDetails(e).then(e=>t(e)).catch(e=>o(e))})})}getBookDates(e){return new Promise((t,o)=>{this.getService().then(i=>{i.getBookDates(e).then(e=>{t({meapStart:e.meapStart||"",publishedDate:e.publishedDate||"",expectedPublishDate:e.expectedPublishDate||"",pbookAvailabilityDate:e.pbookAvailabilityDate||"",ebookAvailabilityDate:e.ebookAvailabilityDate||"",expectedPbookAvailabilityDate:e.expectedPbookAvailabilityDate||"",expectedEbookAvailabilityDate:e.expectedEbookAvailabilityDate||""})}).catch(e=>o())})})}getDownloadedBooksShortNamesAndSlugs(){return new Promise((e,t)=>{this.getService().then(o=>{o.getDownloadedBooksShortNamesAndSlugs().then(t=>e(t)).catch(e=>t(e))})})}assignBookProgress(e,t){const o=t[e.shortName];o?(e.progressBookElement=o.bookElementShortName,e.lastBookElementItem=o.contentItemID||"",o.reviewVersion?e.bookPath=r.a.getBookElementUrl(e.slug,e.progressBookElement,o.meapVersion,o.reviewVersion)+e.lastBookElementItem:e.bookPath=r.a.getBookElementUrl(e.slug,e.progressBookElement,e.latestMeapVersion)+e.lastBookElementItem,e.lastAccessedTime=parseInt(`${o.timeStamp||0}`)):(e.progressBookElement="",e.lastBookElementItem="",e.bookPath=r.a.getBookElementUrl(e.slug,e.progressBookElement,e.latestMeapVersion),e.lastAccessedTime=0)}createCatalogBookFromWebData(e){const t=new n.a;return t.manningId=e.manningId,t.shortName=e.shortName,t.title=e.title,t.cleanTitle=c.a.cleanBookTitle(t.title),t.isReview=!!e.isReview,t.isMeap=!!e.meap,t.isFreeEbook=!!e.isFreeEbook,t.latestMeapVersion=e.latestMeapVersion||0,t.slug=e.slug,t.authors=e.authors,t.userCanViewReviews=!!e.userCanViewReviews,t.userIsReviewer=!!e.userIsReviewer,t.userIsAuthor=!!e.userIsAuthor,t.userIsEditor=!!e.userIsEditor,t.categories=e.categories,t.description=e.description,t.lastUpdateDate=l.a.getDateFromString(e.lastUpdateDate),t.exercisesComingSoon=e.exercisesComingSoon,t.bookPath=r.a.getBookElementUrl(e.slug,"chapter-1",t.latestMeapVersion),t.bookCoverPath=r.a.getBookCoverUrl(e.shortName),t.hasAudio=e.hasAudio,t.hasExercises=e.hasExercises,t.hasTextAddendums=e.hasTextAddendums,t.hasKnowledgeGraph=e.hasKnowledgeGraph,t.isKnowledgeGraphAccessible=e.isKnowledgeGraphAccessible,t.categories=e.categories||"",t.isbn=e.isbn,null!=e.offlineFileSizes&&(t.offlineFileSizes=e.offlineFileSizes),t}expandCustomersAlsoBought(e){return(e=(e=e||[]).filter(e=>e&&e.livebook)).forEach(e=>{e.imageUrl=r.a.getBookCoverUrl(e.externalId),e.link=r.a.getBookUrl(e.slug)}),e}expandRelatedProducts(e){return(e=(e=e||[]).filter(e=>e)).forEach(e=>{e.livebook?(e.imageUrl=r.a.getBookCoverUrl(e.externalId),e.link=r.a.getBookUrl(e.slug)):(e.imageUrl.startsWith("http")||(e.imageUrl=r.a.getMarketplaceProductCoverUrl(e.imageUrl)),e.link=r.a.getMarketplaceProductUrl(e.slug,e.livevideo))}),e}shouldReset(){return i.b.isConnected()&&Date.now()-this.startTime>d.a.refreshDataAfter}getService(){return null!=this.bookContentProviderService?this.bookContentProviderService:this.bookContentProviderService=new Promise((e,t)=>{i.b.loadDeviceInfo().then(t=>{switch(t.platform){case i.a.Browser:this.getWebSource().then(({BookContentServiceWeb:t})=>{e(t)}).catch(e=>{this.bookContentProviderService=null,console.log("Couldn't load book content service web")});break;case i.a.Cordova:case i.a.Electron:this.getFsSource().then(({BookContentServiceFileSystem:t})=>{e(t)}).catch(e=>{this.bookContentProviderService=null,console.log("Couldn't load content feedback service fs")})}}).catch(e=>t(e))})}getWebSource(){return this.webSourcePromise||(this.webSourcePromise=u.a.importWebpackModuleWithRetry(this.constructWebSourcePromise)),this.webSourcePromise}constructWebSourcePromise(){return o.e(25).then(o.bind(null,61))}getFsSource(){return this.fsSourcePromise||(this.fsSourcePromise=u.a.importWebpackModuleWithRetry(this.constructFsSourcePromise)),this.fsSourcePromise}constructFsSourcePromise(){return o.e(24).then(o.bind(null,68))}},g={};function m(e,t){if(null!=e&&null!=e.partialChapterOwnership)try{const o=g[t];if(o)for(const t in o){const o=e.partialChapterOwnership.find(e=>e.shortName==t);null!=o&&(o.userOwned=!0)}}catch(e){console.log(e)}}$(document).on("unlockSectionSubsectionSuccess",(e,t,o,i)=>{g[t]||(g[t]={}),g[t][o]||(g[t][o]={}),i&&(g[t][o][i]=!0)})},function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o(2);const n=new class{showBrowsablePreview(e,t){this.getSource().then(({LinkPreviewer:o})=>o.showBrowsablePreview(e,t))}showWithinChapterPreview(e,t){this.getSource().then(({LinkPreviewer:o})=>o.showWithinChapterPreview(e,t))}showBookElementPreview(e,t){this.getSource().then(({LinkPreviewer:o})=>o.showBookElementPreview(e,t))}hidePreview(e,t){this.sourcePromise&&this.getSource().then(({LinkPreviewer:o})=>o.hidePreview(e,t))}clean(){this.sourcePromise&&this.getSource().then(({LinkPreviewer:e})=>e.clean())}getSource(){return this.sourcePromise||(this.sourcePromise=i.a.importWebpackModuleWithRetry(this.constructSourcePromise),i.a.loadVelocityCode()),this.sourcePromise}constructSourcePromise(){return o.e(56).then(o.bind(null,69))}}},function(e,t,o){"use strict";var i=o(11),n=o(9);const r=$(document);t.a=new class{constructor(){this.$notificationBox=$("#notification-box"),0==this.$notificationBox.length&&($(document.body).append('<div id="notification-box" class="alert-box success radius hover-box">\n                    <span class="notification-content"></span>\n                    <a href="javascript:void(0)" class="close">&times;</a>\n                </div>'),this.$notificationBox=$("#notification-box")),this.$notificationContent=this.$notificationBox.find(".notification-content"),this.$notificationBox.on("click","a",()=>this.hideNotificationBox()),r.on("requestNotification",(e,t)=>this.showTemporaryNotification(t)),r.on("requestPermanentNotification",(e,t)=>this.showNotification(t)),r.on("requestLongNotification",(e,t,o)=>this.showLongNotification(t,o)),r.on("requestNotificationTextChange",(e,t)=>this.setNotificationMessage(t)),r.on("hideNotification",e=>this.hideNotificationBox()),r.on("modalClosed",(e,t)=>{const o=$(t);o.is("#notifications-modal")&&o.find(".notifications-modal-message").html("")})}showNotificationModal(e,t,o=!0,n){const r=$("#notifications-modal");r.find(".notifications-modal-title").text(e),r.find(".notifications-modal-message").html(t),r.find(".modal-command-row").toggleClass("hidden",!o),n&&r.find(".modal-action-button").one("click",()=>{n&&n(r)}),i.a.showFoundationModal(r)}hideNotificationModal(){const e=$("#notifications-modal");e.find(".modal-action-button").off("click"),i.a.hideFoundationModal(e)}showNotification(e){this.setNotificationMessage(e),this.showNotificationBox()}hideNotification(){this.hideNotificationBox()}showTemporaryNotification(e){this.showNotification(e),this.hideNotificationTimeout&&clearTimeout(this.hideNotificationTimeout),this.hideNotificationTimeout=setTimeout(()=>this.hideNotificationBox(),5e3)}showLongNotification(e,t){this.showNotification(e),t&&this.$notificationBox.find(".close").addClass(t),this.hideNotificationTimeout&&clearTimeout(this.hideNotificationTimeout),this.hideNotificationTimeout=setTimeout(()=>this.hideNotificationBox(),15e3)}setNotificationMessage(e){this.$notificationContent.html(e)}showNotificationBox(){this.$notificationBox.css({display:"block",bottom:`${1.2*n.a.getFooterHeight()}px`})}hideNotificationBox(){this.$notificationBox.css({display:"none"}),this.$notificationBox.find(".close").attr("class","close"),this.hideNotificationTimeout=null}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var i=o(0),n=o(3),r=o(12),s=o(2),a=o(6);const l=new class{initalizeDiscussionNotificationParagraphs(e,t){this.getDiscussionParagraphNotificationsSource().then(({DiscussionParagraphNotifications:o})=>{o.initialize(e,t)})}initialize(){this.loadCodeOnInteraction=this.loadCodeOnInteraction.bind(this),$(document).on("click",".text-margin-icon-bubble.forums-bubble",this.loadCodeOnInteraction)}initializeIfNecessary(e,t){null!=this.discussionsMenuSourcePromise&&this.getDiscussionsMenuSource().then(({DiscussionsMenu:o})=>o.initialize(e,t))}initializeAndOpen(e,t){this.getDiscussionsMenuSource().then(({DiscussionsMenu:o})=>{o.initialize(e,t,null!=t?t.shortName:"",!0)}),$(document).off("click",".text-margin-icon-bubble.forums-bubble",this.loadCodeOnInteraction)}clean(){Promise.all([this.getDiscussionsMenuSource()]).then(([{DiscussionsMenu:e}])=>e.clean())}load(e=""){this.getDiscussionsMenuSource().then(({DiscussionsMenu:t})=>t.initialize(n.a.book,n.a.bookElement,e)),$(document).off("click",".text-margin-icon-bubble.forums-bubble",this.loadCodeOnInteraction)}loadCodeOnInteraction(e){let t="click"==e.type||i.b.isTouchEventOnTouchDevice(e.type);this.getDiscussionsMenuSource().then(({DiscussionsMenu:e})=>{e.initialize(n.a.book,n.a.bookElement),t&&e.open()}),$(document).off("click",".text-margin-icon-bubble.forums-bubble",this.loadCodeOnInteraction),e&&e.stopImmediatePropagation()}requestOpen(e,t){Promise.all([this.getDiscussionsMenuSource()]).then(([{DiscussionsMenu:o}])=>{null!=e&&null!=t?o.initialize(e,t,t.shortName,!0):o.initialize(null,null,"",!0)})}requestShowCommentWhenReady(e,t=0,o,i){let n="",s=!1,l=!1,c=!1;0==e.indexOf("not-spam-")?(l=!0,n=e.substring("not-spam-".length)):0==e.indexOf("spam-")?(s=!0,n=e.substring("spam-".length)):0==e.indexOf("edit-suggestion-")?(c=!0,n=e.substring("edit-suggestion-".length)):n=e,Promise.all([this.getDiscussionsMenuSource()]).then(([{DiscussionsMenu:e}])=>{function d(r=o){e.showCommentWhenReady(n,t,r,i)}s||c||l?a.a.isLoggedIn().then(t=>{t.loggedIn?s?d(()=>{e.markAsSpam(n),o&&o()}):l?d(()=>{$(document).trigger("requestNotification","Removing spam flags"),e.clearSpamFlags(n).then(()=>{$(document).trigger("requestNotification","Spam flags removed!")}).catch(e=>$(document).trigger("requestNotification","Error removing spam flags"))}):c&&e.markAsEditSuggestion(n).then(()=>d()).catch(()=>d()):r.a.requestLogin("sign in to discuss","discussion")}):d()})}requestOpenParagraphSideMenu(e){Promise.all([this.getDiscussionsMenuSource()]).then(([{DiscussionsMenu:t}])=>{t.openParagraphSideMenu(e)})}getDiscussionParagraphNotificationsSource(){return this.discussionParagraphSourcePromise||(this.discussionParagraphSourcePromise=s.a.importWebpackModuleWithRetry(this.constructDiscussionParagraphsNotificationsSourcePromise)),this.discussionParagraphSourcePromise}constructDiscussionParagraphsNotificationsSourcePromise(){return Promise.all([o.e(8),o.e(98),o.e(3),o.e(36)]).then(o.bind(null,60))}getDiscussionsMenuSource(){return this.discussionsMenuSourcePromise||(this.discussionsMenuSourcePromise=s.a.importWebpackModuleWithRetry(this.constructDiscussionsMenuSourcePromise)),this.discussionsMenuSourcePromise}constructDiscussionsMenuSourcePromise(){return Promise.all([o.e(0),o.e(1),o.e(2),o.e(5),o.e(35)]).then(o.bind(null,82))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o(2);const n=new class{initializeDownloadManager(){this.getDownloadManagerSource().then(({DownloadManager:e})=>e.initialize())}requestBookDeletion(e){this.getDownloadManagerSource().then(({DownloadManager:t})=>t.requestBookDeletion(e))}requestBookCancel(e){this.getDownloadManagerSource().then(({DownloadManager:t})=>t.requestBookCancel(e))}requestBookDownload(e,t){this.getDownloadManagerSource().then(({DownloadManager:o})=>o.requestBookDownload(e,t))}initilizeOfflineOperationsModal(){this.getOfflineOperationsModalSource().then(({OfflineOperationsModal:e})=>e.initialize())}initializeUpdateManager(){this.getUpdateManagerSource().then(({UpdateManager:e})=>e.initialize())}synchronizeUserCreatedData(){this.getSynchronizerProviderSource().then(({SynchronizerProvider:e})=>e.triggerSynchronization())}initializeDownloadProgressButtons(e){this.getDownloadProgressButtonsSource().then(({DownloadProgressButton:t})=>{e.find(".download-status-container").each((e,o)=>{const i=$(o);if(0==i.find(".download-progress-button").length){const e=new t(o);o.downloadProgressButton=e,i.hasClass("downloaded")&&e.markAsDownloaded()}})})}getDownloadManagerSource(){return this.downloadManagerSourcePromise||(this.downloadManagerSourcePromise=i.a.importWebpackModuleWithRetry(this.constructDownloadManagerSourcePromise)),this.downloadManagerSourcePromise}constructDownloadManagerSourcePromise(){return Promise.all([o.e(6),o.e(37)]).then(o.bind(null,64))}getOfflineOperationsModalSource(){return this.offlineOperationsModalSourcePromise||(this.offlineOperationsModalSourcePromise=i.a.importWebpackModuleWithRetry(this.constructOfflineOperationsModalSourcePromise)),this.offlineOperationsModalSourcePromise}constructOfflineOperationsModalSourcePromise(){return o.e(6).then(o.bind(null,59))}getUpdateManagerSource(){return this.updateManagerSourcePromise||(this.updateManagerSourcePromise=i.a.importWebpackModuleWithRetry(this.constructUpdateManagerSourcePromise)),this.updateManagerSourcePromise}constructUpdateManagerSourcePromise(){return Promise.all([o.e(6),o.e(94)]).then(o.bind(null,78))}getSynchronizerProviderSource(){return this.synchronizerProviderSourcePromise||(this.synchronizerProviderSourcePromise=i.a.importWebpackModuleWithRetry(this.constructSynchronizerProviderSourcePromise)),this.synchronizerProviderSourcePromise}constructSynchronizerProviderSourcePromise(){return Promise.all([o.e(3),o.e(79)]).then(o.bind(null,79))}getDownloadProgressButtonsSource(){return this.downloadProgressButtonsSourcePromise||(this.downloadProgressButtonsSourcePromise=i.a.importWebpackModuleWithRetry(this.constructDownloadProgressButtonsSourcePromise)),this.downloadProgressButtonsSourcePromise}constructDownloadProgressButtonsSourcePromise(){return o.e(38).then(o.bind(null,57))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o(28);class n{constructor(e,t,o,n=[]){this.shortName=e,this.title=t,this.link=i.a.adjustBookLink(o||""),this.introItems=n}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var i=o(4),n=o(0),r=o(2),s=o(5),a=o(19),l=o(1);const c=new class{constructor(){this.bookShortNameNewestEditionMap={},this.loadCodeOnInteraction=this.loadCodeOnInteraction.bind(this)}initialize(){i.a.onPassiveEvent(document.querySelectorAll(".shopping-cart-button"),["mouseenter","touchstart","click"],this.loadCodeOnInteraction)}loadCodeOnInteraction(e){let t="click"==e.type||n.b.isTouchEventOnTouchDevice(e.type);t||i.a.offPassiveEvent(document.querySelectorAll(".shopping-cart-button"),[e.type],this.loadCodeOnInteraction),this.getSource().then(({ShoppingCartManager:e})=>{t&&e.requestMenuOpen()})}requestMenuOpen(){Promise.all([this.getSource()]).then(([{ShoppingCartManager:e}])=>{e&&e.requestMenuOpen()})}requestAddBookToCartByBookShortName(e,t){return Promise.all([this.getSource(),a.a.getMediumCatalog()]).then(([{ShoppingCartManager:o},i])=>{const n=null!=i&&i.length>0?i.find(t=>t.shortName==e):null;null!=n&&o&&o.requestAddBookToCart(n,!1,t)})}requestAddBookToCart(e,t,o,i=!1,n=!1){Promise.all([this.getSource()]).then(([{ShoppingCartManager:r}])=>{r&&r.requestAddBookToCart(e,t,o,i,n)})}requestAddNewerEditionToCart(e){Promise.all([this.getSource()]).then(([{ShoppingCartManager:t}])=>{t.requestAddNewerEditionToCart(e)})}getProductOfferings(e){return new Promise((t,o)=>{Promise.all([this.getSource()]).then(([{ShoppingCartManager:o}])=>{t(o.getProductOfferings(e))}).catch(e=>o(e))})}getNewestEditionProduct(e){return e&&e.manningId?this.bookShortNameNewestEditionMap[e.shortName]?Promise.resolve(this.bookShortNameNewestEditionMap[e.shortName]):new Promise((t,o)=>{l.a.getFromOurBackend(l.a.getAbsoluteUrl("api/cart/getNewestEditionProduct"),o=>{o&&o.newestEditionProduct&&o.newestEditionProduct.title?t(this.bookShortNameNewestEditionMap[e.shortName]=o):t(this.bookShortNameNewestEditionMap[e.shortName]=null)},e=>t(null),{manningId:e.manningId})}):Promise.resolve(null)}getProductDiscounts(e,t){return new Promise((o,i)=>{Promise.all([this.getSource()]).then(([{ShoppingCartManager:i}])=>{o(i.getProductDiscounts(e,t))}).catch(e=>i(e))})}isDotd(e){return new Promise((t,o)=>{Promise.all([this.getSource()]).then(([{ShoppingCartManager:o}])=>{t(o.isDotd(e))}).catch(e=>o(e))})}getTokenProductOffering(){return new Promise((e,t)=>{Promise.all([this.getSource()]).then(([{ShoppingCartManager:t}])=>{e(t.getTokenProductOffering())})})}addTokensToCart(e){return new Promise((t,o)=>{Promise.all([this.getSource()]).then(([{ShoppingCartManager:o}])=>{t(o.addTokensToCart(e))}).catch(e=>o(e))})}getBookPrice(e){return new Promise((t,o)=>{Promise.all([this.getSource()]).then(([{ShoppingCartManager:o}])=>{t(o.getBookPrice(e))}).catch(e=>o(e))})}initializeShoppingCartStore(){return new Promise((e,t)=>{Promise.all([this.getSource()]).then(([{ShoppingCartManager:t}])=>{e(t.initializeShoppingCartStore())}).catch(e=>t(e))})}getProductSpendingInfo(e){return new Promise((t,o)=>{Promise.all([this.getSource()]).then(([{ShoppingCartManager:o}])=>{t(o.getProductSpendingInfo(e))}).catch(e=>o(e))})}isEbookInShoppingCart(e){if(e)return null!=this.getShoppingCartItems().find(t=>t.productId===e.manningId&&!t.isCombo)}isComboInShoppingCart(e){if(e)return null!=this.getShoppingCartItems().find(t=>t.productId===e.manningId&&t.isCombo)}isAudioInShoppingCart(e){if(e)return null!=this.getShoppingCartItems().find(t=>t.productId===e.manningId&&null!=t.childItems&&t.childItems.length>0&&null!=t.childItems.find(e=>e.isSelected))}isInShoppingCartByManningId(e){return!!e&&null!=this.getShoppingCartItems().find(t=>t.productId==e)}getShoppingCartItems(){return JSON.parse(s.a.getItem("shopping-cart-items")||"[]")}requestOpenLogin(){return new Promise((e,t)=>{Promise.all([this.getSource()]).then(([{ShoppingCartManager:t}])=>{e(t.showLoginModal())}).catch(e=>t(e))})}getSource(){return this.sourcePromise||(this.sourcePromise=r.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(105),o.e(77)]).then(o.bind(null,85))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(0),n=o(4),r=o(12);const s=$(document);const a=new class{constructor(){this.isDisabled=!0,this.hideBrowseHeader=this.hideBrowseHeader.bind(this),this.$header=$("#header"),s.on("disableToolbarHiding",()=>this.disableHiding()),s.on("enableToolbarHiding",()=>this.enableHiding()),n.a.onDescendantEventWithCooldown(this.$header,"click touchstart",".header-sign-in-button-container",()=>{r.a.requestLogin()})}registerEvents(){const e=$("#header .browse-item-container"),t=()=>{const t=$("#header-browse-container");t.toggleClass("collapsed"),t.is(".collapsed")?e.find(".header-icon-label").text("browse"):e.find(".header-icon-label").text("close"),t.is(".collapsed")||$(document).trigger("searchHideRequested").trigger("slideMenuCloseRequested")};e.on("click",t),$(document).on("click",".settings-menu-browse-item",t),$("#header-browse-container a").on("click",this.hideBrowseHeader),$(document).on("searchOpen",this.hideBrowseHeader)}hideBrowseHeader(){$("#header-browse-container").addClass("collapsed"),$("#header .browse-item-container .header-icon-label").text("browse")}initialize(){i.b.isIOS()||(this.isDisabled?this.disableHiding():this.enableHiding())}disableHiding(){i.b.isIOS()||(this.isDisabled=!0)}enableHiding(){i.b.isIOS()||(this.isDisabled=!1)}disableAndRevert(){i.b.isIOS()||this.disableHiding()}}},function(e,t,o){"use strict";var i=o(4),n=o(7),r=o(18),s=o(6),a=o(1),l=o(3);const c=$(document);t.a=new class{constructor(){this.noOfUnsyncedItems=0,this.noOfUnsyncedItemsLimit=5,this.isDataSynced=!0,this.progressMap={},c.on("readableTextListened",(e,t)=>this.handleParagraphListened(t)),c.on("readableElementScrolled",(e,t)=>this.handleParagraphScrolled(t)),c.on("progressSavedRequested",()=>{null!=this.bookElement&&(this.isDataSynced||this.storeProgress())})}initialize(e,t){this.clean(),this.book=e,this.bookElement=t,this.fetchAudioProgress(),this.periodicallySyncProgressIfNecessary(),this.storeLatestPage()}clean(){this.isDataSynced||this.storeProgressIfBookChanges(),this.book=null,this.bookElement=null,this.completedContentItemIDs=null,this.lastContentItemID=null,this.noOfUnsyncedItems=0,this.isDataSynced=!0}storeProgressIfBookChanges(){if(!s.a.isCurrentlyLoggedIn())return;this.updateInternalProgressCache();const e=null!=this.book?this.book.shortName:"",t=null!=this.book?this.book.slug:"",o=this.bookElement,i=this.completedContentItemIDs,a=this.lastContentItemID;setTimeout(()=>{const s=n.a.getCurrentRouteInfo();let l=null==s;l||(l=s.book!==e&&s.book!==t),l&&r.a.storeProgress(o,i,a,!1)},250)}periodicallySyncProgressIfNecessary(){i.a.setTimeout(()=>{this.isDataSynced||(this.storeProgress(),this.isDataSynced=!0),this.periodicallySyncProgressIfNecessary()},3e4)}storeProgress(){s.a.isCurrentlyLoggedIn()&&(this.updateInternalProgressCache(),this.storeLatestPage(),r.a.storeProgress(this.bookElement,this.completedContentItemIDs,this.lastContentItemID))}fetchAudioProgress(){this.book&&this.book.userOwnsBook&&this.book.userOwnsAudio&&this.book.hasAudio&&s.a.isCurrentlyLoggedIn()?r.a.fetchAudioProgress(this.bookElement).then(e=>{e||(e={}),this.completedContentItemIDs=e,this.lastContentItemID=this.getLastCompletedContentItemId(e),c.trigger("progressLoaded",e)}).catch(e=>c.trigger("progressLoaded",{})):c.trigger("progressLoaded",{})}syncData(){this.timerId=null,this.isDataSynced||(this.noOfUnsyncedItems++,this.noOfUnsyncedItems>=this.noOfUnsyncedItemsLimit&&(this.storeProgress(),this.noOfUnsyncedItems=0,this.isDataSynced=!0))}handleParagraphListened(e){if(this.completedContentItemIDs&&this.book&&this.book.userOwnsBook&&this.book.userOwnsAudio&&e){if(this.completedContentItemIDs&&!this.completedContentItemIDs[e]&&(this.completedContentItemIDs[e]=1,this.isDataSynced=!1),this.lastContentItemID!=e){$(document.getElementById(e)).is(".readable-text")&&(this.lastContentItemID=e,this.isDataSynced=!1)}this.timerId||(this.timerId=i.a.setTimeout(()=>this.syncData(),1e3))}}handleParagraphScrolled(e){this.book&&this.bookElement&&(!e&&this.bookElement.pdf&&(e="1"),this.book.lastBookElementItem=e,this.lastContentItemID=e,this.isDataSynced=!1,this.updateInternalProgressCache())}getLastCompletedContentItemId(e){if(!e)return"";try{let t=-1;for(const o in e){if(!e.hasOwnProperty(o))continue;const i=parseInt(o);!isNaN(i)&&i>t&&(t=i)}return-1!=t?t:""}catch(e){return""}}updateInternalProgressCache(){this.progressMap[this.book.shortName]={bookElement:this.bookElement.shortName,position:this.lastContentItemID,lastAccessTime:Date.now(),meapVersion:this.bookElement.meapVersion,reviewVersion:this.bookElement.reviewVersion}}storeLatestPage(e){let t=a.a.getBookPageUrl("book",l.a.book&&l.a.book.slug,l.a.bookElement&&l.a.bookElement.shortName,l.a.bookElement&&l.a.bookElement.meapVersion?l.a.bookElement.meapVersion:0,0)+(e||this.lastContentItemID||"");0==t.indexOf("#!/")&&(t=t.substring("#!/".length)),0==t.indexOf("/")&&(t=t.substring(1)),r.a.storeLatestPage(t)}getLatestPage(){return r.a.getLatestPage()}resetLatestBookPage(){r.a.storeLatestPage("")}getLatestLocation(){if(!this.progressMap||null==l.a.book||!this.progressMap[l.a.book.shortName])return;const e=this.progressMap[l.a.book.shortName];return e.bookElement==l.a.bookElement.shortName?e.position:void 0}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return LinksUtils}));var _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_BookContentUtils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13),_DOMUtils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11),_WebUtils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),_EventUtils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4),_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9),_RouteUtils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7),_managers_ScreenScrollManager__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(39),_features_discussions_DiscussionModule__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(22),_modules_UnlockModule__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(29),_features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(20);const IS_ON_DEVICE=void 0,$document=$(document);class LinksUtilsClass{constructor(){this.pageCounter=0,_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__.b.loadDeviceInfo().then(e=>{this.currentPlatform=e.platform,$("body").on("click","a:not(.immediately-go-to-link)",e=>LinksUtils.handleLinkClick(e,e.currentTarget)),e.isTouchDevice||(_EventUtils__WEBPACK_IMPORTED_MODULE_4__.a.onDescendantEventWithCooldown($("body"),"mouseenter","#book-markup-container a",e=>this.handleLinkHover(e,e.currentTarget)),$("body").on("mouseleave","#book-markup-container a",e=>LinksUtils.handleLinkLeave(e.currentTarget)))})}clean(){_features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__.a.hidePreview(!1,!0)}adjustBookLink(e){if(e=e||"",IS_ON_DEVICE){const t=e.indexOf("#!");return 0==t?e:1==t?e.substr(1):("#!/"+e).replace(/\/\//,"/")}return e.replace("#!/","/")}formLink(e,t,o=""){return`${this.getBasePath()}${this.formHash(e,t)}${o}`}formReviewReportLinkFromBookSlugAndBookElementShortName(e,t,o){return`${this.getBasePath()}${this.formReviewReportPartFromSlugAndShortNames(e,t,o)}`}formLinkFromBookSlugAndBookElementShortName(e,t){return`${this.getBasePath()}${this.formBookPartFromSlugAndShortNames(e,t)}`}formEditLinkFromBookSlugAndBookElementShortName(e,t){return`${this.getBasePath()}${this.formEditHashFromSlugAndShortNames(e,t)}`}getBasePath(){return _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__.b.isApp()?_WebUtils__WEBPACK_IMPORTED_MODULE_3__.a.getInitialPageLocation():`${document.location.protocol}//${document.location.host}`}formHash(e,t){if(null==e||null==t)return"";let o=`/book/${e.slug}/${t.shortName}/`;return IS_ON_DEVICE&&(o="#!"+o),t.meapVersion>0?o+=`v-${t.meapVersion}/`:t.reviewVersion>0&&(o+=`r-${t.reviewVersion}/`),o}formBookPartFromSlugAndShortNames(e,t){let o=`/book/${e}/${t}`;return IS_ON_DEVICE&&(o="#!"+o),o}formReviewReportPartFromSlugAndShortNames(e,t,o){let i=`/review-report/${e}/${o||""}`;return IS_ON_DEVICE&&(i="#!"+i),i}formEditHashFromSlugAndShortNames(e,t){let o=`/edit/${e}/${t}`;return IS_ON_DEVICE&&(o="#!"+o),o}trimLastSlash(e){return e&&0!=e.length?"/"==e[e.length-1]?e.substring(0,e.length-1):e:""}handleLinkClick(e,t){const o=$(t),i=$(e.target),n=$(e.currentTarget),r=i.closest(".dont-propagate-click");if(i.is(".dont-propagate-click")||n.is(".dont-propagate-click")||r.length>0&&$.contains(n[0],r[0]))return void e.preventDefault();if((i.is(".immediately-go-to-link")||n.is(".immediately-go-to-link"))&&(document.location.href=t.href),i.is("#livebook-button"))return void e.preventDefault();if(!_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__.b.isConnected()&&_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__.b.isApp()&&n.is(".open-book-link.not-downloaded-book"))return $(document).trigger("requestNotification","Please connect to the internet to open this book"),void e.preventDefault();if(_features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__.a.hidePreview(),-1!=t.href.indexOf("data:"))return!0;if(-1!=t.href.indexOf("javascript:void(0)"))return!0;if(!t.href||t.href===document.location.href||t.href===document.location.href+"#")return e.preventDefault(),!1;if(o.is(".reload-link")&&_WebUtils__WEBPACK_IMPORTED_MODULE_3__.a.reloadPage(),t.href.indexOf("search-")>=0&&$document.trigger("searchSuggestion",["link",t.href]),o.closest(".cart-upsell-root").length&&o.attr("data-product-id")&&$(document).trigger("customersAlsoBought",[t,+o.attr("data-product-id")]),this.isThirdPartyLink(t.href)||e.ctrlKey||e.metaKey||2===e.which||"_blank"==o.attr("target"))return e.preventDefault(),this.openLinkInNewTab(t.href),!1;-1==t.href.indexOf("javascript:")&&$document.trigger("searchHideRequested"),o.closest(".category-books-container").length&&o.attr("data-product-id")&&$(document).trigger("catalogLinkClick",[t,+o.attr("data-product-id")]),o.closest(".related-books-menu-container").length&&o.attr("data-product-id")&&$(document).trigger("relatedBooksClick",[t,+o.attr("data-product-id")]);const s=this.extractBookElementData(t);if(s){if(this.isLinkOnSameBookElement(s)){e.preventDefault();let t=null;if(s.additional){if(s.additional.startsWith("comment-"))return void _features_discussions_DiscussionModule__WEBPACK_IMPORTED_MODULE_8__.a.requestShowCommentWhenReady(s.additional.replace("comment-",""),0,()=>{});if(!t&&s.additional.startsWith("note-")&&$document.trigger("paragraphNoteOpenRequested",s.additional.replace("note-","")),!(t=document.getElementById(s.additional))&&s.additional.startsWith("search-")&&null!=(t=document.getElementById(s.additional.replace("search-","")))&&($(".paragraph-selected").removeClass("paragraph-selected"),$(t).addClass("paragraph-selected")),!t&&s.additional.startsWith("section-")&&(t=_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_5__.a.getSectionHeading(s.additional)),!t)try{t=document.querySelector(`[data-hash='${s.additional}']`)}catch(e){console.log(e)}}else t=document.querySelector(".readable-text");const i=o.text();if(_BookContentUtils__WEBPACK_IMPORTED_MODULE_1__.a.matchesBrowsableRegEx(i)){const e=o.closest(".readable-text")[0];if(e){const i=_BookContentUtils__WEBPACK_IMPORTED_MODULE_1__.a.getMatchingBrowsable(e.browsables,o.text());$(i).closest(".focus-off").removeClass("focus-off"),i&&_DOMUtils__WEBPACK_IMPORTED_MODULE_2__.a.precedesElement(t,e)&&(t=e)}}return t&&($document.trigger("disableToolbarHiding"),_managers_ScreenScrollManager__WEBPACK_IMPORTED_MODULE_7__.a.scrollToElement(t,()=>{$document.trigger("enableToolbarHiding"),$(t).is(".scrambled")&&s&&s.additional.startsWith("search-")&&_modules_UnlockModule__WEBPACK_IMPORTED_MODULE_9__.a.tryToSearchUnlockFragmentInCurrentBookElement([$(t)])}),$document.trigger("withinChapterLinkScroll",t)),!1}{const e=t.href.indexOf("/book/")>-1?"book":"edit";if(s.book&&s.bookElement){let t=`${IS_ON_DEVICE?"#!":""}/${e}/${s.book}/${s.bookElement}/`;return s.meapVersion?t+=`v-${s.meapVersion}/`:s.reviewVersion&&(t+=`r-${s.reviewVersion}/`),s.additional&&(t+=s.additional),page(t),!1}if(s.book&&!s.bookElement)return page(`${IS_ON_DEVICE?"#!":""}/${e}/${s.book}`),!1}}}handleLinkHover(e,t){clearTimeout(this.linkHoverTimer);const o=$(t),i=this.extractBookElementData(t);if(i&&this.isLinkOnSameBookElement(i))try{const e=document.getElementById(i.additional);if(null!=e){const o=$(e).closest(".browsable-container, .readable-text");if(o.is(".browsable-container"))return void(_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_5__.a.isElementVisibleEvenALittle(o.get(0))||_features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__.a.showBrowsablePreview(t,o));if(o.is(".readable-text"))return void(_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_5__.a.isElementVisibleEvenALittle(o.get(0))||_features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__.a.showWithinChapterPreview(t,o))}}catch(e){}if(this.isLivebookLink(t.href)){const e=_WebUtils__WEBPACK_IMPORTED_MODULE_3__.a.getAbsoluteUrl("api/book/linkPreviewDetails"),i=this.extractBookElementData(t);this.linkHoverTimer=_EventUtils__WEBPACK_IMPORTED_MODULE_4__.a.setTimeout(()=>{_WebUtils__WEBPACK_IMPORTED_MODULE_3__.a.getFromOurBackend(e,e=>{null!=e&&o.is(":hover")&&e.title&&e.paragraphs&&_features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__.a.showBookElementPreview(t,e)},e=>{console.error("Something went wrong retrieveing preview details: ",e)},{linkHash:t.hash||t.pathname,bookElementLink:i})},100)}}handleLinkLeave(e){clearTimeout(this.linkHoverTimer),this.linkHoverTimer=_EventUtils__WEBPACK_IMPORTED_MODULE_4__.a.setTimeout(()=>{$(e).is(":hover")||_features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__.a.hidePreview(!0)},300)}extractBookElementData(e){let t=e.pathname,o=_RouteUtils__WEBPACK_IMPORTED_MODULE_6__.a.getRouteInfo(t);if(o){if(e.hash)try{document.getElementById(e.hash.substring(1))&&(o.additional=e.hash.substring(1))}catch(e){}return o}if((t=e.hash).indexOf("#!")>=0&&(t=t.substring("#!".length),o=_RouteUtils__WEBPACK_IMPORTED_MODULE_6__.a.getRouteInfo(t)))return o;return document.getElementById(e.hash.substring(1))?((o=_RouteUtils__WEBPACK_IMPORTED_MODULE_6__.a.getCurrentRouteInfo()).additional=e.hash.substring(1),o):null}isLinkOnSameBookElement(e){const t=_RouteUtils__WEBPACK_IMPORTED_MODULE_6__.a.getCurrentRouteInfo();if(!t)return!1;return!(t.book!==e.book||t.bookElement!==e.bookElement||t.isEditLink!=e.isEditLink)&&(t.meapVersion?t.meapVersion==e.meapVersion:!t.reviewVersion||t.reviewVersion==e.reviewVersion)}isThirdPartyLink(e){return"string"==typeof e&&""!=e&&-1==e.indexOf("localhost")&&-1==e.indexOf("livebook")&&-1==e.indexOf("liveaudio")&&-1==e.indexOf("vbook")&&0!==e.indexOf("file://")&&0!==e.indexOf("cdv://")&&0!==e.indexOf("javascript")}isLivebookLink(e){return!!e&&(-1!==e.indexOf("localhost")||-1!==e.indexOf("livebook")||0==e.indexOf("#"))}openLinkInNewTab(location){switch(this.currentPlatform){case _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__.a.Cordova:window.open(location,"_system");break;case _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__.a.Electron:const shell=eval("require('electron').shell");shell&&shell.openExternal&&shell.openExternal(location);break;case _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__.a.Browser:default:const win=window.open(location,"_blank");win&&win.focus&&win.focus()}}openLink(e,t=!1){this.isLivebookLink(e)||t?document.location.href=e:this.openLinkInNewTab(e)}}const LinksUtils=new LinksUtilsClass},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(2),n=o(25),r=o(8),s=o(42);const a=new class{initialize(e,t,o){this.getUnlockManagerSource().then(({UnlockContentManager:o})=>o.initialize(e,t)),this.getModalSource().then(({UnlockModal:o})=>o.initialize(e,t)),this.getUnlockTextSource().then(({UnlockText:o})=>{o.initialize(e,t)});const i=this.getFreePreviewManagerSource();e.isOpen?i.then(({FreePreviewManager:o})=>o.initialize(e,t)):Promise.all([i,n.a.getProductDiscounts(e,s.a.getNewUserDiscountCode())]).then(o=>{const{FreePreviewManager:i}=o[0];e.isOpen=!r.a.isEmptyObject(o[1])&&this.isNotNewUserDiscount(o[1]),i.initialize(e,t)}).catch(o=>{i.then(({FreePreviewManager:o})=>o.initialize(e,t))})}clean(){this.unlockManagerSourcePromise&&(this.getUnlockManagerSource().then(({UnlockContentManager:e})=>e.clean()),this.getModalSource().then(({UnlockModal:e})=>e.clean()),this.getUnlockTextSource().then(({UnlockText:e})=>e.clean()),this.getFreePreviewManagerSource().then(({FreePreviewManager:e})=>e.clean()))}tryToSearchUnlockFragmentInCurrentBookElement(e){this.getUnlockManagerSource().then(({UnlockContentManager:t})=>t.tryToSearchUnlockFragmentInCurrentBookElement(e))}refreshTokenStateInToolbar(e){this.getUnlockManagerSource().then(({UnlockContentManager:t})=>t.refreshTokenStateInToolbar(e))}fetchAndDisplayLatestTokenInfo(e){this.getUnlockManagerSource().then(({UnlockContentManager:t})=>t.fetchAndDisplayLatestTokenInfo(e))}tryToUnlockPointedParagraph(e,t,o,i){this.getUnlockManagerSource().then(({UnlockContentManager:n})=>n.tryToUnlockPointedParagraph(e,t,o,i))}unlockFragments(e,t,o,i,n,r,s,a){return new Promise((l,c)=>{this.getUnlockManagerSource().then(({UnlockContentManager:c})=>l(c.unlockFragments(e,t,o,i,n,r,s,a)))})}showModalForCurrentBookElementPurchases(e,t=null){this.getModalSource().then(({UnlockModal:o})=>o.showModalForCurrentBookElementPurchases(e,t))}getUnlockManagerSource(){return this.unlockManagerSourcePromise||(this.unlockManagerSourcePromise=i.a.importWebpackModuleWithRetry(this.constructUnlockManagerSourcePromise)),this.unlockManagerSourcePromise}constructUnlockManagerSourcePromise(){return Promise.all([o.e(0),o.e(1),o.e(2),o.e(10),o.e(91)]).then(o.bind(null,63))}getFreePreviewManagerSource(){return this.freePreviewManagerSourcePromise||(this.freePreviewManagerSourcePromise=i.a.importWebpackModuleWithRetry(this.constructFreePreviewSourcePromise)),this.freePreviewManagerSourcePromise}constructFreePreviewSourcePromise(){return Promise.all([o.e(0),o.e(1),o.e(14),o.e(48)]).then(o.bind(null,65))}getModalSource(){return this.modalSourcePromise||(this.modalSourcePromise=i.a.importWebpackModuleWithRetry(this.constructUnlockModalSourcePromise)),this.modalSourcePromise}constructUnlockModalSourcePromise(){return Promise.all([o.e(0),o.e(1),o.e(2),o.e(10),o.e(92)]).then(o.bind(null,86))}getUnlockTextSource(){return this.unlockTextSourcePromise||(this.unlockTextSourcePromise=i.a.importWebpackModuleWithRetry(this.constructUnlockTextSourcePromise)),this.unlockTextSourcePromise}constructUnlockTextSourcePromise(){return o.e(93).then(o.bind(null,58))}isNotNewUserDiscount(e){if(null==e)return!0;try{for(let t in e)if(e[t]&&e[t].isNewCustomerDiscount)return!1}catch(e){return!0}return!0}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return h}));var i=o(4),n=o(2),r=o(49),s=o(31),a=o(44),l=o(34);const c=new class{showModal(){this.getSource().then(({AboutModal:e})=>e.showModal())}getSource(){return this.sourcePromise||(this.sourcePromise=n.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(18).then(o.bind(null,1206))}};var d=o(45),u=o(38);const h=new class{constructor(){this.loadHelpButtonCodeOnInteraction=this.loadHelpButtonCodeOnInteraction.bind(this)}initialize(){$(document).on("click",".faq-link",()=>s.a.show()).on("click",".tour-link",()=>a.a.startTour()).on("click",".submit-app-feedback-link",()=>l.a.showModal()).on("click",".more-information-link",()=>c.showModal()),i.a.onPassiveEvent(document.querySelectorAll(".help-button"),["mouseenter","touchstart"],this.loadHelpButtonCodeOnInteraction),$(document).on("click",".more-information-link",this.loadHelpButtonCodeOnInteraction),u.a.initialize()}loadHelpButtonCodeOnInteraction(){r.a.load(),i.a.offPassiveEvent(document.querySelectorAll(".help-button"),["mouseenter","touchstart"],this.loadHelpButtonCodeOnInteraction)}renderErrorReportModal(){n.a.importWebpackModuleWithRetry(this.constructSourcePromiseErrorManager).then(({ErrorReportManager:e})=>{e.render(!0)})}showContentErrorReportModal(e="",t=""){d.a.showContentErrorReportModal(e,t)}constructSourcePromiseErrorManager(){return Promise.all([o.e(0),o.e(1),o.e(41)]).then(o.bind(null,1205))}clean(){u.a.clean()}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o(2);const n=new class{show(){this.getSource().then(({FaqModal:e})=>e.render(!0))}clean(){this.sourcePromise&&this.getSource().then(({FaqModal:e})=>e.clean())}getSource(){return this.sourcePromise||(this.sourcePromise=i.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(0),o.e(1),o.e(45)]).then(o.bind(null,72))}}},function(e,t,o){"use strict";function i(e){return`<div class="row" id="book-content-main-row">\n<div class="large-12 columns">\n    <div id="book-main-content-container">\n        <div id="track-point-column" class="hidden">\n            <div class="track-point-wrapper" id="pointing-start-point">\n                <i class="fal fa-level-down fa-flip-horizontal" aria-hidden="true"></i>\n            </div>\n            <div class="track-point-wrapper" id="pointing-end-point">\n                <i class="fal fa-level-up fa-flip-horizontal" aria-hidden="true"></i>\n            </div>\n            <div class="track-point-wrapper" id="play-point"  title="play">\n                <div class="track-point">\n                    <i class="icon-i-play-triangle icon-i"></i>\n                </div>\n            </div>\n            <div class="track-point-wrapper" id="current-position-point" title="play">\n                <div class="track-point">\n                    <div class="track-point-play">\n                        <i></i>\n                    </div>\n                </div>\n            </div>\n            <div class="track-point-wrapper" id="off-screen-position-point" title="jump to audio">\n                <div class="track-point">\n                    <div class="off-screen-position-point-arrow-container">\n                        <i class="icon-i"></i>\n                    </div>\n                </div>\n            </div>\n            <div class="track-point-wrapper" id="restart-paragraph-point" title="restart paragraph">\n                <div class="track-point">\n                    <i class="fa fa-repeat"></i>\n                </div>\n            </div>\n        </div>\n        <div id="book-markup-container">\n            <div class="readable-text">\n                <h1>${e}</h1>\n            </div>\n            <div class="introduction-summary">\n                <h3>This chapter covers</h3>\n                <ul>\n                    <li class="readable-text"><span class="placeholder" style="margin-right: 30px"><span class="placeholder-animated-background">&nbsp;</span></span></li>\n                    <li class="readable-text"><span class="placeholder"><span class="placeholder-animated-background">&nbsp;</span></span></li>\n                    <li class="readable-text"><span class="placeholder" style="margin-right: 60px"><span class="placeholder-animated-background">&nbsp;</span></span></li>\n                </ul>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 30px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 10px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 70px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="loading-page-image-placeholder"></div>\n\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 30px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 10px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 80px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="loading-page-image-placeholder"></div>\n            <div class="readable-text">\n                <span class="placeholder"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 30px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 10px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 70px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 10px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="loading-page-image-placeholder"></div>\n\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 30px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 10px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 80px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 30px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 10px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 80px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="loading-page-image-placeholder"></div>\n        </div>\n    </div>\n</div>\n</div>`}o.d(t,"a",(function(){return i}))},function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));class i{constructor(e,t,o,i,n,r,s,a,l,c,d,u,h,g){this.book=e,this.id=t,this.title=o,this.shortName=i,this.userOwnsBookElement=n,this.ordinal=r,this.wordCount=Math.max(s||0,0),this.freeWordCount=Math.max(a||0,0),this.audioLocation=l,this.subtitlesLocation=c,this.isOpen=d,this.meapVersion=u,this.location=h,this.isBookOverview=g}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o(2);const n=new class{showModal(){this.getSource().then(({AppImpressionsModal:e})=>e.showModal())}getSource(){return this.sourcePromise||(this.sourcePromise=i.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(22).then(o.bind(null,74))}}},function(e,t,o){"use strict";var i=o(16),n=o(33),r=o(24),s=o(1),a=o(13),l=o(3);t.a=new class{constructor(){this.numberedBookItemIndexRegExp=/(\d+\.?)+/,this.appendixIndexRegExp=/[A-Z]\.(\d+\.?)*/}pretifyShortName(e){return e?e.replace("-"," "):e}convertToBookContent(e,t,o,i,n){const r=this.convertToBook(e);return{book:r,bookElement:this.getCurrentBookElement(r,e,t,o,i,n),previousBookElement:this.getPreviousBookElement(e,t),nextBookElement:this.getNextBookElement(e,t)}}convertToBook(e){if(!e)return null;const t=new i.a(e.id,e.manningId,e.title,e.shortName,e.description,e.lastUpdateDate,e.exercisesComingSoon,e.programmingLanguage,!0,e.userOwnsAudio,"","",e.meap,e.open,e.latestMeapVersion||0,e.highResolutionCover);return t.authors=e.authors,t.cleanTitle=a.a.cleanBookTitle(t.title),t.slug=e.slug,t.openChapters=e.openChapters||[],t.hasAudio=!!e.hasAudio,t.hasTextAddendums=!!e.hasTextAddendums,t.hasKnowledgeGraph=!!e.hasKnowledgeGraph,t.isKnowledgeGraphAccessible=!!e.isKnowledgeGraphAccessible,t.hasExercises=!!e.hasExercises,t.isReview=!!e.isReview,t.userCanViewReviews=!!e.userCanViewReviews,t.userIsReviewer=!!e.userIsReviewer,t.userIsAuthor=!!e.userIsAuthor,t.userIsEditor=!!e.userIsEditor,t.userOwnsPBook=!!e.userOwnsPBook,t.userCanDownloadBook=!!e.userCanDownloadBook,t.sisterLicenseId=e.sisterLicenseId,t.associatedLicenseId=e.associatedLicenseId,t.categories,e.categories,t.isbn=e.isbn,null!=e.offlineFileSizes&&(t.offlineFileSizes=e.offlineFileSizes),t}extractBookElementIndex(e){let t=new RegExp(this.appendixIndexRegExp).exec(e),o=new RegExp(this.numberedBookItemIndexRegExp).exec(e);return t&&!o?t[0]:o?o[0]:t?t[0]:""}extractSegmentedBookElementIndex(e){const t=this.extractBookElementIndex(e);return t?t.split(".").filter(e=>e.trim()):[]}compareBookItemIndexes(e,t){const o=this.extractSegmentedBookElementIndex(e),i=this.extractSegmentedBookElementIndex(t),n=Math.max(o.length,i.length);for(let e=0;e<n;e++){const t=o[e],n=i[e];if(!t)return-1;if(!n)return 1;const r=parseInt(t),s=parseInt(n);if(Number.isNaN(r)&&!Number.isNaN(s))return 1;if(!Number.isNaN(r)&&Number.isNaN(s))return-1;if(Number.isNaN(r)&&Number.isNaN(s)){if(t===n)continue;return t<n?-1:1}if(r!==s)return r<s?-1:1}return 0}cleanBookElementType(e){if(!e)return e;const t=this.extractBookElementIndex(e);return e.trim().replace(/^(Chapter|Part|Section|Appendix)/,"").replace(t,"").trim()}getCurrentBookElement(e,t,o,i,r,s){if(!t||!t.bookElements||0===t.bookElements.length)return;let a=t.bookElements.find(e=>e.shortName===o);if(!a)return null;const l=new n.a(e,a.id,a.title,a.shortName,a.userOwnsBookElement,a.ordinal,a.wordCount||0,a.freeWordCount||0,i,r,!0,a.meapVersion,a.location,a.isBookOverview);return l.content=s,l.reviewVersion=a.reviewVersion,l.isRollingReview=a.isRollingReview,l.reviewVersion>0&&(e.userIsReviewer=!0),l.pdf=a.pdf,l}getPreviousBookElement(e,t){if(!e||!e.bookElements||0===e.bookElements.length)return;const o=this.getCurrentBookElementIndex(e.bookElements,t);if(-1===o)return null;const i=e.bookElements[o-1];return i?new r.a(i.shortName,i.title,i.link||s.a.getBookElementUrl(e.slug,i.shortName,e.meapVersion,e.reviewVersion),i.introItems):null}getNextBookElement(e,t){if(!e||!e.bookElements||0===e.bookElements.length)return;const o=this.getCurrentBookElementIndex(e.bookElements,t);if(-1===o)return null;const i=e.bookElements[o+1];return i?new r.a(i.shortName,i.title,s.a.getBookElementUrl(e.slug,i.shortName,e.meapVersion,e.reviewVersion),i.introItems):null}getCurrentBookElementIndex(e,t){if(!e||0===e.length)return-1;for(let o=0;o<e.length;o++)if(e[o].shortName===t)return o;return-1}isFreePreviewAtBeginningAndNotStarted(e){return null!=e&&0==e.previewDuration&&e.remainingPreviewDuration>0}isFreePreviewAvailable(e){return null!=e&&e.previewDuration>0&&e.remainingPreviewDuration>5}isFreePreviewAvailableAndContinuing(e){return null!=e&&e.previewDuration>0&&e.remainingPreviewDuration>0&&e.shortName==l.a.lastFreePreviewStartedBookShortName}canFreePreviewBePaused(e,t){return null!=e&&!e.isOpen&&(!!t&&e.remainingPreviewDuration>0)}hasFreePreviewExpired(e){return null!=e&&(!e.remainingPreviewDuration||e.remainingPreviewDuration<5)}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o(2);const n=new class{processThisChapterCoversAction(e){this.getSource().then(({UserActionTrackerManager:t})=>{t.processThisChapterCoversAction(e)})}processCodeCopiedAction(e){this.getSource().then(({UserActionTrackerManager:t})=>{t.processCodeCopiedAction(e)})}processGoToShoppingCartAction(){this.getSource().then(({UserActionTrackerManager:e})=>{e.processGoToShoppingCartAction()})}processLoginModalAction(e){this.getSource().then(({UserActionTrackerManager:t})=>{t.processLoginModalAction(e)})}processSimplifiedLoginModalAction(e){this.getSource().then(({UserActionTrackerManager:t})=>{t.processSimplifiedLoginModalAction(e)})}processReadersAskAction(e,t){this.getSource().then(({UserActionTrackerManager:o})=>{o.processReadersAskAction(e,t)})}getSource(){return this.sourcePromise||(this.sourcePromise=i.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(108),o.e(95)]).then(o.bind(null,76))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return n}));class i{constructor(e,t,o,i,n){this.shortName=e,this.title=t,this.productType=o,this.price=i,this.partialBookOwnership=n}isAudio(){return"AUDIO"===this.productType}isBook(){return"EBOOK"===this.productType||"COMBO"===this.productType||"PDF"===this.productType||"LIVEBOOK"==this.productType}static isAcceptableProductType(e){return"AUDIO"===(e=(e||"").toUpperCase())||"EBOOK"===e||"COMBO"===e||"PDF"===e||"LIVEBOOK"==e||"LIVEAUDIO"==e}}class n{constructor(e,t,o,i,n,r){this.id=e,this.manningId=t,this.price=o,this.productType=i,this.unitAmountDiscounted=n,this.isbn=r}isAudioOffering(){return"AUDIO"===this.productType||"LIVEAUDIO"===this.productType||"liveAudio"===this.productType}isEBookOffering(){return"EBOOK"===this.productType}isComboOffering(){return"COMBO"===this.productType}}n.productTypes=["EBOOK","AUDIO","LIVEAUDIO","liveAudio","COMBO"]},function(e,t,o){"use strict";o.d(t,"a",(function(){return P}));var i=o(4),n=o(5),r=o(21),s=o(15),a=o(0),l=o(6),c=o(31),d=o(2);const u=new class{showImpressionsBox(){this.getSource().then(({WebImpressionsManager:e})=>e.showImpressionsBox())}getSource(){return this.sourcePromise||(this.sourcePromise=d.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(113).then(o.bind(null,1207))}};var h=o(34);const g=new class{show(){this.getSource().then(({GetAppPopup:e})=>e.show())}getSource(){return this.sourcePromise||(this.sourcePromise=d.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(51).then(o.bind(null,1208))}};var m=o(3);const p=$(document),f=30,b=90,w=20,v=!1,k=!1;const P=new class{initialize(){p.on("contentFullyConstructed",(e,t)=>i.a.setTimeout(()=>{null!=m.a.bookElement&&m.a.bookElement.reviewVersion>0||s.a.get("tour-offered")||s.a.get("tour-taken")||a.b.isSmallScreenSize()||(r.a.showNotification("<a href='javascript:void(0)' class='tour-link'>take the liveBook tour</a>"),s.a.set("tour-offered",!0))},5e3)),k&&setTimeout(()=>this.trackApplicationUsageForAppOffering(),5e3),setTimeout(()=>this.trackApplicationUsageDurationForImpressionsFeedback(),1e4)}clean(){const e=window.hopscotch;try{e&&e.getCurrTour&&null!=e.getCurrTour()&&e.endTour&&e.endTour()}catch(e){console.log("Error",e)}c.a.clean()}showAppFeedbackForm(){h.a.showModal()}showAppInfoForm(){s.a.set("appOffered",!0);const e=this.getCurrentAppOfferingInfo();e.hasFeedbackBeenSent=!0,n.a.setItem("app-offering-info",JSON.stringify(e)),g.show()}trackApplicationUsageForAppOffering(){if(a.b.isApp()||this.hasAppBeenOffered()||!l.a.isCurrentlyLoggedIn())return;if(null!=m.a.bookElement&&m.a.bookElement.reviewVersion>0)return;const e=this.getCurrentAppOfferingInfo();null==e||e.hasFeedbackBeenSent||setInterval(()=>{const e=this.getCurrentAppOfferingInfo();e.currentUsageDuration++,n.a.setItem("app-offering-info",JSON.stringify(e)),e.currentUsageDuration==w&&this.showAppInfoForm()},6e4)}trackApplicationUsageDurationForImpressionsFeedback(){if(null!=m.a.bookElement&&m.a.bookElement.reviewVersion>0)return;const e=this.getCurrentImpressionFeedbackInfo();v||e.hasFeedbackBeenSent||e.hasBeenDismissedTwice||setInterval(()=>{const e=this.getCurrentImpressionFeedbackInfo();e.currentUsageDuration++,n.a.setItem("impression-feedback-info",JSON.stringify(e)),e.hasBeenDissmissedOnce?e.currentUsageDuration==b&&(a.b.isApp()?this.showAppFeedbackForm():u.showImpressionsBox()):e.currentUsageDuration==f&&(a.b.isApp()?this.showAppFeedbackForm():u.showImpressionsBox())},6e4)}getCurrentImpressionFeedbackInfo(){let e=null,t=this.hasFeedbackBeenSent();try{const o=n.a.getItem("impression-feedback-info");o&&((e=JSON.parse(o)).hasFeedbackBeenSent=t)}catch(e){console.log("Error getting current impression feedback",e)}return null==e&&(e=this.getInitialImpressionFeedbackInfo(),n.a.setItem("impression-feedback-info",JSON.stringify(e))),e}getCurrentAppOfferingInfo(){let e=null;if(this.hasAppBeenOffered())return null;try{const t=n.a.getItem("app-offering-info");t&&(e=JSON.parse(t))}catch(e){console.log("Error getting current app offering info",e)}return null==e&&(e=this.getInitialAppOffering(),n.a.setItem("app-offering-info",JSON.stringify(e))),e}getInitialImpressionFeedbackInfo(){return{currentUsageDuration:0,hasFeedbackBeenSent:this.hasFeedbackBeenSent(),hasBeenDissmissedOnce:!1,hasBeenDismissedTwice:!1}}hasFeedbackBeenSent(){return a.b.isApp()?n.a.getItem("app-feedback-submitted"):s.a.get("feedback-submitted")}hasAppBeenOffered(){return!!a.b.isApp()||s.a.get("feedback-submitted")}getInitialAppOffering(){return{currentUsageDuration:0,hasFeedbackBeenSent:this.hasAppBeenOffered(),hasBeenDissmissedOnce:!1,hasBeenDismissedTwice:!1}}}},function(e,t,o){"use strict";var i=o(4),n=o(13),r=o(9),s=o(11),a=o(0),l=o(41),c=o(2);const d=$(window),u=$(document);t.a=new class{constructor(){this.isInAudioVideoMode=!1,this.shouldAutomaticallyScroll=!0,d.on("wheel DOMMouseScroll mousewheel",()=>{this.shouldAutomaticallyScroll=!1}),u.on("textSlideBoxOpened",()=>{this.isTextSlideBoxOpened=!0,this.shouldAutomaticallyScroll=!1}),u.on("textSlideBoxClosed",()=>{this.isTextSlideBoxOpened=!1,this.shouldAutomaticallyScroll=!0}),u.on("tooltipOpened",()=>{this.isTextSelectionMenuOpened=!0,this.shouldAutomaticallyScroll=!1}),u.on("tooltipClosed",()=>{this.isTextSelectionMenuOpened=!1,this.shouldAutomaticallyScroll=!0}),u.on("audioModeLeft videoModeLeft",()=>{this.isInAudioVideoMode=!1,this.shouldAutomaticallyScroll=!0,u.trigger("restoreAutomaticScrolling",r.a.isElementVisible(this.currentTextFragment))}),u.on("audioModeEntered videoModeEntered",()=>{this.isInAudioVideoMode=!0,this.shouldAutomaticallyScroll=!1}),u.on("restoreAutomaticScrolling",(e,t)=>{this.isInAudioVideoMode||this.isTextSlideBoxOpened||this.isTextSelectionMenuOpened||(this.shouldAutomaticallyScroll=!0,t&&this.scrollToElement(this.currentTextFragment))}),u.on("playingTextFragmentChange",(e,t)=>{this.currentTextFragment=t}),u.on("positionPointPositionReached",(e,t)=>{this.currentTextFragment&&this.scrollToElementIfNeeded(t&&t[0]||this.currentTextFragment)}),u.on("browsableReached exerciseReached videoReached",(e,t)=>{this.shouldAutomaticallyScroll&&t&&(r.a.isElementVisible(t)||i.a.setTimeout(()=>{this.isScrolling||this.scrollToElement(t)},400))}),u.on("requestScrollToElement",(e,t)=>{this.scrollToElement(t)})}initialize(){this.clean()}clean(){this.currentTextFragment=null}scrollToElement(e,t,o=1.5){e&&this.scrollToPosition($(e).offset().top-o*r.a.getTopNavBarHeight(),t)}scrollToPosition(e,t){let o=1e3;const n=Math.abs(window.scrollY-e);o=Math.min(3*n,o),this.isScrolling=!0;const r=$("html,body");a.b.isIOSCordova()?(window.scrollTo(0,e),t&&t()):c.a.loadVelocityCode().then(()=>{r.velocity("scroll",{duration:o,offset:e,mobileHA:!1}),i.a.setTimeout(()=>{this.isScrolling=!1,t&&t()},o)})}scrollToElementIfNeeded(e){if(this.shouldAutomaticallyScroll)if(l.a.isSideMenuOpened)i.a.triggerDocumentEventAsync("playingElementInView",e);else if(n.a.hasBrowsables(e)){const t=n.a.getMostImportantBrowsable(e.browsables);r.a.canBothElementsFitIntoScreen(e,t)?this.scrollToElementWithBrowsablesIfNeeded(e):this.scrollToElementWithoutBrowsablesIfNeeded(e)}else this.scrollToElementWithoutBrowsablesIfNeeded(e);else i.a.triggerDocumentEventAsync("playingElementInView",e)}scrollToElementWithBrowsablesIfNeeded(e){const t=n.a.getMostImportantBrowsable(e.browsables),o=t;r.a.isElementVisible(e)&&r.a.isElementVisible(t)&&r.a.isElementVisible(o)?i.a.triggerDocumentEventAsync("playingElementInView",e):r.a.canBothElementsFitIntoScreen(e,o)?this.positionScreenThatBothFit(e,o):this.scrollToElementWithoutBrowsablesIfNeeded(e)}positionScreenThatBothFit(e,t){const o=s.a.precedesElement(e,t)?t:e;this.scrollToElementAfterPause(o,e)}scrollToElementWithoutBrowsablesIfNeeded(e){let t=e,o=r.a.isElementVisible(e);if(null!=t.previousHeading)o=o&&r.a.isElementVisible(t.previousHeading),t=t.previousHeading;else if("LI"===t.nodeName){const e=t.parentElement.firstElementChild;r.a.canBothElementsFitIntoScreen(t,e)&&(o=o&&r.a.isElementVisible(e),t=e)}o?i.a.triggerDocumentEventAsync("playingElementInView",e):this.scrollToElementAfterPause(t,e)}scrollToElementAfterPause(e,t){i.a.setTimeout(()=>{this.isScrolling?i.a.triggerDocumentEventAsync("playingElementInView",t):this.scrollToElement(e,()=>{i.a.triggerDocumentEventAsync("playingElementInView",t)})},400)}}},function(e,t,o){"use strict";var i=o(0);const n=$(document),r=$(window);t.a=new class{constructor(){this.isDisabled=!0,this.$footer=$("#footer"),n.on("disableToolbarHiding",()=>{i.b.isIOS()||(this.disableHiding(),i.b.isIOS()&&this.hideFooter())}),n.on("enableToolbarHiding",()=>{i.b.isIOS()||(this.enableHiding(),i.b.isIOS()&&this.showFooter())}),r.on("scrollstop",{latency:100},()=>{if(i.b.isIOS())return;const e=n.height();(e-(r.height()+r.scrollTop()))/e==0&&this.showFooter()})}initialize(){i.b.isIOS()||(this.isDisabled?this.disableHiding():this.enableHiding())}disableHiding(){i.b.isIOS()||(this.isDisabled=!0)}enableHiding(){i.b.isIOS()||(this.isDisabled=!1)}hideFooter(){i.b.isIOS()||this.$footer.removeClass("headroom--pinned").addClass("headroom--unpinned")}showFooter(){i.b.isIOS()||this.$footer.removeClass("headroom--unpinned").addClass("headroom--pinned")}makeFooterTransparent(){this.$footer.css({opacity:0})}makeFooterOpaque(){this.$footer.css({opacity:1})}disableAndRevert(){this.disableHiding(),this.$footer.removeClass("headroom--unpinned").addClass("headroom-pinned")}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var i=o(4),n=o(0),r=o(9),s=o(43);const a=$(document),l=$(window),c=n.b.isIE(),d=n.b.isIOS();class u{constructor(e,t,o,r,l,c,u){this.isMenuOpening=!1,this.isPinned=!1,this.$button=e,this.$menu=t,this.$additionalAssociatedElements=u,this.beforeOpenMenuCallback=o,this.afterMenuOpenedCallback=r,this.onMenuClosedCallback=c,this.$input=this.$menu.find("input").filter((e,t)=>"text"===t.type),this.$input.length&&d&&this.$input.on("touchstart",()=>window.scrollTo(0,0)),this.$menu.is(".closed")&&(this.isOnLeftSide()?this.$menu.css("transform",`translateX(-${this.$menu.width()}px)`):this.$menu.css("transform",`translateX(${this.$menu.width()}px)`)),l||this.$menu.children().first().on("mousewheel DOMMouseScroll",e=>this.handleScroll(e)),i.a.onEventWithCooldown(this.$menu.find(".pin"),"click touchstart",e=>{const t=$(e.currentTarget);this.isPinned=!this.isPinned,t.toggleClass("unpinned",!this.isPinned)}),a.on("topbarToggled",()=>{this.dontCloseOnTopBarToggle||this.closeMenu(!0)}),a.on("click",e=>this.handleDocumentClick(e.target)),a.on("slideMenuOpened",(e,t)=>this.handleSlideMenuOpened(t)),a.on("slideMenuCloseRequested textSlideBoxShowStart",()=>this.isMenuOpened()&&this.closeMenu()),a.on("slideMenuOpenRequested",(e,t)=>t===this.$button[0]&&this.openMenu()),i.a.onEventWithCooldown(e,"click touchstart",()=>this.handleToggleMenuButtonClick()),n.b.isTouchDevice()&&(this.menuDragManager=new s.a(this.$menu,e=>{this.isOnLeftSide()&&e.x>0||this.isOnRightSide()&&e.x<0||this.$menu.css("transform",`translateX(${e.x}px)`)},(e,t)=>{this.isOnLeftSide()&&e.x>0||this.isOnRightSide()&&e.x<0?this.$menu.velocity({translateX:0},{duration:100}):(this.$menu.velocity({translateX:e.x},{duration:0}),Math.abs(e.x)>=this.$menu.width()/2||t?this.closeMenu(!1,!0):this.$menu.velocity({translateX:0},{duration:100}))},{isOnLeftSide:this.isOnLeftSide(),isOnRightSide:this.isOnRightSide()}))}setAssociatedElement(e){this.$additionalAssociatedElements=e}openMenu(e){this.isMenuOpened()||(this.beforeOpenMenuCallback&&this.beforeOpenMenuCallback(),this.isOnLeftSide()?this.$menu.velocity({translateX:-this.$menu.width()},{duration:0}):this.$menu.velocity({translateX:this.$menu.width()},{duration:0}),d||c?setTimeout(()=>this.performActualOpening(e),5):this.performActualOpening(e))}performActualOpening(e){this.isMenuOpening=!0,a.trigger("slideMenuStartOpening",[this.$menu]),a.trigger("slideMenuOpened",[this.$menu]),this.$button.addClass("selected"),this.$menu.removeClass("closed"),this.$menu.velocity({translateX:0,opacity:1},{duration:300,complete:()=>{u.isSideMenuOpened=!0,u.$openedMenu=this.$menu,this.isMenuOpening=!1,this.afterMenuOpenedCallback&&this.afterMenuOpenedCallback(),e&&e(),this.menuDragManager&&this.menuDragManager.enable()}}),u.isSideMenuOpened=!0,u.$openedMenu=this.$menu}isOnLeftSide(){return this.$menu.is(".slide-in-menu-left")}isOnRightSide(){return this.$menu.is(".slide-in-menu-right")}closeMenu(e,t=!1){if(this.menuDragManager&&this.menuDragManager.disable(),this.$button.removeClass("selected"),this.isMenuClosed()&&!this.isMenuOpening&&!t)return;a.trigger("slideMenuClosed"),this.$button.removeClass("selected");const o=r.a.getComputedTranslateX(this.$menu.get(0));0!=o&&this.$menu.velocity({translateX:o},{duration:0}),this.$menu.velocity({translateX:this.isOnLeftSide()?-this.$menu.width():this.$menu.width(),opacity:0},{duration:e?0:150,complete:()=>{this.$menu.addClass("closed"),u.isSideMenuOpened=!1,u.$openedMenu=null,this.onMenuClosedCallback&&this.onMenuClosedCallback()}})}isMenuClosed(){if(!this.$menu[0])return!0;const e=this.$menu.offset();return e.left<0||e.left>l.width()||this.$menu.is(".closed")}isMenuOpened(){if(!this.$menu[0])return!0;const e=this.$menu.offset();return e.left>=0&&e.left<=l.width()&&!this.$menu.is(".closed")}handleToggleMenuButtonClick(){this.isMenuOpened()?this.closeMenu():this.openMenu()}handleDocumentClick(e){const t=this.$menu,o=this.$button,i=this.$additionalAssociatedElements||$(null);t.is(e)||0!==t.has(e).length||o.is(e)||0!==o.has(e).length||!this.isMenuOpened()||$(e).is(".hopscotch-next")||i.is(e)||0!==i.has(e).length||this.isPinned||this.closeMenu()}handleSlideMenuOpened(e){e!==this.$menu&&this.closeMenu(!0)}handleScroll(e){const t=e.originalEvent,o=e.currentTarget,i=t.wheelDelta||-t.detail,n=o.scrollTop+$(o).outerHeight()-o.scrollHeight>=-5,r=o.scrollTop<=0;if(i<0&&n||i>0&&r)return e.preventDefault(),!1}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(1),n=o(5),r=o(8),s=o(6);const a=new class{constructor(){this.discountedProductsPromiseMap={},$(document).on("appActivatedAfterLongTime",()=>{this.dotdProductsPromise=null,this.dotdPromoInfoPromise=null,this.discountedProductsPromiseMap={}})}getNewUserDiscountCode(){return s.a.isCurrentlyLoggedIn()&&s.a.isExistingUser()?"":n.a.getItem("isBuyer")?"":"lb-new-user-30"}getFreePreviewDiscountCode(){return"lbpreview20"}getNewUserProductDiscounts(e,t){if(null==e||0==e.length||!t)return Promise.resolve([]);const o=`${e.join(",")} - ${t}`;return null!=this.discountedProductsPromiseMap[o]?this.discountedProductsPromiseMap[o]:this.discountedProductsPromiseMap[o]=new Promise((o,n)=>{i.a.postToOurBackend(i.a.getAbsoluteUrl("api/cart/newUserProductDeals"),e=>{const t=[];for(const o in e)for(const i in e[o])e[o][i].discountCode=o,t.push(e[o][i]);o(t)},e=>{this.dotdProductsPromise=null,n(e)},{productIds:e.join(","),code:t})})}getDotdPromoInfo(){return null!=this.dotdPromoInfoPromise?this.dotdPromoInfoPromise:this.dotdPromoInfoPromise=new Promise((e,t)=>{Promise.all([this.getDotdProducts(),this.getDotdBrief(),this.getDotdFullInfo()]).then(([t,o,n])=>{const s=t.find(e=>(o.brief||"").indexOf(e.title)>=0);if(null==s)return void e(null);let a=s.productOfferings.find(e=>"EBOOK"==e.productType);if(null==a)return void e(null);let l=`$${r.a.formatMoney(a.price-a.discount)} until ${r.a.getShortMonthName(n.expirationDate)} ${n.expirationDate.getDate()}`;e({headerMessage:`Save 50%! Get the eBook of ${s.title} for only ${l}`,shortMessage:`${s.title} for ${l}`,notificationMessage:`Don't miss out! The eBook of ${s.title} is only ${l}.`,priceMessage:l,categories:"",productLink:s.isLivebook?i.a.getBookUrl(s.slug):s.isLiveVideo?i.a.getLiveVideoUrl(`course/${s.externalId}/${s.slug}`):i.a.getMarketplaceProductUrl(s.slug,s.isLiveVideo),productExternalId:s.externalId,discountCode:n.code})}).catch(t=>{this.dotdPromoInfoPromise=null,e(null)})})}getDotdBrief(){return new Promise((e,t)=>{i.a.getFromOurBackend(i.a.getAbsoluteUrl("api/cart/dotdBrief"),t=>e(t),e=>t(e))})}getDotdFullInfo(){return new Promise((e,t)=>{i.a.getFromOurBackend(i.a.getAbsoluteUrl("api/cart/dotdFullInfo"),t=>{t.expirationDate&&(t.expirationDate=r.a.getDateFromString(t.expirationDate)),t.activationDate&&(t.activationDate=r.a.getDateFromString(t.activationDate)),e(t)},e=>t(e))})}getDotdProducts(){return null!=this.dotdProductsPromise?this.dotdProductsPromise:this.dotdProductsPromise=new Promise((e,t)=>{i.a.postToOurBackend(i.a.getAbsoluteUrl("api/cart/todaysDealsAndProducts"),t=>{const o=[];for(const e in t)for(const i in t[e])t[e][i].discountCode=e,o.push(t[e][i]);e(o)},e=>{this.dotdProductsPromise=null,t(e)})})}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));class i{constructor(e,t,o,i){this.$element=e,this.config=i,this.dragCallback=t,this.onDragFinishCallback=o,this.handleDragStart=this.handleDragStart.bind(this),this.handleDragFinish=this.handleDragFinish.bind(this),this.handleDrag=this.handleDrag.bind(this)}enable(){this.$element.on("mousedown touchstart",this.handleDragStart)}disable(){this.startPosition=null,this.timedPoints=null,this.unregisterAllEvents()}handleDragStart(e){const t=this.getPointFromEvent(e);t&&($(e.target).is("input")||(this.startPosition={x:t.x,y:t.y},this.timedPoints=[{x:t.x,y:t.y,date:Date.now()}],this.initialTransition=this.$element.css("transition"),this.initialTransition&&this.$element.css("transition","none"),this.registerDragEvents()))}handleDrag(e){const t=this.getPointFromEvent(e);if(!t||!this.startPosition)return void this.finishOnPoint(t);const o=this.timedPoints&&this.timedPoints.length>=1?this.timedPoints[this.timedPoints.length-1]:null,i={x:t.x-this.startPosition.x,y:t.y-this.startPosition.y},n=null!=o?{x:o.x-t.x,y:o.y-t.y}:i;Math.abs(n.x)>Math.abs(n.y)?(this.addTimedPoint({x:t.x,y:t.y,date:Date.now()}),this.dragCallback(i)):null==this.timedPoints||this.timedPoints.length<=1?this.finishOnPoint(t):(this.addTimedPoint({x:t.x,y:t.y,date:Date.now()}),e.preventDefault(),e.stopPropagation())}handleDragFinish(e){this.finishOnPoint(this.getPointFromEvent(e))}finishOnPoint(e){e&&this.startPosition||(!e&&null!=this.timedPoints&&this.timedPoints.length&&(e=this.timedPoints[this.timedPoints.length-1],this.timedPoints[this.timedPoints.length-1].date=Date.now()),!this.startPosition&&null!=this.timedPoints&&this.timedPoints.length&&(this.startPosition=this.timedPoints[0]),e||(e={x:0,y:0}),this.startPosition||(this.startPosition={x:0,y:0})),this.initialTransition&&(this.$element.css("transition",this.initialTransition),this.initialTransition="");let t={x:e.x-this.startPosition.x,y:e.y-this.startPosition.y};this.onDragFinishCallback(t,this.areTimedPointsAllInProperDirectionAndFastEnough()),this.unregisterDragEvents(),this.startPosition=null,this.timedPoints=null}unregisterAllEvents(){this.$element.off("mousedown touchstart",this.handleDragStart),this.unregisterDragEvents()}registerDragEvents(){this.$element.on("mousemove touchmove",this.handleDrag),this.$element.on("mouseup touchend touchcancel",this.handleDragFinish)}unregisterDragEvents(){this.$element.off("mousemove touchmove",this.handleDrag),this.$element.off("mouseup touchend touchcancel",this.handleDragFinish)}addTimedPoint(e){this.timedPoints.push(e),this.timedPoints.length>7&&this.timedPoints.shift()}areTimedPointsAllInProperDirectionAndFastEnough(){if(!this.timedPoints||this.timedPoints.length<2)return!1;for(let e=1;e<this.timedPoints.length;e++){const t=this.timedPoints[e-1],o=this.timedPoints[e];if(this.config.isOnRightSide&&o.x<t.x)return!1;if(this.config.isOnLeftSide&&o.x>t.x)return!1}const e=this.timedPoints[0],t=this.timedPoints[this.timedPoints.length-1];return Math.abs(t.x-e.x)/(t.date-e.date)>.1}getPointFromEvent(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:e.originalEvent&&e.originalEvent.touches&&1==e.originalEvent.touches.length?{x:e.originalEvent.touches[0].pageX,y:e.originalEvent.touches[0].pageY}:null}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o(2);const n=new class{startTour(){this.getSource().then(({TourManager:e})=>e.startInfoTour())}getSource(){return this.sourcePromise||(this.sourcePromise=i.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(88).then(o.bind(null,73))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var i=o(2),n=o(8);const r=new class{showFeedbackModal(){this.getSource().then(({FeedbackModal:e})=>e.show())}showContentErrorReportModal(e="",t=""){Promise.all([this.getSource(),n.a.getTimeoutPromise(300)]).then(([{FeedbackModal:o}])=>{o.showContentErrorReport(e,t)})}getSource(){return this.sourcePromise||(this.sourcePromise=i.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(15),o.e(46)]).then(o.bind(null,75))}}},function(e,t,o){"use strict";var i=o(8),n=o(1),r=o(6),s=o(0),a=o(17),l=o(3),c=o(36),d=o(5);const u=$(document),h="UA-98429831-1",g="1BuMl1OgTEaW_Pf3ovr-5w",m="wdAeeueLTvufx40zfbmP4w";let p;p=a.a.prod;let f=!1;t.a=new class{constructor(){this.chaptersSeen=0,this.viewingScrambledContent=!0,this.currentlyLoggedIn=!1,this.currentBookPart="",this.currentCartStep="",this.numTocMenuClicks=0,this.numTocIndexClicks=0}startTime(){this.startedViewingChapter=new Date}getAbTestVariant(){return null!=this.abTestVariant?this.abTestVariant:this.abTestVariant=new Promise((e,t)=>{this.getExperimentReady().then(()=>{window.gtag("event","optimize.callback",{name:m,callback:t=>{console.log(`Regular A/B test: ${t}`),clearTimeout(this.abTestFallbackTimer),e(t)}}),this.abTestFallbackTimer=setTimeout(()=>{console.log("A/B test fallback: 0"),e("0")},3e3)})})}getAbTestGroup(){return this.abTestGroupPromise?this.abTestGroupPromise:this.abTestGroupPromise=new Promise((e,t)=>{try{if(document.location.search.indexOf("group=1")>=0)return void e(1);if(document.location.search.indexOf("group=2")>=0)return void e(2)}catch(e){}d.a.getItem("AbTestGroup")?e(+d.a.getItem("AbTestGroup")):n.a.getFromOurBackend(n.a.getAbsoluteUrl("analytics/getAbTestGroup"),t=>{t&&t.group?(d.a.setItem("AbTestGroup",1),e(t.group)):(d.a.setItem("AbTestGroup",1),e(1))},t=>{d.a.setItem("AbTestGroup",1),e(1)},{})})}getAbcTestVariant(){return null!=this.abcTestVariant?this.abcTestVariant:this.abcTestVariant=new Promise((e,t)=>{document.location.search.indexOf("group=1")>=0?e("1"):document.location.search.indexOf("group=2")>=0?e("2"):document.location.search.indexOf("group=3")>=0?e("3"):document.location.search.indexOf("group=4")>=0?e("4"):this.getExperimentReady().then(()=>{let t;window.gtag("event","optimize.callback",{name:g,callback:o=>{console.log("Got experiment variant",o),e(o||"0"),clearTimeout(t)}}),t=setTimeout(()=>{console.log("getAbcTestVariant timeout, defaulting"),e("0")},2e3)})})}getExperimentReady(){return this.experimentReady||(this.experimentReady=new Promise((e,t)=>{const o=window;o.dataLayer=o.dataLayer||[],o.gtag=o.gtag||function(){o.dataLayer.push(arguments)},o.gtag("js",new Date),o.gtag("config",h),e()})),this.experimentReady}initializeAnalyticsIfNecessary(){setTimeout(()=>this.initializeGoogleAnalytics(),5),s.b.isApp()||(setTimeout(()=>this.initializeHotjar(),15),setTimeout(()=>this.initializeFbAnalytics(),5),setTimeout(()=>{},5e3))}initializeGoogleAnalytics(){try{void 0,this.trackInterestingEvents()}catch(e){console.log("Error in google analytics",e)}}initializeFbAnalytics(){try{e=window,t=document,o="script",e.fbq||(i=e.fbq=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)},e._fbq||(e._fbq=i),i.push=i,i.loaded=!0,i.version="2.0",i.queue=[],(n=t.createElement(o)).async=!0,n.src="https://connect.facebook.net/en_US/fbevents.js",(r=t.getElementsByTagName(o)[0]).parentNode.insertBefore(n,r)),window.fbq&&window.fbq("init","1940497162877014"),f&&window.fbq("track","PageView")}catch(o){}var e,t,o,i,n,r}initializeSentry(){try{$.getScript("https://browser.sentry-cdn.com/5.11.1/bundle.min.js",()=>{const e=window;e.Sentry&&e.Sentry.init&&e.Sentry.init({dsn:"https://c3d25eac84454a43a0a15dc43c9cb2f1@sentry.io/1208009"})})}catch(e){console.log("Error when installing sentry")}}initializeConsoleTracking(){window.ga=function(...e){console.log("Sent to GA:",JSON.stringify(e))}}initializeHotjar(){try{e=window,t=document,e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:766946,hjsv:6},o=t.getElementsByTagName("head")[0],(i=t.createElement("script")).async=1,i.src="https://static.hotjar.com/c/hotjar-"+e._hjSettings.hjid+".js?sv="+e._hjSettings.hjsv,i.onload=()=>{setTimeout(()=>{if((document.referrer||"").indexOf("google")>=0){const e=window;e.hj&&e.hj("trigger","google_acquisition")}},100)},o.appendChild(i)}catch(e){console.log("Error initializing hotjar",e)}var e,t,o,i}initializeOneSignal(){$.getScript("https://cdn.onesignal.com/sdks/OneSignalSDK.js",()=>{const e=window.OneSignal||[];e.push((function(){e.init({appId:"b58e42e1-cbab-4f71-ac8b-1912bdea5ba2"})}))})}trackInterestingEvents(){let e,t;setTimeout(()=>{r.a.isLoggedIn().then(e=>{e&&e.loggedIn&&e.userDetails?(window.ga&&ga("set","userId",`${e.userDetails.id}`),window.ga&&ga("set","dimension1",`${e.userDetails.id}`),window.ga&&ga("set","dimension2","loggedIn"),g({event:"logIn",userId:`${e.userDetails.id}`})):window.ga&&ga("set","dimension2","notLoggedIn")}).catch(e=>{window.ga&&ga("set","dimension2","anonymous")})},100),u.on("oldSearchInitialized",()=>{setTimeout(()=>{g({event:"optimize.activateSearch"})},50)}),u.on("searchInitialized",()=>{setTimeout(()=>{g({event:"optimize.activateSearch"})},50)}),u.on("speed",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","speed",t&&t.type,t&&t.time,{nonInteraction:!1})},100)}),u.on("spinner",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","spinner",t,d(),{nonInteraction:"show"!=t})},100)}),u.on("chapterLoadingTime",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","chapterLoadingTime",t,d(),{nonInteraction:!0})},100)}),u.on("addToCartReady",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","addToCartReady",t,d(),{nonInteraction:!0})},100)}),u.on("appStarted",(e,t)=>{window.ga&&ga("send","event","appStarted",t,t,{nonInteraction:!0})}),u.on("impressions",(e,t,o)=>{null!=t&&0!=t.length&&g({event:"eec.impressionView",ecommerce:{impressions:t.map((e,t)=>({id:`${e.id}`,name:e.title,brand:e.brand||"book",category:m(e.category),position:t+1,list:o}))}})}),u.on("impressionClick",(e,t,o)=>{null!=t&&g({event:"eec.impressionClick",ecommerce:{click:{actionField:{list:o},products:[{id:`${t.id}`,name:t.title,category:m(t.category),position:t.position,brand:"book",list:o}]}}})}),u.on("conceptPageLoaded",(e,t,o)=>{setTimeout(()=>{window.ga&&ga("send","event","conceptPageLoaded",t,o,{nonInteraction:!0})},50)}),u.on("conceptPageError",(e,t,o)=>{setTimeout(()=>{window.ga&&ga("send","event","conceptPageError",t,o,{nonInteraction:!0})},50)}),u.on("concept-register-modal-shown",()=>{setTimeout(()=>{setTimeout(()=>{window.ga&&ga("send","event","conceptPageModalShown")},50)},5)}),u.on("bookContentLoaded",(o,i,r,s)=>{setTimeout(()=>{let o="";if(e=i,t=r.bookElement,e.userOwnsBook)o="accessingOwnedBook";else if(e.isFreeEbook)o=`accessingFreeEbook-${s?"logged-in":"not-logged-in"}`;else if(t.isOpen)o=`accessingFreeBookChapter-${s?"logged-in":"not-logged-in"}`;else{o=`accessingNotOwnedBookChapter-${s?"logged-in":"not-logged-in"}`;try{const e=window;e.hj&&e.hj("trigger","scrambled_chapter_viewed")}catch(e){console.log("Error when triggering hotjar")}}window.ga&&ga("send","event","bookContent",o,d(),{nonInteraction:!0});try{null==i||i.userOwnsBook||(window.ccLayer=window.ccLayer||[],window.ccLayer.push({ccEvent:"productViewed",id:i.manningId,src:"custom",name:i.title,url:`https://livebook.manning.com/${n.a.getBookUrl(i.slug)}`,image:n.a.getBookCoverUrl(i.shortName),currency:"USD",inStock:!0}),g({productId:i.manningId,event:"book-page-loaded"}))}catch(e){}null==i||i.userOwnsBook||g({event:"eec.detail",ecommerce:{detail:{actionField:{list:"preview chapter"},products:[{id:`${i.manningId}`,name:i.cleanTitle,category:m(i.categories),brand:"book"}]}}})},50)}),u.on("exercisesOpened",e=>{setTimeout(()=>{window.ga&&ga("send","event","exercises","solvingExercises",d())},50)}),u.on("exerciseAnsweredCorrectly",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","exercises","answeredCorrectly",d()),u.trigger("user-action-exercise-solved",[t.productManningId,`${t.bookShortName}-${t.paragraphId}-${t.exerciseIndex}`,!1])},50)}),u.on("exerciseAnsweredIncorrectly",e=>{setTimeout(()=>{window.ga&&ga("send","event","exercises","answeredIncorrectly",d())},50)}),u.on("tour",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","tour",t,d())})}),u.on("zenModeToggle",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","zenModeToggle",t?"On":"Off",d())})}),u.on("unlockSuccess",(e,t)=>{setTimeout(()=>{"FreePreview"!=t&&window.ga&&ga("send","event","unlock",t+"-success",d())},50)}),u.on("registrationSuccessful",()=>{setTimeout(()=>{window.ga&&ga("send","event","registration","success"),window.fbq&&window.fbq("track","CompleteRegistration"),window.gtag&&window.gtag("event","conversion",{send_to:"AW-830923058/BwCGCInk_cIBELLCm4wD"})},50)}),u.on("cartUpsellAddToCartClick",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","cartUpsell","addToCart",t)},50)}),u.on("cartUpsellShown",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","cartUpsell","show",t)},50)}),u.on("inlinePromoAddToCart",e=>{setTimeout(()=>{window.ga&&ga("send","event","inlinePromoAddToCart")},50)}),u.on("registrationSubscribeInfo",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","registration",t?"success-subscribed":"success-not-subscribed")},50)}),u.on("registrationAccountNotActivated",()=>{setTimeout(()=>{window.ga&&ga("send","event","registrationProcess","notActivated")},50)}),u.on("activationRequested",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","registrationProcess","activationRequested",t)},50)}),u.on("registrationModalShown",()=>{setTimeout(()=>{window.ga&&ga("send","event","registrationProcess","registrationModalShown")},50)}),u.on("unlockFailure",(e,t,o)=>{setTimeout(()=>{if("FreePreview"==t)return;let e=d();try{e+="-"+JSON.stringify(o)}catch(e){}window.ga&&ga("send","event","unlock",t+"-failure",e)},50)}),u.on("outOfParagraphByParagraphUnlocks",e=>{setTimeout(()=>{window.ga&&ga("send","event","unlock","outOfParagraphByParagraphUnlocks",d())},50)}),$(document).on("searchLocationSearch",(e,t,o)=>{setTimeout(()=>{window.ga&&ga("send","event","searchLocation",o,t)},50)}),u.on("searchMade",(e,t,o,i)=>{setTimeout(()=>{window.ga&&ga("send","event","search",`${t}-;-${o}`,d());try{window.ccLayer=window.ccLayer||[],window.ccLayer.push({ccEvent:"liveBookProductsSearched",src:"custom",query:`${t}-;-${o}`})}catch(e){}u.trigger("user-action-search-made",[h(),`${t}-;-${o}`,!1]),g({event:"search",search:[{query:t,scope:l.a.book&&l.a.book.manningId||"library"}]})},50)}),u.on("searchSuggestion",(e,t,o)=>{setTimeout(()=>{window.ga&&ga("send","event","searchSuggestion",t,o),u.trigger("user-action-search-result-opened",[h(),t,o,!1])},50)}),u.on("audioChapterEnded",e=>{setTimeout(()=>{window.ga&&ga("send","event","audio",e.type,d())},50)}),u.on("anonymousFreePreviewStartRequested",e=>{setTimeout(()=>{window.ga&&ga("send","event","freePreview","anonymousFreePreviewStartRequested",d())},50)}),u.on("freePreviewModeActivated",(e,t)=>{setTimeout(()=>{if(t){window.ga&&ga("send","event","24hFreePreview","activated",d());try{const e=window;e.hj&&e.hj("trigger","24_h_free_preview_activated")}catch(e){console.log("Error when triggering hotjar")}}else window.ga&&ga("send","event","freePreview","activated",d())},50)}),u.on("landingPageLoaded",()=>{setTimeout(()=>{window.ccLayer=window.ccLayer||[],window.ccLayer.push({ccEvent:"homepageViewed",src:"custom"}),g({event:"landing-page-loaded"})},5)}),u.on("freePreviewModeDeactivated",()=>{setTimeout(()=>{window.ga&&ga("send","event","freePreview","deactivated",d())},50)}),u.on("freePreviewModeExpired",()=>{setTimeout(()=>{window.ga&&ga("send","event","freePreview","expired",d())},50)}),u.on("addToCartFromFreeEbookUpsell",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","addToCartFromFreeEbookUpsell",t,d())},50)}),u.on("openLandingPageCoverLink",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","openLandingPageCoverLink",t)},50)}),u.on("signInRequested",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","signInRequested",t)},50)}),u.on("discussionMenuOpened",()=>{setTimeout(()=>{window.ga&&ga("send","event","discussion","menuOpened")},50)}),u.on("pointingLinkOpened",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","pointingLinkOpened",t,d())},50)}),u.on("onSiteWidePromotionAddToCart",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","onSiteWidePromotionAddToCart",t,d())},50)}),u.on("highlightAdded",e=>{setTimeout(()=>{window.ga&&ga("send","event","highlightAdded",d()),u.trigger("user-action-highlight-created",[h(),!1])},50)}),u.on("bookmarkAdded",e=>{setTimeout(()=>{window.ga&&ga("send","event","bookmarkAdded",d()),u.trigger("user-action-bookmark-created",[h(),!1])},50)}),u.on("noteAdded",e=>{setTimeout(()=>{window.ga&&ga("send","event","noteAdded",d()),u.trigger("user-action-note-created",[h(),!1])},50)}),u.on("contentFeedback",(e,t)=>setTimeout(()=>{window.ga&&ga("send","event","contentFeedback",t,d())},50)),u.on("socialEvent",(e,t,o)=>{setTimeout(()=>{let e="";o&&(e=`${o.productExternalId||""}-${o.element||""}-${o.location||""}`),window.ga&&ga("send","event","social",t,e||d())},50)}),u.on("forumOpened",e=>{setTimeout(()=>{window.ga&&ga("send","event","social","forumOpened","")},50)}),u.on("meapErrorReportShow",e=>{setTimeout(()=>{window.ga&&ga("send","event","meapErrorReport","show")},50)}),u.on("pageLoaded",e=>{f=!0,setTimeout(()=>{let e=document.location.hash||document.location.pathname||"";(e=e.replace("//","/"))||(e="/"),window.ga&&ga("set","page",e),window.ga&&ga("send","pageview"),window.fbq&&window.fbq("track","PageView"),null!=l.a.book&&window.fbq&&window.fbq("track","ViewContent",{content_ids:[l.a.book.manningId],content_category:l.a.book.categories,content_name:l.a.book.cleanTitle,content_type:"livebook"})},200)}),u.on("codeLoadingError",(e,t,o)=>{setTimeout(()=>{window.ga&&ga("send","event","codeLoadingError",t,o,{nonInteraction:!0})},100)}),u.on("app-install-download-initialized",()=>{setTimeout(()=>{window.ga&&ga("send","event","app-install","app-install-download-initialized")},50)}),u.on("app-install-popup-dismissed",()=>{setTimeout(()=>{window.ga&&ga("send","event","app-install","app-install-popup-dismissed")},50)}),u.on("app-install-popup-accepted",()=>{setTimeout(()=>{window.ga&&ga("send","event","app-install","app-install-popup-accepted")},50)}),u.on("app-install-popup-shown",()=>{setTimeout(()=>{window.ga&&ga("send","event","app-install","app-install-popup-shown")},50)});let o=!1;u.on("searchOpen",(e,t)=>{setTimeout(()=>{o||(t&&window.hj&&window.hj("trigger","search"),o=!0)},100)}),u.on("openedChapter",(e,t)=>{setTimeout(()=>{let e=document.location.href.split("/")[6];t.loggedIn&&!this.currentlyLoggedIn||t.loggedIn||e!=this.currentBookPart&&this.viewingScrambledContent!=t.scrambled&&(this.chaptersSeen=0,this.viewingScrambledContent=t.scrambled)},50)}),u.on("shoppingCartOpened",()=>{setTimeout(()=>{window.ga&&ga("send","event","cartStep","open");const e=window;e.hj&&e.hj("trigger","shoppingCartOpened")})}),u.on("cartStep",(e,t)=>{setTimeout(()=>{this.currentCartStep!=t&&(this.currentCartStep=t,window.ga&&ga("send","event","cartStep",t))},50)}),u.on("tocMenuOpen",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","toc","menuOpened",d(),{nonInteraction:!0})},50)}),u.on("tocMenuClick",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","toc","menuClick","numClicks",++this.numTocMenuClicks)},50)}),u.on("tocIndexClick",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","toc","indexClick","numClicks",++this.numTocIndexClicks)},50)}),u.on("profileMenuOpened",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","profile","profileMenuOpened")},50)}),u.on("profileMenuSave",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","profile","profileSaved")},50)}),u.on("wishListAdd",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","wishList","wishListAdd",t),u.trigger("user-action-wishlist-item-added",[t,!1]),window.fbq&&window.fbq("track","AddToWishlist")},50)}),u.on("wishListRemove",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","wishList","wishListRemove",t)},50)}),u.on("wishListAddToCart",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","wishList","wishListAddToCart",t)},50)}),u.on("wishListFail",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","wishList","wishListFail",t)},50)}),u.on("marketingEmailSubscription",(e,t,o)=>{setTimeout(()=>{window.ga&&ga("send","event","marketingEmailSubscription",t,o)},50)}),u.on("indexedTerms",(e,t,o,i,n)=>{setTimeout(()=>{window.ga&&ga("send","event","indexedTerms",t,`${i}-${o}`),"inlineIndexedTermClick"==t&&u.trigger("user-action-cross-reference-term-opened",[n,o]);try{const e=window;e.hj&&e.hj("trigger","indexedTermClick")}catch(e){console.log("Error when triggering hotjar")}},50)}),u.on("geoMapOpen",e=>{setTimeout(()=>{window.ga&&ga("send","event","social","geoMapOpened","");try{const e=window;e.hj&&e.hj("trigger","communityMapOpened")}catch(e){console.log("Error when triggering hotjar")}},50)}),u.on("geoMapFeedbackThumbVote",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","social","geoMapFeedbackThumbVote",t)},50)}),u.on("geoMapHideLocation",e=>{setTimeout(()=>{window.ga&&ga("send","event","social","geoMapHideLocation","")},50)}),u.on("tccContentClick",(e,t)=>{setTimeout(()=>{window.ga&&ga("send","event","thisChapterCovers",d(),t)},50)});let a=0;function d(){return`${null!=e?e.shortName:"unknownBook"}-${null!=t?t.shortName:"unknownBookElement"}`}function h(){return null!=e?e.manningId:-1}function g(e){(window.dataLayer=window.dataLayer||[],window.dataLayer).push(e)}function m(e){return e?e.split(/;\s*/).map(e=>e.trim()).sort().join(","):""}function p(e,t){window.ga&&ga("send","event","readersAskQuestions",d(),`${t.questionIndex}-${t.action}`),c.a.processReadersAskAction(t.questionIndex,t.action)}u.on("progressStore",(e,t)=>{setTimeout(()=>{const e=i.a.mapToArray(t).length/u.find(".readable-text").length*100;a<25&&e>=25?window.ga&&ga("send","event","audio","25%",d()):a<50&&e>=50?window.ga&&ga("send","event","audio","50%",d()):a<75&&e>=75?window.ga&&ga("send","event","audio","75%",d()):a<99&&e>=99&&window.ga&&ga("send","event","audio","100%",d()),a=e},50)}),u.on("addItemToCartInGA",(e,t)=>{setTimeout(()=>{window.ga&&ga("ecommerce:addItem",t)},1)}),u.on("startTransactionInGA",(e,t)=>{setTimeout(()=>{window.ga&&ga("ecommerce:addTransaction",t)},1)}),u.on("sendTransactionInGA",e=>{setTimeout(()=>{window.ga&&ga("ecommerce:send")},1)}),u.on("productAddedToCart",(e,t)=>{g({event:"eec.add",ecommerce:{add:{actionField:{list:"In-Product"},products:[{id:`${t.productOffering.manningId}`,name:t.isToken?"token":null!=t.book?t.book.cleanTitle||t.book.title:"",category:t.isToken?"token":null!=t.book?m(t.book.categories):"",variant:t.productOffering.productType,brand:t.isToken?"token":"book",quantity:t.quantity,price:`${i.a.roundToTwoDecimalPoints(t.price)}`.replace(",",".")}]}}});try{window.fbq&&window.fbq("track","AddToCart",{value:i.a.roundToTwoDecimalPoints(t.price),content_name:t.isToken?"token":null!=t.book?t.book.cleanTitle||t.book.title:"",content_type:"product",content_ids:[t.productOffering.manningId],currency:"USD"})}catch(e){}try{window.ga&&ga("send","event","productAddedToCart",`${t.isToken?"token":null!=t.book?t.book.shortName:""}--${t.quantity}`,d())}catch(e){}}),u.on("productRemovedFromCart",(e,t)=>{g({event:"eec.remove",ecommerce:{remove:{products:[{id:`${t.id}`,name:t.title,category:m(t.category),variant:t.variant,brand:"book",quantity:t.quantity,price:`${t.price}`.replace(",",".")}]}}})}),u.on("sendCheckoutInitializedToBehaviorTracking",e=>{s.b.isApp()||c.a.processGoToShoppingCartAction()}),u.on("readersAskQuestionsInteraction",p);try{const e=window.pretriggeredEvents;if(e&&e.length){const t=[];for(let o=0;o<e.length;o++){const i=e[o];i&&"readers-ask-click"==i.type&&(p(0,i.args),t.push(i))}t.forEach(t=>i.a.removeItemFromArray(t,e))}}catch(e){console.log("Error when logging pretriggered events")}}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o(2);const n=new class{initialize(e,t){this.getSource().then(({BooksMenu:o})=>o.initialize(e,t))}clean(){this.sourcePromise&&this.sourcePromise.then(({BooksMenu:e})=>e.clean())}getSource(){return this.sourcePromise||(i.a.loadVelocityCode(),i.a.loadMustacheCode(),this.sourcePromise=i.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}open(){this.getSource().then(({BooksMenu:e})=>e.open())}constructSourcePromise(){return o.e(29).then(o.bind(null,77))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var i=o(2),n=o(6);const r=new class{initialize(){n.a.isLoggedIn().then(e=>{e&&e.loggedIn&&this.getSource().then(({SettingsMenu:e})=>{e.initialize()})})}clean(){n.a.isLoggedIn().then(e=>{e&&e.loggedIn&&this.getSource().then(({SettingsMenu:e})=>{e.clean()})})}getSource(){return this.sourcePromise||(i.a.loadVelocityCode(),this.sourcePromise=i.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(75).then(o.bind(null,83))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o(2);const n=new class{load(){this.getSource()}showIntroVideo(){this.getSource().then(({HelpButtonManager:e})=>e.showIntroVideo())}getSource(){return this.sourcePromise||(this.sourcePromise=i.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(52).then(o.bind(null,71))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var i=o(5);const n="OPEN_FREE_EBOOKS";const r=new class{isFreeEbookOpen(e){try{return!!JSON.parse(i.a.getItem(n)||"{}")[e]}catch(e){return!1}}openCurrentFreeEbook(e){try{const t=JSON.parse(i.a.getItem(n)||"{}");t[e]=!0,i.a.setItem(n,JSON.stringify(t))}catch(e){}}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var i=o(14),n=o(12),r=o(29),s=o(6),a=o(11);const l=new class{initialize(){$(document).on("click",".sign-in-button",e=>{const t=$(e.currentTarget);let o="signin";t.is(".free-preview-sign-in")?o="free-preview-sign-in":t.is(".micropurchase-sign-in")?o="microtransactions":t.is("wish-list-sign-in-button")&&(o="wishlist"),n.a.requestOpenModal("signin","",o)}).on("click",".discussion-sign-in-button",()=>n.a.requestOpenModal("signin","","discussion")).on("click",".inline-promo-sign-in-button",()=>n.a.requestOpenModal("signin","","free-preview-inline-login")).on("click",".register-button",e=>{let t="register";$(e.currentTarget).is(".free-preview-registration")&&(t="free-preview-registration"),n.a.requestOpenModal("register","",t)}).on("click",".sign-out-button",()=>n.a.requestLogout()).on("requestAvatarUrlUpdate",(e,t)=>this.updateAvatarImage(t)),s.a.isLoggedIn().then(e=>{e.loggedIn?this.modifyUIWithLogin():this.notifyLoginNotAttempted(),e.loggedIn&&r.a.fetchAndDisplayLatestTokenInfo()})}modifyUIWithLogin(){i.a.getUserEmail().then(e=>{$(".settings-menu-user-data-container-email").text(e),$(document.body).addClass("user-logged-in").removeClass("user-not-logged-in")}),i.a.getUserFullname().then(e=>{$(".settings-menu-user-data-container-fullname").text(e)}),i.a.getAvatarUrl().then(e=>this.updateAvatarImage(e));const e=$(".user-initials-container");i.a.getUserInitials().then(t=>{t?(e.removeClass("hidden"),e.text(t.toUpperCase())):e.addClass("hidden")}).catch(t=>{console.log("Couldn't get initials",t),e.addClass("hidden")})}modifyUIWithLogout(){$(document.body).addClass("user-not-logged-in").removeClass("user-logged-in")}notifyLoginNotAttempted(){this.modifyUIWithLogout(),$(document).trigger("loginNotAttempted")}updateAvatarImage(e){if(!e)return;const t=new Image;t.onload=()=>{a.a.cacheImageIfNeeded(t),this.setAvatarBackground(e)},t.onerror=()=>{a.a.loadFromCacheIfPossible(t,e=>{},()=>{t.onload=null,this.setAvatarBackground(t.src)})},t.src=e}setAvatarBackground(e){const t=$(".lb-avatar-container .avatar-icon");t.length>0?t.replaceWith(`<div class='avatar-image' style='background-image: url(${e})'></div>`):$(".lb-avatar-container .avatar-image").attr("style",`background-image: url(${e})`)}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var i=o(4),n=o(3),r=o(2);const s=new class{constructor(){this.setProperPlaceholder=this.setProperPlaceholder.bind(this),this.loadCodeOnInteraction=this.loadCodeOnInteraction.bind(this),$(window).on("resizestop",this.setProperPlaceholder)}setProperPlaceholder(){let e="search";$(window).width()>440&&(e=null==n.a.book?"search for and inside books...":"search inside this and other books"),$("#search-input").attr("placeholder",e)}initialize(){this.setProperPlaceholder(),i.a.onPassiveEvent(document.querySelectorAll("#search-input, .header-search-container button"),["mouseenter","touchstart","click","focus"],this.loadCodeOnInteraction)}initializeIfNecessary(e,t){this.setProperPlaceholder(),null!=this.sourcePromise&&this.getSource().then(({SearchMenu:o})=>o.initialize(e,t))}load(){this.getSource().then(({SearchMenu:e})=>e.initialize(n.a.book,n.a.bookElement))}loadCodeOnInteraction(e){i.a.offPassiveEvent(document.querySelectorAll("#search-input, .header-search-container button"),[e.type],this.loadCodeOnInteraction),this.getSource().then(({SearchMenu:e})=>{e.initialize(n.a.book,n.a.bookElement),i.a.offPassiveEvent(document.querySelectorAll("#search-input, .header-search-container button"),["mouseenter","touchstart","click","focus"],this.loadCodeOnInteraction)})}getSource(){return this.sourcePromise||(this.sourcePromise=r.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(0),o.e(2),o.e(8),o.e(16),o.e(74)]).then(o.bind(null,81))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o(2);const n=new class{inViewport(e,t){if("IntersectionObserver"in window){const o=new IntersectionObserver(i=>{if(i&&i[0]&&i[0].intersectionRatio>0)return o.unobserve(e),o.disconnect(),void(t&&t())},{});o.observe(e)}else this.getSource().then(({IntersectionFallback:o})=>{o.inViewport(e,t)}).catch(e=>{t&&t()})}getSource(){return this.sourcePromise||(this.sourcePromise=i.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(53).then(o.bind(null,70))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var i=o(2),n=o(4);const r=new class{initialize(){this.loadCode=this.loadCode.bind(this),n.a.onUserHasInteracted(()=>{this.getManagerSource().then(({GeoMapManager:e})=>e.initialize())}),$(document).on("showGeoMapModal",e=>this.openModal()),$(document).on("closeGeoMapModal",e=>this.closeModal())}loadCode(e){this.getModalSource().then(({GeoMapModal:t})=>{e&&(t.initialize(),t.renderModal())})}openModal(){this.getModalSource().then(({GeoMapModal:e})=>{e.initialize(),e.renderModal()})}closeModal(){this.modalSourcePromise&&this.getModalSource().then(({GeoMapModal:e})=>{e.closeModal()})}getModalSource(){return this.modalSourcePromise||(this.modalSourcePromise=i.a.importWebpackModuleWithRetry(this.constructModalSourcePromise)),this.modalSourcePromise}constructModalSourcePromise(){return Promise.all([o.e(0),o.e(1),o.e(2),o.e(16),o.e(50)]).then(o.bind(null,84))}getManagerSource(){return this.managerSourcePromise||(this.managerSourcePromise=i.a.importWebpackModuleWithRetry(this.constructManagerSourcePromise)),this.managerSourcePromise}constructManagerSourcePromise(){return o.e(49).then(o.bind(null,62))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var i=o(2),n=o(4);const r=new class{initialize(){n.a.onUserHasInteracted(()=>{this.getSource().then(({ActivityManager:e})=>e.initialize())})}initalizeFreePreviewActivityTracker(e,t){this.getSource().then(({ActivityManager:o})=>o.initalizeFreePreviewActivityTracker(e,t))}destroyFreePreviewActivityTracker(){this.sourcePromise&&this.getSource().then(({ActivityManager:e})=>e.destroyFreePreviewActivityTracker())}getSource(){return this.sourcePromise||(this.sourcePromise=i.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(19).then(o.bind(null,80))}}},function(e,t,o){"use strict";o.r(t);var i=o(0),n=o(7),r=o(40),s=o(26),a=o(4),l=o(3),c=o(28),d=o(5),u=o(17);const h=new class{constructor(){this.referrer=document.referrer||"",this.fixReferrerIfNecessary(),this.referrer&&this.isComingFromMarketplace(this.referrer)&&d.a.saveTemporarily("referrer",this.referrer,864e5),this.handleBackButtonClick=this.handleBackButtonClick.bind(this)}initialize(){a.a.onEventWithCooldown($("#back-button"),"touchstart click",this.handleBackButtonClick)}handleBackButtonClick(e){const t=$(document.body);if(i.b.isApp())this.goToLastPage();else if(t.is(".library-page, .catalog-page, .exercise-suite-page, .try-it-page"))page(this.getDeviceIndependentPage("landing-page"));else{const e=d.a.loadTemporarily("referrer");this.isComingFromMarketplace(e)?(d.a.remove("referrer"),c.a.openLink(e,!0)):l.a.wasOnLibraryPageFollowedByOnlyBookPages()?(l.a.popHistoryUpToLibrary(),page(this.getDeviceIndependentPage("library"))):page(this.getDeviceIndependentPage("landing-page"))}}goToLastPage(){l.a.pagesHistory.pop(),page(l.a.pagesHistory.pop()||this.getDeviceIndependentPage("landing-page"))}getDeviceIndependentPage(e){return`${i.b.isApp()?"#!/":"/"}${e}`}isComingFromMarketplace(e){return e||(e=""),e.indexOf("www.manning.com")>=0||e.indexOf("www-qa.manning.com")>0}fixReferrerIfNecessary(){this.referrer.indexOf("manning.com/checkout")>0&&(this.referrer=l.a.getDeploymentType()==u.a.prod?"https://www.manning.com/dashboard":"https://www-qa.manning.com/dashboard")}};var g=o(2);const m=new class{load(){setTimeout(()=>{Promise.all([this.getSource()]).then(([{LandingPage:e}])=>{e.initialize(),$(document).trigger("landingPageCodeLoaded")})},5)}getSource(){return this.sourcePromise||(this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(54).then(o.bind(null,1204))}clean(){this.sourcePromise&&this.sourcePromise.then(({LandingPage:e})=>e.clean())}};var p=o(11),f=o(10),b=o(15),w=o(30),v=o(50),k=o(9),P=o(13),S=o(19),C=o(6),y=o(32);const I=new class{constructor(){this.renderErrorReportPopup=this.renderErrorReportPopup.bind(this),$(document).on("bookElementIntroArrived",(e,t)=>{if(!$("#main-page-content .backend-main-page-content").length&&t){const e=$("#book-markup-container .inline-book-info-container");$("#book-markup-container").html(t),e.length&&$("#book-markup-container").prepend(e),$(document).trigger("requestPromoLayoutAdaption"),a.a.setTimeout(()=>{P.a.insertLoadingBoxes(),$(document).trigger("requestPromoLayoutAdaption")},16)}})}load(e,t,o,n,r){let s=k.a.getCurrentMainContentTranslateX();0==$("#main-page-content .backend-main-page-content").length&&$("#main-page-content").html(Object(y.a)(f.a.isSpecialPathPartInsteadOfBookElement(t)||f.a.isSpecialFreeEbookOpenPart(t)?f.a.beautifyBookElementShortName(e,!0):f.a.beautifyBookElementShortName(t,!0)||f.a.beautifyBookElementShortName(e,!0))),f.a.isSpecialFreeEbookOpenPart(t)&&v.a.openCurrentFreeEbook(e),$("html, body").scrollTop(0),k.a.translateMainContent(s);const a=Date.now();let l=!1;n||0!=$(".backend-main-page-content").length||S.a.getBookElementIntro(e,t,o).then(e=>{l||e&&(i.b.isApp()&&(e=e.replace(/\/assets\/images\//g,"assets/images/")),$(document).trigger("bookElementIntroArrived",e))});const c=()=>{Promise.all([this.getSource(),S.a.getBookElement(e,t,o,n),this.getTimeoutPromise()]).then(([{BookPage:i},n])=>{l=!0,$(document).trigger("bookPageCodeLoaded"),i.initialize(n,e,t,o,r),this.activeBook=e;let s=e!=this.activeBook;C.a.isLoggedIn().then(e=>{if(e.loggedIn&&s&&(clearTimeout(this.errorReportTimer),i.getBook().isMeap)){let e=b.a.get("error-modal-last-shown");var t=(Date.now()-new Date(e))/1e3;t/=604800,!b.a.get("stop-showing-error-reports-modal")&&t>1&&(this.errorReportTimer=setTimeout(this.renderErrorReportPopup,3e5),$(document).trigger("meapErrorReportShow"))}});try{$(document).trigger("chapterLoadingTime",[Math.round((Date.now()-a)/1e3)])}catch(e){console.log(e)}}).catch(t=>{console.log("Error in book page manager:",t),$(document.body).removeClass("app-code-not-loaded");const o=$("#error-modal"),r=i.b.isConnected();o.find("h3 strong").text(n?"Access denied!":"Unable to load book!"),n?o.find(".error-modal-try-again-message").hide():o.find(".error-modal-try-again-message").show(),o.find(".error-modal-try-again-message").text(r?"(try again in a couple of minutes)":"(check your internet connection and try again)");const s=`http://www.manning.com/books/${e}`;o.find(".book-name-container").attr("href",s).text(e),o.find(".marketplace-link").attr("href",s),o.find(".homepage-link").attr("href",i.b.isApp()?"#!/landing-page":"https://livebook.manning.com"),p.a.showFoundationModal(o)})};C.a.isLoggedIn().then(e=>c()).catch(e=>c())}renderErrorReportPopup(){clearTimeout(this.errorReportTimer),w.a.renderErrorReportModal()}clean(){this.sourcePromise&&this.sourcePromise.then(({BookPage:e})=>e.clean())}partialClean(){this.sourcePromise&&this.sourcePromise.then(({BookPage:e})=>e.partialClean())}getSource(){return this.sourcePromise||(this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(3),o.e(4),o.e(12),o.e(27)]).then(o.bind(null,1225))}getTimeoutPromise(){return i.b.isApp()?new Promise((e,t)=>{a.a.setTimeout(()=>e(),200)}):Promise.resolve()}};var M=o(1),E=o(46),T=o(21),x=o(25);const O=new class{constructor(){this.loadCodeOnInteraction=this.loadCodeOnInteraction.bind(this),$(document).on("click",".main-token-status-container",this.loadCodeOnInteraction)}load(){this.getSource().then(({TokenModal:e})=>e.initialize())}clean(){this.sourcePromise&&this.getSource().then(({TokenModal:e})=>e.clean())}loadCodeOnInteraction(e){$(document).off("click",".main-token-status-container",this.loadCodeOnInteraction),this.getSource().then(({TokenModal:e})=>e.show()),e&&e.stopImmediatePropagation()}getSource(){return this.sourcePromise||(this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(0),o.e(1),o.e(2),o.e(10),o.e(61)]).then(o.bind(null,333))}};var B=o(8);const A=new class{load(e=""){this.getSource().then(({ExerciseSuitePage:t})=>{t.initialize(e)})}clean(){this.sourcePromise&&this.getSource().then(({ExerciseSuitePage:e})=>{$(document).trigger("pageAppCodeLoaded"),e.clean()})}getSource(){return this.sourcePromise||(this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(0),o.e(1),o.e(5),o.e(9),o.e(42)]).then(o.bind(null,1231))}};const D=new class{load(e){this.getSource().then(({CatalogPage:t})=>{$(document).trigger("catalogPageCodeLoaded"),t.initialize(e)})}clean(){this.sourcePromise&&this.getSource().then(({CatalogPage:e})=>{e.clean()})}getSource(){return this.sourcePromise||(this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(31).then(o.bind(null,1209))}};const L=new class{load(){this.getSource().then(({LibraryPage:e})=>{$(document).trigger("libraryPageCodeLoaded"),e.initialize()})}clean(){this.sourcePromise&&this.getSource().then(({LibraryPage:e})=>{e.clean()})}getSource(){return this.sourcePromise||(g.a.loadMustacheCode(),this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(6),o.e(55)]).then(o.bind(null,1210))}};const _=new class{load(){this.getSource().then(({TryItPage:e})=>{$(document).trigger("pageAppCodeLoaded"),e.initialize()})}clean(){this.sourcePromise&&this.getSource().then(({TryItPage:e})=>e.clean())}getSource(){return this.sourcePromise||(this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(90).then(o.bind(null,1211))}};const N=new class{load(e,t,o,i){$("#main-page-content").html(Object(y.a)(f.a.beautifyBookElementShortName(t,!0)||f.a.beautifyBookElementShortName(e,!0))),setTimeout(()=>{Promise.all([this.getSource(),S.a.getBookElement(e,t,o,i)]).then(([{EditorPage:i},n])=>{$(document).trigger("editorPageCodeLoaded"),i.initialize(n,e,t,o)}).catch(t=>{const o=$("#error-modal"),i=`http://www.manning.com/books/${e}`;o.find(".book-name-container").attr("href",i).text(e),o.find(".marketplace-link").attr("href",i),p.a.showFoundationModal(o)})},5)}clean(){this.sourcePromise&&this.sourcePromise.then(({EditorPage:e})=>e.clean())}partialClean(){this.sourcePromise&&this.sourcePromise.then(({EditorPage:e})=>e.partialClean())}getSource(){return this.sourcePromise||(this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(3),o.e(4),o.e(12),o.e(13),o.e(39)]).then(o.bind(null,1232))}};var U=o(51),F=o(47),R=o(12);const W='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792" style="display: none;"><symbol id="liveaudio-corner"><path d="M 1792,0 V 1792 H 0 Z" style="fill:#ffcc00" /><path style="fill:#000000"d="m 1225.7239,1040.0538 v 463.2689 q 0,11.0707 -8.0902,19.1609 -8.0902,8.0902 -19.1609,8.0902 -11.0708,0 -19.161,-8.0902 L 1037.5209,1380.6927 H 925.9617 q -11.07076,0 -19.16093,-8.0902 -8.09018,-8.0902 -8.09018,-19.161 v -163.5066 q 0,-11.0708 8.09018,-19.161 8.09017,-8.0901 19.16093,-8.0901 h 111.5592 l 141.7909,-141.791 q 8.0902,-8.0901 19.161,-8.0901 11.0707,0 19.1609,8.0901 8.0902,8.0902 8.0902,19.161 z m 163.5067,231.6344 q 0,32.3607 -18.0965,60.2505 -18.0964,27.8898 -47.9023,39.8122 -4.258,2.129 -10.645,2.129 -11.0708,0 -19.1609,-7.8773 -8.0902,-7.8773 -8.0902,-19.3738 0,-8.9418 5.1096,-15.1159 5.1096,-6.1741 12.3481,-10.645 7.2386,-4.4708 14.4772,-9.7933 7.2386,-5.3225 12.3482,-15.3288 5.1095,-10.0062 5.1095,-24.0576 0,-14.0514 -5.1095,-24.0576 -5.1096,-10.0063 -12.3482,-15.3288 -7.2386,-5.3225 -14.4772,-9.7933 -7.2385,-4.4709 -12.3481,-10.645 -5.1096,-6.1741 -5.1096,-15.1159 0,-11.4965 8.0902,-19.3738 8.0901,-7.8773 19.1609,-7.8773 6.387,0 10.645,2.129 29.8059,11.4966 47.9023,39.5993 18.0965,28.1027 18.0965,60.4634 z m 109.0044,0 q 0,65.1472 -36.1929,120.2881 -36.1929,55.1409 -95.8047,80.2631 -5.5353,2.129 -10.6449,2.129 -11.4966,0 -19.5868,-8.0902 -8.0901,-8.0902 -8.0901,-19.161 0,-16.6061 16.6061,-25.1221 23.8447,-12.3481 32.3607,-18.7351 31.5091,-22.9931 49.1797,-57.6957 17.6707,-34.7026 17.6707,-73.8761 0,-39.1735 -17.6707,-73.8761 -17.6706,-34.7025 -49.1797,-57.6957 -8.516,-6.387 -32.3607,-18.7351 -16.6061,-8.516 -16.6061,-25.1221 0,-11.0708 8.0901,-19.161 8.0902,-8.0901 19.161,-8.0901 5.5354,0 11.0707,2.1289 59.6118,25.1222 95.8047,80.2631 36.1929,55.1409 36.1929,120.2881 z m 109.0045,0 q 0,97.9337 -54.0765,179.8999 -54.0764,81.9663 -143.9199,120.7139 -5.5354,2.129 -11.0708,2.129 -11.0707,0 -19.1609,-8.0901 -8.0902,-8.0902 -8.0902,-19.161 0,-15.3287 16.6062,-25.1221 2.9806,-1.7032 9.5804,-4.4709 6.5999,-2.7677 9.5805,-4.4709 19.5867,-10.6449 34.9155,-21.7157 52.3732,-38.7477 81.7533,-96.6563 29.3801,-57.9086 29.3801,-123.0558 0,-65.1472 -29.3801,-123.0558 -29.3801,-57.9086 -81.7533,-96.6563 -15.3288,-11.0707 -34.9155,-21.7157 -2.9806,-1.7032 -9.5805,-4.4709 -6.5998,-2.7677 -9.5804,-4.4709 -16.6062,-9.7933 -16.6062,-25.12205 0,-11.07076 8.0902,-19.16093 8.0902,-8.09018 19.1609,-8.09018 5.5354,0 11.0708,2.129 89.8435,38.74766 143.9199,120.71386 54.0765,81.9662 54.0765,179.8999 z"/></symbol></svg>',V='<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.583333 10.583334" height="40" width="40" style="display: none"><symbol id="token-icon"><g transform="translate(0,-286.41666)"> <path transform="matrix(0.26458334,0,0,0.26458334,0,286.41666)" d="M 20 0 A 19.999999 19.999999 0 0 0 0 20 A 19.999999 19.999999 0 0 0 20 40 A 19.999999 19.999999 0 0 0 40 20 A 19.999999 19.999999 0 0 0 20 0 z M 20 3 A 16.999999 16.999999 0 0 1 37 20 A 16.999999 16.999999 0 0 1 20 37 A 16.999999 16.999999 0 0 1 3 20 A 16.999999 16.999999 0 0 1 20 3 z M 20 6 C 12.268001 6 6 12.267994 6 20 C 6 27.731968 12.268001 34 20 34 C 27.732 34 34 27.731968 34 20 C 34 12.267994 27.732 6 20 6 z M 12 14 L 28 14 L 28 18 L 22 18 L 22 29 L 18 29 L 18 18 L 12 18 L 12 14 z " style="opacity:1;fill-opacity:1;stroke:none;stroke-width:2.90095091;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" fill="currentColor" /></g></symbol></svg>',z='<div id="full-screen-modal"></div>',q='<div id="login-modal" class="reveal-modal" data-reveal></div>',H='<div id="notifications-modal" class="reveal-modal" data-reveal> <span class="close-reveal-modal"><i class="fal fa-times"></i></span> <div class="row"> <div class="small-12 columns"> <h3 class="notifications-modal-title"></h3> <div class="notifications-modal-message"></div></div></div><div class="row modal-command-row"> <div class="small-12 columns"> <button class="close-reveal-modal-button pull-right emphasized-button modal-action-button">OK</button></div></div></div>',j='<div id="error-modal" class="reveal-modal" data-reveal><div class="row"> <div class="small-12 columns"> <h3 class="text-label"><strong>Unable to load book!</strong></h3> <div>The book <a class="book-name-container"></a> could not be loaded.</div><p class="error-modal-try-again-message">(try again in a couple of minutes)</p><a href="./" class="marketplace-link pull-right emphasized-button" target="_blank">manning.com</a> <a href="https://livebook.manning.com/" class="pull-right emphasized-button homepage-link">homepage</a> </div></div></div>',K='<div id="tooltip" class="tooltip hidden"><div class="tooltip-container"></div><div class="tooltip-tip"></div></div>',G=`\n<nav class="header-nav-bar" data-topbar role="navigation">\n    <section class="header-logo-container">\n        <a class="immediately-go-to-link" href="https://www.manning.com"><img class="header-manning-small-logo" loading="lazy" src="${M.a.getLivebookCdn()}assets/images/manning-small-logo.svg" width="58" height="40"></a>\n        <a class="immediately-go-to-link" href="https://www.manning.com"><img class="header-manning-big-logo" loading="lazy" src="${M.a.getLivebookCdn()}assets/images/manning-header-simplified.svg" width="192" height="40"></a>\n    </section>\n    <section class="header-mid-container">\n        <div class="header-search-container show-on-all-pages">\n            <input type="text" id="search-input" placeholder="search for books and inside books..." autocomplete="off"/>\n            <i class="fa fa-times close-search-icon"></i>\n            <button>\n                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M15.8928 14.0717L12.4 10.5789C12.3315 10.5104 12.2384 10.472 12.1414 10.472H11.3904C12.2925 9.36672 12.8342 7.95552 12.8342 6.41728C12.8342 2.87296 9.96096 0 6.41728 0C2.87296 0 0 2.87296 0 6.41728C0 9.9616 2.87296 12.8346 6.41728 12.8346C7.9552 12.8346 9.3664 12.2928 10.4717 11.3907V12.1418C10.4717 12.2387 10.5101 12.3318 10.5786 12.4003L14.0717 15.8931C14.2144 16.0358 14.4458 16.0358 14.5888 15.8931L15.8928 14.5888C15.9613 14.5203 16 14.4272 16 14.3302C16 14.2333 15.9613 14.1402 15.8928 14.0717ZM6.41728 10.4723C4.1776 10.4723 2.36192 8.65696 2.36192 6.41728C2.36192 4.1776 4.1776 2.36192 6.41728 2.36192C8.65696 2.36192 10.4723 4.17728 10.4723 6.41696C10.4723 8.65664 8.65664 10.4723 6.41728 10.4723Z" fill="currentColor"/>\n                </svg>\n            </button>\n        </div>\n        <div class="show-on-all-pages hide-on-edit-page header-item-container browse-item-container header-item-with-label">\n            <span class="header-icon">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 27.79 28">\n                    <defs>\n                        <style>.cls-1 {fill:currentColor;fill-rule:evenodd;}</style>\n                    </defs>\n                    <path class="cls-1" d="M27.66,24.16l-7-18.73a2,2,0,0,0-2.57-1.18l-3.26,1.2a2,2,0,0,0-.87.64V2a2,2,0,0,0-2-2H8A2,2,0,0,0,6,2V7H2A2,2,0,0,0,0,9V26a2,2,0,0,0,2,2H6a1.87,1.87,0,0,0,1-.28A1.91,1.91,0,0,0,8,28h4a2,2,0,0,0,2-2V8.81l6.7,17.93a2,2,0,0,0,2.58,1.19l3.26-1.2A2,2,0,0,0,27.66,24.16ZM2,26V9H6V26Zm10,0H8V9s0-.06,0-.09V2h4Zm10.58.05-7-18.73,3.26-1.2,7,18.73Z"/>\n                </svg>\n                <span class="header-icon-label">browse</span>\n            </span>\n        </div>\n        <div class="header-item-container show-on-edit-page header-item-with-label index-button-container" data-title="index terms" data-tooltip aria-haspopup="true">\n            <div class="header-index-button header-icon">\n            <svg width="20" height="29" viewBox="0 0 20 29" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path fill-rule="evenodd" clip-rule="evenodd" d="M8.44442 20.9034C9.22283 20.1332 10.4758 20.1322 11.2555 20.9012L17.4601 27.0205L17.4601 2.93386H2.27235V27.0099L8.44442 20.9034ZM16.0394 28.3964C17.2967 29.6364 19.4601 28.7663 19.4601 27.0205V2.93386C19.4601 1.85431 18.5646 0.979165 17.4601 0.979165H2.27235C1.16778 0.979165 0.272352 1.85431 0.272352 2.93386V27.0099C0.272352 28.7571 2.43884 29.6266 3.69519 28.3836L9.85109 22.2931L16.0394 28.3964Z" fill="currentColor"/>\n            </svg>\n                <span class="header-icon-label">index</span>\n            </div>\n        </div>\n        <div class="show-on-all-logged-in-pages hide-on-edit-page header-item-container my-titles-item-container header-item-with-label">\n            <div class="header-icon books-button">\n                <svg width="30" height="28" viewBox="0 0 30 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.5707 9.17014C16.5688 9.17014 18.1885 7.56187 18.1885 5.57798C18.1885 3.59409 16.5688 1.98582 14.5707 1.98582C12.5727 1.98582 10.9529 3.59409 10.9529 5.57798C10.9529 7.56187 12.5727 9.17014 14.5707 9.17014ZM20.1885 5.57798C20.1885 8.65861 17.6734 11.156 14.5707 11.156C11.4681 11.156 8.95291 8.65861 8.95291 5.57798C8.95291 2.49735 11.4681 0 14.5707 0C17.6734 0 20.1885 2.49735 20.1885 5.57798Z" fill="currentColor"/>\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.30493 20.1943C7.04506 18.6539 5.75 16.8404 3.73011 16.5651C2.46404 16.3928 1.24391 16.9521 0.784966 17.915C0.0448406 19.4553 1.33837 21.2746 3.36667 21.546C4.62586 21.7164 5.84752 21.1515 6.30493 20.1943ZM3.53973 17.9423C2.72638 17.8317 2.18766 18.2216 2.05041 18.5096L2.04853 18.5135C1.93132 18.7575 1.93937 19.0643 2.18136 19.4046C2.43056 19.7551 2.90625 20.0817 3.55367 20.1684L3.55576 20.1687C4.35785 20.2772 4.90268 19.8859 5.04008 19.5984L5.04137 19.5957C5.15842 19.3521 5.15038 19.0467 4.90882 18.707C4.6597 18.3566 4.18448 18.0302 3.54004 17.9423" fill="currentColor"/>\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M28.5088 18.6714C28.3741 16.97 26.3393 16.0424 24.4514 16.8068C23.2682 17.2861 22.4931 18.3762 22.5806 19.4379C22.7153 21.1393 24.7516 22.0727 26.6449 21.3008C27.8212 20.8232 28.5947 19.7275 28.5088 18.6714ZM24.98 18.0939C24.2199 18.402 23.9498 19.0071 23.9759 19.3246L23.9763 19.329C23.9976 19.5984 24.1591 19.8601 24.54 20.0347C24.9323 20.2145 25.5088 20.2613 26.1131 20.0149L26.115 20.0141C26.8643 19.7099 27.1391 19.1006 27.1133 18.7833L27.1131 18.7804C27.0918 18.5113 26.931 18.2508 26.5508 18.0765C26.1586 17.8968 25.5824 17.8501 24.98 18.0939Z" fill="currentColor"/>\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M20.6 13.9007C21.8 13.9007 23 14.1986 24.2 14.6951V16.9207C24.2815 16.8796 24.3654 16.8416 24.4514 16.8067C24.9707 16.5965 25.5011 16.5142 26 16.5409V13.7022C26 13.5036 25.9 13.4043 25.8 13.305C24.2 12.4114 22.4 11.9149 20.6 11.9149C18.6 11.9149 16.7 12.5107 14.8 13.6029C14.7 13.6029 14.6 13.7022 14.6 13.7022C14.6 13.7022 14.4 13.7022 14.4 13.6029C12.5 12.5107 10.5 11.9149 8.6 11.9149C6.7 11.9149 5 12.4114 3.2 13.305C3.1 13.4043 3 13.5036 3 13.7022V16.5455C3.23809 16.5259 3.48322 16.5317 3.73011 16.5653C4.19766 16.629 4.62637 16.7752 5 16.9812V14.6951C6.2 14.1986 7.4 13.9007 8.6 13.9007C10.2 13.9007 11.8 14.3972 13.4 15.2908C13.8 15.4894 14.2 15.5887 14.7 15.5887C15.2 15.5887 15.6 15.4894 16 15.2908C17.4 14.3972 19 13.9007 20.6 13.9007ZM5 21.3519C4.50962 21.5484 3.94206 21.6241 3.36667 21.5462C3.24155 21.5294 3.11923 21.5068 3 21.4787V24.0284V27.0071C3 27.305 3.2 27.4043 3.4 27.4043H3.6C5.2 26.7093 6.8 26.3121 8.5 26.3121C10.6 26.3121 12.6 26.9078 14.5 28C16.4 26.9078 18.4 26.3121 20.5 26.3121C22.2 26.3121 23.8 26.7093 25.4 27.4043H25.6C25.8 27.4043 26 27.2057 26 27.0071V24.0284V21.4985C25.3646 21.6317 24.7391 21.586 24.2 21.3964V23.9291V24.7234C23 24.4256 21.8 24.227 20.6 24.227C18.5 24.227 16.5 24.7234 14.6 25.6171C12.7 24.7234 10.6 24.227 8.6 24.227C7.4 24.227 6.2 24.4256 5 24.7234V23.9291V21.3519Z" fill="currentColor"/>\n                </svg>\n                <span class="header-icon-label">my titles</span>\n                <div class="header-icon-notification wish-list-notification hidden">\n                    <i class="fal fa-heart"></i>\n                </div>\n            </div>\n        </div>\n        <div class="header-item-container show-on-review-report header-item-with-label" data-title="filter reviews" data-tooltip aria-haspopup="true">\n            <div class="review-filter-menu-button header-icon">\n                <i class="fal fa-filter"></i>\n                <span class="header-icon-label">filter</span>\n            </div>\n        </div>\n    </section>\n    <section class="header-right-icons-container">\n        <div class="header-shopping-cart-button-container hide-on-edit-page show-on-all-pages header-item-container hide-on-review-page header-item-with-label">\n            <div class="shopping-cart-button header-icon">\n                <svg width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <g clip-path="url(#clip0)">\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14.2555 25.7607C14.5331 23.963 13.0066 22.4429 11.2152 22.7141C10.0924 22.8844 9.1778 23.799 9.00749 24.9218C8.72995 26.7195 10.2564 28.246 12.0541 27.9684C13.1706 27.7981 14.0852 26.8772 14.2555 25.7607ZM12.8678 25.5399C12.9939 24.6947 12.2811 23.9819 11.4359 24.108C10.9061 24.1837 10.4771 24.6127 10.4014 25.1488C10.269 25.9941 10.9881 26.7131 11.8333 26.5807C12.3568 26.4987 12.7858 26.0634 12.8678 25.5399Z" fill="currentColor"/>\n                        <path d="M10.0538 21.4841C8.72922 21.4841 8.65353 20.0396 8.65353 19.9766C8.63461 19.8189 6.89367 6.9385 6.81167 6.16896C6.71075 5.23541 5.6132 4.59203 5.56274 4.56679L1.21672 2.5294C0.144405 1.96801 -0.101597 1.18585 0.0308657 0.63708C0.125482 0.258617 0.396714 0 0.705792 0C0.787793 0 0.876101 0.0189232 0.964409 0.0567695C5.17166 2.0374 8.81753 3.75941 8.96891 4.69295C9.12661 5.68957 9.41676 8.13066 9.41676 8.14958L9.4483 8.42712H29.9926C30.5603 8.42712 30.945 8.57851 31.1469 8.86866C31.5569 9.46159 31.1721 10.5213 31.1658 10.5339L27.8921 20.2541C27.8732 20.3424 27.6398 21.4841 26.5422 21.4841H10.0538ZM10.7603 18.9863H26.1953L28.7121 10.4645H9.6943L10.7603 18.9863Z" fill="currentColor"/>\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M25.849 25.7608C26.1266 23.9631 24.6001 22.4366 22.8024 22.7142C21.6859 22.8908 20.7713 23.7991 20.601 24.9156C20.3234 26.7069 21.8436 28.2334 23.6413 27.9622C24.7641 27.7919 25.6787 26.8773 25.849 25.7608ZM24.4614 25.5399C24.5875 24.6947 23.8748 23.9819 23.0295 24.108C22.506 24.1837 22.0708 24.6127 21.9951 25.1488C21.8626 25.9941 22.5817 26.7131 23.4269 26.5807C23.9505 26.4987 24.3794 26.0634 24.4614 25.5399Z" fill="currentColor"/>\n                    </g>\n                    <defs>\n                        <clipPath id="clip0">\n                            <rect width="31.3368" height="28" fill="white"/>\n                        </clipPath>\n                    </defs>\n                </svg>            \n                <span class="header-icon-label">cart</span>\n            </div>\n            <div class="header-icon-notification hidden"></div>\n        </div>\n        <div class="header-sign-in-button-container show-on-all-not-logged-in-pages header-item-container header-item-with-label">\n            <div class="header-icon"> \n                <svg class="avatar-icon" width="22" height="30" viewBox="0 0 22 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.0503 3.15739C8.57031 2.66025 5.71847 5.54102 6.14142 9.09382L6.14288 9.10608L6.14281 9.10609C6.38912 11.4051 8.29151 13.3237 10.7068 13.5736L10.7164 13.5746L10.7259 13.5757C14.1535 13.9937 17.068 11.1652 16.6576 7.65433C16.3178 5.31573 14.3858 3.40828 12.0869 3.16197L12.0686 3.16L12.0503 3.15739ZM12.3291 1.07592C7.4196 0.386074 3.48311 4.49739 4.05542 9.33598C4.41147 12.6311 7.10307 15.3074 10.4811 15.6614C15.2455 16.2365 19.3224 12.2742 18.7414 7.39382L18.74 7.38162L18.7382 7.36945C18.274 4.11966 15.6177 1.43722 12.3291 1.07592Z" fill="currentColor"/>\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M15.3921 16.8559C16.4921 16.2344 17.7592 16.4075 18.6721 17.1683L18.6965 17.1886L18.7196 17.2103C20.6274 19.0059 21.75 21.4813 21.75 24.275C21.75 25.2619 21.2671 26.0629 20.5982 26.6639C19.9445 27.2511 19.0715 27.6915 18.1244 28.0225C16.2242 28.6863 13.7603 29 11.35 29C8.93957 29 6.47573 28.6863 4.57551 28.0225C3.62836 27.6915 2.7554 27.2511 2.10175 26.6639C1.43283 26.0629 0.949951 25.2619 0.949951 24.275C0.949951 21.487 2.06871 19.0079 4.08191 17.2084C4.95575 16.3588 6.35997 16.2646 7.40762 16.8558C8.54564 17.4662 9.9693 17.825 11.4 17.825C12.8305 17.825 14.2541 17.4662 15.3921 16.8559ZM17.3065 18.7643C17.0281 18.5441 16.7105 18.5211 16.4209 18.6866L16.4094 18.6932L16.3978 18.6995C14.9374 19.4858 13.1652 19.925 11.4 19.925C9.63474 19.925 7.86249 19.4858 6.40215 18.6995L6.39049 18.6932L6.379 18.6866C6.03783 18.4917 5.66684 18.593 5.54241 18.7174L5.5206 18.7392L5.49753 18.7597C3.92361 20.1588 3.04995 22.0723 3.04995 24.275C3.04995 24.513 3.15144 24.7839 3.50519 25.1017C3.87419 25.4332 4.46217 25.7584 5.26814 26.04C6.87417 26.6011 9.08533 26.9 11.35 26.9C13.6146 26.9 15.8257 26.6011 17.4318 26.04C18.2377 25.7584 18.8257 25.4332 19.1947 25.1017C19.5485 24.7839 19.65 24.513 19.65 24.275C19.65 22.0815 18.7828 20.1666 17.3065 18.7643Z" fill="currentColor"/>\n                </svg>\n                <span class="header-icon-label">sign in</span>\n            </div>\n        </div>\n        <div class="header-settings-button-container show-on-all-logged-in-pages header-item-container tooltip-on-the-left header-item-with-label">\n            <div class="header-icon settings-button lb-avatar-container">\n                <svg class="avatar-icon" width="22" height="30" viewBox="0 0 22 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.0503 3.15739C8.57031 2.66025 5.71847 5.54102 6.14142 9.09382L6.14288 9.10608L6.14281 9.10609C6.38912 11.4051 8.29151 13.3237 10.7068 13.5736L10.7164 13.5746L10.7259 13.5757C14.1535 13.9937 17.068 11.1652 16.6576 7.65433C16.3178 5.31573 14.3858 3.40828 12.0869 3.16197L12.0686 3.16L12.0503 3.15739ZM12.3291 1.07592C7.4196 0.386074 3.48311 4.49739 4.05542 9.33598C4.41147 12.6311 7.10307 15.3074 10.4811 15.6614C15.2455 16.2365 19.3224 12.2742 18.7414 7.39382L18.74 7.38162L18.7382 7.36945C18.274 4.11966 15.6177 1.43722 12.3291 1.07592Z" fill="currentColor"/>\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M15.3921 16.8559C16.4921 16.2344 17.7592 16.4075 18.6721 17.1683L18.6965 17.1886L18.7196 17.2103C20.6274 19.0059 21.75 21.4813 21.75 24.275C21.75 25.2619 21.2671 26.0629 20.5982 26.6639C19.9445 27.2511 19.0715 27.6915 18.1244 28.0225C16.2242 28.6863 13.7603 29 11.35 29C8.93957 29 6.47573 28.6863 4.57551 28.0225C3.62836 27.6915 2.7554 27.2511 2.10175 26.6639C1.43283 26.0629 0.949951 25.2619 0.949951 24.275C0.949951 21.487 2.06871 19.0079 4.08191 17.2084C4.95575 16.3588 6.35997 16.2646 7.40762 16.8558C8.54564 17.4662 9.9693 17.825 11.4 17.825C12.8305 17.825 14.2541 17.4662 15.3921 16.8559ZM17.3065 18.7643C17.0281 18.5441 16.7105 18.5211 16.4209 18.6866L16.4094 18.6932L16.3978 18.6995C14.9374 19.4858 13.1652 19.925 11.4 19.925C9.63474 19.925 7.86249 19.4858 6.40215 18.6995L6.39049 18.6932L6.379 18.6866C6.03783 18.4917 5.66684 18.593 5.54241 18.7174L5.5206 18.7392L5.49753 18.7597C3.92361 20.1588 3.04995 22.0723 3.04995 24.275C3.04995 24.513 3.15144 24.7839 3.50519 25.1017C3.87419 25.4332 4.46217 25.7584 5.26814 26.04C6.87417 26.6011 9.08533 26.9 11.35 26.9C13.6146 26.9 15.8257 26.6011 17.4318 26.04C18.2377 25.7584 18.8257 25.4332 19.1947 25.1017C19.5485 24.7839 19.65 24.513 19.65 24.275C19.65 22.0815 18.7828 20.1666 17.3065 18.7643Z" fill="currentColor"/>\n                </svg>\n                \n                <svg class="settings-menu-dots-icon" width="12" height="28" viewBox="0 0 12 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M5.96662 19.1169C7.60505 19.1169 8.93325 20.4451 8.93325 22.0836C8.93325 23.722 7.60505 25.0502 5.96662 25.0502C4.3282 25.0502 3 23.722 3 22.0836C3 20.4451 4.3282 19.1169 5.96662 19.1169Z" fill="currentColor"/>\n                    <path d="M5.96662 11.0835C7.60505 11.0835 8.93325 12.4117 8.93325 14.0501C8.93325 15.6885 7.60505 17.0167 5.96662 17.0167C4.3282 17.0167 3 15.6885 3 14.0501C3 12.4117 4.3282 11.0835 5.96662 11.0835Z" fill="currentColor"/>\n                    <path d="M5.96662 3.05006C7.60505 3.05006 8.93325 4.37826 8.93325 6.01668C8.93325 7.6551 7.60505 8.9833 5.96662 8.9833C4.3282 8.9833 3 7.6551 3 6.01668C3 4.37826 4.3282 3.05006 5.96662 3.05006Z" fill="currentColor"/>\n                </svg>\n\n                <span class="user-initials-container header-icon-label">&nbsp;</span>\n                <span class="header-icon-notification hidden"></span>\n                <span class="header-icon-label settings-more-label">more</span>\n            </div>\n        </div>\n    </section>\n</nav>\n<div id="header-browse-container" class="collapsed">\n    <a class="header-browse-link" href="https://www.manning.com/catalog">all <span class="hideable-label">&nbsp;products</span></a>\n    <a class="header-browse-link" href="https://www.manning.com/meap-catalog">MEAP</a>\n    <a class="header-browse-link" href="https://livebook.manning.com/">liveBook</a>\n    <a class="header-browse-link" href="https://livevideo.manning.com/">liveVideo</a>\n    <a class="header-browse-link" href="https://liveproject.manning.com/">liveProject</a>\n    <a class="header-browse-link" href="https://www.manning.com/liveaudio-landing">liveAudio</a>\n    <a class="header-browse-link" href="https://freecontent.manning.com/">free <span class="hideable-label">&nbsp;content</span></a>\n</div>\n<div id="header-notification-container" class="hidden"></div>\n<div id="header-site-wide-promo-container" class="hidden"></div>\n<div id="review-structure-menu-container" class="show-on-review-report" data-title="review structure" data-tooltip aria-haspopup="true">\n    <div class="review-structure-menu-button header-icon">\n        <i class="fal fa-bars"></i>\n    </div>\n</div>\n<div id="toc-icon-container" class="show-on-book-page toc-menu-button">\n    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <mask id="path-1-inside-1" fill="white">\n            <rect width="4" height="6" rx="1"/>\n        </mask>\n        <rect width="4" height="6" rx="1" stroke="currentColor" stroke-width="4" mask="url(#path-1-inside-1)"/>\n        <mask id="path-2-inside-2" fill="white">\n            <rect y="9" width="4" height="6" rx="1"/>\n        </mask>\n        <rect y="9" width="4" height="6" rx="1" stroke="currentColor" stroke-width="4" mask="url(#path-2-inside-2)"/>\n        <mask id="path-3-inside-3" fill="white">\n            <rect y="18" width="4" height="6" rx="1"/>\n        </mask>\n        <rect y="18" width="4" height="6" rx="1" stroke="currentColor" stroke-width="4" mask="url(#path-3-inside-3)"/>\n        <mask id="path-4-inside-4" fill="white">\n            <rect x="5" width="19" height="6" rx="1"/>\n        </mask>\n        <rect x="5" width="19" height="6" rx="1" stroke="currentColor" stroke-width="4" mask="url(#path-4-inside-4)"/>\n        <mask id="path-5-inside-5" fill="white">\n            <rect x="5" y="9" width="19" height="6" rx="1"/>\n        </mask>\n        <rect x="5" y="9" width="19" height="6" rx="1" stroke="currentColor" stroke-width="4" mask="url(#path-5-inside-5)"/>\n            <mask id="path-6-inside-6" fill="white">\n            <rect x="5" y="18" width="19" height="6" rx="1"/>\n        </mask>\n        <rect x="5" y="18" width="19" height="6" rx="1" stroke="currentColor" stroke-width="4" mask="url(#path-6-inside-6)"/>\n    </svg>\n</div>\n<div id="book-additional-commands-container" class="show-on-book-page hide-on-edit-page">\n    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <circle cx="3.92322" cy="11.825" r="2.97339" fill="currentColor"/>\n        <circle cx="11.975" cy="11.825" r="2.97339" fill="currentColor"/>\n        <circle cx="20.0266" cy="11.825" r="2.97339" fill="currentColor"/>\n    </svg>\n    <div class="header-icon-notification disappear"></div>\n</div>`,J='<div style="overflow: hidden; position: relative;">\n<div id="add-to-cart-stripe" class="disappear hidden">\n    <span class="add-to-cart-stripe-message">add to cart</span>\n    <i class="fal fa-times close-icon" aria-hidden="true"></i>\n    <span class="add-to-cart-stripe-icon-container">\n        <i class="fal fa-shopping-cart" aria-hidden="true"></i>\n    </span>\n</div>\n</div>\n<div id="footer-promo-container" class="hidden">\n</div>\n<div class="main-footer-wrapper">\n<div class="row">\n    <div class="large-12 columns">\n        <div class="footer-content-wrapper">\n            <a class="previous-element-link invisible footer-item">\n                <i class="fa fa-chevron-left"></i>\n                <span class="book-element-label"></span>\n            </a>\n            <div class="footer-item copyright-book-title-container">\n                <span class="copyright-label text-label">&copy; 2020 Manning Publications Co.</span>\n                <span class="footer-book-title-label hidden">\n                    <i class="fa fa-heart wish-list-icon" title="add/remove from wish list" aria-haspopup="true"></i>\n                    <span class="book-title-label-text"></span>\n                </span>\n            </div>\n            \n            <a class="next-element-link invisible footer-item">\n                <span class="book-element-label"></span>\n                <i class="fa fa-chevron-right"></i>\n            </a>\n        </div>\n    </div>\n</div>\n</div>',Z=new class{insertNecessaryElements(){null==document.getElementById("liveaudio-corner")&&($(document.body).append(W),$(document.body).append(V),$(document.body).append(z),$(document.body).append(q),$(document.body).append(H),$(document.body).append(j),$(document.body).append(K),$("#header").append(G),$("#footer").append(J))}};const X=new class{load(){this.getSource().then(({EpubPreviewPage:e})=>{$(document).trigger("pageAppCodeLoaded"),e.initialize()})}clean(){this.sourcePromise&&this.getSource().then(({EpubPreviewPage:e})=>e.clean())}getSource(){return this.sourcePromise||(this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(4),o.e(7),o.e(40)]).then(o.bind(null,1233))}};var Y,Q=o(48),ee=o(22),te=o(52),oe=o(54),ie=o(14);!function(e){e[e.WishList=0]="WishList",e[e.Tokens=1]="Tokens",e[e.FreePreview=2]="FreePreview"}(Y||(Y={}));const ne='<form id="marketing-subscription-form" class="hidden">\n    <div class="marketing-subscription-title-container">Sign up to our mailing list for exclusive discounts and updates on this and other Manning products.</div>\n    <div class="marketing-subscription-email-input-container">\n        <input type="email" placeholder="email" required/>\n        <button type="submit" class="marketing-subscription-confirm">subscribe</button>\n    </div>\n    <div class="marketing-subscription-close-button"><i class="fal fa-times"></i></div>\n</form>';const re=new class{constructor(){this.handleFormSubmission=this.handleFormSubmission.bind(this),$(document).on("wishListAdd",(e,t)=>{setTimeout(()=>{this.handleWishListAdd(t)},1e3)}).on("unlockSectionSubsectionSuccess unlockBookElementSuccess unlockParagraphSuccess",()=>{this.handleTokenUnlockSuccess()}).on("halfWayThroughFreePreview",()=>this.handleHalfWayThroughFreePreview()),$(document.body).append(ne),$("#marketing-subscription-form .marketing-subscription-close-button").on("click",()=>this.hideSubscribeForm()),$("#marketing-subscription-form").on("submit",this.handleFormSubmission)}initialize(){}handleHalfWayThroughFreePreview(){this.productId=l.a.book&&l.a.book.manningId,this.subscriptionType=Y.FreePreview,this.showMarketingSubscriptionFormIfNecessary()}handleTokenUnlockSuccess(){this.productId=l.a.book&&l.a.book.manningId,this.subscriptionType=Y.Tokens,this.showMarketingSubscriptionFormIfNecessary()}handleWishListAdd(e){this.productId=e,this.subscriptionType=Y.WishList,this.showMarketingSubscriptionFormIfNecessary()}handleFormSubmission(e){return e.preventDefault(),this.sendMarketingSubscription($("#marketing-subscription-form input").val()),this.hideSubscribeForm(),!1}sendMarketingSubscription(e){$(document).trigger("marketingEmailSubscription",["submitted",this.subscriptionType]),M.a.getFromOurBackend(M.a.getAbsoluteUrl(this.getAppropriateRoute()),e=>{b.a.set("email-subscription-given",!0),$(document).trigger("requestNotification","Thank you!")},e=>{},{bookId:this.productId,email:e},!1)}getAppropriateRoute(){switch(this.subscriptionType){case Y.FreePreview:return"/api/marketingSubscription/createFreePreviewEmailSubscription";case Y.Tokens:return"/api/marketingSubscription/createTokensEmailSubscription";case Y.WishList:return"/api/marketingSubscription/createWishListEmailSubscription"}}showMarketingSubscriptionFormIfNecessary(){C.a.isCurrentlyLoggedIn()&&(b.a.get("email-subscription-offered")||($(document).trigger("marketingEmailSubscription",["offered",this.subscriptionType]),b.a.set("email-subscription-offered",!0),ie.a.getUserEmail().then(e=>{$("#marketing-subscription-form input").val(e||"")}),$("#marketing-subscription-form").removeClass("hidden"),a.a.setTimeout(()=>{i.b.isTouchDevice()||$("#marketing-subscription-form input").focus(),$("#marketing-subscription-form").addClass("show")},16)))}hideSubscribeForm(){$("#marketing-subscription-form").removeClass("show"),a.a.setTimeout(()=>{$("#marketing-subscription-form").addClass("hidden"),$("#marketing-subscription-form input").val("")},250)}};var se=o(23);new class{initialize(){this.getProgressBarSource().then(({ProgressBar:e})=>e.initialize())}getProgressBarSource(){return this.sourcePromise||(this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(67).then(o.bind(null,1212))}};o(27);const ae=new class{load(e=""){this.getSource().then(({VideoPage:t})=>{t.initialize(e)})}clean(){this.sourcePromise&&this.getSource().then(({VideoPage:e})=>{$(document).trigger("pageAppCodeLoaded"),e.clean()})}getSource(){return this.sourcePromise||(this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(4),o.e(111)]).then(o.bind(null,1213))}};const le=new class{load(e,t){this.getSource().then(({ReviewReportPage:o})=>{o.initalize(e,t)})}clean(){null!=this.sourcePromise&&this.sourcePromise.then(({ReviewReportPage:e})=>{e.clean()})}getSource(){return this.sourcePromise||(this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(0),o.e(2),o.e(5),o.e(11),o.e(70)]).then(o.bind(null,1226))}};var ce=o(55);const de=new class{initialize(){i.b.isApp()||C.a.isLoggedIn().then(e=>{e.loggedIn||a.a.onUserHasInteracted(()=>{setTimeout(()=>this.show(),this.timeout)})})}show(){this.getSource().then(({PromoSpinnerManager:e})=>e.show())}getSource(){return this.sourcePromise||(this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(69).then(o.bind(null,1234))}};const ue=new class{load(e,t){this.getSource().then(({ConceptPage:o})=>{$(document).trigger("pageAppCodeLoaded"),o.initialize(e,t)})}getSource(){return this.sourcePromise||(this.sourcePromise=g.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return Promise.all([o.e(4),o.e(32)]).then(o.bind(null,1235))}},he=$(document),ge=void 0,me=d.a.getItem("LIVEBOOK_LAST_ACCESS");d.a.setItem("LIVEBOOK_LAST_ACCESS",Date.now()),E.a.initializeAnalyticsIfNecessary(),ce.a.initialize(),function(){function e(){$("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet",href:`${M.a.getLivebookCdn()}vendor/fontawesome-5/css/all.min.css`}).on("load",()=>{$(document.body).addClass("icon-fonts-loaded")})}i.b.isGoogleMobileScreenSize()&&!me?a.a.onUserHasInteracted(()=>e(),!0):e()}(),i.b.loadDeviceInfo().then(e=>{$("body").addClass(e.platformString),$("body").toggleClass("touch-device",i.b.isTouchDevice()),Q.a.initialize(),B.a.containsAtLeastOneOf(document.location.hash||document.location.pathname,["token-ledger","token-modal","token-cashout","get-tokens"])&&($(document).trigger("requestNotification","loading token data ..."),O.load()),r.a.initialize(),s.a.initialize(),re.initialize(),U.a.initialize(),w.a.initialize(),oe.a.initialize(),ee.a.initialize(),te.a.initialize(),x.a.initialize(),h.initialize(),de.initialize(),ge&&(se.a.initializeDownloadManager(),se.a.initilizeOfflineOperationsModal(),C.a.isLoggedIn().then(e=>{e.loggedIn||R.a.requestOpenModal("","","",d.a.getItem("email"))})),C.a.isLoggedIn().then(e=>{e.loggedIn&&setTimeout(()=>{C.a.isCurrentlyLoggedIn()&&ee.a.load()},8e3)})});let pe=Date.now(),fe=0;function be(e){let t=e||function(){let e="";try{(e=(e=-1!=document.location.pathname.indexOf("/book/")?document.location.pathname:document.location.hash||("/"!=document.location.pathname?document.location.pathname:"")||document.location.search||"").replace("?_escaped_fragment_=/","").replace("#%21/","#!/").replace("#!//","").replace("#!/","").replace("#!book","book")).startsWith("/")&&(e=e.substring(1))}catch(e){return""}return e}();if(t.indexOf("index.html")>=0&&(t=(t=t.substring(t.lastIndexOf("index.html")+"index.html".length)).replace("//","/")).startsWith("/")&&(t=t.substring(1)),t.startsWith("catalog")){let e={};if(new page.Route(n.a.catalogRoute,{}).match("/"+t,e))return void Be({params:e})}else if(t.startsWith("library"))Oe();else if(t.startsWith("book")){let e={},o=new page.Route(n.a.meapElementRoute,{});if(o.match("/"+t,e))return void Pe({params:e});if((o=new page.Route(n.a.reviewElementRoute,{})).match("/"+t,e))return void Pe({params:e});(o=new page.Route(n.a.bookElementRoute)).match("/"+t,e)?Pe({params:e}):ve()}else if(t.startsWith("exercise-examples"))Ce();else if(t.startsWith("exercise-suite")){let e={};new page.Route(n.a.exerciseSuiteRoute).match("/"+t,e)?Ce({params:e}):ve()}else if(t.startsWith("video")){let e={};new page.Route(n.a.videoRoute).match("/"+t,e)?Me({params:e}):ve()}else if(t.startsWith("review-report")){let e={};new page.Route(n.a.reviewReportRoute).match("/"+t,e)?ye({params:e}):ve()}else if(t.startsWith("concept")){let e={};new page.Route(n.a.conceptRoute).match("/"+t,e)?Ie({params:e}):ve()}else if(t.startsWith("try-it"))Ee();else if(t.startsWith("epub-preview"))Te();else if(t.startsWith("edit")){let e={},o=new page.Route(n.a.meapEditorRoute);if(o.match("/"+t,e))return void xe({params:e});if((o=new page.Route(n.a.reviewEditorRoute)).match("/"+t,e))return void xe({params:e});(o=new page.Route(n.a.editorRoute)).match("/"+t,e)?xe({params:e}):ve()}else t.startsWith("discussion")?(ve(),setTimeout(()=>ee.a.requestOpen(),1e3)):t.startsWith("signin")?(document.location.hash="",ve(),C.a.isLoggedIn().then(e=>{e.loggedIn||R.a.requestOpenModal("signin","sign in to complete your registration","registration",d.a.getItem("email"))}).catch(e=>{R.a.requestOpenModal("signin","sign in to complete your registration","registration",d.a.getItem("email"))})):t.startsWith("simple-signin")?(document.location.hash="",ve(),C.a.isLoggedIn().then(e=>{e.loggedIn||R.a.requestOpenModal("signin","enter new password to complete the registration","registration",d.a.getItem("email"))}).catch(e=>{R.a.requestOpenModal("signin","enter new password to complete the registration","registration",d.a.getItem("email"))})):t.startsWith("sitemap")?(Le("sitemap"),he.trigger("sitemapPageCodeLoaded")):ve()}function we(){ve()}function ve(){ke()}function ke(){Le("#!/landing-page"),Ae(),m.load(),C.a.isLoggedIn().then(e=>{e.loggedIn&&F.a.initialize()}),he.trigger("pageLoaded")}function Pe(e){const t=n.a.getCurrentRouteInfo();Le(function(e){if(!e||!e.params.book)return"";let t=`book/${e.params.book}/${e.params.bookElement||""}`;return e.params.reviewVersion?t+=`/r-${e.params.reviewVersion}`:e.params.meapVersion&&(t+=`/v-${e.params.meapVersion}`),t}(e)),t&&t.book===e.params.book&&e.params.bookElement?De():Ae(),e.params.reviewVersion?C.a.isLoggedIn().then(t=>{t.loggedIn?Se(e):R.a.requestLogin("","")}):!C.a.isCurrentlyLoggedIn()&&M.a.hasSsoCookie()?C.a.isLoggedIn().then(t=>{Se(e)}):Se(e),fe++,he.trigger("pageLoaded")}function Se(e){document.location.search.indexOf("review-form")>=0&&(l.a.shouldImmediatelyOpenBookReview=!0),I.load(e.params.book,(e.params.bookElement||"").replace(/^search-/,""),e.params.meapVersion,e.params.reviewVersion,e.params.additional)}function Ce(e){Le(e&&e.canonicalPath),Ae(),A.load(null!=e&&null!=e.params?e.params.exerciseSuite:""),he.trigger("pageLoaded")}function ye(e){Le(e&&e.canonicalPath),Ae(),null!=e&&null!=e.params&&e.params.book?le.load(null!=e&&null!=e.params?e.params.book:"",e.params.reviewVersion):ve(),he.trigger("pageLoaded")}function Ie(e){Le(e&&e.canonicalPath),Ae(),null!=e&&null!=e.params&&e.params.category&&e.params.concept?ue.load(e.params.category,e.params.concept):ve(),he.trigger("pageLoaded")}function Me(e){Le(e&&e.canonicalPath),Ae(),null!=e&&null!=e.params&&e.params.book?ae.load(null!=e&&null!=e.params?e.params.book:""):ve(),he.trigger("pageLoaded")}function Ee(){Le("try-it"),Ae(),_.load(),he.trigger("pageLoaded")}function Te(){Le("epub-preview"),Ae(),X.load(),he.trigger("pageLoaded")}function xe(e){Le(e&&e.canonicalPath),Ae(),N.load(e.params.book,(e.params.bookElement||"").replace(/^search-/,""),e.params.meapVersion,e.params.reviewVersion),he.trigger("pageLoaded")}function Oe(){C.a.isLoggedIn().then(e=>{e.loggedIn?(Le("library"),Ae(),L.load(),he.trigger("pageLoaded")):page("/")})}function Be(e){Le(e&&e.canonicalPath),Ae(),D.load(e&&e.params&&e.params.category),he.trigger("pageLoaded")}function Ae(){De(),0==$("#main-page-content .backend-main-page-content").length&&$("#main-page-content").html('<div class="book-content-loader loader"></div>'),L.clean(),I.clean(),m.clean(),D.clean(),A.clean(),ae.clean(),le.clean(),O.clean(),_.clean(),N.clean(),s.a.hideBrowseHeader()}function De(){a.a.clearTimers(),L.clean(),I.partialClean(),D.clean(),T.a.hideNotification(),s.a.hideBrowseHeader()}function Le(e="",t){if(l.a.addToVisitHistory(e),!ge&&(Date.now()-pe>l.a.refreshDataAfter||fe>15||t)){if(pe=Date.now(),e)return 0==e.indexOf("book/")&&(e="/"+e),void(location.href=e);M.a.reloadPage()}}!function(){page(n.a.meapElementRoute,e=>Pe(e)),page(n.a.reviewElementRoute,e=>Pe(e)),page(n.a.bookElementRoute,e=>Pe(e)),page(n.a.exerciseSuiteRoute,e=>Ce(e)),page(n.a.videoRoute,e=>Me(e)),page(n.a.reviewReportRoute,e=>ye(e)),page(n.a.conceptRoute,e=>Ie(e)),page("/",()=>we()),page(n.a.catalogRoute,e=>Be(e)),page("/library",()=>Oe()),page("/exercise-examples",e=>Ce(e)),page("/landing-page",()=>ke()),page("/try-it",e=>Ee()),page("/sitemap",e=>{document.location=e.path}),page("epub-preview",()=>Te()),page(n.a.editorRoute,e=>xe(e)),page(n.a.meapEditorRoute,e=>xe(e)),page(n.a.reviewEditorRoute,e=>xe(e)),page("*",()=>setTimeout(()=>be(),50)),page({hashbang:!!ge,dispatch:!1}),document.location.hash||"/"!=document.location.pathname?be():-1!=document.location.href.indexOf("_escaped_fragment_=")?be():we();M.a.isAdditionalInstruction("openShoppingCart")&&(M.a.removeAdditionalInstruction(),setTimeout(()=>x.a.requestMenuOpen(),400))}(),Z.insertNecessaryElements(),s.a.registerEvents(),ge&&(i.b.isConnected()?($(document.body).addClass("online").removeClass("offline"),se.a.synchronizeUserCreatedData()):$(document.body).removeClass("online").addClass("offline"),function(){const e=document.createElement("base");e.setAttribute("href",document.location.href),document.head.appendChild(e)}(),se.a.initializeUpdateManager(),$(document).trigger("requestBookUpdates"))}]);
//# sourceMappingURL=app.js.map