(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{1148:function(t,e,o){var a=o(88),i=o(1149);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);t.exports=i.locals||{}},1149:function(t,e,o){(e=o(89)(!1)).push([t.i,"body.night-mode #text-addons-menu .text-addons-loading-item{color:white}body.night-mode #text-addons-menu .tab-title{color:lightgray}body.night-mode #text-addons-menu .tab-title.selected{color:white}body.night-mode #text-addons-menu .text-addon-help-item,body.night-mode #text-addons-menu .text-addon-icon,body.night-mode #text-addons-menu .delete-text-addon-icon{color:white}body.night-mode #text-addons-menu .livetimestamp,body.night-mode #text-addons-menu .book-element-short-name{color:#828282}body.night-mode:not(.touch-device) #text-addons-menu .items-container .item:hover{background:#0e5ba9}body:not(.night-mode) #text-addons-menu .text-addons-loading-item{color:#222}body:not(.night-mode) #text-addons-menu .tab-title{color:#828282}body:not(.night-mode) #text-addons-menu .tab-title.selected{color:#222}body:not(.night-mode) #text-addons-menu .text-addon-help-item,body:not(.night-mode) #text-addons-menu .text-addon-icon,body:not(.night-mode) #text-addons-menu .delete-text-addon-icon{color:#222}body:not(.night-mode) #text-addons-menu .livetimestamp,body:not(.night-mode) #text-addons-menu .book-element-short-name{color:#828282}body:not(.night-mode):not(.touch-device) #text-addons-menu .items-container .item:hover{background:#cccccc}#text-addons-menu{width:350px}#text-addons-menu .text-addon-item-content{display:block;hyphens:auto}#text-addons-menu .text-addons-loading-item{font-size:1.5em;margin-top:0.5em;text-align:center}#text-addons-menu .tab-title .fa,#text-addons-menu .tab-title .fal,#text-addons-menu .tab-title .fas,#text-addons-menu .tab-title .far{margin-right:0.5em}#text-addons-menu .text-addon-item-username-container{font-weight:bold}#text-addons-menu .items-container ul{margin:0}#text-addons-menu .items-container .text-addon-help-item{margin:0;padding:0.5rem 0.75rem}#text-addons-menu .items-container .text-addon-item{position:relative;margin:0;padding:0.5rem 2rem !important}#text-addons-menu .items-container .text-addon-item .text-addon-icon,#text-addons-menu .items-container .text-addon-item .delete-text-addon-icon{position:absolute;top:0.8rem}#text-addons-menu .items-container .text-addon-item:first-of-type{border-top:1px dashed transparent}#text-addons-menu .items-container .text-addon-item:hover{background:initial}#text-addons-menu .items-container .text-addon-item.waiting-for-deletion{opacity:0.5}#text-addons-menu .text-addon-icon{left:0.7rem;width:12px}#text-addons-menu .text-addon-icon.red{color:#f55 !important}#text-addons-menu .text-addon-icon.yellow{color:#fd5 !important}#text-addons-menu .text-addon-icon.green{color:#87de87 !important}#text-addons-menu .text-addon-icon.blue{color:#80b3ff !important}#text-addons-menu .text-addon-icon.pink{color:#f59 !important}#text-addons-menu .delete-text-addon-icon{cursor:pointer;right:1.3rem}@media screen and (max-width: 700px){#text-addons-menu .delete-text-addon-icon{padding:1em;margin-right:-1.4em}}#text-addons-menu .search-input-container{padding:0 5px;display:flex;align-items:center;justify-content:space-between}#text-addons-menu .search-input{flex:1;margin-right:5px}#text-addons-menu .sort-command-container .selected{font-weight:bolder;text-decoration:underline}@media screen and (max-width: 380px){#text-addons-menu .tab-title-label{display:none}}#text-addons-menu .items-container .item{padding:0.5rem 2rem}#text-addons-menu .livetimestamp,#text-addons-menu .book-element-short-name{display:inline-block;font-size:10px}#text-addons-menu a.sort-by-time-button,#text-addons-menu a.sort-by-book-button{color:rgba(255,255,255,0.8);background:gray;border:1px solid gray;display:inline-block;width:30px;height:25px;text-align:center;margin:2px;border-radius:3px}#text-addons-menu a.sort-by-time-button.selected,#text-addons-menu a.sort-by-book-button.selected{color:#fff;background:#0e5ba9;border:1px solid transparent}#text-addons-menu .sort-by-time-button .fa-long-arrow-down{margin-right:3px}\n",""]),t.exports=e},164:function(t,e,o){"use strict";var a=o(4),i=o(13),n=o(22),s=(o(190),o(0)),r=o(6),d=o(141),l=o(12);const h=$(document);e.a=new class{constructor(){this.bookmarkedTextLimit=80,this.paragraphBubbleTemplate=' <div class="paragraph-bubble">\n        <div aria-haspopup="true" class="text-margin-icon-bubble bookmark-bubble" title="bookmark"><i class="fa fa-bookmark"></i></div>\n        <div aria-haspopup="true" class="text-margin-icon-bubble forums-bubble" title="open discussion"><i class="fa fa-comments" aria-hidden="true"></i><span class="comment-count-container"></span></div>\n        <div aria-haspopup="true" class="text-margin-icon-bubble paragraph-notification-bubble" title="show text addons"><i class="fa fa-dot-circle" aria-hidden="true"></i></div>\n        <div class="text-margin-icon-bubble editor-bubble"><i class="fa fa-edit fa-2x"></i></div>\n    </div>',a.a.onDescendantEventWithCooldown(h,s.b.isCordova()?"touchstart":"click",".bookmark-bubble",t=>{this.handleBookmarkBubbleClick(t.currentTarget.parentElement)}),a.a.onDescendantEventWithCooldown(h,s.b.isCordova()?"touchstart":"click",".forums-bubble",t=>{this.handleForumBubbleClick(t.currentTarget.parentElement)}),h.on("paragraphButtonsSetForumCount",(t,e,o)=>this.setForumCount(e,o)),h.on("requestSelectForumsBubble",(t,e)=>this.selectForumsBubble(e)),h.on("requestDeselectForumsBubble",(t,e)=>this.deselectForumsBubble(e))}initialize(t,e,o=!1){if(this.clean(),this.book=t,this.bookElement=e,t&&(this.paragraphs=Array.prototype.slice.call(document.querySelectorAll("[refid]")),r.a.isCurrentlyLoggedIn()&&(o||d.a.fetchBookmarks(this.bookElement).then(t=>{this.updateBookmarkData(t.bookElementBookmarks)}),o)))for(const t of this.paragraphs){0==$(t).closest(".introduction-summary").length&&this.createParagraphBubble(t,!0)}}clean(){this.book=null,this.bookElement=null,$(".text-margin-icon-bubble").off().remove(),this.paragraphBubbles=[],this.paragraphs=null}createParagraphBubble(t,e=!1){if(!t||null!=t.paragraphBubble)return;const o=$(e?' <div class="paragraph-bubble">\n        <div class="text-margin-icon-bubble editor-bubble"><i class="fa fa-edit fa-2x"></i></div>\n    </div>':this.paragraphBubbleTemplate).get(0);o.paragraph=t,t.paragraphBubble=o,this.paragraphBubbles.push(o);const a=$(t);if(a.is(".listing-container")){const e=a.find(".listing-environment-container");e.length?e.append(o):t.paragraphBubbleToAppend=o}else a.append(o)}toggleBookmark(t){this.createParagraphBubble(t),this.handleBookmarkBubbleClick(t.paragraphBubble)}handleBookmarkBubbleClick(t){r.a.isCurrentlyLoggedIn()?($(t).addClass("activated"),t.hasAttribute("data-bookmark-active")?t.removeAttribute("data-bookmark-active"):t.setAttribute("data-bookmark-active","true"),this.visuallyMarkBookmark(t),this.syncBookmark(t),$(t.paragraph).toggleClass("has-bookmark",t.hasAttribute("data-bookmark-active"))):l.a.requestLogin("sign in to add a bookmark","bookmark")}visuallyMarkBookmark(t,e){if(!t)return;const o=t.hasAttribute("data-bookmark-active"),a=$(t).find(".bookmark-bubble");a.toggleClass("selected",o),a.attr("title",o?"remove bookmark":"bookmark"),e&&a.attr("data-id",e),$(t.paragraph).toggleClass("has-bookmark",o)}syncBookmark(t){if(!t||!t.paragraph)return;const e=$(t.paragraph);t.hasAttribute("data-bookmark-active")?d.a.addBookmark(this.bookElement,e.attr("refid"),e.attr("data-hash"),this.cutText(e.text()),this.getSection(e)).then(e=>{$(t).find(".bookmark-bubble").attr("data-id",e),h.trigger("bookmarkAdded")}):d.a.removeBookmarkByContentID(this.bookElement,e.attr("refid"))}updateBookmarkData(t){if(!t)return;const e=[];for(const o of t){const t=o.contentHash?document.querySelector(`[data-hash='${o.contentHash}']`):document.getElementById(o.contentID);t&&(this.createParagraphBubble(t),t.paragraphBubble.setAttribute("data-bookmark-active","true"),this.visuallyMarkBookmark(t.paragraphBubble,o.id),e.push(t.paragraphBubble))}$(e).show()}selectForumsBubble(t){if(!t)return;const e=$(t);e.addClass("selected"),e.find(".forums-bubble").addClass("bubble-active"),e.attr("data-forums-active","true"),$(".paragraph-focused").removeClass("paragraph-focused"),$(t.paragraph).addClass("paragraph-focused"),$(t.paragraph).addClass("matching-text-bubble-shown")}deselectForumsBubble(t){if(!t)return;const e=$(t);e.removeClass("selected"),e.find(".forums-bubble").removeClass("bubble-active"),e.find(".comment-count-container").text().trim()||e.removeAttr("data-forums-active"),$(".paragraph-focused").removeClass("paragraph-focused"),$(t.paragraph).removeClass("matching-text-bubble-shown")}setForumCount(t,e){if(!t)return;const o=$(t);o.find(".comment-count-container").text(e||""),e?(o.attr("data-forums-active","true"),o.show()):o.removeAttr("data-forums-active")}handleForumBubbleClick(t){n.a.requestOpenParagraphSideMenu(t)}getSection(t){const e=i.a.figureOutSectionOrSubsectionFromRefId(t.attr("refid"));if(e)return e;const o=this.bookElement.shortName.match(/(part\s+\d)|\w+\s+(\d+)/i);if(o){if(o[1])return o[1];if(o[2])return o[2]}return this.book.shortName}cutText(t){return t.length<this.bookmarkedTextLimit?t:t.substring(0,this.bookmarkedTextLimit)+"..."}}},190:function(t,e,o){var a=o(88),i=o(191);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);t.exports=i.locals||{}},191:function(t,e,o){(e=o(89)(!1)).push([t.i,"body.book-edit .bookmark-bubble,body.book-edit .forums-bubble{display:none}body.book-edit .editor-bubble{display:block}body:not(.book-edit) .editor-bubble{display:none}body.review-book .forums-bubble,body.review-book .bookmark-bubble{display:none}body.review-book .text-selection-tooltip-container .bookmark-button,body.review-book .text-selection-tooltip-container .highlight-button,body.review-book .text-selection-tooltip-container .forum-button,body.review-book .text-selection-tooltip-container .error-report,body.review-book .text-selection-tooltip-container .link-button{display:none}.paragraph-bubble{position:absolute;top:0.3em;right:1%}.paragraph-bubble i{font:normal normal normal 18px/1 'Font Awesome 5 Pro' !important}@media screen and (min-width: 870px){.paragraph-bubble{display:flex}}.paragraph-bubble[data-bookmark-active] .bookmark-bubble{display:block}.paragraph-bubble[data-forums-active] .forums-bubble{display:block}ul .paragraph-bubble{right:-8.5%}.browsable-container .paragraph-bubble{right:-9%}@media screen and (max-width: 390px){.browsable-container .paragraph-bubble{right:-27px}}.listing-environment-container .paragraph-bubble{right:0}.callout-container .paragraph-bubble{right:-11%}@media screen and (max-width: 390px){.callout-container .paragraph-bubble{right:-33px}}.text-margin-icon-bubble{position:relative;width:1.5rem;height:1.9rem;text-align:center;cursor:pointer;color:#9a9aa2;transition:transform 0.25s ease-out;-webkit-transform-origin:50% 50%;-moz-transform-origin:50% 50%;-o-transform-origin:50% 50%;transform-origin:50% 50%;display:none;margin:1px}.text-margin-icon-bubble:hover i,.text-margin-icon-bubble.bubble-active i{transform:scale(1.1)}.text-margin-icon-bubble .comment-count-container{display:none}\n",""]),t.exports=e},585:function(t,e,o){"use strict";o.r(e),o.d(e,"TextAddonsMenu",(function(){return v}));var a=o(181),i=o(165),n=o(145),s=o(1);var r=new class{constructor(){this.periodsNumbers=[60,60,24,7,4.35,12,10],this.periodsDescriptions=["second","minute","hour","day","week","month","year","decade"]}convertToRelativeHumanReadable(t){let e;t/=1e3;for(let o=0;o<this.periodsDescriptions.length&&(e=this.periodsDescriptions[o],t>this.periodsNumbers[o]);o++)t/=this.periodsNumbers[o],6==o&&(e=this.periodsDescriptions[7]);return(t=Math.round(t))>1&&(e+="s"),t+" "+e}},d=o(4),l=o(35),h=o(11),m=o(41),c=o(21),b=o(164),u=o(14),g=o(141),p=o(6),k=(o(1148),o(3)),f=o(0);const x=$(document);const v=new class{constructor(){$(document.body).append(this.getMenuHTML()),this.handleSearchInputChange=this.handleSearchInputChange.bind(this),this.$textAddonsMenu=$("#text-addons-menu"),this.$textAddonsContainer=this.$textAddonsMenu.find(".items-container ul"),this.$searchBox=this.$textAddonsMenu.find(".search-input"),this.$sortByTimeButton=this.$textAddonsMenu.find(".sort-by-time-button"),this.$sortByBookButton=this.$textAddonsMenu.find(".sort-by-book-button"),this.$highlightsTab=this.$textAddonsMenu.find(".highlights-tab"),this.$bookmarksTab=this.$textAddonsMenu.find(".bookmarks-tab"),this.$notesTab=this.$textAddonsMenu.find(".notes-tab"),this.paginationMaxPages=6,this.paginationMaxItems=10,this.paginationActivePage=0,this.$paginationTarget=$("#text-addons-menu"),this.$paginationWrapper=$("#text-addons-pagination"),this.slideMenu=new m.a($(".book-element-additional-commands-notebook-item"),this.$textAddonsMenu,()=>{this.$textAddonsContainer.html(this.generateLoadingItemHtml()),this.getTextAddonsData(()=>{this.fillSortedByTime()})},()=>this.isMenuOpened=!0,void 0,()=>this.isMenuOpened=!1,$(".book-element-additional-commands-notebook-item svg")),d.a.onEventWithCooldown(this.$sortByTimeButton,"click touchstart",()=>this.fillSortedByTime()),d.a.onEventWithCooldown(this.$sortByBookButton,"click touchstart",()=>this.fillSortedByBook()),d.a.onEventWithCooldown(this.$highlightsTab,"click touchstart",()=>{this.$highlightsTab.toggleClass("selected"),this.renderTextAddons()}),d.a.onEventWithCooldown(this.$bookmarksTab,"click touchstart",()=>{this.$bookmarksTab.toggleClass("selected"),this.renderTextAddons()}),d.a.onEventWithCooldown(this.$notesTab,"click touchstart",()=>{this.$notesTab.toggleClass("selected"),this.renderTextAddons()}),d.a.onDescendantEventWithCooldown(this.$textAddonsMenu,"click",".delete-text-addon-icon",t=>{const e=$(t.target).closest(".text-addon-item"),o=e.attr("data-id");o&&(e.is(".waiting-for-deletion")||(e.is(".bookmark-item")?f.b.confirm("Delete bookmark?",()=>{this.deleteBookmark(e,o)}):e.is(".note-item")?f.b.confirm("Delete note?",()=>{this.deleteNote(e,o)}):e.is(".highlight-item")&&f.b.confirm("Delete highlight?",()=>{this.deleteHighlight(e,o)})))}),this.$searchBox.on("input",this.handleSearchInputChange),x.on("highlightAdded",()=>{this.getNotificationIcon().html("<i class='fal fa-highlighter'></i>"),this.visuallyShowAddition()}),x.on("bookmarkAdded",()=>{this.getNotificationIcon().html("<i class='fal fa-bookmark'></i>"),this.visuallyShowAddition()}),x.on("noteAdded",()=>{this.getNotificationIcon().html("<i class='fal fa-sticky-note'></i>"),this.visuallyShowAddition()}),x.on("requestTextAddonsMenuOpen",()=>this.open())}getNotificationIcon(){return $("#book-additional-commands-container .header-icon-notification, .book-element-additional-commands-notebook-item .header-icon-notification")}initialize(t,e){this.$notesTab.find(".notes-tab-title").text(null!=e&&e.reviewVersion?"review comments":"notes"),p.a.isCurrentlyLoggedIn()&&(this.book=t,this.bookElement=e)}clean(){this.$textAddonsContainer.html(this.generateLoadingItemHtml()),this.book=null,this.bookElement=null}open(){this.slideMenu.setAssociatedElement($(".book-element-additional-commands-notebook-item")),this.slideMenu&&this.slideMenu.openMenu()}handleSearchInputChange(t){clearTimeout(this.timerId);const e=$(t.target).val();this.timerId=setTimeout(()=>{this.fillTextAddons(e),this.paginationInit()},200)}getTextAddonsData(t){p.a.isLoggedIn().then(e=>{e.loggedIn&&k.a.book&&k.a.bookElement&&g.a.fetchTextAddons(k.a.bookElement).then(e=>{x.trigger("text-addons-data-ready"),this.textAddonsData=e,t&&t()})})}fillSortedByTime(){return this.textAddonsData&&(this.$sortByBookButton.removeClass("selected"),this.$sortByTimeButton.addClass("selected"),this.renderTextAddons()),!1}fillSortedByBook(){this.textAddonsData&&(this.$sortByTimeButton.removeClass("selected"),this.$sortByBookButton.addClass("selected"),this.renderTextAddons())}renderTextAddons(){this.fillTextAddons(),this.$searchBox.val(""),this.paginationInit()}fillTextAddons(t=""){if(!this.book)return;let e=this.getCurrentItems();this.$sortByBookButton.is(".selected")?e=this.sortByBook(e):this.$sortByTimeButton.is(".selected")&&(e=this.sortByTime(e)),this.$textAddonsContainer.empty();let o="";const d=this.$highlightsTab.is(".selected"),h=this.$bookmarksTab.is(".selected"),m=this.$notesTab.is(".selected");e.forEach(e=>{if((d||!(e instanceof n.b))&&(h||!(e instanceof a.a))&&(m||!(e instanceof i.a))){if(t)if(e instanceof n.b){if(e.containsText&&!e.containsText(t))return}else if(e instanceof a.a){if(e.bookmarkedText&&e.bookmarkedText.toLowerCase().indexOf(t.toLowerCase())<0)return}else if(e instanceof i.a&&(e.annotatedText||"").toLowerCase().indexOf(t.toLowerCase())<0&&(e.noteText||"").toLowerCase().indexOf(t.toLowerCase())<0)return;o+=Mustache.render(y,{link:s.a.getBookElementUrl(this.book.slug,e.bookElementShortName,e.meapVersion,e.reviewVersion)+this.getContentId(e),bookElementShortName:e.bookElementShortName,bookElementTitle:l.a.pretifyShortName(e.bookElementShortName),text:e instanceof i.a&&this.bookElement.reviewVersion?this.getItemText(e):this.trimText(this.getItemText(e)),id:e.id,timeStamp:r.convertToRelativeHumanReadable(Date.now()-+e.timestamp),isMeap:e.meapVersion&&e.meapVersion>0,isReview:e.reviewVersion&&e.reviewVersion>0,meapVersion:e.meapVersion,reviewVersion:e.reviewVersion,isBookmark:e instanceof a.a,isNote:e instanceof i.a,user:e.user||"",isHighlight:e instanceof n.b,highlightColor:e instanceof n.b?e.color:"",canDelete:!(e instanceof i.a)||e.userId==u.a.getUserId()})}}),o||(o+=t?`<li class="text-addon-help-item">Cannot find notes, bookmarks, or highlights matching: <em>'${t}'</em>.</li>`:'<li class="text-addon-help-item">Create notes, bookmarks, and highlights by selecting a piece of text.</li>'),this.$textAddonsContainer.append(o)}trimText(t){return!t||""==t||t.length<100?t:t.substr(0,100)+" ..."}getItemText(t){return t instanceof i.a?t.noteText:t instanceof a.a?t.bookmarkedText:t instanceof n.b?t.highlightedParagraphs&&t.highlightedParagraphs[0]&&t.highlightedParagraphs[0].selectedText:""}getContentId(t){return t instanceof i.a?"note-"+t.contentID:t instanceof a.a?t.contentID:t instanceof n.b?t.highlightedParagraphs&&t.highlightedParagraphs[0]&&t.highlightedParagraphs[0].ordinal:""}getCurrentItems(){const t=this.textAddonsData.notes.bookNotes,e=this.textAddonsData.bookmarks.bookBookmarks,o=this.textAddonsData.highlights.bookHighlights;return[].concat(t).concat(e).concat(o)}sortByTime(t){return t.sort((t,e)=>+e.timestamp-+t.timestamp)}sortByBook(t){return t.sort((t,e)=>{if(t.bookElementOrdinal<e.bookElementOrdinal)return-1;if(t.bookElementOrdinal>e.bookElementOrdinal)return 1;{const o=this.getContentId(t),a=this.getContentId(e);return+o-+a}})}paginationInit(){const t=$(".items-container li",this.$paginationTarget).not(".hidden").length;if(this.$paginationWrapper.empty(),this.$paginationWrapper.removeClass("has-items"),t>this.paginationMaxItems){this.$paginationWrapper.addClass("has-items");const e=Math.ceil(t/this.paginationMaxItems);let o='<li data-page="1"><i class="fa fa-angle-double-left"></i></li>\n                                  <li data-page="-"><i class="fa fa-angle-left"></i></li>';for(let t=1;t<=e;t++){o+=`<li data-page="${t}" class="pagination-item">${t}</li>`}o+=`<li data-page="+"><i class="fa fa-angle-right"></i></li>\n                               <li data-page="${e}"><i class="fa fa-angle-double-right"></i></li>`,this.$paginationWrapper.append(o),this.paginationShowPage(1);const a=this;this.$paginationWrapper.children().on("click",(function(){a.paginationShowPage($(this).attr("data-page"))}))}return!1}paginationShowPage(t){const e=this.$paginationWrapper.find(".pagination-item"),o=e.length;if(t<1||t>o)return!1;const a=t*this.paginationMaxItems,i=a-this.paginationMaxItems;this.paginationActivePage=parseInt(t),this.$paginatedItems=this.$textAddonsContainer.children(),this.$paginatedItems.each((t,e)=>{const o=$(e);t>=i&&t<a?o.removeClass("hidden"):o.addClass("hidden")}),e.each((e,a)=>{const i=$(a);let n=Math.round(this.paginationMaxPages/2);this.paginationActivePage+n>o?n+=this.paginationActivePage+n-o:this.paginationActivePage<n&&(n+=this.paginationActivePage),e+1>this.paginationActivePage-n&&e+1<=this.paginationActivePage+n?i.removeClass("hidden"):i.addClass("hidden"),i.toggleClass("active",t==e+1)}),$(":nth-child(2)",this.$paginationWrapper).attr("data-page",this.paginationActivePage-1),$(":nth-child("+(o+3)+")",this.$paginationWrapper).attr("data-page",this.paginationActivePage+1)}visuallyShowAddition(){const t=$("#book-element-additional-commands-menu").is(".open"),e=t?$(".book-element-additional-commands-notebook-item svg"):$("#book-additional-commands-container svg"),o=t?$(".book-element-additional-commands-notebook-item .header-icon-notification"):$("#book-additional-commands-container .header-icon-notification");o.removeClass("hidden disappear").addClass("appear"),h.a.addIconButtonGlow(e),setTimeout(()=>{o.removeClass("appear").addClass("disappear"),h.a.removeIconButtonGlow(e)},2e3)}deleteBookmark(t,e){t.addClass("waiting-for-deletion"),g.a.removeBookmarkById(this.bookElement,e).then(o=>{if(!o)return t.removeClass("waiting-for-deletion"),void c.a.showTemporaryNotification("error deleting bookmark");t.remove();const a=document.querySelector(`.bookmark-bubble[data-id='${e}']`);if(null!=a){const t=$(a).closest(".paragraph-bubble");t.removeAttr("data-bookmark-active"),b.a.visuallyMarkBookmark(t.get(0))}}).catch(e=>{t.removeClass("waiting-for-deletion"),c.a.showTemporaryNotification("error deleting bookmark")})}deleteNote(t,e){t.addClass("waiting-for-deletion"),g.a.removeNote(this.bookElement,parseInt(e)).then(e=>{if(!e)return t.removeClass("waiting-for-deletion"),void c.a.showTemporaryNotification("error deleting note");t.remove()}).catch(e=>{t.removeClass("waiting-for-deletion"),c.a.showTemporaryNotification("error deleting note")})}deleteHighlight(t,e){t.addClass("waiting-for-deletion"),g.a.removeHighlight(this.bookElement,parseInt(e)).then(o=>{if(!o)return t.removeClass("waiting-for-deletion"),void c.a.showTemporaryNotification("error deleting highlight");t.remove(),h.a.unwrapIntoParent($(`.highlight-${e}`))}).catch(e=>{t.removeClass("waiting-for-deletion"),c.a.showTemporaryNotification("error deleting highlight")})}getMenuHTML(){return`<div id="text-addons-menu" class="slide-in-menu slide-in-menu-right closed">\n                    <div class="slide-in-menu-container">\n                        <div class="tab-title-container">\n                            <div class="tab-title selected highlights-tab" style="margin-right:3px;"><i class="fal fa-highlighter"></i> <span class="tab-title-label">highlights</span></div>\n                            <div class="tab-title selected bookmarks-tab" style="margin-right:3px;"><i class="fal fa-bookmark"></i> <span class="tab-title-label">bookmarks</span></div>\n                            <div class="tab-title selected notes-tab"><i class="fal fa-sticky-note"></i> <span class="tab-title-label notes-tab-title">notes</span></div>\n                        </div>\n                        <div class="search-input-container">\n                            <input type="text" class="search-input" placeholder="filter">\n                            <span class="sort-command-container">\n                                <a href="javascript:void(0)" class="sort-by-time-button selected"><i class="fal fa-long-arrow-down"></i><i class="fal fa-clock"></i></a>\n                                <a href="javascript:void(0)" class="sort-by-book-button"><i class="fas fa-sort-numeric-down"></i></a>\n                            </span>\n                        </div>\n                        <div class="items-container">\n                            <ul>\n                                ${this.generateLoadingItemHtml()}\n                            </ul>\n                        </div>\n                        <div>\n                            <ul id="text-addons-pagination"></ul>\n                        </div>\n                    </div>\n                </div>`}generateLoadingItemHtml(){return'<li class="text-addons-loading-item"><i class="fal fa-spin fa-circle-notch fa-2x fa-fw"></i></li>'}},y='\n<li class="item text-addon-item {{#isBookmark}}bookmark-item{{/isBookmark}} {{#isNote}}note-item{{/isNote}} {{#isHighlight}}highlight-item{{/isHighlight}}" data-id="{{id}}">\n<i class="fal {{#isBookmark}}fa-bookmark{{/isBookmark}} {{#isNote}}fa-sticky-note{{/isNote}} {{#isHighlight}}fa-highlighter{{/isHighlight}} text-addon-icon {{highlightColor}}" title="{{#isBookmark}}bookmark{{/isBookmark}}{{#isNote}}note{{/isNote}}{{#isHighlight}}highlight{{/isHighlight}} "/>\n<a href="{{link}}" class="text-addon-item-link" contentItemID="{{contentItemID}}" bookElementShortName="{{bookElementShortName}}" meapVersion="{{meapVersion}}">\n    <span class="livetimestamp">{{timeStamp}} ago in</span> <span class="book-element-short-name">{{bookElementTitle}}</span>\n    {{#isMeap}}<span class="meap-label">MEAP v{{meapVersion}}</span>{{/isMeap}}\n    {{#isReview}}<span class="review-label">RW {{reviewVersion}}</span>{{/isReview}}\n    <div class="text-addon-item-content">{{#user}}<span class="text-addon-item-username-container">{{user}}: </span>{{/user}}<span class="text-addon-item-text">{{text}}</span></div>\n</a>\n{{#canDelete}}\n<i class="fa fa-trash delete-text-addon-icon" aria-hidden="true" title="delete {{#isBookmark}}bookmark{{/isBookmark}}{{#isNote}}note{{/isNote}}{{#isHighlight}}highlight{{/isHighlight}} "></i>\n{{/canDelete}}\n</li>'}}]);
//# sourceMappingURL=textAddonsModule.chunk.js.map?b658b19c0cd09eb3f172