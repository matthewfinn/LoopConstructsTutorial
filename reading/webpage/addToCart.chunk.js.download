(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1150:function(o,t,a){var i=a(88),e=a(1151);"string"==typeof(e=e.__esModule?e.default:e)&&(e=[[o.i,e,""]]);var d={insert:"head",singleton:!1};i(e,d);o.exports=e.locals||{}},1151:function(o,t,a){(t=a(89)(!1)).push([o.i,'#add-to-cart-stripe{text-align:center;background-color:#407fbf;color:white;cursor:pointer;font-size:1rem;position:relative;padding:0.5em;float:right;width:100%;height:40px;transition:width 0.2s ease-in-out;clear:both}#add-to-cart-stripe.disappear{display:none}#add-to-cart-stripe .close-icon{position:absolute;right:0;top:50%;transform:translate(0, -50%);transition:transform 0.2s ease-in-out;padding:0.5em 0.75em}#add-to-cart-stripe.collapsed{width:55px}#add-to-cart-stripe.collapsed .add-to-cart-stripe-message{opacity:0;display:none}#add-to-cart-stripe.collapsed .add-to-cart-stripe-icon-container{opacity:1}#add-to-cart-stripe.collapsed .close-icon{transform:translate(-50%, -50%) rotate(45deg)}#add-to-cart-stripe .add-to-cart-stripe-message{white-space:nowrap;opacity:1;transition:opacity 0.15s ease-in-out}#add-to-cart-stripe .add-to-cart-stripe-icon-container{position:absolute;top:50%;left:50%;transform:translate(-10%, -50%);transition:opacity 0.15s ease-in-out;opacity:0;white-space:nowrap}@media screen and (max-width: 650px){#add-to-cart-stripe .add-to-cart-stripe-message{font-size:90%}}@media screen and (max-width: 440px){#add-to-cart-stripe .add-to-cart-formats-message{display:none}}#add-to-cart-stripe.added-to-cart{background-color:#67a73d}#add-to-cart-stripe.added-to-cart:hover{background-color:#5b9436}#add-to-cart-stripe.added-to-cart:active{background-color:#50822f}#add-to-cart-stripe.added-to-cart .fa-plus{display:none}#add-to-cart-stripe:hover{background-color:#3a72ac}#add-to-cart-stripe:active{background-color:#369}#add-to-cart-stripe.disappear{display:none}#add-to-cart-stripe .add-to-cart-content-list-book-price{margin:0 0.25em}.add-to-cart-content-list-book-price{margin-right:0.5em;color:#b3b3b3;position:relative}.add-to-cart-content-list-book-price:before{position:absolute;content:"";left:-0.15em;top:calc(50% - 1px);right:-0.15em;border-top:2px solid #777777;transform:rotate(-5deg)}.add-to-cart-choice-list-price-container{position:relative}.add-to-cart-choice-list-price-container:before{position:absolute;content:"";left:-0.15em;top:calc(50% - 1px);right:-0.15em;border-top:2px solid #777777;transform:rotate(-5deg)}#add-to-cart-box:not(.combo-discounted) .add-to-cart-combo-container .add-to-cart-content-list-book-price{color:#222;margin-right:0}#add-to-cart-box:not(.combo-discounted) .add-to-cart-combo-container .add-to-cart-content-list-book-price:before{display:none}#add-to-cart-box:not(.ebook-discounted) .add-to-cart-ebook-container .add-to-cart-content-list-book-price{color:#222;margin-right:0}#add-to-cart-box:not(.ebook-discounted) .add-to-cart-ebook-container .add-to-cart-content-list-book-price:before{display:none}body.header-notifier-shown #add-to-cart-box{top:167px}#add-to-cart-box{position:fixed;right:80px;top:170px;max-width:225px;z-index:97;transition:right 0.2s ease-in-out}#add-to-cart-box .add-to-cart-combo-container,#add-to-cart-box .add-to-cart-buy-content,#add-to-cart-box .add-to-cart-audio-choice,#add-to-cart-box .add-to-cart-audio-choice input,#add-to-cart-box .add-to-cart-content-book-price-with-discount{display:none}#add-to-cart-box.combo-offering-available:not(.user-owns-book) .add-to-cart-combo-container{display:block}#add-to-cart-box:not(.user-owns-book) .add-to-cart-buy-content{display:block}#add-to-cart-box:not(.user-owns-book):not(.combo-offering-in-cart) .add-to-cart-combo-container .add-to-cart-audio-choice input{display:inline-block}#add-to-cart-box:not(.user-owns-book):not(.ebook-offering-in-cart) .add-to-cart-ebook-container .add-to-cart-audio-choice input{display:inline-block}#add-to-cart-box.audio-offering-available:not(.combo-offering-in-cart) .add-to-cart-combo-container .add-to-cart-audio-choice{display:block}#add-to-cart-box.audio-offering-available.combo-audio-selected .add-to-cart-combo-container .add-to-cart-audio-choice{display:block}#add-to-cart-box.audio-offering-available:not(.ebook-offering-in-cart) .add-to-cart-ebook-container .add-to-cart-audio-choice{display:block}#add-to-cart-box.audio-offering-available.ebook-audio-selected .add-to-cart-ebook-container .add-to-cart-audio-choice{display:block}#add-to-cart-box.combo-discounted .add-to-cart-combo-container .add-to-cart-content-book-price-with-discount{display:inline-block}#add-to-cart-box.ebook-discounted .add-to-cart-ebook-container .add-to-cart-content-book-price-with-discount{display:inline-block}#add-to-cart-box.can-be-minimized .add-to-cart-close-button{display:block}#add-to-cart-box .add-to-cart-close-button{position:absolute;display:none;top:0;right:0.3em;z-index:1;color:gray;cursor:pointer;opacity:1;transition:opacity 0.25s ease-in-out}#add-to-cart-box .add-to-cart-discount-title{color:white;text-decoration:none;display:block;text-align:left;font-weight:normal}#add-to-cart-box .add-to-cart-dotd-discount-title{font-size:1.25em}#add-to-cart-box .add-to-cart-dotd-discount-title:visited{color:white}#add-to-cart-box .add-to-cart-dotd-discount-title:hover{text-decoration:underline}#add-to-cart-box .add-to-cart-discount-subtitle{color:#9fbfdf;text-align:left;font-size:0.8em;font-weight:300}#add-to-cart-box.collapsed{max-width:80px;right:0}#add-to-cart-box.collapsed .add-to-cart-close-button{opacity:0}#add-to-cart-box.collapsed .add-to-cart{max-height:0}#add-to-cart-box:not(.collapsed) .add-to-cart-collapsed-icons-container{display:none}#add-to-cart-box label{cursor:default}#add-to-cart-box .add-to-cart{background-color:#eaeaea;max-height:340px;overflow:hidden}#add-to-cart-box .add-to-cart.deal-of-the-day .add-to-cart-title-container{background-color:#407fbf;padding:10px 15px}#add-to-cart-box .add-to-cart-choices-container{padding:10px 10px 0 10px;border:none;margin:0;max-height:130px;transition:max-height 0.3s ease-in-out}#add-to-cart-box .add-to-cart-choices-container.add-to-cart-ebook-container{padding-top:0}#add-to-cart-box .add-to-cart-choices-container.add-to-cart-ebook-container .add-to-cart-choices-title-container{margin-top:10px}#add-to-cart-box .add-to-cart-choices-container.disabled{opacity:0.8}#add-to-cart-box .add-to-cart-choices-container.collapsed{max-height:0}#add-to-cart-box .add-to-cart-token-deduction-info-container{font-size:65%;color:#a6a6a6;text-align:right}#add-to-cart-box .add-to-cart-audio-upgrade-only-container{margin-top:10px}#add-to-cart-box .add-to-cart-audio-upgrade-only-container label{color:black !important}#add-to-cart-box .add-to-cart-title-container{background-color:#4d4d4d;color:white;padding:10px 25px;font-weight:bolder;text-align:center;position:relative;margin-top:0;margin-bottom:0}#add-to-cart-box .add-to-cart-title-container h5{color:white;margin:0;font-size:0.9rem;line-height:20px;max-height:40px;overflow:hidden}#add-to-cart-box .add-to-cart-title-container .minimize-button{cursor:pointer;position:absolute;top:0;right:5px;color:#a6a6a6;font-weight:300}#add-to-cart-box .add-to-cart-product-title{font-style:italic;font-weight:300}#add-to-cart-box .add-to-cart-choices-title-container{font-size:90%;overflow:auto}#add-to-cart-box .add-to-cart-content-title{display:inline-block;margin-right:0.5em;font-weight:bolder}#add-to-cart-box .add-to-cart-content-book-price{font-weight:bold;text-align:right}#add-to-cart-box .add-to-cart-content-subtitle{display:inline-block;cursor:default;font-size:80%;font-style:italic;color:#aeaeae}#add-to-cart-box .add-to-cart-audio-choice-container{overflow:auto}#add-to-cart-box .add-to-cart-audio-choice-container label{color:#b1b1b1}#add-to-cart-box .add-to-cart-audio-choice-container.active label{color:#505050}#add-to-cart-box .add-to-cart-choice-check-container{float:left;clear:left;user-select:none;-webkit-user-select:none;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}#add-to-cart-box .add-to-cart-choice-check-container input{margin-right:0.25em;margin-bottom:0}#add-to-cart-box .add-to-cart-choice-price-wrapper{float:right;clear:right;margin-left:0.2rem}#add-to-cart-box .add-to-cart-choice-price-wrapper label{display:inline-block}#add-to-cart-box .add-to-cart-choice-price-wrapper label:first-of-type{margin-right:0.5em}#add-to-cart-box .add-to-cart-add-show-button{font-size:90%;white-space:nowrap;overflow:hidden;display:block;text-overflow:ellipsis;clear:both}#add-to-cart-box .add-to-cart-add-show-button,#add-to-cart-box .add-to-cart-collapsed-icons-container{display:block;position:relative;color:white;background-color:#407fbf;text-align:center;padding:10px;margin:10px -10px 0 -10px;transition:background-color 0.2s linear;user-select:none;-webkit-user-select:none;cursor:pointer}#add-to-cart-box .add-to-cart-add-show-button:hover,#add-to-cart-box .add-to-cart-collapsed-icons-container:hover{background-color:#3a72ac}#add-to-cart-box .add-to-cart-add-show-button:active,#add-to-cart-box .add-to-cart-collapsed-icons-container:active{background-color:#369}#add-to-cart-box .add-to-cart-add-show-button.added-to-cart,#add-to-cart-box .add-to-cart-collapsed-icons-container.added-to-cart{background-color:#67a73d}#add-to-cart-box .add-to-cart-add-show-button.added-to-cart:hover,#add-to-cart-box .add-to-cart-collapsed-icons-container.added-to-cart:hover{background-color:#5b9436}#add-to-cart-box .add-to-cart-add-show-button.added-to-cart:active,#add-to-cart-box .add-to-cart-collapsed-icons-container.added-to-cart:active{background-color:#50822f}#add-to-cart-box .add-to-cart-add-show-button.added-to-cart.add-to-cart-add-icon,#add-to-cart-box .add-to-cart-collapsed-icons-container.added-to-cart.add-to-cart-add-icon{display:none}#add-to-cart-box .add-to-cart-add-show-button.added-to-cart .add-to-cart-label,#add-to-cart-box .add-to-cart-add-show-button.added-to-cart .add-to-cart-add-icon,#add-to-cart-box .add-to-cart-collapsed-icons-container.added-to-cart .add-to-cart-label,#add-to-cart-box .add-to-cart-collapsed-icons-container.added-to-cart .add-to-cart-add-icon{display:none}#add-to-cart-box .add-to-cart-add-show-button.added-to-cart .view-shopping-cart-icon,#add-to-cart-box .add-to-cart-collapsed-icons-container.added-to-cart .view-shopping-cart-icon{display:block}#add-to-cart-box .add-to-cart-collapsed-icons-container{padding:10px;margin:0;display:flex;align-items:center;justify-content:center}#add-to-cart-box .add-to-cart-label{font-size:12px;line-height:12px;margin-left:7px;text-align:center}#add-to-cart-box .view-shopping-cart-icon{display:none;font-size:24px}@keyframes addToCartGlow{from{box-shadow:0 0 0 #407fbf}to{box-shadow:0 0 30px #407fbf}}@keyframes viewInCartGlow{from{box-shadow:0 0 0 #67a73d}to{box-shadow:0 0 30px #67a73d}}.cart-glow{animation-duration:2s;animation-iteration-count:infinite;animation-direction:alternate;animation-timing-function:ease-in-out}.cart-glow.can-add-to-cart{animation-name:addToCartGlow}.cart-glow.can-view-in-cart{animation-name:viewInCartGlow}\n',""]),o.exports=t},1236:function(o,t,a){"use strict";a.r(t),a.d(t,"AddToCartManager",(function(){return k}));var i=a(8),e=a(25),d=a(13);const n=new class{constructor(){this.handleComboAudioSelectionChange=this.handleComboAudioSelectionChange.bind(this),this.handleEbookAudioSelectionChange=this.handleEbookAudioSelectionChange.bind(this),this.handleComboAddToCartClick=this.handleComboAddToCartClick.bind(this),this.handleEbookAddToCartClick=this.handleEbookAddToCartClick.bind(this)}initialize(){this.$addToCartBox=$("#add-to-cart-box")}render(o){this.$addToCartBox=$("#add-to-cart-box"),this.options=o;const t=(o.productOfferings||[]).find(o=>o.isComboOffering()),a=(o.productOfferings||[]).find(o=>o.isEBookOffering()),e=(o.productOfferings||[]).find(o=>o.isAudioOffering());this.$addToCartBox.toggleClass("user-owns-book",this.options.userOwnsBook),this.$addToCartBox.toggleClass("user-owns-audio",this.options.userOwnsAudio),this.$addToCartBox.toggleClass("combo-offering-available",null!=t),this.$addToCartBox.toggleClass("ebook-offering-available",null!=a),this.$addToCartBox.toggleClass("audio-offering-available",null!=e),this.$addToCartBox.toggleClass("combo-offering-in-cart",o.isComboInCart),this.$addToCartBox.toggleClass("ebook-offering-in-cart",o.isEbookInCart),this.$addToCartBox.toggleClass("audio-offering-in-cart",o.isAudioInCart),this.$addToCartBox.toggleClass("combo-audio-selected",this.isComboAudioSelected),this.$addToCartBox.toggleClass("ebook-audio-selected",this.isEbookAudioSelected),this.$addToCartBox.toggleClass("can-be-minimized",o.canBeMinimized),this.$addToCartBox.toggleClass("combo-discounted",null!=t&&t.unitAmountDiscounted>0),this.$addToCartBox.toggleClass("ebook-discounted",null!=a&&a.unitAmountDiscounted>0),this.$addToCartBox.toggleClass("audio-discounted",null!=e&&e.unitAmountDiscounted>0),this.$addToCartBox.on("click",".add-to-cart-close-button",this.options.onCloseClick),this.$addToCartBox.find(".add-to-cart-product-title").text(d.a.cleanBookTitle(this.options.productTitle,!0));const n=this.$addToCartBox.find(".add-to-cart-combo-container");n.toggleClass("disabled",this.options.isComboInCart),this.options.isComboInCart?n.attr("disabled","disabled"):n.removeAttr("disabled");const r=n.find(".add-to-cart-audio-choice-container");r.toggleClass("active",this.isComboAudioSelected).toggleClass("add-to-cart-audio-upgrade-only-container",!this.options.isComboInCart&&this.options.userOwnsBook),r.find("input").prop("checked",this.isComboAudioSelected).on("change",this.handleComboAudioSelectionChange);const s=this.getAudioPriceWithDiscount(),c=this.getAudioPriceWithoutDiscount();Math.abs(s-c)<1?(r.find(".add-to-cart-choice-price-container").text("$"+s),r.find(".add-to-cart-choice-list-price-container").addClass("hidden")):(r.find(".add-to-cart-choice-price-container").text("$"+s),r.find(".add-to-cart-choice-list-price-container").text("$"+c).removeClass("hidden")),null!=t&&(n.find(".add-to-cart-content-list-book-price").text("$"+i.a.formatMoney(t.price)),n.find(".add-to-cart-content-book-price-with-discount").text("$"+i.a.formatMoney(t.price-t.unitAmountDiscounted))),this.$addToCartBox.find(".add-to-cart-collapsed-icons-container").toggleClass("added-to-cart",this.options.isComboInCart||this.options.isAudioInCart||this.options.isEbookInCart),this.$addToCartBox.find(".add-to-cart-collapsed-icons-container").on("click",o.onMaxmizeClick);const l=n.find(".add-to-cart-add-show-button");l.toggleClass("added-to-cart",this.options.isComboInCart),l.toggleClass("disabled",this.options.userOwnsBook&&!this.isComboAudioSelected),l.on("click",this.handleComboAddToCartClick),l.text(this.generateButtonMessage(t));const h=this.$addToCartBox.find(".add-to-cart-ebook-container");h.toggleClass("disabled",this.options.isEbookInCart),h.toggleClass("collapsed",this.options.isComboInCart),this.options.isEbookInCart?h.attr("disabled","disabled"):h.removeAttr("disabled");const p=h.find(".add-to-cart-audio-choice-container");p.toggleClass("active",this.isEbookAudioSelected).toggleClass("add-to-cart-audio-upgrade-only-container",!this.options.isEbookInCart&&this.options.userOwnsBook),p.find("input").prop("checked",this.isEbookAudioSelected).on("change",this.handleEbookAudioSelectionChange),Math.abs(s-c)<1?(p.find(".add-to-cart-choice-price-container").text("$"+s),p.find(".add-to-cart-choice-list-price-container").addClass("hidden")):(p.find(".add-to-cart-choice-price-container").text("$"+s),p.find(".add-to-cart-choice-list-price-container").text("$"+c).removeClass("hidden")),null!=a&&(h.find(".add-to-cart-content-list-book-price").text("$"+i.a.formatMoney(a.price)),h.find(".add-to-cart-content-book-price-with-discount").text("$"+i.a.formatMoney(a.price-a.unitAmountDiscounted)));const u=h.find(".add-to-cart-add-show-button");u.toggleClass("added-to-cart",this.options.isEbookInCart),u.toggleClass("disabled",this.options.userOwnsBook&&!this.isEbookAudioSelected),u.on("click",this.handleEbookAddToCartClick),u.text(this.generateButtonMessage(a))}generateButtonMessage(o){if(null!=o&&o.isComboOffering()){if(this.options.isEbookInCart){const o=this.getPriceDifferenceBetweenPbookAndEbook();return this.options.isComboInCart||0==o?"checkout":`get print book for $${i.a.formatMoney(o)} more`}return this.options.isComboInCart?"checkout":"add print book to cart"}return this.options.isEbookInCart?"checkout":this.options.userOwnsBook&&!this.options.userOwnsAudio?"upgrade":"add eBook to cart"}getPriceDifferenceBetweenPbookAndEbook(){const o=this.options.productOfferings.find(o=>o.isComboOffering()),t=this.options.productOfferings.find(o=>o.isEBookOffering());return null!=o&&null!=t?o.price-t.price:0}handleComboAddToCartClick(){if(!this.options)return;const o=(this.options.productOfferings||[]).find(o=>o.isComboOffering());let t=this.isComboAudioSelected;this.options.userOwnsBook&&!this.options.userOwnsAudio&&(t=!0),this.options.onAddShowClick&&this.options.onAddShowClick(o,!!t)}handleEbookAddToCartClick(){if(!this.options)return;const o=(this.options.productOfferings||[]).find(o=>o.isEBookOffering());let t=this.isEbookAudioSelected;this.options.userOwnsBook&&!this.options.userOwnsAudio&&(t=!0),this.options.onAddShowClick&&this.options.onAddShowClick(o,!!t)}handleComboAudioSelectionChange(o){this.isComboAudioSelected=o.currentTarget.checked,this.render(this.options)}handleEbookAudioSelectionChange(o){this.isEbookAudioSelected=o.currentTarget.checked,this.render(this.options)}getAudioPriceWithoutDiscount(){const o=this.options&&this.options.productOfferings;if(!o||!o.length)return 0;const t=o.find(o=>o.isAudioOffering());return t?i.a.roundToTwoDecimalPoints(t.price):null}getAudioPriceWithDiscount(){const o=this.options&&this.options.productOfferings;if(!o||!o.length)return 0;const t=o.find(o=>o.isAudioOffering());return t?t.unitAmountDiscounted?i.a.roundToTwoDecimalPoints(t.price-t.unitAmountDiscounted):i.a.roundToTwoDecimalPoints(t.price):null}};var r=a(9),s=a(42),c=a(4),l=a(5),h=a(0),p=a(3),u=(a(1150),a(339));const b=$(document),g=$(window);let f=g.width();const C="audio_access";const m='\n<div id="add-to-cart-box" class="hidden">\n<div class="add-to-cart">\n    <div class="add-to-cart-close-button" data-tooltip data-title="close"><i class="fal fa-times" aria-hidden="true"></i></div>\n    <div class="add-to-cart-title-container">\n        <h5 class="add-to-cart-product-title"></h5>\n    </div>\n    <fieldset class="add-to-cart-choices-container add-to-cart-combo-container">\n        <div class="add-to-cart-buy-content">\n            <div class="add-to-cart-choices-title-container"> \n                <div class="add-to-cart-content-title" style="float: left">\n                    <span> print book </span> \n                    <i class="fal fa-info-circle tooltip-on-the-left" aria-hidden="true" data-tooltip data-title="<div><div><strong><em>pBook</em></strong> - Print book </div><div><strong><em>eBook</em></strong> - Electronic Book (includes kindle, epub, pdf, and liveBook formats) </div><div><strong><em>liveBook</em></strong> - liveBooks are enchanced eBooks accessible from any browser. liveBook access is free with any purchase.</div></div>"></i>\n                </div>\n                <div class="add-to-cart-content-book-price" style="float:right">\n                    <span class="add-to-cart-content-list-book-price"></span>\n                    <span class="add-to-cart-content-book-price-with-discount"></span>\n                </div>\n                <div class="add-to-cart-content-subtitle" style="clear:both">\n                    <span data-tooltip data-title="<div><strong><em>pBook</em></strong> - Print book </div>">pBook</span> + <span data-tooltip data-title="<div><strong><em>eBook</em></strong> - Electronic Book (includes kindle, epub, pdf, and liveBook formats) </div>">eBook</span> + <span data-tooltip data-title="<div><strong><em>liveBook</em></strong> - liveBooks are enchanced eBooks accessible from any browser. liveBook access is free with any purchase.</div>">liveBook</span>\n                </div>\n            </div>\n        </div>\n        \n        <div class="add-to-cart-audio-choice">\n            <div class="add-to-cart-audio-choice-container">\n                <label class="add-to-cart-choice-check-container">\n                    <input type="checkbox"/> \n                    <span>audio</span>\n                </label>\n                <div class="add-to-cart-choice-price-wrapper">\n                    <label class="add-to-cart-choice-list-price-container"></label>\n                    <label class="add-to-cart-choice-price-container"></label>\n                </div>\n            </div>\n        </div>\n        <div class="add-to-cart-add-show-button"></div>\n    </fieldset>\n    <fieldset class="add-to-cart-choices-container add-to-cart-ebook-container">\n        <div class="add-to-cart-buy-content">\n            <div class="add-to-cart-choices-title-container"> \n                <div class="add-to-cart-content-title" style="float: left">\n                    <span> ebook </span> \n                    <i class="fal fa-info-circle tooltip-on-the-left" aria-hidden="true" data-tooltip data-title="<div><div><strong><em>pdf</em></strong> - A digital file containing a drm free copy of your book.</div><div><strong><em>epub</em></strong> - The EPUB is the most popular format for digital books. You can read EPUB files on your smartphone, tablet, eReader, or computer.</div><div><strong><em>kindle</em></strong> - The kindle format enables reading on eReaders such as the Amazon Kindle.</div><div><strong><em>liveBook</em></strong> - liveBooks are enchanced eBooks accessible from any browser. liveBook access is free with any purchase.</div></div>"></i>\n                </div>\n                <div class="add-to-cart-content-book-price" style="float:right">\n                    <span class="add-to-cart-content-list-book-price"></span>\n                    <span class="add-to-cart-content-book-price-with-discount"></span>\n                </div>\n                <div class="add-to-cart-content-subtitle" style="clear:both">\n                    <span data-tooltip data-title="<div><strong><em>pdf</em></strong> - A digital file containing a drm free copy of your book.</div>">pdf</span> + <span data-tooltip data-title="<div><strong><em>epub</em></strong> - The EPUB is the most popular format for digital books. You can read EPUB files on your smartphone, tablet, eReader, or computer.</div>">ePub</span> + <span data-tooltip data-title="<div><strong><em>kindle</em></strong> - The kindle format enables reading on eReaders such as the Amazon Kindle.</div>">kindle</span> + <span data-tooltip data-title="<div><strong><em>liveBook</em></strong> - liveBooks are enchanced eBooks accessible from any browser. liveBook access is free with any purchase.</div>">liveBook</span>\n                </div>\n            </div>\n        </div>\n\n        <div class="add-to-cart-audio-choice">\n            <div class="add-to-cart-audio-choice-container">\n                <label class="add-to-cart-choice-check-container">\n                    <input type="checkbox"/> \n                    <span>audio</span>\n                </label>\n                <div class="add-to-cart-choice-price-wrapper">\n                    <label class="add-to-cart-choice-list-price-container"></label>\n                    <label class="add-to-cart-choice-price-container"></label>\n                </div>\n            </div>\n        </div>\n\n        <div class="add-to-cart-add-show-button"></div>\n    </fieldset>\n</div>\n<div class="add-to-cart-collapsed-icons-container">\n    <svg class="add-to-cart-add-icon" width="28" height="26" viewBox="0 0 28 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M25.6116 15.2918L27.9804 4.6375C28.035 4.39082 27.9742 4.1335 27.8172 3.93582C27.6587 3.73954 27.4204 3.62418 27.1673 3.62418H7.42588L6.88912 1.20778C6.80456 0.826984 6.46688 0.555664 6.07684 0.555664H0.83244C0.37296 0.555664 0 0.928064 0 1.3881V2.53246C0 2.99166 0.37296 3.36378 0.83244 3.36378H4.4912L8.16928 19.9163C8.1914 20.0154 8.23144 20.1072 8.28436 20.1887C7.29232 20.5978 6.5926 21.5733 6.5926 22.714C6.5926 24.2221 7.81564 25.4446 9.32344 25.4446C10.8315 25.4446 12.0543 24.2221 12.0543 22.714C12.0543 21.8427 11.6446 21.0679 11.0093 20.5684H21.7602C21.124 21.0679 20.7144 21.8427 20.7144 22.714C20.7144 24.2221 21.938 25.4446 23.4455 25.4446C24.953 25.4446 26.1766 24.2221 26.1766 22.714C26.1766 21.4991 25.3831 20.4704 24.2852 20.1165C24.3454 20.0017 24.3813 19.8737 24.3813 19.7362V18.5916C24.3813 18.1315 24.0089 17.7591 23.5497 17.7591H10.5675L10.2029 16.1192H24.5804C25.0754 16.1192 25.5052 15.7753 25.6116 15.2918ZM20.1295 10.4257C20.1295 10.7701 19.8503 11.0495 19.5056 11.0495H17.5157V13.0392C17.5157 13.3836 17.2365 13.6633 16.8918 13.6633H15.6433C15.2986 13.6633 15.0195 13.3836 15.0195 13.0392V11.0495H13.0295C12.6848 11.0495 12.4054 10.7703 12.4054 10.4257V9.17714C12.4054 8.83218 12.6848 8.55302 13.0295 8.55302H15.0195V6.56278C15.0195 6.21866 15.2984 5.9395 15.6433 5.9395H16.8918C17.2365 5.9395 17.5157 6.21838 17.5157 6.56278V8.55302H19.5056C19.85 8.55302 20.1295 8.8319 20.1295 9.17714V10.4257Z" fill="white"/>\n    </svg>\n    <i class="fal fa-shopping-cart view-shopping-cart-icon" aria-hidden="true"></i>\n    <div class="add-to-cart-label">buy<br/>now</div>\n</div>\n</div>',k=new class{constructor(){$(document.body).append(m),this.$addToCartBox=$("#add-to-cart-box"),this.$addToCartStripe=$("#add-to-cart-stripe"),this.$addToCartStripeMessage=this.$addToCartStripe.find(".add-to-cart-stripe-message"),this.$addToCartStripeCloseIcon=this.$addToCartStripe.find(".close-icon"),this.handleResizeStart=this.handleResizeStart.bind(this),this.handleResizeStop=this.handleResizeStop.bind(this),this.handleStripeCloseToggleClick=this.handleStripeCloseToggleClick.bind(this),this.handleStripeClick=this.handleStripeClick.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this),this.handleMaximizeClick=this.handleMaximizeClick.bind(this),this.handleAddShowClick=this.handleAddShowClick.bind(this),this.textSlideMenuBeginOpening=this.textSlideMenuBeginOpening.bind(this),this.handleSlideMenuClosed=this.handleSlideMenuClosed.bind(this),b.on("bookSpendingInfoArrived shoppingCartItemsChanged",()=>this.renderForCurrentBook()),b.on("slideMenuStartOpening",this.textSlideMenuBeginOpening),b.on("slideMenuClosed",this.handleSlideMenuClosed),b.on("click",".inline-promo-add-to-cart-combo",o=>{e.a.requestAddBookToCart(p.a.book,!1,$(o.currentTarget).attr("data-discount-code")||$(o.target).attr("data-discount-code"),!1,!0),$(document).trigger("inlinePromoAddToCart")}),b.on("click",".inline-promo-add-to-cart-ebook",o=>{e.a.requestAddBookToCart(p.a.book,!1,$(o.currentTarget).attr("data-discount-code")||$(o.target).attr("data-discount-code"),!1,!1),$(document).trigger("inlinePromoAddToCart")}),b.on("click",".inline-promo-checkout",o=>{e.a.requestMenuOpen()}),b.on("shoppingCartItemsChanged",o=>this.updateInlinePromos())}initialize(o){if(p.a.isShoppingCartDisabledInApp&&h.b.isApp())return;if(this.book=o,this.addToCartShouldBeShown=!1,!this.book||this.book.userOwnsBook||this.book.hasBeenDownloaded)return;const t=Date.now();Promise.all([e.a.getProductOfferings(o),e.a.getProductDiscounts(o,s.a.getNewUserDiscountCode()),e.a.initializeShoppingCartStore()]).then(([a,i])=>{b.trigger("addToCartReady",Math.round((Date.now()-t)/1e3)),this.productOfferings=a,this.productOfferings&&this.productOfferings.length&&(o.newerEditionId||(!o.userOwnsBook||this.hasAudioOffering()&&this.shouldOfferAudioPurchaseToBookOwner())&&(this.areProductOfferingsAlreadyOnDiscount(a)||this.associateProductOfferingsWithDiscounts(a,i),this.updateInlinePromos(),g.on("resizestart",this.handleResizeStart),g.on("resizestop",this.handleResizeStop),this.$addToCartStripeCloseIcon.on("click",this.handleStripeCloseToggleClick),this.$addToCartStripe.on("click",this.handleStripeClick),this.addToCartShouldBeShown=!0,this.renderForCurrentBook(),this.minimizeMaximizeAddToCart(!1)))}),e.a.getProductSpendingInfo(o)}areProductOfferingsAlreadyOnDiscount(o){if(null==o||0==o.length)return!1;try{return o.filter(o=>o.unitAmountDiscounted>0).length>0}catch(o){return!1}}updateInlinePromos(){if(null==this.productOfferings||0==this.productOfferings.length)return;const o=this.productOfferings.find(o=>o.isComboOffering()),t=this.productOfferings.find(o=>o.isEBookOffering()),a=e.a.isInShoppingCartByManningId(p.a.book.manningId);$(".add-to-cart-inline-promo").each((e,d)=>{let n=e%2==0?t:o;if(null==n&&(n=t||o),null==n)return $(d).remove(),!0;const r=$(d);let s=a?"checkout":`buy ${n.isEBookOffering()?"ebook":"print book"} `;a||(n.unitAmountDiscounted>0?s+=`for &nbsp;<span class='add-to-cart-content-list-book-price'>$${i.a.roundToTwoDecimalPoints(n.price)}</span> $${i.a.floorToTwoDecimalPoints(n.price-n.unitAmountDiscounted)}`:s+=`for $${i.a.roundToTwoDecimalPoints(n.price-n.unitAmountDiscounted)}`);const c=r.find(".inline-promo-cart-button");a?c.removeClass("inline-promo-add-to-cart-combo").removeClass("inline-promo-add-to-cart-ebook").addClass("inline-promo-checkout").attr("data-discount-code","").text(s):c.toggleClass("inline-promo-add-to-cart-combo",n.isComboOffering()).toggleClass("inline-promo-add-to-cart-ebook",n.isEBookOffering()).removeClass("inline-promo-checkout").attr("data-discount-code",n.discountCode).html(s),p.a.isSiteWideSaleEnabled&&r.find(".inline-promo-title").html(n.isEBookOffering()?p.a.siteWideSaleEbookMessage:p.a.siteWideSaleComboMessage),r.toggleClass("ebook-inline-promo",n.isEBookOffering()),r.toggleClass("combo-inline-promo",n.isComboOffering())})}associateProductOfferingsWithDiscounts(o,t){if(t&&o&&o.length)try{for(const a in t)for(const i in t[a]){const e=o.find(o=>+o.id==+i);e&&(e.discountCode=a,e.unitAmountDiscounted=t[a][i])}}catch(o){}}renderForCurrentBook(){this.book&&this.addToCartShouldBeShown&&(this.canBoxFit()?(this.$addToCartStripe.addClass("disappear"),this.renderAddToCartBox()):this.showAddToCartStripe())}clean(){h.b.isApp()||(this.book=null,this.addToCartShouldBeShown=!1,this.$addToCartBox.addClass("hidden"),$(document.body).removeClass("add-to-cart-box-collapsed"),this.cleanStripe(),this.productOfferings=null,g.off("resizestart",this.handleResizeStart),g.off("resizestop",this.handleResizeStop),this.uncollapseAddToCartBox(),this.$addToCartStripeCloseIcon.off("click",this.handleStripeCloseToggleClick),this.$addToCartStripe.off("click",this.handleStripeClick))}openCartMenu(){e.a.requestMenuOpen()}collapseAddToCartBox(){clearTimeout(this.collapseTimeout),this.$addToCartBox.addClass("collapsed"),$(document.body).addClass("add-to-cart-box-collapsed")}uncollapseAddToCartBox(){this.$addToCartBox.is(".collapsed")?(u.a.hideFor(300),this.collapseTimeout=c.a.setTimeout(()=>{$(document.body).removeClass("add-to-cart-box-collapsed")},300)):$(document.body).removeClass("add-to-cart-box-collapsed"),this.$addToCartBox.removeClass("collapsed")}renderAddToCartBox(){if(this.$addToCartBox.toggleClass("hidden",null==this.productOfferings||0==this.productOfferings.length),this.$addToCartBox[0]){const o=e.a.isEbookInShoppingCart(this.book),t=e.a.isComboInShoppingCart(this.book),a=e.a.isAudioInShoppingCart(this.book);this.$addToCartBox.toggleClass("can-add-to-cart",!(o||t)),this.$addToCartBox.toggleClass("can-view-in-cart",o||t),n.render({userOwnsBook:this.book.userOwnsBook,userOwnsAudio:this.book.userOwnsAudio,productOfferings:this.productOfferings,productTitle:d.a.cleanBookTitle(this.book.title),isEbookInCart:o,isComboInCart:t,isAudioInCart:a,canBeMinimized:this.canAddToCartBeMinimized(),onAddShowClick:this.handleAddShowClick,onCloseClick:this.handleCloseClick,onMaxmizeClick:this.handleMaximizeClick,isMeap:this.book.isMeap})}}canAddToCartBeMinimized(){return!(!this.book.userOwnsBook||!this.hasAudioOffering()||this.book.userOwnsAudio)||!!(this.book.spendingInfo&&this.book.spendingInfo.spentDollarAmount>0)}showAddToCartStripe(){this.$addToCartStripe.removeClass("disappear"),this.$addToCartStripe.removeClass("hidden"),e.a.isEbookInShoppingCart(this.book)?(this.$addToCartStripe.addClass("added-to-cart"),this.$addToCartStripeMessage.text("view in cart"),this.$addToCartStripe.attr("title","view in cart")):(this.$addToCartStripe.removeClass("added-to-cart"),this.$addToCartStripeMessage.html(this.book.userOwnsBook?`upgrade with audio for $${this.getAudioPrice()}`:this.getAddToCartMessage()),this.$addToCartStripe.attr("title","add to cart")),this.collapseAddToCartBox()}cleanStripe(){this.$addToCartStripe.addClass("disappear").removeClass("collapsed")}textSlideMenuBeginOpening(o,t,a){this.canBoxFit()?this.canBoxFit(a)||this.collapseAddToCartBox():this.book&&this.addToCartShouldBeShown?this.showAddToCartStripe():this.hideAddToCart()}handleSlideMenuClosed(){this.showAddToCart()}handleCloseClick(){this.$addToCartBox.is(".collapsed")||this.cleanStripe()}minimizeMaximizeAddToCart(o){o?this.uncollapseAddToCartBox():this.collapseAddToCartBox()}handleMaximizeClick(){this.maximizeAddToCartBoxIfNecessary()}handleAddShowClick(o,t){this.maximizeAddToCartBoxIfNecessary()||this.book.userOwnsBook&&!t||(o.isEBookOffering()&&e.a.isEbookInShoppingCart(this.book)||o.isComboOffering()&&e.a.isComboInShoppingCart(this.book)?this.openCartMenu():e.a.requestAddBookToCart(this.book,t,this.getDiscountCode(o),!1,o.isComboOffering()))}maximizeAddToCartBoxIfNecessary(){return!!this.$addToCartBox.is(".collapsed")&&(0==r.a.getCurrentMainContentTranslateX()?this.minimizeMaximizeAddToCart(!0):($(document).trigger("slideMenuCloseRequested"),c.a.setTimeout(()=>{this.minimizeMaximizeAddToCart(!0)},300)),!0)}handleResizeStart(){f!=g.width()&&this.hideAddToCart(),f=g.width()}handleResizeStop(){this.showAddToCart(),f=g.width()}hideAddToCart(){this.$addToCartBox.css({display:"none"}),this.cleanStripe()}showAddToCart(){this.canBoxFit()&&(this.$addToCartBox.css({display:"block"}),this.uncollapseAddToCartBox()),this.renderForCurrentBook()}handleStripeCloseToggleClick(o){this.$addToCartStripe.is(".collapsed")?this.$addToCartStripe.removeClass("collapsed"):this.$addToCartStripe.addClass("collapsed"),o&&o.stopPropagation&&o.stopPropagation(),o&&o.preventDefault&&o.preventDefault(),o&&o.stopImmediatePropagation&&o.stopImmediatePropagation()}handleStripeClick(o){o.target!==this.$addToCartStripeCloseIcon[0]&&(e.a.isEbookInShoppingCart(this.book)?e.a.requestMenuOpen():this.$addToCartStripe.is(".collapsed")?this.$addToCartStripe.removeClass("collapsed"):(e.a.requestAddBookToCart(this.book,this.hasAudioOffering(),this.getDiscountCode(this.getEBookOffering())),this.renderForCurrentBook()))}getAddToCartMessage(){let o=`<strong style="text-decoration: underline;">add</strong> to cart for ${this.getPriceMessageHTML()} `;return this.book.spendingInfo&&this.book.spendingInfo.spentDollarAmount||(o+=`<em class="add-to-cart-formats-message">(pdf + ePub + kindle + liveBook ${this.hasAudioOffering()?" + audio":""})</em>`),o}getPriceMessageHTML(){const o=this.getEBookOffering(),t=this.getAudioOffering();let a="<span>",e=(o&&o.price||0)+(t&&t.price||0);const d=(o&&o.unitAmountDiscounted||0)+(t&&t.unitAmountDiscounted||0);return a+=d>0?`<span class="add-to-cart-content-list-book-price">$${i.a.formatMoney(e)}</span>\n                          <span class="add-to-cart-content-book-price-with-discount"><strong>$${i.a.formatMoney(e-d)}</strong></span>`:`<strong>$${i.a.formatMoney(e)}</strong>`,a+="</span>"}canBoxFit(o=0){if($(window).width()<1274)return!1;const t=$(document.querySelector(".readable-text"));if(0==t.length)return!1;let a=t.offset().left+t.width()+o-r.a.getComputedTranslateX($("#book-main-content-container")[0]);const i=parseFloat(this.$addToCartBox.css("right"));return a+Math.max(this.$addToCartBox.width(),225)+i+90<g.width()}getAudioPrice(){const o=this.productOfferings;if(!o||!o.length)return 0;const t=o.find(o=>o.isAudioOffering());return t?i.a.roundToTwoDecimalPoints(t.price):0}getEBookOffering(){return(this.productOfferings||[]).find(o=>o.isEBookOffering())}getAudioOffering(){return this.productOfferings&&this.productOfferings.length?this.productOfferings.find(o=>o.isAudioOffering()):null}hasAudioOffering(){return!!this.getAudioOffering()}getDiscountCode(o){return o?o.discountCode:""}requestOpenLogin(){e.a.requestOpenLogin()}shouldOfferAudioPurchaseToBookOwner(){const o=this.getLastBookAccessTime();return(null==o||i.a.getDifferenceInDays(o,new Date)>14)&&(this.storeBookLastAccessTime(),!0)}getLastBookAccessTime(){try{const o=JSON.parse(l.a.getItem(C)||"{}");return o[this.book.shortName]?new Date(o[this.book.shortName]):null}catch(o){return null}}storeBookLastAccessTime(){try{const o=JSON.parse(l.a.getItem(C)||"{}");o[this.book.shortName]=Date.now(),l.a.setItem(C,JSON.stringify(o))}catch(o){}}}}}]);
//# sourceMappingURL=addToCart.chunk.js.map?1b9cbe803cd88b9ce8ea