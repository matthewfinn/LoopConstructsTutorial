(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{166:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(4),s=n(0),o=n(9),r=(n(167),n(43)),a=n(2);const l=$(document),d=$(window);class c{constructor(e,t,n){this.$menu=e,this.$menuButton=t,this.optionalArguments=n||{},this.$header=$("#header"),this.$footer=$("#footer"),this.handleMenuButtonClick=this.handleMenuButtonClick.bind(this),this.handleResize=this.handleResize.bind(this),this.handleSideMenuOpened=this.handleSideMenuOpened.bind(this),this.handleTextSlideMenuBeginOpening=this.handleTextSlideMenuBeginOpening.bind(this),i.a.onEventWithCooldown(this.$menuButton,"click",this.handleMenuButtonClick),l.on("slideMenuOpened",this.handleSideMenuOpened),l.on("slideMenuCloseRequested textSlideBoxShowStart",()=>this.close()),l.on("textSlideMenuBeginOpening",this.handleTextSlideMenuBeginOpening),l.on("click",e=>this.handleDocumentClick(e.target)),this.$menu.css({width:this.determineSlideMenuWidth()}),s.b.isTouchDevice()&&(this.menuDragManager=new r.a(this.$menu,e=>{this.isOnLeftSide()&&e.x>0||this.isOnRightSide()&&e.x<0||this.$menu.css("transform",`translateX(${e.x}px)`)},(e,t)=>{this.isOnLeftSide()&&e.x>0||this.isOnRightSide()&&e.x<0?this.$menu.css("transform",""):(this.$menu.css("transform",`translateX(${e.x})`),this.$menu.css("transform",""),(Math.abs(e.x)>=this.$menu.width()/2||t)&&this.close())},{isOnLeftSide:this.isOnLeftSide(),isOnRightSide:this.isOnRightSide()}))}handleMenuButtonClick(){this.$menu.is(".text-slide-menu-shown")?this.close():this.open()}adjustMainBookContentContainerPosition(){const e=this.$menu.is(".text-slide-menu-shown"),t=$("#book-main-content-container"),n=$(".summary-wrapper");if(null!=t&&0!=t.length&&e)if(this.shouldShiftMainContent()){const e=o.a.getComputedTranslateX(t[0]);let i=Math.max(this.$menu.width()-(t.length?t.offset().left:0)+e+(this.optionalArguments.sidePadding||0),0);i=this.$menu.is(".text-slide-menu-right")?-i:i,l.trigger("slideMenuStartOpening",[this.$menu,i]),this.adjustBookMainContentAndSummaryPosition(t,n,i)}else t.css("transform",""),n.css("transform",""),l.trigger("textSlideMenuOpened",[this.$menu]),l.trigger("slideMenuStartOpening",[this.$menu,0]),l.trigger("slideMenuOpened",[this.$menu])}adjustBookMainContentAndSummaryPosition(e,t,n){a.a.loadVelocityCode().then(()=>{e.velocity({translateX:n},{duration:250,complete:()=>{l.trigger("textSlideMenuOpened",[this.$menu]),l.trigger("slideMenuOpened",[this.$menu])}}),t.velocity({translateX:n},{duration:250})})}handleResize(){i.a.setTimeout(()=>{this.adjustMenuPosition(),this.adjustMainBookContentContainerPosition()},50)}handleSideMenuOpened(e,t){null!=t&&0!=t.length&&t!=this.$menu&&t.offset().left<d.width()/2&&this.close()}handleTextSlideMenuBeginOpening(e,t){null!=t&&0!=t.length&&t!=this.$menu&&this.close()}adjustMenuPosition(){const e=this.$header.height(),t=this.$footer.height();let n=e+t;s.b.isApp()||!s.b.isAndroid()&&!s.b.isIOS()||(n+=70),this.optionalArguments&&this.optionalArguments.dockToBottom?this.$menu.css({bottom:t,width:this.determineSlideMenuWidth()}):this.$menu.css({top:e,height:`calc(100vh - ${n}px)`,width:this.determineSlideMenuWidth()})}open(){this.optionalArguments.dontOpenWhenDisconnected&&s.b.isConnected(),this.isOpened()||(this.$menu.addClass("text-slide-menu-shown"),this.$menuButton.addClass("selected"),l.trigger("textSlideMenuBeginOpening",[this.$menu]),this.optionalArguments.beforeOpenCallback&&this.optionalArguments.beforeOpenCallback(),this.adjustMenuPosition(),this.adjustMainBookContentContainerPosition(),d.on("resizestop orientationchange",this.handleResize),l.trigger("tocMenuOpen"),$(document.body).addClass("has-text-slide-menu-shown"),this.menuDragManager&&this.menuDragManager.enable())}close(e=!0){if(this.isOpened()){d.off("resizestop orientationchange",this.handleResize),this.$menu.removeClass("text-slide-menu-shown"),$(document.body).removeClass("has-text-slide-menu-shown"),this.$menuButton.removeClass("selected");const t=$("#book-main-content-container"),n=$(".summary-wrapper");this.menuDragManager&&this.menuDragManager.disable(),e&&(null!=t&&t.length&&t.velocity({translateX:0},{duration:250,complete:()=>{l.trigger("textSlideMenuClosed"),l.trigger("slideMenuClosed"),t.css("transform","")}}),null!=n&&n.length&&n.velocity({translateX:0},{duration:250,complete:()=>{n&&n.css("transform","")}}))}}isOpened(){return this.$menu.is(".text-slide-menu-shown")}determineSlideMenuWidth(){const e=d.width()-($("#book-main-content-container").width()||0);return Math.min(this.optionalArguments.maxWidth||650,Math.max(e,this.optionalArguments.targetWidth||450))}handleDocumentClick(e){this.isOpened()&&!this.shouldShiftMainContent()&&(this.$menu.has(e).length||null!=this.$menuButton&&(this.$menuButton.is(e)||this.$menuButton.has(e).length)||this.optionalArguments&&this.optionalArguments.attachedElementsSelector&&$(e).is(this.optionalArguments.attachedElementsSelector)||this.close())}shouldShiftMainContent(){return s.b.isLargeScreenSize()}isOnLeftSide(){return this.$menu.is(".text-slide-menu-left")}isOnRightSide(){return this.$menu.is(".text-slide-menu-right")}}},167:function(e,t,n){var i=n(88),s=n(168);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var o={insert:"head",singleton:!1};i(s,o);e.exports=s.locals||{}},168:function(e,t,n){(t=n(89)(!1)).push([e.i,".text-slide-menu{position:fixed;z-index:1007;max-width:calc(100vw - 44px);transition:transform 0.35s ease-in-out}.text-slide-menu.text-slide-menu-left{left:0;transform:translateX(-100%)}.text-slide-menu.text-slide-menu-right{right:0;transform:translateX(100%)}.text-slide-menu.text-slide-menu-shown{transform:translateX(0)}\n",""]),e.exports=t},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(4);class s{constructor(e,t,n){this.currentIndex=0,this.$mainContainer=e,this.beforeTabSwitchCallback=n,this.afterTabSwitchCallback=t,i.a.onDescendantEventWithCooldown(this.$mainContainer,"click touchstart",".tab-title",e=>{const t=this.$mainContainer.find(".tab-title").index(e.currentTarget);this.beforeTabSwitchCallback&&this.beforeTabSwitchCallback(t),this.selectTab(t),this.afterTabSwitchCallback&&this.afterTabSwitchCallback(t)}),this.selectTab(this.currentIndex)}selectTab(e){const t=this.$mainContainer.find(".tab-title"),n=this.$mainContainer.find(".tab-container");t.removeClass("selected"),n.removeClass("selected"),t.eq(e).length?t.eq(e).addClass("selected"):t.eq(0).addClass("selected"),n.eq(e).length?(n.eq(e).addClass("selected"),this.currentIndex=e):(n.eq(0).addClass("selected"),this.currentIndex=0)}getCurrentlySelectedTabIndex(){return this.currentIndex}}},474:function(e,t,n){"use strict";n.r(t),n.d(t,"TocIndexMenu",(function(){return C}));var i=n(4),s=n(9),o=n(8),r=n(1),a=n(232),l=n(28),d=n(10),c=n(13),h=n(166),u=(n(799),n(3)),m=n(135),p=n(2);const k=$(window),b=$(document),g=void 0;const x='<div class="loading-container"><i class="fal fa-spin fa-circle-notch fa-3x fa-fw"></i></div>',f='<div class="toc-header-container">\n    <div class="toc-header-title-container">{{title}}</div>\n    <div class="toc-header-icon-container">\n        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <mask id="path-1-inside-1" fill="white">\n                <rect width="4" height="6" rx="1"/>\n            </mask>\n            <rect width="4" height="6" rx="1" stroke="currentColor" stroke-width="4" mask="url(#path-1-inside-1)"/>\n            <mask id="path-2-inside-2" fill="white">\n                <rect y="9" width="4" height="6" rx="1"/>\n            </mask>\n            <rect y="9" width="4" height="6" rx="1" stroke="currentColor" stroke-width="4" mask="url(#path-2-inside-2)"/>\n            <mask id="path-3-inside-3" fill="white">\n                <rect y="18" width="4" height="6" rx="1"/>\n            </mask>\n            <rect y="18" width="4" height="6" rx="1" stroke="currentColor" stroke-width="4" mask="url(#path-3-inside-3)"/>\n            <mask id="path-4-inside-4" fill="white">\n                <rect x="5" width="19" height="6" rx="1"/>\n            </mask>\n            <rect x="5" width="19" height="6" rx="1" stroke="currentColor" stroke-width="4" mask="url(#path-4-inside-4)"/>\n            <mask id="path-5-inside-5" fill="white">\n                <rect x="5" y="9" width="19" height="6" rx="1"/>\n            </mask>\n            <rect x="5" y="9" width="19" height="6" rx="1" stroke="currentColor" stroke-width="4" mask="url(#path-5-inside-5)"/>\n                <mask id="path-6-inside-6" fill="white">\n                <rect x="5" y="18" width="19" height="6" rx="1"/>\n            </mask>\n            <rect x="5" y="18" width="19" height="6" rx="1" stroke="currentColor" stroke-width="4" mask="url(#path-6-inside-6)"/>\n        </svg>\n    </div>\n</div>\n<ul class="toc-book-elements-container">\n{{#toc.frontMatter.length}}\n{{#toc.frontMatter}}\n<li class=\'{{#sections.length}}intro-chapter book-chapter has-dropdown {{/sections.length}}\'>\n    <a class="book-element-link {{#isCurrent}}current-book-element{{/isCurrent}} {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}">{{cleanTitle}} {{#isFree}} <span class="no-wrap">{{lastWord}}<span class="free-flag">free {{#hasAudio}}audio{{/hasAudio}}</span></span>{{/isFree}}</a>\n    {{#sections.length}} \n    <a href="javascript:void(0)" class=\'{{^sections.length}}hidden{{/sections.length}} toc-interaction-icon toc-toggle-button {{#isCurrent}}current-book-element{{/isCurrent}}\'>\n        <i class=\'fa {{#isCurrent}}current-book-element fa-caret-down{{/isCurrent}} {{^isCurrent}}fa-caret-right{{/isCurrent}}\'></i>\n    </a>\n    <ul class=\'dropdown book-sections-list {{#isCurrent}}current-book-element-sections{{/isCurrent}}\'>\n        {{#sections}}\n        <li class=\'book-section\'>\n            <a class="book-element-link {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}" data-short-name="{{shortName}}">{{cleanTitle}}</a>\n            {{#subsections.length}}\n                <ul>\n                {{#subsections}}\n                    <li><a class="book-element-link {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}" data-short-name="{{shortName}}">{{cleanTitle}}</a></li>\n                {{/subsections}}\n                </ul>\n            {{/subsections.length}}\n        </li>\n        {{/sections}}\n    </ul>\n    {{/sections.length}}\n</li>\n{{/toc.frontMatter}}\n{{/toc.frontMatter.length}}\n\n{{#toc.parts}}\n<a class="container-link book-element-link {{#isCurrentPart}}current-book-element{{/isCurrentPart}}" href="{{link}}">{{cleanTitle}}</a>\n{{#chapters}}\n<li class=\'book-chapter has-dropdown {{#isCurrent}}opened contains-current-section{{/isCurrent}}\'>\n    <a class="book-element-link {{#isCurrent}}current-book-element{{/isCurrent}} {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}" data-short-name="{{shortName}}">{{cleanTitle}}{{#isFree}} <span class="no-wrap">{{lastWord}}<span class="free-flag">free {{#hasAudio}}audio{{/hasAudio}}</span></span>{{/isFree}}</a>\n    <a href="javascript:void(0)" class=\'{{^sections.length}}hidden{{/sections.length}} toc-interaction-icon toc-toggle-button {{#isCurrent}}current-book-element{{/isCurrent}}\'>\n        <i class=\'fa {{#isCurrent}}current-book-element fa-caret-down{{/isCurrent}} {{^isCurrent}}fa-caret-right{{/isCurrent}}\'></i>\n    </a>\n    <ul class=\'dropdown book-sections-list {{#isCurrent}}current-book-element-sections{{/isCurrent}}\'>\n        {{#sections}}\n        <li class=\'book-section\'>\n            <a class="book-element-link {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}" data-short-name="{{shortName}}">{{cleanTitle}}</a>\n            {{#subsections.length}}\n                <ul>\n                {{#subsections}}\n                    <li><a class="book-element-link {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}" data-short-name="{{shortName}}">{{cleanTitle}}</a></li>\n                {{/subsections}}\n                </ul>\n            {{/subsections.length}}\n        </li>\n        {{/sections}}\n    </ul>\n</li>\n{{/chapters}}\n{{/toc.parts}}\n\n{{#toc.backMatter.length}}\n{{#toc.backMatter}}\n<li class="book-chapter">\n    <a class="book-element-link {{#isCurrent}}current-book-element{{/isCurrent}} {{#userOwns}}user-owned{{/userOwns}}  {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" data-short-name="{{shortName}}" href="{{link}}">\n        {{cleanTitle}} {{#isFree}}<span class="free-flag">free {{#hasAudio}}audio{{/hasAudio}}</span>{{/isFree}}\n    </a>\n    <a href="javascript:void(0)" class=\'{{^sections.length}}hidden{{/sections.length}} toc-interaction-icon toc-toggle-button {{#isCurrent}}current-book-element{{/isCurrent}}\'>\n        <i class=\'fa {{#isCurrent}}current-book-element fa-caret-down{{/isCurrent}} {{^isCurrent}}fa-caret-right{{/isCurrent}}\'></i>\n    </a>\n    <ul class=\'dropdown book-sections-list {{#isCurrent}}current-book-element-sections{{/isCurrent}}\'>\n        {{#sections}}\n        <li class=\'book-section\'>\n            <a class="book-element-link {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}" data-short-name="{{shortName}}">{{cleanTitle}}</a>\n            {{#subsections.length}}\n                <ul>\n                {{#subsections}}\n                    <li><a class="book-element-link {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}" data-short-name="{{shortName}}">{{cleanTitle}}</a></li>\n                {{/subsections}}\n                </ul>\n            {{/subsections.length}}\n        </li>\n        {{/sections}}\n    </ul>\n</li>\n{{/toc.backMatter}}\n{{/toc.backMatter.length}}\n</ul>',w='<div class="index-symbols-container">\n    {{#index}}\n    <span class="index-symbol-container">{{letter}}</span><br>\n    {{/index}}\n</div>\n<div class="index-content-container">\n{{#index}}\n<h5>{{letter}}</h5>\n<div>\n    {{#links}}\n    {{#isNewLine}}<br/>{{/isNewLine}}\n    <a href="{{link}}" class="index-link {{additionalClass}}">\n        {{#isSuperScript}} {{{content}}} {{/isSuperScript}}\n        {{^isSuperScript}} {{content}} {{/isSuperScript}}\n    </a>\n    {{/links}}\n</div>\n{{/index}}\n</div>',C=new class{constructor(){this.defaultMainRoute=(g?"#!":"")+"/book/",this.mainRoute=(g?"#!":"")+"/book/",$(document.body).append('<div id="toc-index-menu" class="text-slide-menu text-slide-menu-left hidden"></div>'),this.$menu=$("#toc-index-menu"),this.fillTocMenuLoadingHtml(),this.$tocMenuButtons=$(".toc-menu-button"),this.handleScrollStop=this.handleScrollStop.bind(this),new a.a(this.$menu,e=>{this.textSlideMenu.adjustMenuPosition(),1==e&&this.adjustSymbolsPosition()},e=>{0==e?this.fillTocIfNecessary():1==e&&this.fillIndexIfNecessary()}),this.textSlideMenu=new h.a(this.$menu,this.$tocMenuButtons,{sidePadding:20,targetWidth:380,maxWidth:450,beforeOpenCallback:()=>this.fillTocIfNecessary()}),i.a.onDescendantEventWithCooldown(this.$menu,"click touchstart",".index-symbol-container",e=>this.handleIndexSymbolClick(e.currentTarget)),i.a.onDescendantEventWithCooldown(this.$menu,"click",".book-chapter, .book-element-link",e=>this.handleTocChapterClick(e.target,e.currentTarget)),i.a.onDescendantEventWithCooldown(this.$menu,"click",".toc-header-icon-container",e=>this.textSlideMenu.close()),b.on("contentFullyConstructed",()=>this.handleContentConstructed()),b.on("requestTocIndexMenuOpen",()=>this.open()),b.on("requestTocPosition",()=>{this.textSlideMenu&&this.textSlideMenu.isOpened()&&this.textSlideMenu.handleResize()}),this.$menu.on("click",".index-content-container",()=>{b.trigger("tocIndexClick")})}initialize(e,t,n,i){this.$menu.removeClass("hidden");const s=null==this.book||this.book.shortName!=e.shortName;this.book=e,this.bookElement=t,this.mainRoute=i||this.defaultMainRoute,this.bookElementShortName=n,this.markCurrentBookElementAsSelectedInToc(e,t),this.$headerElements=c.a.getHeadings(),this.$tocMenuButtons.removeClass("hidden"),k.on("scrollstop",this.handleScrollStop),null==this.book||null==e||this.book.shortName!=e.shortName?(this.book=e,s&&this.fillTocMenuLoadingHtml(),this.textSlideMenu.isOpened()&&this.textSlideMenu.handleResize(),t.isBookOverview&&this.fillTocIfNecessary()):this.textSlideMenu.adjustMainBookContentContainerPosition()}handleContentConstructed(){i.a.setTimeout(()=>{s.a.shouldTocAutomaticallyOpen(this.bookElement,this.bookElementShortName)&&this.textSlideMenu.open(),u.a.markCurrentBookAsVisited()},500)}clean(){this.book=null,this.bookElement=null,this.bookElementShortName="",this.hasTocBeenRendered=!1,this.hasIndexBeenRendered=!1,this.partialClean(),this.$tocMenuButtons.addClass("hidden"),this.textSlideMenu.close(),m.a.reset(),this.fillTocMenuLoadingHtml()}close(){this.textSlideMenu.close()}partialClean(){this.unselectHeadings(),null!=this.$bookMainContentContainer&&this.$bookMainContentContainer.length&&this.$bookMainContentContainer.velocity("stop",!0),this.$headerElements=null,k.off("scrollstop",this.handleScrollStop)}open(){this.textSlideMenu.open()}isOpened(){return this.textSlideMenu.isOpened()}fixIndexLinks(e){try{if(!e||!e.length)return;for(const t of e)if(t&&t.links&&t.links.length)for(const e of t.links)e.link&&(e.link=e.link.replace("#!/","/"))}catch(e){}return e}fillTocMenuLoadingHtml(){this.$menu.html(this.createMenuLoadingHtml({tocHtmlContent:x,indexHtmlContent:x,hasIndex:u.a.book&&!u.a.book.isMeap}))}fillTocIfNecessary(){this.hasTocBeenRendered||null!=this.book&&null!=this.bookElement&&m.a.getTocAndIndex(this.book.shortName,this.book,this.bookElement).then(e=>{this.adjustCurrentToc(e.toc),p.a.loadMustacheCode().then(()=>{this.$menu.find(".tab-container.toc-tab").html(Mustache.render(f,{toc:e.toc,title:u.a.book.cleanTitle})),this.hasTocBeenRendered=!0})})}fillIndexIfNecessary(){this.hasIndexBeenRendered||null!=this.book&&null!=this.bookElement&&m.a.getTocAndIndex(this.book.shortName,this.book,this.bookElement).then(e=>{this.fixIndexLinks(e.index),this.adjustLinkLayout(e.index),p.a.loadMustacheCode().then(()=>{this.$menu.find(".tab-container.index-tab .index-container").html(Mustache.render(w,{index:e.index})),this.hasIndexBeenRendered=!0})})}handleTocChapterClick(e,t){const n=$(e),i=$(t);this.$menu.find(".current-book-element").remove("current-book-element");const o=n.closest(".book-chapter");if(o.addClass("current-book-element"),b.trigger("tocMenuClick"),n.is(".book-element-link"))return this.unselectHeadings(),n.addClass("selected-heading"),s.a.closeMenuIfTakesTooMuchSpace(this.$menu),!1;const r=o.find(".book-sections-list");o.is(".opened")?(i.find(".toc-toggle-button i").removeClass("fa-caret-down").addClass("fa-caret-right"),r.slideUp({complete:()=>o.removeClass("opened")})):(i.find(".toc-toggle-button i").removeClass("fa-caret-right").addClass("fa-caret-down"),r.slideDown({duration:200,complete:()=>o.addClass("opened")}))}adjustCurrentToc(e,t=null){if(!e)return;if(e&&e.frontMatter&&e.frontMatter.length>0){const t=e.frontMatter.find(e=>"Copyright"==e.title);null!=t&&o.a.removeItemFromArray(e.frontMatter,t)}const n={};null!=t&&t.partialChapterOwnership.forEach(e=>{n[e.shortName]=e.userOwned,null!=e.partialSectionOwnership&&e.partialSectionOwnership.forEach(e=>{n[e.shortName]=e.userOwned,e.partialSubsectionOwnership&&e.partialSubsectionOwnership.forEach(e=>{n[e.shortName]=e.userOwned})})});const i=this.bookElement.shortName,s=(e,a=!1)=>{if(e){if(e.chapters&&!e.link&&(e.link=r.a.getBookElementUrl(this.book.slug,"chapter-1",this.bookElement.meapVersion,this.bookElement.reviewVersion)),e.cleanTitle=e.title,e.title&&"Chapters"!=e.title&&"Appendixes"!=e.title&&(e.cleanTitle=e.title.replace("Chapter","Ch").replace("Appendix","App")),e.id){if(e.shortName===i?e.chapters?e.isCurrentPart=!0:e.isCurrent=!0:e.chapters?e.isCurrentPart=!1:e.isCurrent=!1,"isFree"in e&&(e.isFree=e.link&&this.shouldFreeFlagBeShown(e.link),e.hasAudio=this.book.hasAudio&&!this.book.userOwnsAudio,e.isFree)){const t=e.cleanTitle||e.title;e.cleanTitle=o.a.getWithoutLastWordOrFullIfSingleWord(t),e.lastWord=o.a.getLastWordOrEmptyIfSingleWord(t)}e.userDoesntOwn=!e.isFree&&!this.book.userOwnsBook}e.shortName||(e.shortName=d.a.extractNumbering(e.title||"")),t&&(e.userOwns=!!n[e.shortName]||a,e.userDoesntOwn=!e.userOwns),this.book.userOwnsBook&&(e.userOwns=!0),e.link=l.a.adjustBookLink(e.link),e.link&&this.mainRoute!==this.defaultMainRoute&&(e.link=e.link.replace(this.defaultMainRoute,this.mainRoute));for(const t in e)e.hasOwnProperty(t)&&e[t]&&"object"==typeof e[t]&&s(e[t],e.userOwns)}};s(e)}shouldFreeFlagBeShown(e){return!!this.book&&(!(this.book.userOwnsBook||!o.a.endsWithOneOf(e,this.book.openChapters,!0))||!(!this.book.userOwnsBook||!this.book.hasAudio||this.book.userOwnsAudio||!o.a.endsWithOneOf(e,this.book.openChapters)))}adjustLinkLayout(e){if(e)for(let t=0;t<e.length;t++){"Symbol"!=e[t].letter&&"Symbols"!=e[t].letter||(e[t].letter="$");const n=e[t].letter,i=n.match(/[a-z]/i),s=e[t].links;let o="",r=0;for(let e=0;e<s.length;e++){const t=s[e];t.content=$.trim((t.content||"").replace(/ /g," "));let a=t.content;"2nd"==a||"3rd"==a||"4th"==a||"5th"==a||"6th"==a||"7th"==a||"8th"==a||"9th"==a||a==o?(t.content=a==o?`<sup>${r+2}</sup>`:a.slice(0,1)+"<sup>"+a.slice(1)+"</sup>",a==o?r++:r=0,t.isSuperScript=!0,o=a):(t.additionalClass="",o=a,r=0,a=a.toUpperCase().replace(/\W+/g,""),i&&0!==a.indexOf(n)&&(t.additionalClass+=" indented",t.isLetter=!0),t.isNewLine=e>0)}}}handleScrollStop(){i.a.setTimeout(()=>this.selectCurrentHeadersInToc(),16)}selectCurrentHeadersInToc(){if(this.unselectHeadings(),null==this.$headerElements||0==this.$headerElements.length)return;const e=this.getStructurallyImportantHeadersForPosition(k.scrollTop()+s.a.getTopNavBarHeight()+40);if(e.length>0){const t=$(e[0]);this.$menu.find(`[data-short-name='${d.a.extractNumbering(t.text().trim())}']`).addClass("selected-heading")}}markCurrentBookElementAsSelectedInToc(e,t){this.$menu.find(".current-book-element").removeClass("current-book-element"),this.unselectHeadings();const n=l.a.formHash(e,t),i=this.$menu.find(`.book-element-link[href='${n}'], .book-element-link[href='${l.a.trimLastSlash(n)}']`);i.addClass("current-book-element opened"),i.closest(".book-chapter").addClass("opened")}unselectHeadings(){this.$menu.find(".selected-heading").removeClass("selected-heading")}getStructurallyImportantHeadersForPosition(e){const t=[],n=this.$headerElements.filter((t,n)=>s.a.isHeadingVisible($(n),e)).last();n.length>0&&t.push(n);const i=c.a.getOwnerSectionHeading(n,this.$headerElements);return null!=i&&t.push(i),t}adjustSymbolsPosition(){const e=this.$menu.find(".index-symbols-container"),t=parseFloat(e.css("line-height"))/parseFloat(e.css("font-size")),n=(this.$menu.height()-40)/e.find(".index-symbol-container").length,i=Math.max(Math.min(Math.floor(n/t),15),8);e.css("font-size",i+"px")}handleIndexSymbolClick(e){b.trigger("tocIndexClick");const t=$(e),n=this.$menu.find(".index-content-container").closest(".tabs-container"),i=t.text(),s=n.find("h5").filter((e,t)=>$(t).text()===i);console.log(n.scrollTop(),s.position().top),n.animate({scrollTop:s.position().top},1e3)}createMenuLoadingHtml(e){return`<div class="tab-title-container">\n    <div class="tab-title selected">table of contents</div>\n    ${e.hasIndex?'<div class="tab-title">index</div>':""}\n    </div>\n<div class="tabs-container">\n<div class="tab-container selected toc-tab">\n    ${e.tocHtmlContent}\n</div>\n<div class="tab-container index-tab">\n    <div class="index-container">\n        ${e.indexHtmlContent}\n    </div>\n</div>\n</div>`}}},799:function(e,t,n){var i=n(88),s=n(800);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var o={insert:"head",singleton:!1};i(s,o);e.exports=s.locals||{}},800:function(e,t,n){(t=n(89)(!1)).push([e.i,"body.night-mode #toc-index-menu{border-right-color:#3c3b3b;border-bottom-color:#3c3b3b}#toc-index-menu{left:0;background-color:#e8e8e8;border-right:1px solid #d0cdcd;border-bottom:1px solid #d0cdcd;color:#443}#toc-index-menu .toc-header-container{padding:0.15em 1em;padding-right:50px}#toc-index-menu .toc-header-container .toc-header-title-container{font-style:italic}#toc-index-menu .toc-header-container .toc-header-icon-container{position:fixed;top:35px;right:10px;cursor:pointer;user-select:none;padding:5px 5px 15px 15px;z-index:1;backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);color:#828282}#toc-index-menu .toc-header-container .toc-header-icon-container:hover{color:#222}#toc-index-menu .loading-container{text-align:center;margin-top:1em}@media screen and (max-width: 689px){#toc-index-menu{font-size:13px}}#toc-index-menu .tab-title{color:inherit}#toc-index-menu .toc-book-elements-container{margin:0;padding:0 1em}#toc-index-menu .container-link{display:block;cursor:default;user-select:none}#toc-index-menu .book-element-link{display:block;cursor:pointer}#toc-index-menu a{color:inherit}#toc-index-menu ul,#toc-index-menu ol,#toc-index-menu li{font-size:1em;list-style-type:none}#toc-index-menu .book-part{margin-top:5px;padding:0 4px;font-size:0.9em;text-transform:uppercase}#toc-index-menu .free-flag{color:white}#toc-index-menu .free-flag:after{border-color:transparent #e8e8e8 transparent transparent}#toc-index-menu .toc-interaction-icon{position:absolute;display:block;top:0.45em;min-height:2rem;min-width:2rem;font-size:small;cursor:pointer}@media screen and (min-width: 690px){#toc-index-menu .toc-interaction-icon{top:0.7em}}#toc-index-menu .toc-toggle-button{right:0;text-align:center}#toc-index-menu .book-chapter{position:relative;border:1px solid transparent;margin-top:1px;padding:0 1.2em 0 0.5em}#toc-index-menu .book-chapter .book-element-link{display:inline-block;padding:0.3em 1.5em 0 0.3em}#toc-index-menu .book-chapter .toc-interaction-icon i{font-size:1.1em}#toc-index-menu .book-chapter.opened .book-sections-list{display:block}#toc-index-menu .book-chapter.opened .toc-interaction-icon{display:inline-block}#toc-index-menu .intro-chapter:not(.buyable-intro-chapter){padding-left:0}#toc-index-menu .intro-chapter:not(.buyable-intro-chapter) .book-element-link{padding-left:0}#toc-index-menu .book-sections-list{margin-left:1rem;display:none}#toc-index-menu .book-section{line-height:1.2rem}#toc-index-menu .book-section a{padding:2px;display:inline-block;line-height:1.2rem}#toc-index-menu .book-section .book-element-link.selected-heading{font-weight:900}#toc-index-menu .current-book-element.book-element-link{font-weight:900}#toc-index-menu a,#toc-index-menu span{color:inherit}#toc-index-menu .container-link{color:inherit}#toc-index-menu .toc-interaction-icon{color:inherit}.tab-container.selected .index-symbols-container{display:block}.index-container{padding:5px;padding-bottom:0;color:inherit;position:relative}.index-container .index-symbols-container{background-color:#484848;color:white;padding-left:0;width:25px;text-align:center;position:fixed;display:none}.index-container .index-symbol-container{cursor:pointer;width:25px;display:inline-block;user-select:none}.index-container .index-content-container{margin-left:35px}.index-container h5{font-weight:bolder;color:inherit}.index-container .index-link{padding:2px;text-decoration:underline;font-size:12px}.index-container .index-link{display:inline-block}.index-container .index-link.indented{padding-left:1rem}\n",""]),e.exports=t}}]);
//# sourceMappingURL=editorPage~tocIndexMenu.chunk.js.map?63b51f3bc59ce125bdb1