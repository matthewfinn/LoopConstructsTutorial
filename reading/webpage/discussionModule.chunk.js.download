(window.webpackJsonp=window.webpackJsonp||[]).push([[35,3,8,15,98],{100:function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"==typeof window&&(o=window)}e.exports=o},104:function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return n}));const r="exercise preview",n="General"},106:function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return h}));var r,n=o(87),i=o(155),s=o(91);o(125);!function(e){e[e.standard=0]="standard",e[e.dark=1]="dark",e[e.gold=2]="gold",e[e.green=3]="green",e[e.red=4]="red"}(r||(r={}));const a={backgroundColor:"rgba(0, 0, 0, 0.75)",zIndex:1008,top:0,display:"flex",alignItems:"center",justifyContent:"center",position:"fixed"},c={alignItems:"flex-start"},l={backgroundColor:"rgb(255, 255, 255)",display:"fixed",position:"relative",top:"unset",left:"unset",right:"unset",bottom:"unset",border:"unset",borderRadius:"unset",width:"100%",color:"#3C3C3C",overflow:"visible",padding:"20px 40px"},d={maxWidth:"600px",margin:"0 auto",padding:"0"},u={maxHeight:"90vh",overflow:"auto",maxWidth:"85vw"};class h extends n.Component{render(){let e=Object.assign({},l),t=a,o=Object.assign({},u),s=Object.assign({},d);this.props.isContentVerticalTop&&(t=Object.assign({},t,c)),this.props.isPositionStatic&&(t=Object.assign({},t,{position:"static"})),this.props.dontGoFullWidth&&(e=Object.assign({},e,{width:"auto"})),this.props.hasNoPadding&&(e=Object.assign({},e,{padding:"0"})),this.props.noWidthLimitation&&(o=Object.assign({},o,{maxWidth:"auto"}),s=Object.assign({},s,{maxWidth:"auto"})),this.props.theme==r.dark?e=Object.assign({},e,{backgroundColor:"rgb(51, 51,51)"}):this.props.theme==r.gold?e=Object.assign({},e,{backgroundColor:"rgb(254, 203, 47)"}):this.props.theme==r.green?e=Object.assign({},e,{backgroundColor:"rgb(57, 121, 38)"}):this.props.theme==r.red&&(e=Object.assign({},e,{backgroundColor:"rgb(195, 41, 28)"})),this.props.contentTopOffset&&(e=Object.assign({},e,{top:this.props.contentTopOffset})),this.props.initialOverlayTop&&(t.top=this.props.initialOverlayTop,o.maxHeight=`calc(${u.maxHeight} - ${this.props.initialOverlayTop})`);const h={"dark-theme":this.props.theme==r.dark,"gold-theme":this.props.theme==r.gold,"green-theme":this.props.theme==r.green,"red-theme":this.props.theme==r.red};return this.props.parentElement&&this.props.parentElement!=document.body?n.createElement("div",{className:"ReactModal__Overlay",style:t},n.createElement("div",{style:e},this.generateModalContent(h,s,o))):n.createElement(i,{isOpen:this.props.isOpen,appElement:document.body,style:{overlay:t,content:e},parentSelector:()=>document.body,onRequestClose:()=>{null!=this.props.onClose&&(this.props.onClose instanceof Function?this.props.onClose():console.error&&console.error("onClose is not a function",this.props.onClose,this.props.mainContainerClassName))}},this.generateModalContent(h,s,o))}generateModalContent(e,t,o){return n.createElement(n.Fragment,null,n.createElement("div",{className:s("modal-header",e,this.props.additionalModalHeaderClass)},n.createElement("div",{className:"modal-back-button-container"},this.props.hasBackButton?n.createElement("div",{className:"modal-header-button",onTouchStart:e=>this.props.onBack&&this.props.onBack(),onClick:e=>this.props.onBack&&this.props.onBack()},n.createElement("i",{className:"fa fw fa-chevron-left"})):n.createElement("i",{className:"fa fw fa-chevron-left",style:{opacity:0}})),n.createElement("div",{className:"modal-title-container"},this.props.title&&n.createElement("h3",{dangerouslySetInnerHTML:{__html:this.props.title}}),this.props.subtitle&&n.createElement("span",{style:this.props.subtitleStyle},this.props.subtitle)),n.createElement("div",{onTouchStart:e=>this.props.onClose&&this.props.onClose(),onClick:e=>this.props.onClose&&this.props.onClose(),className:s("modal-close-button-container",{"no-padding":this.props.hasNoPadding})},n.createElement("div",{className:"modal-header-button"},n.createElement("i",{className:"fa fw fa-times"})))),n.createElement("div",{className:s(this.props.mainContainerClassName,e),style:t},n.createElement("div",{style:o,className:"modal-content-container"},this.props.children,n.createElement("div",null,this.props.actionMessageHTML&&n.createElement("span",{className:s("tokens-button action-button",this.props.actionButtonAdditionalClass),onClick:this.props.onActionClicked,dangerouslySetInnerHTML:{__html:this.props.actionMessageHTML}}),this.props.secondayActionMessageHTML&&n.createElement("span",{className:s("tokens-button action-button",this.props.secondaryActionButtonAdditionalClass),onClick:this.props.onSecondaryActionClicked,dangerouslySetInnerHTML:{__html:this.props.secondayActionMessageHTML}})),this.props.cancelationMessageHTML&&n.createElement("span",{className:"tokens-button cancel-button",onClick:this.props.onCancelationClicked,dangerouslySetInnerHTML:{__html:this.props.cancelationMessageHTML}}))))}}},107:function(e,t,o){"use strict";var r=o(93);t.a=new class{constructor(){this.numberedBookItemIndexRegExp=/^(?:(?:(?:(?:Chapter)|(?:Part)|(?:Lesson)|(?:Section)|(?:Unit)) ))?((?:\d+\.?)+)/,this.appendixIndexRegExp=/^(Appendix )?[A-Z]\.(\d+\.?)*/,this.appendixSectionSubsectionRegEx=/^([A-Z]\.?(?:\d+\.?)+)/,this.sectionSubsectionRegEx=/^(\d+\.?)+/,this.isOnDevice=!1,this.titleRegExes=[/Chapter (\d+\.?)\s*:?/,/(?:Part|Section|Lesson|Unit) (\d+\.?)/,/Appendix\s*([A-Z]?\.?)/,/^\d+(\.)?\s+/],this.sectionRegEx=/^((\d+|[A-Z])\.)(\d+(\.)?)/,this.subsectionRegEx=/^((\d+|[A-Z])\.)(\d+\.)(\d+(\.)?)/}extractNumbering(e){if(!e||!e.trim())return"";let t=null;for(const o of this.titleRegExes)if((t=e.match(o))&&t.length>=2)return t[1];return(t=e.match(this.appendixSectionSubsectionRegEx))?t[0]:(t=e.match(this.sectionSubsectionRegEx))?t[0]:""}getRouteInfo(e){if(!e)return null;const t=e.indexOf("/book/");if(-1==t)return null;let o=e.indexOf("/",t+"/book/".length);-1==o&&-1==(o=e.indexOf("?"))&&(o=e.length);const r=e.substring(t+"/book/".length,o),n=o+1;let i=e.indexOf("/",n);-1==i&&-1==(i=e.indexOf("?"))&&(i=e.length);const s=e.substring(n,i),a=i+1;let c=e.indexOf("/",a);return-1==c&&-1==(c=e.indexOf("?"))&&(c=e.length),{slug:r,bookElement:s||"chapter-1",refId:e.substring(a,c).replace(/search-/gi,"")||"1"}}extractBookElementShortName(e){if(this.isChapterOrAppendix(e)){const t=this.extractBookElementIndex(e);if(t&&r.a.isNumber(t))return`chapter-${+t}`;if(t&&e.indexOf("Appendix")>=0)return`appendix-${t.replace(".","")}`}return""}removeCruftFromTitle(e){return e?(e||"").trim().replace(/^learn windows|^learn|in action|in practice|in a month of lunches|in depth|in motion|the essential reference|the art of|secrets of|the well-grounded|^practical|^modern|^exploring|^talk|practices of|^get\s+|^applied|grokking|workout/gi,"").trim():e}cleanBookTitle(e){return e?(e||"").trim().replace(/,?\s+(second|third|fourth|fifth|sixth|seventh|eight|nineth)\s+edition/i,""):e}adaptLinkFormat(e){return e=e||"",this.isOnDevice?e.indexOf("#!")>=0?e:e.indexOf("/book")>=0?e.replace("/book","/#!/book"):e:e.replace("#!","").replace("//book","/book")}getShortTitle(e){return e?e=e.replace(/,?\s+second\s+edition/i,", 2nd ed.").replace(/,?\s+third\s+edition/i,", 3rd ed.").replace(/,?\s+fourth\s+edition/i,", 4th ed.").replace(/,?\s+fifth\s+edition/i,", 5th ed.").replace(/,?\s+sixth\s+edition/i,", 6th ed.").replace(/,?\s+seventh\s+edition/i,", 7th ed.").replace(/,?\s+eight\s+edition/i,", 8th ed.").replace(/,?\s+nineth\s+edition/i,", 9th ed."):e}getShortTitleAndEdition(e){if(!e)return{shortTitle:"",edition:""};let t=this.getShortTitle(e),o="";const r=[", 2nd ed.",", 3rd ed.",", 4th ed.",", 5th ed.",", 6th ed.",", 7th ed.",", 8th ed.",", 9th ed."];for(const e of r)if(t.indexOf(e)>0){t=t.replace(e,""),o=e.replace(", ","");break}return{shortTitle:t,edition:o}}getElementLink(e){if(!e)return e;const t=(e=this.adaptLinkFormat(e)).match("(chapter-[0-9]+)|(part-[0-9]+)|(appendix(-[a-z])?)");return null==t||0==t.length?e:e.substring(0,t.index+t[0].length)}getSectionLink(e,t){if(!e)return e;e=this.adaptLinkFormat(e);const o=this.getElementLink(e);if(o==e)return e;let r=this.extractBookElementIndex(t).trim()||"";return""==r?e:(r.endsWith(".")&&(r=r.substring(0,r.length-1)),o+"/section-"+r.replace(/\./g,"-"))}extractBookElementIndex(e){let t=new RegExp(this.appendixIndexRegExp).exec(e),o=new RegExp(this.numberedBookItemIndexRegExp).exec(e);return t?(t[0]||"").replace("Appendix ",""):o&&o.length>1?o[1]:""}splitIntoShortNameAndContent(e){let t=new RegExp(this.appendixIndexRegExp).exec(e),o=new RegExp(this.numberedBookItemIndexRegExp).exec(e);if(t){const o=(t[0]||"").replace("Appendix ","");return{shortName:o,content:e.replace("Appendix","").replace(o,"")}}if(o&&o.length>1){let t=o[1];const r=e.replace("Chapter","").replace("Lesson","").replace(t,"");return-1!=e.indexOf("Chapter")&&(t=`Chapter ${t}`),{shortName:t,content:r}}return null}extractSegmentedBookElementIndex(e){const t=this.extractBookElementIndex(e);return t?t.split(".").filter(e=>e.trim()):[]}compareBookItemIndexes(e,t){const o=this.extractSegmentedBookElementIndex(e),r=this.extractSegmentedBookElementIndex(t),n=Math.max(o.length,r.length);for(let e=0;e<n;e++){const t=o[e],n=r[e];if(!t)return-1;if(!n)return 1;const i=parseInt(t),s=parseInt(n);if(Number.isNaN(i)&&!Number.isNaN(s))return 1;if(!Number.isNaN(i)&&Number.isNaN(s))return-1;if(Number.isNaN(i)&&Number.isNaN(s)){if(t===n)continue;return t<n?-1:1}if(i!==s)return i<s?-1:1}return 0}getLastIndex(e){const t=this.extractBookElementIndex(e);if(!t)return t;const o=t.match(/(\d+)\.?$/);return null==o?"":o[1]||o[0]}cleanBookElementTitle(e,t=!0){if(!e)return e;const o=this.extractBookElementIndex(e);return e=e.trim().replace(/^(Chapter|Part|Section|Appendix|Unit|Module)/,""),t&&(e=e.replace(o,"").trim()),(e=e.replace(/^\.\s*/,"")).trim()}adjustCoverPath(e,t,o){return e?(-1!=e.indexOf("images")&&-1!=e.indexOf("manning.com")&&(-1!=e.indexOf("manning.com/book/")?e=e.replace("manning.com/book/",`manning.com/${t}/${o}/resize/book/`):-1!=e.indexOf("manning.com/video/")?e=e.replace("manning.com/video/",`manning.com/${t}/${o}/resize/video/`):-1!=e.indexOf("manning.com/bundle/")&&(e=e.replace("manning.com/bundle/",`manning.com/${t}/${o}/resize/bundle/`))),e):e}isChapterOrAppendix(e){if(!e)return!1;for(const t of this.titleRegExes)if(e.match(t))return!0;return!1}isSection(e){return!!e&&(null!=e.match(this.sectionRegEx)&&!this.isSubsection(e))}isSubsection(e){return!!e&&null!=e.match(this.subsectionRegEx)}}},108:function(e,t,o){"use strict";o.d(t,"a",(function(){return h}));var r=o(120),n=o(233),i=o(132),s=o(189),a=o(17),c=o(104);const l="Errata",d="Meeting arrangement",u="Author Online Forum Legacy Posts";class h{static setSourceApp(e){h.sourceApp=e}static setDeploymentType(e){h.deploymentType=e}static getSourceApp(){return h.sourceApp}static getNextEndDate(e,t=0){return e?new Date(e.getTime()-7*Math.pow(2,t)*24*60*60*1e3):new Date(Date.now()-7*Math.pow(2,t)*24*60*60*1e3)}static getProductForumLink(e){if(e.isLivebook){const t=`/book/${e.productSlug}/discussion`;return h.sourceApp==a.b.livebook?t:h.deploymentType==a.a.qa?`https://livebook-qa.manning.com${t}`:`https://livebook.manning.com${t}`}if(e.isLivevideo){const t=`/course/${e.productExternalId}/${e.productSlug}?discussions=true`;return h.sourceApp==a.b.livevideo?t:h.deploymentType==a.a.qa?`https://livevideo-qa.manning.com${t}`:`https://livevideo.manning.com${t}`}if(e.isLiveProject){const t=`/project/${e.productExternalId}/${e.productSlug}?discussions=true`;return h.sourceApp==a.b.pbc?t:h.deploymentType==a.a.qa?`https://liveproject-qa.manning.com${t}`:`https://liveproject.manning.com${t}`}return""}static getElementForumLink(e,t){if(null==e)return"";if(null==t)return h.getProductForumLink(e);if(e.isLivebook){const o=`/book/${e.productSlug}/${t.element}/discussion`;return h.sourceApp==a.b.livebook?o:h.deploymentType==a.a.qa?`https://livebook-qa.manning.com${o}`:`https://livebook.manning.com${o}`}if(e.isLivevideo){if(t.element==c.b||t.element==l||t.element==u||t.element==d)return h.getProductForumLink(e);const o=`/module/${t.element}?discussions=true`;return h.sourceApp==a.b.livevideo?o:h.deploymentType==a.a.qa?`https://livevideo-qa.manning.com${o}`:`https://livevideo.manning.com${o}`}if(e.isLiveProject){if(t.element==c.b||t.element==l||t.element==u||t.element==d)return h.getProductForumLink(e);const o=`/module/${t.element}?discussions=true`;return h.sourceApp==a.b.pbc?o:h.deploymentType==a.a.qa?`https://liveproject-qa.manning.com${o}`:`https://liveproject.manning.com${o}`}return""}static sortProductForums(e,t){t==s.a.Alphabetical?e.sort((e,t)=>e.productTitle<t.productTitle?-1:e.productTitle>t.productTitle?1:0):t==s.a.MostRecent?e.sort((e,t)=>t.lastCommentDate==e.lastCommentDate?0:t.lastCommentDate<e.lastCommentDate?-1:1):t==s.a.CommentCount&&e.sort((e,t)=>t.numberOfComments-e.numberOfComments)}static sortElementForums(e,t){t==s.a.Alphabetical?e.sort((e,t)=>this.compareByTitle(e.element||"",t.element||"")):t==s.a.MostRecent?e.sort((e,t)=>t.lastCommentDate==e.lastCommentDate?0:t.lastCommentDate<e.lastCommentDate?-1:1):t==s.a.CommentCount&&e.sort((e,t)=>t.forum.getCommentCount()-e.forum.getCommentCount())}static compareByTitle(e,t){if(e=(e||"").toLowerCase(),t=(t||"").toLowerCase(),"general"==e)return-1;if("general"==t)return 1;if("errata"==e)return-1;if("errata"==t)return 1;if("meeting arrangement"==e)return-1;if("meeting arrangement"==t)return 1;if(-1!=e.indexOf("chapter")&&-1!=t.indexOf("chapter")){const o=e.match(/\d+/),r=t.match(/\d+/);if(o&&r)return parseInt(o[0])-parseInt(r[0])}else if(-1!=e.indexOf("appendix")&&-1!=t.indexOf("appendix")){const o=e.match(/\d+/),r=t.match(/\d+/);if(o&&r)return parseInt(o[0])-parseInt(r[0])}else{if(-1!=e.indexOf("chapter")&&-1!=t.indexOf("appendix"))return-1;if(-1!=e.indexOf("appendix")&&-1!=t.indexOf("chapter"))return 1}return e<t?-1:e>t?1:0}static getMatchingProductForums(e,t){if(!(t=(t||"").trim()))return e;let o=new n.a(e,{includeScore:!0,shouldSort:!0,threshold:.2,keys:[{name:"productTitle",weight:1}]}).search(t).map(e=>e.item);if(0==o.length){const r=t.toLowerCase();o=e.filter(e=>-1!=e.productTitle.toLowerCase().indexOf(r))}return o}static isAuthor(e,t){return!(!e||!t)&&!!t[e.id]}static isModerator(e,t){return!(!e||!t)&&!!t[e.id]}static updateOnlineStatus(e){this.onlineIdMap=e||{}}static isOnline(e){return!(!e||!this.onlineIdMap)&&this.onlineIdMap[e.id]}static canModerateInProduct(e,t){return!(!e||!e.authorizedProductIds)&&(e.authorizedProductIds["*"]||e.authorizedProductIds[t])}static getUniqueUsers(e){if(!e||!e.length)return[];const t=[],o={};for(const r of e)o[r.user.id]||(t.push(r.user),o[r.user.id]=!0);return t}static hasAlreadyBeenMarkedAsSpam(e,t){return!!(e&&e.spamCommentIds&&e.spamCommentIds.length&&t)&&null!=e.spamCommentIds.find(e=>e==t.id)}static hasProductForumVisitNotifications(e,t){if(!e||!t)return!1;const o=e[t.productId];return!!o&&t.lastCommentDate>o.lastVisitDate}static hasElementForumVisitNotifications(e,t,o){if(!e||!t)return!1;const r=e[t.productId];return!!r&&(!r.visitedElements[o.element]&&o.forum.hasPostsNewerThan(r.lastVisitDate))}static on(e,t){this.emitter.addListener(e,t)}static off(e,t){this.emitter.removeListener(e,t)}static trigger(e,t){setTimeout(()=>this.emitter.emit(e,...t),16)}static addLocationReplacementMapItem(e,t){this.locationReplacementMap[e]=t}static getFromLocationReplacementMap(e){return this.locationReplacementMap[e]||e}static setCurrentLocation(e){this.forumLocation=e}static getCurrentLocation(){return this.forumLocation}static getDefaultForumTitle(){return"Discussion"}static adjustElementTitle(e){return(e||"").replace(/-/," ")}static getNotificationsCount(e){let t=0;for(const o of e)t+=o.countNotSeenPosts();return t}static expendCommentWithUserText(e,t){return e||(e=""),0!=e.indexOf("#")&&0!=e.indexOf("<")&&0!=e.indexOf("`")&&0!=e.indexOf(">")||(e="\r\n\r\n"+e),`${t}: ${e}`}static getMatchingThreads(e,t){const o={},r={},s=[],a=[];for(const e of t){a.push(e),o[e.id]=e;for(const t of e.posts)r[t.id]=e,a.push(t)}const c=new n.a(a,{includeScore:!0,shouldSort:!0,threshold:.6,keys:[{name:"text",weight:1}]}).search(e);for(const e of c){const t=e.item;if(t instanceof i.f)s.push(t);else{const e=r[t.id];e&&s.push(e)}}return s}static getAllThreads(e){const t=[];if(!e)return t;for(const o of e)t.push(...o.threads);return t}static twoForumsShareTheSameRootThread(e,t){return!!(e&&t&&e.threads&&t.threads&&e.threads.length&&t.threads.length)&&e.threads[0].id==t.threads[0].id}static areTwoForumsSame(e,t){return this.areThreadsSame(e.threads,t.threads)}static areForumsSame(e,t){return this.areThreadsSame(this.getAllThreads(e),this.getAllThreads(t))}static areThreadsSame(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;const o={};for(const t of e)o[t.id]=t;for(const o of t){const t=e[o.id];if(!t)return!1;if(t.posts.length!=o.posts.length)return!1}return!0}static storeShouldShowLivebooks(e){this.setItemToLocalStorage("DISCUSSION_SHOW_LIVEBOOKS",e?"1":"")}static shouldShowLivebooks(){return!!this.getItemFromLocalStorage("DISCUSSION_SHOW_LIVEBOOKS")}static getTomorrowsDate(){const e=new Date,t=new Date;return t.setDate(e.getDate()+1),t}static getItemFromLocalStorage(e){try{return localStorage.getItem(e)}catch(t){return console.log("Error getting item from local storage",e),""}}static setItemToLocalStorage(e,t){try{return t?localStorage.setItem(e,t):localStorage.removeItem(e)}catch(t){return console.log("Error setting item to local storage",e),""}}}h.locationReplacementMap={},h.emitter=new r,h.shouldScrollToEndOfThreads=!1,h.shouldShowErrata=!0,h.shouldShowGroupChat=!1,h.shouldShowMaximizeButton=!1,h.shouldShowMinimizeButton=!1,h.shouldShowOnlineStatus=!0,h.onlineIdMap={},h.groupId=0,h.paginationStartDate=new Date,h.paginationEndDate=new Date,h.paginationIncrement=0,h.paginationEndDate=h.getNextEndDate()},112:function(e,t,o){"use strict";o.d(t,"a",(function(){return m})),o.d(t,"b",(function(){return l})),o.d(t,"c",(function(){return p})),o.d(t,"d",(function(){return a}));var r=o(193),n=function(){return Math.random().toString(36).substring(7).split("").join(".")},i={INIT:"@@redux/INIT"+n(),REPLACE:"@@redux/REPLACE"+n(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+n()}};function s(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function a(e,t,o){var n;if("function"==typeof t&&"function"==typeof o||"function"==typeof o&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===o&&(o=t,t=void 0),void 0!==o){if("function"!=typeof o)throw new Error("Expected the enhancer to be a function.");return o(a)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var c=e,l=t,d=[],u=d,h=!1;function p(){u===d&&(u=d.slice())}function m(){if(h)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return l}function f(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(h)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return p(),u.push(e),function(){if(t){if(h)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,p();var o=u.indexOf(e);u.splice(o,1),d=null}}}function g(e){if(!s(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,l=c(l,e)}finally{h=!1}for(var t=d=u,o=0;o<t.length;o++){(0,t[o])()}return e}return g({type:i.INIT}),(n={dispatch:g,subscribe:f,getState:m,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");c=e,g({type:i.REPLACE})}})[r.a]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function o(){e.next&&e.next(m())}return o(),{unsubscribe:t(o)}}})[r.a]=function(){return this},e},n}function c(e,t){return function(){return t(e.apply(this,arguments))}}function l(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var o={};for(var r in e){var n=e[r];"function"==typeof n&&(o[r]=c(n,t))}return o}function d(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function u(e,t){var o=Object.keys(e);return Object.getOwnPropertySymbols&&o.push.apply(o,Object.getOwnPropertySymbols(e)),t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o}function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(o,!0).forEach((function(t){d(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function p(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function m(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return function(e){return function(){var o=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},n={getState:o.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map((function(e){return e(n)}));return h({},o,{dispatch:r=p.apply(void 0,i)(o.dispatch)})}}}},114:function(e,t,o){"use strict";o.d(t,"a",(function(){return d})),o.d(t,"b",(function(){return V}));var r=o(87),n=o.n(r),i=(o(98),n.a.createContext(null));var s=function(e){e()},a=function(){return s},c={notify:function(){}};var l=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=c,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t,o;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=(e=a(),t=null,o=null,{clear:function(){t=null,o=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],o=t;o;)e.push(o),o=o.next;return e},subscribe:function(e){var r=!0,n=o={callback:e,next:null,prev:o};return n.prev?n.prev.next=n:t=n,function(){r&&null!==t&&(r=!1,n.next?n.next.prev=n.prev:o=n.prev,n.prev?n.prev.next=n.next:t=n.next)}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=c)},e}();var d=function(e){var t=e.store,o=e.context,s=e.children,a=Object(r.useMemo)((function(){var e=new l(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),c=Object(r.useMemo)((function(){return t.getState()}),[t]);Object(r.useEffect)((function(){var e=a.subscription;return e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,c]);var d=o||i;return n.a.createElement(d.Provider,{value:a},s)};function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}var p=o(192),m=o.n(p),f=o(236),g="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,b=[],v=[null,null];function S(e,t){var o=e[1];return[t.payload,o+1]}function E(e,t,o){g((function(){return e.apply(void 0,t)}),o)}function y(e,t,o,r,n,i,s){e.current=r,t.current=n,o.current=!1,i.current&&(i.current=null,s())}function C(e,t,o,r,n,i,s,a,c,l){if(e){var d=!1,u=null,h=function(){if(!d){var e,o,h=t.getState();try{e=r(h,n.current)}catch(e){o=e,u=e}o||(u=null),e===i.current?s.current||c():(i.current=e,a.current=e,s.current=!0,l({type:"STORE_UPDATED",payload:{error:o}}))}};o.onStateChange=h,o.trySubscribe(),h();return function(){if(d=!0,o.tryUnsubscribe(),o.onStateChange=null,u)throw u}}}var w=function(){return[null,0]};function T(e,t){void 0===t&&(t={});var o=t,s=o.getDisplayName,a=void 0===s?function(e){return"ConnectAdvanced("+e+")"}:s,c=o.methodName,d=void 0===c?"connectAdvanced":c,p=o.renderCountProp,g=void 0===p?void 0:p,T=o.shouldHandleStateChanges,O=void 0===T||T,k=o.storeKey,x=void 0===k?"store":k,R=(o.withRef,o.forwardRef),A=void 0!==R&&R,_=o.context,F=void 0===_?i:_,I=h(o,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),P=F;return function(t){var o=t.displayName||t.name||"Component",i=a(o),s=u({},I,{getDisplayName:a,methodName:d,renderCountProp:g,shouldHandleStateChanges:O,storeKey:x,displayName:i,wrappedComponentName:o,WrappedComponent:t}),c=I.pure;var p=c?r.useMemo:function(e){return e()};function T(o){var i=Object(r.useMemo)((function(){var e=o.forwardedRef,t=h(o,["forwardedRef"]);return[o.context,e,t]}),[o]),a=i[0],c=i[1],d=i[2],m=Object(r.useMemo)((function(){return a&&a.Consumer&&Object(f.isContextConsumer)(n.a.createElement(a.Consumer,null))?a:P}),[a,P]),g=Object(r.useContext)(m),T=Boolean(o.store)&&Boolean(o.store.getState)&&Boolean(o.store.dispatch);Boolean(g)&&Boolean(g.store);var k=T?o.store:g.store,x=Object(r.useMemo)((function(){return function(t){return e(t.dispatch,s)}(k)}),[k]),R=Object(r.useMemo)((function(){if(!O)return v;var e=new l(k,T?null:g.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[k,T,g]),A=R[0],_=R[1],F=Object(r.useMemo)((function(){return T?g:u({},g,{subscription:A})}),[T,g,A]),I=Object(r.useReducer)(S,b,w),N=I[0][0],M=I[1];if(N&&N.error)throw N.error;var L=Object(r.useRef)(),D=Object(r.useRef)(d),U=Object(r.useRef)(),j=Object(r.useRef)(!1),B=p((function(){return U.current&&d===D.current?U.current:x(k.getState(),d)}),[k,N,d]);E(y,[D,L,j,d,B,U,_]),E(C,[O,k,A,x,D,L,j,U,_,M],[k,A,x]);var V=Object(r.useMemo)((function(){return n.a.createElement(t,u({},B,{ref:c}))}),[c,t,B]);return Object(r.useMemo)((function(){return O?n.a.createElement(m.Provider,{value:F},V):V}),[m,V,F])}var k=c?n.a.memo(T):T;if(k.WrappedComponent=t,k.displayName=i,A){var R=n.a.forwardRef((function(e,t){return n.a.createElement(k,u({},e,{forwardedRef:t}))}));return R.displayName=i,R.WrappedComponent=t,m()(R,t)}return m()(k,t)}}function O(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function k(e,t){if(O(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var o=Object.keys(e),r=Object.keys(t);if(o.length!==r.length)return!1;for(var n=0;n<o.length;n++)if(!Object.prototype.hasOwnProperty.call(t,o[n])||!O(e[o[n]],t[o[n]]))return!1;return!0}var x=o(112);function R(e){return function(t,o){var r=e(t,o);function n(){return r}return n.dependsOnOwnProps=!1,n}}function A(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function _(e,t){return function(t,o){o.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,o){r.mapToProps=e,r.dependsOnOwnProps=A(e);var n=r(t,o);return"function"==typeof n&&(r.mapToProps=n,r.dependsOnOwnProps=A(n),n=r(t,o)),n},r}}var F=[function(e){return"function"==typeof e?_(e):void 0},function(e){return e?void 0:R((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?R((function(t){return Object(x.b)(e,t)})):void 0}];var I=[function(e){return"function"==typeof e?_(e):void 0},function(e){return e?void 0:R((function(){return{}}))}];function P(e,t,o){return u({},o,{},e,{},t)}var N=[function(e){return"function"==typeof e?function(e){return function(t,o){o.displayName;var r,n=o.pure,i=o.areMergedPropsEqual,s=!1;return function(t,o,a){var c=e(t,o,a);return s?n&&i(c,r)||(r=c):(s=!0,r=c),r}}}(e):void 0},function(e){return e?void 0:function(){return P}}];function M(e,t,o,r){return function(n,i){return o(e(n,i),t(r,i),i)}}function L(e,t,o,r,n){var i,s,a,c,l,d=n.areStatesEqual,u=n.areOwnPropsEqual,h=n.areStatePropsEqual,p=!1;function m(n,p){var m,f,g=!u(p,s),b=!d(n,i);return i=n,s=p,g&&b?(a=e(i,s),t.dependsOnOwnProps&&(c=t(r,s)),l=o(a,c,s)):g?(e.dependsOnOwnProps&&(a=e(i,s)),t.dependsOnOwnProps&&(c=t(r,s)),l=o(a,c,s)):b?(m=e(i,s),f=!h(m,a),a=m,f&&(l=o(a,c,s)),l):l}return function(n,d){return p?m(n,d):(a=e(i=n,s=d),c=t(r,s),l=o(a,c,s),p=!0,l)}}function D(e,t){var o=t.initMapStateToProps,r=t.initMapDispatchToProps,n=t.initMergeProps,i=h(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),s=o(e,i),a=r(e,i),c=n(e,i);return(i.pure?L:M)(s,a,c,e,i)}function U(e,t,o){for(var r=t.length-1;r>=0;r--){var n=t[r](e);if(n)return n}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+o+" argument when connecting component "+r.wrappedComponentName+".")}}function j(e,t){return e===t}function B(e){var t=void 0===e?{}:e,o=t.connectHOC,r=void 0===o?T:o,n=t.mapStateToPropsFactories,i=void 0===n?I:n,s=t.mapDispatchToPropsFactories,a=void 0===s?F:s,c=t.mergePropsFactories,l=void 0===c?N:c,d=t.selectorFactory,p=void 0===d?D:d;return function(e,t,o,n){void 0===n&&(n={});var s=n,c=s.pure,d=void 0===c||c,m=s.areStatesEqual,f=void 0===m?j:m,g=s.areOwnPropsEqual,b=void 0===g?k:g,v=s.areStatePropsEqual,S=void 0===v?k:v,E=s.areMergedPropsEqual,y=void 0===E?k:E,C=h(s,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),w=U(e,i,"mapStateToProps"),T=U(t,a,"mapDispatchToProps"),O=U(o,l,"mergeProps");return r(p,u({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:T,initMergeProps:O,pure:d,areStatesEqual:f,areOwnPropsEqual:b,areStatePropsEqual:S,areMergedPropsEqual:y},C))}}var V=B();var H,q=o(97);H=q.unstable_batchedUpdates,s=H},117:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));class r{constructor(e){this.configuration=e}isOnline(){return navigator.onLine}ajax(e,t,o,r,n=!1,i=!1,s=!0){this.get(e,e=>t(e),e=>o(e),r,n,i,s)}static getS3FileContent(e,t,o){if(window.fetch)fetch(e,{mode:"cors",method:"get"}).then(e=>{e.text().then(e=>t(e)).catch(e=>o(e))}).catch(e=>o(e));else if(window.$)$.ajax({url:e,crossDomain:!0}).done(e=>t(e)).fail(e=>o(e));else{const r=new XMLHttpRequest;r.open("get",e,!0),r.setRequestHeader("Content-Type","application/html;charset=UTF-8"),r.setRequestHeader("accept","*/*"),r.setRequestHeader("accept-encoding","gzip, deflate, br"),r.setRequestHeader("cache-control","no-cache"),r.setRequestHeader("sec-fetch-dest","empty"),r.setRequestHeader("sec-fetch-mode","cors"),r.setRequestHeader("sec-fetch-site","cross-site"),r.onreadystatechange=()=>{4==r.readyState&&(200==r.status?t&&t(r.responseText):o&&o(status))},r.send()}}get(e,t,o,r,n=!1,i=!1,s=!0){const a=new XMLHttpRequest;r&&r instanceof Object&&!n&&(e+="?"+this.serializeObject(r)),n?a.open("post",e,!0):a.open("get",e,!0),n?a.setRequestHeader("Content-Type","application/json;charset=UTF-8"):a.setRequestHeader("Content-Type","application/text;charset=UTF-8"),i&&(a.withCredentials=!0),a.onreadystatechange=()=>{let e,r;if(4==a.readyState)if(200==(e=a.status)){try{r=s?JSON.parse(a.responseText):a.responseText}catch(e){return void(o&&o(e))}t&&t(r)}else o&&o(e)},n?a.send(JSON.stringify(r)):a.send()}configure(e){this.configuration=e}getAbsoluteLivebookAwsUrl(e){return this.getAbsoluteUrl(this.configuration.aws.livebook,e)}getAbsoluteBackendUrl(e){return this.getAbsoluteUrl(this.configuration.backend.base,e)}getAbsoluteBackendLivebookUrl(e){return this.getAbsoluteUrl(this.configuration.backend.livebook,e)}getAbsoluteBackendLivevideoUrl(e){return this.getAbsoluteUrl(this.configuration.backend.livevideo,e)}getAbsoluteUrl(e,t){let o=e;return o.endsWith("/")||t.startsWith("/")||(o+="/"),o+t}static getAbsoluteLink(e,t){if(!e)return t;if(!t)return e;let o=e;return e.endsWith("/")||t.startsWith("/")?e.endsWith("&")&&t.startsWith("/")&&(o=o.substr(0,o.length-1)):o+="/",o+t}static isLivebookLink(e){return!!e&&-1!=e.indexOf("/book/")}static isLivevideoLink(e){return!!e&&-1!=e.indexOf("module/")}getAwsPublic(e=""){return this.configuration.aws.livebook+(e||"")}serializeObject(e){if(!e)return"";const t=[];for(const o in e)e.hasOwnProperty(o)&&void 0!==e[o]&&t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")}}},125:function(e,t,o){var r=o(88),n=o(126);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},126:function(e,t,o){(t=o(89)(!1)).push([e.i,".ReactModal__Overlay{animation:fade-in-black-background 0.1s ease-in-out;font-family:'Lato';position:relative;text-align:left}.ReactModal__Overlay .dark-theme .modal-title-container{color:#fecb2f}.ReactModal__Overlay .dark-theme p{color:white}.ReactModal__Overlay .green-theme{color:white}.ReactModal__Overlay .green-theme .modal-header-button{color:white}.ReactModal__Overlay .green-theme h3,.ReactModal__Overlay .green-theme em,.ReactModal__Overlay .green-theme p{color:white}.ReactModal__Overlay .red-theme{color:white}.ReactModal__Overlay .red-theme .modal-header-button{color:white}.ReactModal__Overlay .red-theme h3,.ReactModal__Overlay .red-theme em,.ReactModal__Overlay .red-theme p{color:white}.ReactModal__Overlay .gold-theme .modal-header-button{color:#c69501}.ReactModal__Overlay .gold-theme h3{font-weight:bold}.ReactModal__Overlay .gold-theme .modal-content-container{margin-top:-1em;overscroll-behavior:none;-ms-scroll-chaining:none}.ReactModal__Overlay .modal-header{display:flex;align-items:center;justify-content:space-between;font-weight:300;line-height:1}.ReactModal__Overlay .modal-header-button{font-size:1em;cursor:pointer;user-select:none;color:#9a9a9a}.ReactModal__Overlay .modal-back-button-container{position:absolute;top:35px;left:20px}.ReactModal__Overlay .modal-close-button-container{position:absolute;top:35px;right:20px;z-index:10;padding:1em;margin:-1em;cursor:pointer}.ReactModal__Overlay .modal-close-button-container.no-padding{top:25px}@media screen and (max-width: 450px){.ReactModal__Overlay .modal-close-button-container.no-padding{top:15px}}.ReactModal__Overlay .modal-title-container{max-width:600px;margin:0 auto}.ReactModal__Overlay h3{font-size:2em;font-weight:300;display:inline-block;margin:0 0.5em 20px 0;color:inherit}.ReactModal__Overlay .modal-title-container{flex:1 auto}.ReactModal__Overlay .cancel-button{float:right}.ReactModal__Overlay .tokens-button{display:inline-block;text-align:center;cursor:pointer;padding:0.25em 1.5em;background-color:gray}.ReactModal__Overlay .tokens-button:hover:not(.disabled){background-color:#9a9a9a}.ReactModal__Overlay .tokens-button:active:not(.disabled){background-color:#8d8d8d}.ReactModal__Overlay .tokens-button.action-button{color:white;background-color:#3C67A2}.ReactModal__Overlay .tokens-button.action-button:hover:not(.disabled){background-color:#5280bf}.ReactModal__Overlay .tokens-button.action-button:active:not(.disabled){background-color:#4373b5}@keyframes fade-in-black-background{0%{background-color:rgba(0,0,0,0)}100%{background-color:rgba(0,0,0,0.75)}}\n",""]),e.exports=t},132:function(e,t,o){"use strict";o.d(t,"e",(function(){return r})),o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return n.a})),o.d(t,"f",(function(){return s.a})),o.d(t,"d",(function(){return a.a})),o.d(t,"g",(function(){return c.a})),o.d(t,"c",(function(){return l}));class r{constructor(e,t,o,r,n,i,s,a,c,l,d,u){this.authorIdMap={},this.moderatorIdMap={},this.productId=e,this.productExternalId=t,this.productMeapVersion=o,this.productTitle=n,this.productSlug=r,this.numberOfComments=i,this.numberOfNewComments=s,this.lastCommentDate=a,this.elementForums=c,this.isLivebook=l,this.isLivevideo=d,this.isLiveProject=u}getAllThreads(){const e=[];for(const t of this.elementForums)e.push(...t.forum.threads);return e}static createCopy(e){const t=new r(e.productId,e.productExternalId,e.productMeapVersion,e.productSlug,e.productTitle,e.numberOfComments,e.numberOfNewComments,e.lastCommentDate,null!=e.elementForums?(e.elementForums||[]).concat([]):null,e.isLivebook,e.isLivevideo,e.isLiveProject);return t.authorIdMap=e.authorIdMap,t.moderatorIdMap=e.moderatorIdMap,t}}var n=o(136);class i{constructor(e,t,o,r,n=0){this.element=e,this.elementTitle=t,this.forum=o,this.lastCommentDate=r,this.numberOfNewComments=n}static createCopy(e){return new i(e.element,e.elementTitle,n.a.createCopy(e.forum),e.lastCommentDate,e.numberOfNewComments)}keepUniqueThreads(){if(!this.forum||!this.forum.threads||0==this.forum.threads.length)return;const e={},t=[];for(const o of this.forum.threads)e[o.id]||(t.push(o),e[o.id]=!0);this.forum.threads=t}}var s=o(156),a=o(137),c=o(157);class l{constructor(e,t,o,r,n){this.productExternalId=e,this.element=t,this.location=o,this.baseLink=r,this.meapVersion=n}}},136:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));class r{constructor(e,t,o,r,n){this.title=e,this.forumLocation=t,this.threads=o,this.authorIdMap=r||{},this.moderatorIdMap=n||{}}static createCopy(e){return new r(e.title,e.forumLocation,e.threads.concat([]),Object.assign({},e.authorIdMap),Object.assign({},e.moderatorIdMap))}static createCopyWithNewThreads(e,t){return new r(e.title,e.forumLocation,t,Object.assign({},e.authorIdMap),Object.assign({},e.moderatorIdMap))}getCommentCount(){let e=0;for(let t of this.threads)e+=t.posts.length+1;return e}countNotSeenPosts(){let e=0;for(let t of this.threads)e+=t.countNotSeenPosts();return e}hasPostsNewerThan(e){for(const t of this.threads)if(t.hasPostsNewerThan(e))return!0;return!1}containsThreadWithId(e){for(const t of this.threads)if(t.id==e)return!0;return!1}containsThreadOrPostWithId(e){for(const t of this.threads){if(t.id==e)return!0;for(const o of t.posts)if(o.id==e)return!0}return!1}getCommentIds(){const e=[];for(const t of this.threads){e.push(t.id);for(const o of t.posts)e.push(o.id)}return e}}},137:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var r=o(107);class n{constructor(e,t,o,n,i,s,a="",c=!0,l=!1,d=!1){this.isBeingEdited=!1,this.isBeingSynced=!1,this.isSyncingVotes=!1,this.isEditingSuggestion=!1,this.id=e,this.text=t,this.user=o,this.votes=n,this.dateCreated=i,this.dateUpdated=s,this.link=r.a.adaptLinkFormat(a||""),this.isSeen=c,this.isEditingSuggestion=l,this.disableVoting=d}isCreatedByUser(e){return!(!e||!this.user)&&e.id==this.user.id}static createCopy(e){const t=new n(e.id,e.text,e.user,e.votes,e.dateCreated,e.dateUpdated,e.link,e.isSeen,e.isEditingSuggestion,e.disableVoting);return t.isBeingEdited=e.isBeingEdited,t.isBeingSynced=e.isBeingSynced,t.isSyncingVotes=e.isSyncingVotes,t.productId=e.productId,t.isEditingSuggestion=e.isEditingSuggestion,t.meapVersion=e.meapVersion,t.oldForumId=e.oldForumId,t.disableVoting=e.disableVoting,t}}},141:function(e,t,o){"use strict";o.d(t,"a",(function(){return h}));var r=o(0),n=o(165),i=o(181),s=o(145),a=o(8),c=o(1);class l{fetchTextAddons(e){return new Promise((t,o)=>{c.a.getFromOurBackend(c.a.getAbsoluteUrl("api/textAddon/fetchTextAddonsForUsersBook"),e=>t(e),e=>o(e),{bookShortName:e.book.shortName})})}addBookmarks(e,t){return t&&0!=t.length?new Promise((o,r)=>{c.a.postToOurBackend(c.a.getAbsoluteUrl("api/bookmarks/addBookmarks"),e=>{const r=e;for(let e=0;e<r.length;e++)t[e].id=r[e];o(t)},e=>r(e),{bookmarks:JSON.stringify(t),bookShortName:e.book.shortName})}):Promise.resolve([])}addBookmark(e,t,o,r,n){const s=new i.a(-1,e.shortName,e.ordinal,t,o,r,n,Date.now(),e.meapVersion);return s.isBeingSynced=!0,new Promise((i,a)=>{c.a.postToOurBackend(c.a.getAbsoluteUrl("api/bookmarks/addBookmark"),e=>{s.id=e.bookmarkID,s.isBeingSynced=!1,i(s)},e=>{s.isBeingSynced=!1,a(e)},{book:e.book.shortName,bookElement:e.shortName,productId:e.book.manningId,bookElementOrdinal:e.ordinal,contentID:t,contentHash:o,bookmarkedText:r,contentLocation:n,meapVersion:e.meapVersion})})}removeBookmark(e,t=0){return new Promise((e,o)=>{c.a.postToOurBackend(c.a.getAbsoluteUrl("api/bookmarks/removeBookmark"),t=>e(!0),e=>{console.log("Error when syncing bookmark",e),o(e)},{bookmarkID:t})})}addHighlight(e,t,o,r){const n=new s.b(-1,e.book.shortName,e.shortName,e.ordinal,e.meapVersion,o,t,Date.now(),r);return n.isBeingSynced=!0,new Promise((i,s)=>{c.a.postToOurBackend(c.a.getAbsoluteUrl("api/highlight/createHighlight"),e=>{n.id=e.id,n.isBeingSynced=!1,i(n)},e=>{console.log("Error when syncing highlight",e),n.isBeingSynced=!1,s(e)},{bookShortName:e.book.shortName,productId:e.book.manningId,bookElementShortName:e.shortName,bookElementOrdinal:e.ordinal,meapVersion:e.meapVersion,highlightedParagraphsJson:JSON.stringify(t),offset:r,color:o})})}removeHighlight(e,t){return new Promise((e,o)=>{c.a.postToOurBackend(c.a.getAbsoluteUrl("api/highlight/deleteHighlight"),t=>e(!0),e=>o(e),{highlightID:t})})}changeHighlightColor(e,t,o){return t&&o?new Promise((r,n)=>{c.a.postToOurBackend(c.a.getAbsoluteUrl("api/highlight/changeColor"),e=>r(!0),e=>n(e),{bookShortName:e.book.shortName,highlightID:t,color:o})}):Promise.reject("No highlight to change color to")}addNote(e,t,o,r,i,s,a,l){const d=new n.a(-1,e.shortName,e.ordinal,t,o,r,i,s,Date.now(),e.meapVersion,e.reviewVersion);return d.isBeingSynced=!0,new Promise((n,u)=>{c.a.postToOurBackend(c.a.getAbsoluteUrl("api/note/createNote"),e=>{d.id=e.id,d.isBeingSynced=!1,n(d)},e=>{console.log("Error when syncing note",e),d.isBeingSynced=!1,u(e)},{book:e.book.shortName,productId:e.book.manningId,bookElement:e.shortName,bookElementOrdinal:e.ordinal,contentItemID:t,contentHash:o,annotatedText:r,noteText:i,contentLocation:s,meapVersion:a,reviewVersion:l})})}addNotes(e,t){return t&&0!=t.length?new Promise((o,r)=>{c.a.postToOurBackend(c.a.getAbsoluteUrl("api/notes/addNotes"),e=>{const r=e;for(let e=0;e<r.length;e++)t[e].id=r[e];o(!0)},e=>r(e),{notes:JSON.stringify(t),bookShortName:e.book.shortName})}):Promise.resolve(!0)}removeNote(e,t){return new Promise((e,o)=>{if(!t)return console.log("When removing note, cannot find note with id"),void o("Cannot find note to remove");c.a.postToOurBackend(c.a.getAbsoluteUrl("api/note/removeNote"),t=>e(!0),e=>o(e),{noteID:t},!1)})}editNote(e,t,o){return new Promise((e,r)=>{if(!t)return console.log("When editing note, cannot find note with id"),void r("Cannot find note with id");c.a.postToOurBackend(c.a.getAbsoluteUrl("api/note/editNote"),t=>e(!0),e=>{console.log("Error when syncing note",e),r(e)},{noteID:t,noteText:o},!1)})}syncTextAddonsWithServer(e){return e?new Promise((t,o)=>c.a.postToOurBackend(c.a.getAbsoluteUrl("api/textAddon/syncTextAddons"),()=>t(!0),e=>{document.dispatchEvent(new CustomEvent("sync-error",{detail:{error:e}})),o(!1)},e,!0,!0,!1,!0)):Promise.resolve(!0)}}var d=o(5);class u{constructor(){this.webService=new l}getUniqueTextAddonId(){let e=parseInt(d.a.getItem("TEXT_ADDON_COUNTER")||"0");return e=Number.isNaN(e)?0:e,e--,d.a.setItem("TEXT_ADDON_COUNTER",e),e}fetchTextAddons(e){return r.b.isConnected()?new Promise((t,o)=>{this.webService.fetchTextAddons(e).then(o=>{this.storeTextAddons(e,o),t(o)}).catch(r=>{this.loadTextAddons(e).then(e=>t(e)).catch(e=>o(e))})}):new Promise((t,o)=>this.loadTextAddons(e).then(e=>{t(e)}).catch(e=>o(e)))}loadTextAddons(e){return new Promise((t,o)=>{this.getUtils().readFile(this.getUtils().getTextAddonsLocation(e.book.shortName)).then(e=>{t(e?JSON.parse(e):{bookmarks:[],notes:[],highlights:[]})}).catch(e=>t({bookmarks:[],notes:[],highlights:[]}))})}loadSyncTextAddons(){return new Promise((e,t)=>{const o=this.getUtils().getSyncTextAddonsLocation();this.getUtils().readFile(o).then(t=>{if(t){const o=JSON.parse(t);e(o||{})}else e({})}).catch(t=>e({}))})}storeTextAddons(e,t){this.getUtils().writeToFile(this.getUtils().getTextAddonsLocation(e.book.shortName),JSON.stringify(t))}storeSyncTextAddons(e){this.getUtils().writeToFile(this.getUtils().getSyncTextAddonsLocation(),JSON.stringify(e))}addBookmark(e,t,o,n,i){return r.b.isConnected()?new Promise((r,s)=>{this.webService.addBookmark(e,t,o,n,i).then(t=>{this.storeBookmark(e,t),r(t)}).catch(a=>{this.addBookmarkToDevice(e,t,o,n,i).then(e=>r(e)).catch(e=>s(e))})}):this.addBookmarkToDevice(e,t,o,n,i)}addNote(e,t,o,n,i,s,a,c){return r.b.isConnected()?new Promise((r,l)=>{this.webService.addNote(e,t,o,n,i,s,a,c).then(t=>{this.storeNote(e,t),r(t)}).catch(d=>{this.addNoteToDevice(e,t,o,n,i,s,a,c).then(e=>r(e)).catch(e=>l(e))})}):this.addNoteToDevice(e,t,o,n,i,s,a,c)}addHighlight(e,t,o,n){return r.b.isConnected()?new Promise((r,i)=>{this.webService.addHighlight(e,t,o,n).then(t=>{this.storeHighlight(e,t),r(t)}).catch(s=>{this.addHighlightToDevice(e,t,o,n).then(e=>r(e)).catch(e=>i(e))})}):this.addHighlightToDevice(e,t,o,n)}addBookmarkToDevice(e,t,o,r,n){return new Promise((s,a)=>{const c=new i.a(this.getUniqueTextAddonId(),e.shortName,e.ordinal,t,o,r,n,Date.now(),e.meapVersion);c.hasNotBeenStoredOnServer=!0,this.storeBookmark(e,c),s(c)})}addNoteToDevice(e,t,o,r,i,s,a,c){return new Promise((a,c)=>{const l=new n.a(this.getUniqueTextAddonId(),e.shortName,e.ordinal,t,o,r,i,s,Date.now(),e.meapVersion,e.reviewVersion);l.hasNotBeenStoredOnServer=!0,this.storeNote(e,l),a(l)})}addHighlightToDevice(e,t,o,r){return new Promise((n,i)=>{const a=new s.b(this.getUniqueTextAddonId(),e.book.shortName,e.shortName,e.ordinal,e.meapVersion,o,t,Date.now(),r);a.hasNotBeenStoredOnServer=!0,this.storeHighlight(e,a),n(a)})}removeBookmark(e,t){return r.b.isConnected()?new Promise((o,r)=>{this.webService.removeBookmark(e,t).then(()=>{this.removeBookmarkFromDevice(e,t),o(!0)}).catch(n=>{this.scheduleBookmarkForDeviceDeletion(e,t).then(e=>o(e)).catch(e=>r(e))})}):(this.scheduleBookmarkForDeviceDeletion(e,t),this.removeBookmarkFromDevice(e,t))}removeNote(e,t){return r.b.isConnected()?new Promise((o,r)=>{this.webService.removeNote(e,t).then(()=>{this.removeNoteFromDevice(e,t),o(!0)}).catch(n=>{this.scheduleNoteForDeviceDeletion(e,t).then(e=>o(e)).catch(e=>r(e))})}):(this.scheduleNoteForDeviceDeletion(e,t),this.removeNoteFromDevice(e,t))}removeHighlight(e,t){return r.b.isConnected()?new Promise((o,r)=>{this.webService.removeHighlight(e,t).then(()=>{this.removeHighlightFromDevice(e,t),o(!0)}).catch(n=>{this.scheduleHighlightForDeviceDeletion(e,t).then(e=>o(e)).catch(e=>r(e))})}):(this.scheduleHighlightForDeviceDeletion(e,t),this.removeHighlightFromDevice(e,t))}removeBookmarkFromDevice(e,t){return new Promise((o,r)=>{this.loadTextAddons(e).then(r=>{a.a.removeItemFromArray(r.bookmarks,r.bookmarks.find(e=>e.id==t)),this.storeTextAddons(e,r),o(!0)})})}removeNoteFromDevice(e,t){return new Promise((o,r)=>{this.loadTextAddons(e).then(r=>{a.a.removeItemFromArray(r.notes,r.notes.find(e=>e.id==t)),this.storeTextAddons(e,r),o(!0)})})}removeHighlightFromDevice(e,t){return new Promise((o,r)=>{this.loadTextAddons(e).then(r=>{a.a.removeItemFromArray(r.highlights,r.highlights.find(e=>e.id==t)),this.storeTextAddons(e,r),o(!0)})})}scheduleBookmarkForDeviceDeletion(e,t){return new Promise((o,r)=>{const n=e.book.shortName;this.loadSyncTextAddons().then(e=>{let o=e[n]&&e[n].bookmarks,r=o&&o.find(e=>e.id==t);if(r)a.a.removeItemFromArray(e[n].bookmarks,r),this.storeSyncTextAddons(e);else{const e={id:t,operation:"delete"};this.addToSyncTextAddons(n,"bookmarks",e)}}),o(!0)})}scheduleNoteForDeviceDeletion(e,t){return new Promise((o,r)=>{this.loadSyncTextAddons().then(o=>{const r=e.book.shortName;let n=o[r]&&o[r].notes,i=n&&n.find(e=>e.id==t);if(i)a.a.removeItemFromArray(o[r].notes,i),this.storeSyncTextAddons(o);else{const o={id:t,operation:"delete"};this.addToSyncTextAddons(e.book.shortName,"notes",o)}}),o(!0)})}scheduleHighlightForDeviceDeletion(e,t){return new Promise((o,r)=>{this.loadSyncTextAddons().then(o=>{const r=e.book.shortName;let n=o[r]&&o[r].highlights,i=n&&n.find(e=>e.id==t);if(i)a.a.removeItemFromArray(o[r].notes,i),this.storeSyncTextAddons(o);else{const o={id:t,operation:"delete"};this.addToSyncTextAddons(e.book.shortName,"highlights",o)}}),o(!0)})}storeBookmark(e,t){this.loadTextAddons(e).then(o=>{o.bookmarks.push(t),this.storeTextAddons(e,o)});{let o=Object.assign({operation:"new"},t);this.addToSyncTextAddons(e.book.shortName,"bookmarks",o)}}storeNote(e,t){if(this.loadTextAddons(e).then(o=>{o.notes.push(t),this.storeTextAddons(e,o)}),!r.b.isConnected()){let o=Object.assign({operation:"new"},t);this.addToSyncTextAddons(e.book.shortName,"notes",o)}}storeHighlight(e,t){if(this.loadTextAddons(e).then(o=>{o.highlights.push(t),this.storeTextAddons(e,o)}),!r.b.isConnected()){let o=Object.assign({operation:"new"},t);this.addToSyncTextAddons(e.book.shortName,"highlights",o)}}addToSyncTextAddons(e,t,o){this.loadSyncTextAddons().then(r=>{let n=r[e]||{bookmarks:[],highlights:[],notes:[]};n[t].push(o),Object.assign(r,{[e]:n}),this.storeSyncTextAddons(r)})}changeHighlightColor(e,t,o){return r.b.isConnected()?new Promise((r,n)=>{this.webService.changeHighlightColor(e,t,o).then(n=>{this.saveHighlightColorChangeToDevice(e,t,o,!0),r(n)}).catch(i=>{this.saveHighlightColorChangeToDevice(e,t,o,!1).then(e=>r(e)).catch(e=>n(e))})}):(this.loadSyncTextAddons().then(r=>{const n=e.book.shortName;let i=(r[n]&&r[n].highlights).find(e=>e.id==t);if(i)i.color=o,this.storeSyncTextAddons(r);else{const r={id:t,color:o,operation:"edit"};this.addToSyncTextAddons(e.book.shortName,"highlights",r)}}),this.saveHighlightColorChangeToDevice(e,t,o,!1))}saveHighlightColorChangeToDevice(e,t,o,r){return new Promise((n,i)=>{this.loadTextAddons(e).then(i=>{const s=i.highlights.find(e=>e.id==t);null!=s&&(s.color=o,s.hasNotBeenEditedToServer=r),this.storeTextAddons(e,i),n(!0)})})}editNote(e,t,o){return r.b.isConnected()?new Promise((r,n)=>{this.webService.editNote(e,t,o).then(n=>{this.saveNoteTextChangeToDevice(e,t,o,!0),r(n)}).catch(i=>{this.saveNoteTextChangeToDevice(e,t,o,!1).then(e=>r(e)).catch(e=>n(e))})}):(this.loadSyncTextAddons().then(r=>{const n=e.book.shortName;let i=(r[n]&&r[n].notes).find(e=>e.id==t);if(i)i.text=o,this.storeSyncTextAddons(r);else{const r={id:t,text:o,operation:"edit"};this.addToSyncTextAddons(e.book.shortName,"notes",r)}}),this.saveNoteTextChangeToDevice(e,t,o,!1))}syncTextAddonsWithServer(){return new Promise((e,t)=>this.loadSyncTextAddons().then(o=>{Object.keys(o).length?this.webService.syncTextAddonsWithServer(o).then(t=>{this.getUtils().writeToFile(this.getUtils().getSyncTextAddonsLocation(),""),e(t)}).catch(e=>t(!1)):e(!0)}))}saveNoteTextChangeToDevice(e,t,o,r){return new Promise((n,i)=>{this.loadTextAddons(e).then(i=>{const s=i.notes.find(e=>e.id==t);null!=s&&(s.noteText=o,s.hasNotBeenEditedToServer=r),this.storeTextAddons(e,i),n(!0)})})}getUtils(){return window.fileSystemUtils}}const h=new class{constructor(){this.textAddonsServicePromise=new Promise((e,t)=>{r.b.loadDeviceInfo().then(t=>{e(function(e){switch(e){case r.a.Cordova:case r.a.Electron:return new u;case r.a.Browser:default:return new l}}(t.platform))}).catch(e=>t(e))}),$(document).on("appActivatedAfterLongTime",()=>{this.data=null,this.dataPromise=null,this.previousTextAddonsRequestInfo=null})}fetchTextAddons(e){return null!=this.dataPromise&&this.previousTextAddonsRequestInfo.bookShortName===e.book.shortName?this.previousTextAddonsRequestInfo.bookElementShortName===e.shortName?null!=this.data?Promise.resolve(this.data):this.dataPromise:this.adaptCurrentTextAddonsToNewBookElement(e):(this.previousTextAddonsRequestInfo={bookShortName:e.book.shortName,bookElementShortName:e.shortName},this.dataPromise=new Promise((t,o)=>{this.textAddonsServicePromise.then(o=>{o.fetchTextAddons(e).then(o=>{const r=o.notes.map(e=>n.a.fromJSON(e)),a=o.bookmarks.map(e=>i.a.fromJSON(e)),c=o.highlights.map(e=>s.b.fromJSON(e));this.data={notes:{bookNotes:r,bookElementNotes:r.filter(t=>t.bookElementShortName===e.shortName)},bookmarks:{bookBookmarks:a,bookElementBookmarks:a.filter(t=>t.bookElementShortName===e.shortName)},highlights:{bookHighlights:c,bookElementHighlights:c.filter(t=>t.bookElementShortName===e.shortName)}},t(this.data)}).catch(e=>t(this.data={notes:{bookNotes:[],bookElementNotes:[]},bookmarks:{bookBookmarks:[],bookElementBookmarks:[]},highlights:{bookHighlights:[],bookElementHighlights:[]}}))})}))}adaptCurrentTextAddonsToNewBookElement(e){return this.previousTextAddonsRequestInfo={bookShortName:e.book.shortName,bookElementShortName:e.shortName},null!=this.data?Promise.resolve(this.assignTextAddonData(this.data,e)):new Promise((t,o)=>{this.dataPromise.then(o=>t(this.assignTextAddonData(o,e))).catch(e=>o(e))})}assignTextAddonData(e,t){const o={notes:e.notes,bookmarks:e.bookmarks,highlights:e.highlights};return o.notes.bookElementNotes=e.notes.bookNotes.filter(e=>e.bookElementShortName===t.shortName),o.bookmarks.bookElementBookmarks=e.bookmarks.bookBookmarks.filter(e=>e.bookElementShortName===t.shortName),o.highlights.bookElementHighlights=e.highlights.bookHighlights.filter(e=>e.bookElementShortName===t.shortName),this.data=o}fetchHighlights(e){return new Promise((t,o)=>{this.fetchTextAddons(e).then(e=>t(e.highlights)).catch(e=>o(e))})}fetchBookmarks(e){return new Promise((t,o)=>{this.fetchTextAddons(e).then(e=>t(e.bookmarks)).catch(e=>o(e))})}fetchNotes(e){return new Promise((t,o)=>{this.fetchTextAddons(e).then(e=>t(e.notes)).catch(e=>o(e))})}addHighlight(e,t,o,r){return new Promise((n,i)=>{this.textAddonsServicePromise.then(s=>{s.addHighlight(e,t,o,r).then(e=>{null!=this.data&&null!=this.data.highlights&&(this.data.highlights.bookHighlights.push(e),this.data.highlights.bookElementHighlights.push(e)),n(e.id)}).catch(e=>i(e))})})}addBookmark(e,t,o,r,n){return new Promise((i,s)=>{this.textAddonsServicePromise.then(a=>{a.addBookmark(e,t,o,r,n).then(e=>{null!=this.data&&null!=this.data.bookmarks&&(this.data.bookmarks.bookBookmarks.push(e),this.data.bookmarks.bookElementBookmarks.push(e)),i(e.id)}).catch(e=>s(e))})})}addNote(e,t,o,r,n,i,s,a){return new Promise((c,l)=>{this.textAddonsServicePromise.then(d=>{d.addNote(e,t,o,r,n,i,s,a).then(e=>{null!=this.data&&null!=this.data.notes&&(this.data.notes.bookNotes.push(e),this.data.notes.bookElementNotes.push(e)),c(e.id)}).catch(e=>l(e))})})}removeHighlight(e,t){return new Promise((o,r)=>{this.textAddonsServicePromise.then(n=>{const i=this.data&&this.data.highlights.bookHighlights.find(e=>e.id==t);if(null==i)return Promise.resolve(!0);n.removeHighlight(e,t).then(e=>{e&&null!=this.data&&null!=this.data.highlights&&(a.a.removeItemFromArray(this.data.highlights.bookHighlights,i),a.a.removeItemFromArray(this.data.highlights.bookElementHighlights,i)),o(e)}).catch(e=>{r(e)})})})}removeBookmarkByContentID(e,t){return new Promise((o,r)=>{this.textAddonsServicePromise.then(n=>{const i=this.data&&this.data.bookmarks.bookBookmarks.find(e=>e.contentID==t);if(null==i)return Promise.resolve(!0);n.removeBookmark(e,i.id).then(e=>{e&&null!=this.data&&null!=this.data.bookmarks&&(a.a.removeItemFromArray(this.data.bookmarks.bookBookmarks,i),a.a.removeItemFromArray(this.data.bookmarks.bookElementBookmarks,i)),o(e)}).catch(e=>r(e))})})}removeBookmarkById(e,t){return new Promise((o,r)=>{this.textAddonsServicePromise.then(n=>{const i=this.data&&this.data.bookmarks.bookBookmarks.find(e=>e.id==t);if(null==i)return Promise.resolve(!0);n.removeBookmark(e,t).then(e=>{e&&null!=this.data&&null!=this.data.bookmarks&&(a.a.removeItemFromArray(this.data.bookmarks.bookBookmarks,i),a.a.removeItemFromArray(this.data.bookmarks.bookElementBookmarks,i)),o(e)}).catch(e=>r(e))})})}removeNote(e,t){return new Promise((o,r)=>{this.textAddonsServicePromise.then(n=>{const i=this.data&&this.data.notes.bookNotes.find(e=>e.id==t);if(null==i)return Promise.resolve(!0);n.removeNote(e,t).then(e=>{e&&null!=this.data&&null!=this.data.notes&&(a.a.removeItemFromArray(this.data.notes.bookNotes,i),a.a.removeItemFromArray(this.data.notes.bookElementNotes,i)),o(e)}).catch(e=>r(e))})})}changeHighlightColor(e,t,o){return e&&t&&o?new Promise((r,n)=>{this.textAddonsServicePromise.then(i=>{const s=this.data&&this.data.highlights.bookHighlights.find(e=>e.id==t);if(null==s)return Promise.resolve(!0);i.changeHighlightColor(e,t,o).then(e=>{e&&(s.color=o),r(e)}).catch(e=>n(e))})}):Promise.reject("")}editNote(e,t,o){return e&&t&&o?new Promise((r,n)=>{this.textAddonsServicePromise.then(i=>{const s=this.data&&this.data.notes.bookElementNotes.find(e=>e.id==t);if(null==s)return Promise.resolve(!0);i.editNote(e,t,o).then(e=>{e&&(s.noteText=o),r(e)}).catch(e=>n(e))})}):Promise.reject("")}syncTextAddonsWithServer(){return new Promise((e,t)=>this.textAddonsServicePromise.then(o=>o.syncTextAddonsWithServer().then(t=>e(t)).catch(e=>{console.error("Failed to synchronize text addons with server, error: ",e),t(!1)})))}}},142:function(e,t,o){"use strict";t.a=new class{inViewport(e,t){if("IntersectionObserver"in window){const o=new IntersectionObserver(r=>{if(r&&r[0]&&r[0].intersectionRatio>0)return o.unobserve(e),o.disconnect(),void(t&&t())},{});return o.observe(e),!0}return!1}getFirstPreviousSibling(e,t){if(null==e)return null;let o=e;for(;null!=(o=o.previousElementSibling);)if(o.matches(t))return o;return null}isDocumentVisible(){return"visible"==document.visibilityState}isElementVisible(e,t){if(!e)return!1;const{bottom:o,height:r,top:n}=e.getBoundingClientRect(),i=t.getBoundingClientRect();return n<=i.top?i.top-n<=r:o-i.bottom<=r}triggerEvent(e,t){if("createEvent"in document){var o=document.createEvent("HTMLEvents");o.initEvent(t,!1,!0),e.dispatchEvent(o)}else e.fireEvent("on"+t)}triggerTextAreaChange(e){e.dispatchEvent(new Event("input",{bubbles:!0}))}closest(e,t){let o,r;for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some((function(e){return"function"==typeof document.body[e]&&(o=e,!0)}));e;){if((r=e.parentElement)&&r[o](t))return r;e=r}return null}removeClassFromElements(e,t){for(let o=0;o<e.length;o++)this.removeClassFromElement(e[o],t)}removeClassFromElement(e,t){e&&e.classList.remove(t)}addClassToElements(e,t){for(let o=0;o<e.length;o++)this.addClassToElement(e[o],t)}addClassToElement(e,t){e&&e.classList.add(t)}ensureInView(e,t){if(null==e)return;t||(t=this.getScrollParent(e));let o=t.scrollTop,r=o+t.clientHeight,n=e.offsetTop,i=n+e.clientHeight;n<o?t.scrollTop-=o-n:i>r&&(t.scrollTop+=i-r+10)}getScrollParent(e,t){if(null==e)return null;let o=window.getComputedStyle(e),r="absolute"===o.position;const n=t?/(auto|scroll|hidden)/:/(auto|scroll)/;if("fixed"===o.position)return document.body;for(var i=e;i=i.parentElement;)if(o=window.getComputedStyle(i),(!r||"static"!==o.position)&&n.test(o.overflow+o.overflowY+o.overflowX))return i;return document.body}getDistanceFromTopOfThePage(e){let t=0,o=0;for(;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,o+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:o}}getDistanceFromLeftEdgeOfThePage(e){if(!e)return 0;const t=e.getBoundingClientRect();return null!=t?t.left:0}getElementPosition(e){return{top:e.offsetTop,left:e.offsetLeft}}getElementOuterHeight(e){let t=e.offsetHeight;const o=getComputedStyle(e);return t+=parseInt(o.marginTop)+parseInt(o.marginBottom)}getOffsetTopFromAncestor(e,t){let o=0;for(;null!=e&&e!==t;)o+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return o}getBottomPadding(e){if(null==e)return 0;const t=window.getComputedStyle(e);if(null==t)return 0;const o=parseFloat(t.paddingBottom);return Number.isNaN(o)?0:o}getTopPadding(e){if(null==e)return 0;const t=window.getComputedStyle(e);if(null==t)return 0;const o=parseFloat(t.paddingTop);return Number.isNaN(o)?0:o}getRightPadding(e){if(null==e)return 0;const t=window.getComputedStyle(e);if(null==t)return 0;const o=parseFloat(t.paddingRight);return Number.isNaN(o)?0:o}getComputedMarginTop(e){if(null==e)return 0;const t=window.getComputedStyle(e);if(null==t)return 0;const o=parseFloat(t.marginTop);return Number.isNaN(o)?0:o}getStyledMarginTop(e){if(null==e)return 0;const t=parseFloat(e.style.marginTop);return Number.isNaN(t)?0:t}getVerticalCenterOffset(e){return null==e?0:e.offsetTop+e.offsetHeight/2}getFirstLineCenterVerticalOffset(e){return null==e?0:e.offsetTop+this.getLineHeight(e)/2}getComputedLineHeight(e){if(null==e)return 0;const t=window.getComputedStyle(e);if(null==t)return 0;const o=parseFloat(t.lineHeight);return Number.isNaN(o)?0:o}getLineHeight(e){if(null==e)return 0;let t=0;const o=e.cloneNode();o.innerHTML="<br>",e.appendChild(o);const r=o.offsetHeight;o.innerHTML="<br><br>";const n=o.offsetHeight;return e.removeChild(o),t=n-r,Math.max(t,0)}getWidth(e){if(null==e)return 0;const t=window.getComputedStyle(e);if(null==t)return 0;const o=parseFloat(t.width);return Number.isNaN(o)?0:o}getHeight(e){if(null==e)return 0;const t=window.getComputedStyle(e);if(null==t)return 0;const o=parseFloat(t.height);return Number.isNaN(o)?0:o}getFontString(e){const t=window.getComputedStyle(e);return null==t?"":t.font?t.font:`${t.fontSize} ${t.fontFamily}`}getTextWidth(e,t){const o=(this.canvas||(this.canvas=document.createElement("canvas"))).getContext("2d");return o.font=t,Math.floor(o.measureText(e).width)}removeDescendents(e,t){if(!e||!e.children.length)return;const o=e.querySelectorAll(t);for(let e=0;e<o.length;e++){const t=o[e];t.parentElement.removeChild(t)}}scrollElementTop(e,t,o=700,r=(()=>{})){this.scrollElementProperty(e,t,o,"scrollTop",r)}scrollElementLeft(e,t,o=700,r=(()=>{})){this.scrollElementProperty(e,t,o,"scrollLeft",r)}scrollElementProperty(e,t,o=700,r,n=(()=>{})){if(!e)return;if(t=Math.round(t),(o=Math.round(o))<0)return;if(0===o)return void(e[r]=t);const i=Date.now(),s=i+o,a=e[r],c=t-a;let l=e[r];const d=()=>{if(e[r]!=l)return void(n&&n());const t=Date.now(),o=((e,t,o)=>{if(o<=e)return 0;if(o>=t)return 1;const r=(o-e)/(t-e);return r*r*(3-2*r)})(i,s,t),u=Math.round(a+c*o);e[r]=u,t>=s?n&&n():e[r]!==l||e[r]===u?(l=e[r],this.requestAnimationFrame(d)):n&&n()};this.requestAnimationFrame(d)}requestAnimationFrame(e){window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,16)}isScrolledToBottom(e){return!!e&&e.offsetHeight+e.scrollTop>=e.scrollHeight}getTopOffsetForBottomPosition(e){return e?e.scrollHeight-e.offsetHeight:0}getAllDescendantTextNodes(e){const t=[];return this.walkTheDOM(e,e=>{3===e.nodeType&&t.push(e)}),t}walkTheDOM(e,t){for(t(e),e=e.firstChild;e;)this.walkTheDOM(e,t),e=e.nextSibling}createTextNodeTextRanges(e){const t={value:"",textNodeRanges:[]};for(let o=0;o<e.length;o++){const r=e[o],n=r.nodeValue,i=t.value;t.value+=n,t.textNodeRanges.push({start:i.length,end:t.value.length,textNode:r})}return t}splitRanges(e,t,o){const r=e.textNodeRanges,n=[],i=[],s=[];for(let e=0;e<r.length;e++){const a=r[e];a.end<=t?n.push(a):a.start>=o?s.push(a):i.push(a)}return{previousRanges:n,matchingRanges:i,followingRanges:s}}wrapToHtmlElement(e,t,o){return`<${e} ${this.getAttributesString(t)}>${this.escapeHtmlString(o)}</${e}>`}getAttributesString(e){if(!e)return"";let t="";for(const o in e)t+=` ${o}="${e[o]}"`;return t}escapeHtmlString(e=""){return e.replace("<","&lt;").replace(">","&gt;")}}},145:function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"a",(function(){return n}));class r{constructor(e,t,o,r,n,i,s,a,c,l=!1,d=!1,u=!1){this.id=e,this.bookShortName=t,this.bookElementShortName=o,this.bookElementOrdinal=r,this.meapVersion=n,this.color=i,this.highlightedParagraphs=s,this.timestamp=a,this.offset=c,this.hasNotBeenStoredOnServer=l,this.shouldBeDeleted=d,this.hasNotBeenEditedToServer=u}static fromJSON(e){return new r(e.id,e.bookShortName,e.bookElementShortName,e.bookElementOrdinal,e.meapVersion,e.color,e.highlightedParagraphs.map(e=>n.fromJSON(e)),e.timeStamp||e.timeCreated,e.offset||0,e.hasNotBeenStoredOnServer||!1,e.shouldBeDeleted||!1,e.hasNotBeenEditedToServer||!1)}containsText(e){if(!e)return!1;if(null==this.highlightedParagraphs||0==this.highlightedParagraphs.length)return!1;for(const t of this.highlightedParagraphs)if(t&&t.selectedText&&t.selectedText.toLowerCase().indexOf(e.toLowerCase())>=0)return!0;return!1}}class n{constructor(e,t,o){this.ordinal=e,this.hash=t,this.selectedText=o}static fromJSON(e){return new n(e.ordinal,e.hash,e.selectedText)}}},156:function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var r,n=o(137);!function(e){e[e.Private=0]="Private",e[e.Public=1]="Public",e[e.Question=2]="Question"}(r||(r={}));class i extends n.a{constructor(e,t,o,r,n,i,s,a="",c,l,d=!1){super(e,o,r,n,i,s,a),this.isOpen=!1,this.title=t,this.isEditingSuggestion=c,this.posts=l||[],this.disableVoting=d}countNotSeenPosts(){let e=0;for(let t of this.posts)t.isSeen||e++;return e}hasPostsNewerThan(e){if(this.dateCreated>e)return!0;for(let t of this.posts)if(t.dateCreated>e)return!0;return!1}containsUnseen(){if(!this.isSeen)return!0;for(const e of this.posts)if(!e.isSeen)return!0;return!1}containsCommentId(e){if(!e)return!1;if(this.id==e)return!0;for(const t of this.posts)if(t.id==e)return!0;return!1}isCreatedByUser(e){return!(!e||!this.user)&&e.id==this.user.id}containsCommentsByUser(e){if(!e)return!1;if(null!=this.user&&this.user.id==e.id)return!0;for(const t of this.posts)if(t.isCreatedByUser(e))return!0;return!1}static createCopy(e,t=!0){const o=t?e.posts.concat([]):e.posts,r=new i(e.id,e.title,e.text,e.user,e.votes,e.dateCreated,e.dateUpdated,e.link,e.isEditingSuggestion,o,e.disableVoting);return r.isOpen=e.isOpen,r.isBeingSynced=e.isBeingSynced,r.isBeingEdited=e.isBeingEdited,r.productExternalId=e.productExternalId,r.productId=e.productId,r.element=e.element,r.location=e.location,r.isEditingSuggestion=e.isEditingSuggestion,r.meapVersion=e.meapVersion,r.oldForumId=e.oldForumId,r.disableVoting=e.disableVoting,r}}},157:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));class r{constructor(e,t,o=""){this.id=e,this.name=t,this.avatarUrl=o,this.votes=[],this.spamCommentIds=[]}static createCopy(e,t=!0,o=!0){const n=t?e.votes.concat([]):e.votes,i=o?e.spamCommentIds.concat([]):e.spamCommentIds,s=new r(e.id,e.name,e.avatarUrl);return s.votes=n,s.spamCommentIds=i,s.authorizedProductIds=e.authorizedProductIds,s}}},158:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var r=o(87),n=o(685),i=o(216);o(240);n.a.locale(i);const s=new n.a("en-US");class a extends r.Component{render(){let e=s.format(this.props.date);return e&&("string"==typeof e||e instanceof String)&&e.includes(" NaN")&&(e=null),r.createElement("span",{className:"time-ago-label"},e)}}},164:function(e,t,o){"use strict";var r=o(4),n=o(13),i=o(22),s=(o(190),o(0)),a=o(6),c=o(141),l=o(12);const d=$(document);t.a=new class{constructor(){this.bookmarkedTextLimit=80,this.paragraphBubbleTemplate=' <div class="paragraph-bubble">\n        <div aria-haspopup="true" class="text-margin-icon-bubble bookmark-bubble" title="bookmark"><i class="fa fa-bookmark"></i></div>\n        <div aria-haspopup="true" class="text-margin-icon-bubble forums-bubble" title="open discussion"><i class="fa fa-comments" aria-hidden="true"></i><span class="comment-count-container"></span></div>\n        <div aria-haspopup="true" class="text-margin-icon-bubble paragraph-notification-bubble" title="show text addons"><i class="fa fa-dot-circle" aria-hidden="true"></i></div>\n        <div class="text-margin-icon-bubble editor-bubble"><i class="fa fa-edit fa-2x"></i></div>\n    </div>',r.a.onDescendantEventWithCooldown(d,s.b.isCordova()?"touchstart":"click",".bookmark-bubble",e=>{this.handleBookmarkBubbleClick(e.currentTarget.parentElement)}),r.a.onDescendantEventWithCooldown(d,s.b.isCordova()?"touchstart":"click",".forums-bubble",e=>{this.handleForumBubbleClick(e.currentTarget.parentElement)}),d.on("paragraphButtonsSetForumCount",(e,t,o)=>this.setForumCount(t,o)),d.on("requestSelectForumsBubble",(e,t)=>this.selectForumsBubble(t)),d.on("requestDeselectForumsBubble",(e,t)=>this.deselectForumsBubble(t))}initialize(e,t,o=!1){if(this.clean(),this.book=e,this.bookElement=t,e&&(this.paragraphs=Array.prototype.slice.call(document.querySelectorAll("[refid]")),a.a.isCurrentlyLoggedIn()&&(o||c.a.fetchBookmarks(this.bookElement).then(e=>{this.updateBookmarkData(e.bookElementBookmarks)}),o)))for(const e of this.paragraphs){0==$(e).closest(".introduction-summary").length&&this.createParagraphBubble(e,!0)}}clean(){this.book=null,this.bookElement=null,$(".text-margin-icon-bubble").off().remove(),this.paragraphBubbles=[],this.paragraphs=null}createParagraphBubble(e,t=!1){if(!e||null!=e.paragraphBubble)return;const o=$(t?' <div class="paragraph-bubble">\n        <div class="text-margin-icon-bubble editor-bubble"><i class="fa fa-edit fa-2x"></i></div>\n    </div>':this.paragraphBubbleTemplate).get(0);o.paragraph=e,e.paragraphBubble=o,this.paragraphBubbles.push(o);const r=$(e);if(r.is(".listing-container")){const t=r.find(".listing-environment-container");t.length?t.append(o):e.paragraphBubbleToAppend=o}else r.append(o)}toggleBookmark(e){this.createParagraphBubble(e),this.handleBookmarkBubbleClick(e.paragraphBubble)}handleBookmarkBubbleClick(e){a.a.isCurrentlyLoggedIn()?($(e).addClass("activated"),e.hasAttribute("data-bookmark-active")?e.removeAttribute("data-bookmark-active"):e.setAttribute("data-bookmark-active","true"),this.visuallyMarkBookmark(e),this.syncBookmark(e),$(e.paragraph).toggleClass("has-bookmark",e.hasAttribute("data-bookmark-active"))):l.a.requestLogin("sign in to add a bookmark","bookmark")}visuallyMarkBookmark(e,t){if(!e)return;const o=e.hasAttribute("data-bookmark-active"),r=$(e).find(".bookmark-bubble");r.toggleClass("selected",o),r.attr("title",o?"remove bookmark":"bookmark"),t&&r.attr("data-id",t),$(e.paragraph).toggleClass("has-bookmark",o)}syncBookmark(e){if(!e||!e.paragraph)return;const t=$(e.paragraph);e.hasAttribute("data-bookmark-active")?c.a.addBookmark(this.bookElement,t.attr("refid"),t.attr("data-hash"),this.cutText(t.text()),this.getSection(t)).then(t=>{$(e).find(".bookmark-bubble").attr("data-id",t),d.trigger("bookmarkAdded")}):c.a.removeBookmarkByContentID(this.bookElement,t.attr("refid"))}updateBookmarkData(e){if(!e)return;const t=[];for(const o of e){const e=o.contentHash?document.querySelector(`[data-hash='${o.contentHash}']`):document.getElementById(o.contentID);e&&(this.createParagraphBubble(e),e.paragraphBubble.setAttribute("data-bookmark-active","true"),this.visuallyMarkBookmark(e.paragraphBubble,o.id),t.push(e.paragraphBubble))}$(t).show()}selectForumsBubble(e){if(!e)return;const t=$(e);t.addClass("selected"),t.find(".forums-bubble").addClass("bubble-active"),t.attr("data-forums-active","true"),$(".paragraph-focused").removeClass("paragraph-focused"),$(e.paragraph).addClass("paragraph-focused"),$(e.paragraph).addClass("matching-text-bubble-shown")}deselectForumsBubble(e){if(!e)return;const t=$(e);t.removeClass("selected"),t.find(".forums-bubble").removeClass("bubble-active"),t.find(".comment-count-container").text().trim()||t.removeAttr("data-forums-active"),$(".paragraph-focused").removeClass("paragraph-focused"),$(e.paragraph).removeClass("matching-text-bubble-shown")}setForumCount(e,t){if(!e)return;const o=$(e);o.find(".comment-count-container").text(t||""),t?(o.attr("data-forums-active","true"),o.show()):o.removeAttr("data-forums-active")}handleForumBubbleClick(e){i.a.requestOpenParagraphSideMenu(e)}getSection(e){const t=n.a.figureOutSectionOrSubsectionFromRefId(e.attr("refid"));if(t)return t;const o=this.bookElement.shortName.match(/(part\s+\d)|\w+\s+(\d+)/i);if(o){if(o[1])return o[1];if(o[2])return o[2]}return this.book.shortName}cutText(e){return e.length<this.bookmarkedTextLimit?e:e.substring(0,this.bookmarkedTextLimit)+"..."}}},165:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));class r{constructor(e,t,o,r,n,i,s,a,c,l,d,u=!1,h=!1,p=!1){this.id=e,this.bookElementShortName=t,this.bookElementOrdinal=o||-1,this.contentID=r,this.contentHash=n,this.annotatedText=i,this.noteText=s,this.section=a,this.timestamp=c,this.meapVersion=l||0,this.reviewVersion=d||0,this.hasNotBeenStoredOnServer=u,this.shouldBeDeleted=h,this.hasNotBeenEditedToServer=p}static fromJSON(e){return new r(parseInt(e.id||e.noteID)||0,e.bookElementShortName,e.bookElementOrdinal,e.contentID||e.contentItemID,e.contentHash,e.annotatedText,e.noteText,e.section||e.contentLocation,e.timeCreated||e.timestamp,e.meapVersion,e.reviewVersion,!!e.hasNotBeenStoredOnServer,!!e.shouldBeDeleted,!!e.hasNotBeenEditedToServer)}}},166:function(e,t,o){"use strict";o.d(t,"a",(function(){return d}));var r=o(4),n=o(0),i=o(9),s=(o(167),o(43)),a=o(2);const c=$(document),l=$(window);class d{constructor(e,t,o){this.$menu=e,this.$menuButton=t,this.optionalArguments=o||{},this.$header=$("#header"),this.$footer=$("#footer"),this.handleMenuButtonClick=this.handleMenuButtonClick.bind(this),this.handleResize=this.handleResize.bind(this),this.handleSideMenuOpened=this.handleSideMenuOpened.bind(this),this.handleTextSlideMenuBeginOpening=this.handleTextSlideMenuBeginOpening.bind(this),r.a.onEventWithCooldown(this.$menuButton,"click",this.handleMenuButtonClick),c.on("slideMenuOpened",this.handleSideMenuOpened),c.on("slideMenuCloseRequested textSlideBoxShowStart",()=>this.close()),c.on("textSlideMenuBeginOpening",this.handleTextSlideMenuBeginOpening),c.on("click",e=>this.handleDocumentClick(e.target)),this.$menu.css({width:this.determineSlideMenuWidth()}),n.b.isTouchDevice()&&(this.menuDragManager=new s.a(this.$menu,e=>{this.isOnLeftSide()&&e.x>0||this.isOnRightSide()&&e.x<0||this.$menu.css("transform",`translateX(${e.x}px)`)},(e,t)=>{this.isOnLeftSide()&&e.x>0||this.isOnRightSide()&&e.x<0?this.$menu.css("transform",""):(this.$menu.css("transform",`translateX(${e.x})`),this.$menu.css("transform",""),(Math.abs(e.x)>=this.$menu.width()/2||t)&&this.close())},{isOnLeftSide:this.isOnLeftSide(),isOnRightSide:this.isOnRightSide()}))}handleMenuButtonClick(){this.$menu.is(".text-slide-menu-shown")?this.close():this.open()}adjustMainBookContentContainerPosition(){const e=this.$menu.is(".text-slide-menu-shown"),t=$("#book-main-content-container"),o=$(".summary-wrapper");if(null!=t&&0!=t.length&&e)if(this.shouldShiftMainContent()){const e=i.a.getComputedTranslateX(t[0]);let r=Math.max(this.$menu.width()-(t.length?t.offset().left:0)+e+(this.optionalArguments.sidePadding||0),0);r=this.$menu.is(".text-slide-menu-right")?-r:r,c.trigger("slideMenuStartOpening",[this.$menu,r]),this.adjustBookMainContentAndSummaryPosition(t,o,r)}else t.css("transform",""),o.css("transform",""),c.trigger("textSlideMenuOpened",[this.$menu]),c.trigger("slideMenuStartOpening",[this.$menu,0]),c.trigger("slideMenuOpened",[this.$menu])}adjustBookMainContentAndSummaryPosition(e,t,o){a.a.loadVelocityCode().then(()=>{e.velocity({translateX:o},{duration:250,complete:()=>{c.trigger("textSlideMenuOpened",[this.$menu]),c.trigger("slideMenuOpened",[this.$menu])}}),t.velocity({translateX:o},{duration:250})})}handleResize(){r.a.setTimeout(()=>{this.adjustMenuPosition(),this.adjustMainBookContentContainerPosition()},50)}handleSideMenuOpened(e,t){null!=t&&0!=t.length&&t!=this.$menu&&t.offset().left<l.width()/2&&this.close()}handleTextSlideMenuBeginOpening(e,t){null!=t&&0!=t.length&&t!=this.$menu&&this.close()}adjustMenuPosition(){const e=this.$header.height(),t=this.$footer.height();let o=e+t;n.b.isApp()||!n.b.isAndroid()&&!n.b.isIOS()||(o+=70),this.optionalArguments&&this.optionalArguments.dockToBottom?this.$menu.css({bottom:t,width:this.determineSlideMenuWidth()}):this.$menu.css({top:e,height:`calc(100vh - ${o}px)`,width:this.determineSlideMenuWidth()})}open(){this.optionalArguments.dontOpenWhenDisconnected&&n.b.isConnected(),this.isOpened()||(this.$menu.addClass("text-slide-menu-shown"),this.$menuButton.addClass("selected"),c.trigger("textSlideMenuBeginOpening",[this.$menu]),this.optionalArguments.beforeOpenCallback&&this.optionalArguments.beforeOpenCallback(),this.adjustMenuPosition(),this.adjustMainBookContentContainerPosition(),l.on("resizestop orientationchange",this.handleResize),c.trigger("tocMenuOpen"),$(document.body).addClass("has-text-slide-menu-shown"),this.menuDragManager&&this.menuDragManager.enable())}close(e=!0){if(this.isOpened()){l.off("resizestop orientationchange",this.handleResize),this.$menu.removeClass("text-slide-menu-shown"),$(document.body).removeClass("has-text-slide-menu-shown"),this.$menuButton.removeClass("selected");const t=$("#book-main-content-container"),o=$(".summary-wrapper");this.menuDragManager&&this.menuDragManager.disable(),e&&(null!=t&&t.length&&t.velocity({translateX:0},{duration:250,complete:()=>{c.trigger("textSlideMenuClosed"),c.trigger("slideMenuClosed"),t.css("transform","")}}),null!=o&&o.length&&o.velocity({translateX:0},{duration:250,complete:()=>{o&&o.css("transform","")}}))}}isOpened(){return this.$menu.is(".text-slide-menu-shown")}determineSlideMenuWidth(){const e=l.width()-($("#book-main-content-container").width()||0);return Math.min(this.optionalArguments.maxWidth||650,Math.max(e,this.optionalArguments.targetWidth||450))}handleDocumentClick(e){this.isOpened()&&!this.shouldShiftMainContent()&&(this.$menu.has(e).length||null!=this.$menuButton&&(this.$menuButton.is(e)||this.$menuButton.has(e).length)||this.optionalArguments&&this.optionalArguments.attachedElementsSelector&&$(e).is(this.optionalArguments.attachedElementsSelector)||this.close())}shouldShiftMainContent(){return n.b.isLargeScreenSize()}isOnLeftSide(){return this.$menu.is(".text-slide-menu-left")}isOnRightSide(){return this.$menu.is(".text-slide-menu-right")}}},167:function(e,t,o){var r=o(88),n=o(168);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},168:function(e,t,o){(t=o(89)(!1)).push([e.i,".text-slide-menu{position:fixed;z-index:1007;max-width:calc(100vw - 44px);transition:transform 0.35s ease-in-out}.text-slide-menu.text-slide-menu-left{left:0;transform:translateX(-100%)}.text-slide-menu.text-slide-menu-right{right:0;transform:translateX(100%)}.text-slide-menu.text-slide-menu-shown{transform:translateX(0)}\n",""]),e.exports=t},181:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));class r{constructor(e,t,o,r,n,i,s,a,c,l=!1,d=!1){this.id=e,this.contentID=r,this.contentHash=n,this.bookmarkedText=i,this.bookElementShortName=t,this.bookElementOrdinal=o,this.section=s,this.timestamp=a,this.meapVersion=c||0,this.hasNotBeenStoredOnServer=l,this.shouldBeDeleted=d}static fromJSON(e){return new r(parseInt(e.id||e.bookmarkID)||0,e.bookElementShortName,e.bookElementOrdinal,e.contentID||e.contentItemID,e.contentHash,e.bookmarkedText,e.section||e.contentLocation,e.timeCreated||e.timestamp,e.meapVersion,!!e.hasNotBeenStoredOnServer,!!e.shouldBeDeleted)}}},182:function(e,t,o){!function(t){var o=-1,r={onVisible:function(e){var t=r.isSupported();if(!t||!r.hidden())return e(),t;var o=r.change((function(t,n){r.hidden()||(r.unbind(o),e())}));return o},change:function(e){if(!r.isSupported())return!1;var t=o+=1;return r._callbacks[t]=e,r._listen(),t},unbind:function(e){delete r._callbacks[e]},afterPrerendering:function(e){var t=r.isSupported();if(!t||"prerender"!=r.state())return e(),t;var o=r.change((function(t,n){"prerender"!=n&&(r.unbind(o),e())}));return o},hidden:function(){return!(!r._doc.hidden&&!r._doc.webkitHidden)},state:function(){return r._doc.visibilityState||r._doc.webkitVisibilityState||"visible"},isSupported:function(){return void 0!==r._doc.hidden||void 0!==r._doc.webkitHidden},_doc:document||{},_callbacks:{},_change:function(e){var t=r.state();for(var o in r._callbacks)r._callbacks[o].call(r._doc,e,t)},_listen:function(){if(!r._init){var e="visibilitychange";r._doc.webkitVisibilityState&&(e="webkit"+e);var t=function(){r._change.apply(r,arguments)};r._doc.addEventListener?r._doc.addEventListener(e,t):r._doc.attachEvent(e,t),r._init=!0}}};e.exports?e.exports=r:t.Visibility=r}(this)},183:function(e,t,o){var r=o(88),n=o(395);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},189:function(e,t,o){"use strict";var r;o.d(t,"a",(function(){return r})),function(e){e[e.MostRecent=0]="MostRecent",e[e.Alphabetical=1]="Alphabetical",e[e.CommentCount=2]="CommentCount"}(r||(r={}))},190:function(e,t,o){var r=o(88),n=o(191);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},191:function(e,t,o){(t=o(89)(!1)).push([e.i,"body.book-edit .bookmark-bubble,body.book-edit .forums-bubble{display:none}body.book-edit .editor-bubble{display:block}body:not(.book-edit) .editor-bubble{display:none}body.review-book .forums-bubble,body.review-book .bookmark-bubble{display:none}body.review-book .text-selection-tooltip-container .bookmark-button,body.review-book .text-selection-tooltip-container .highlight-button,body.review-book .text-selection-tooltip-container .forum-button,body.review-book .text-selection-tooltip-container .error-report,body.review-book .text-selection-tooltip-container .link-button{display:none}.paragraph-bubble{position:absolute;top:0.3em;right:1%}.paragraph-bubble i{font:normal normal normal 18px/1 'Font Awesome 5 Pro' !important}@media screen and (min-width: 870px){.paragraph-bubble{display:flex}}.paragraph-bubble[data-bookmark-active] .bookmark-bubble{display:block}.paragraph-bubble[data-forums-active] .forums-bubble{display:block}ul .paragraph-bubble{right:-8.5%}.browsable-container .paragraph-bubble{right:-9%}@media screen and (max-width: 390px){.browsable-container .paragraph-bubble{right:-27px}}.listing-environment-container .paragraph-bubble{right:0}.callout-container .paragraph-bubble{right:-11%}@media screen and (max-width: 390px){.callout-container .paragraph-bubble{right:-33px}}.text-margin-icon-bubble{position:relative;width:1.5rem;height:1.9rem;text-align:center;cursor:pointer;color:#9a9aa2;transition:transform 0.25s ease-out;-webkit-transform-origin:50% 50%;-moz-transform-origin:50% 50%;-o-transform-origin:50% 50%;transform-origin:50% 50%;display:none;margin:1px}.text-margin-icon-bubble:hover i,.text-margin-icon-bubble.bubble-active i{transform:scale(1.1)}.text-margin-icon-bubble .comment-count-container{display:none}\n",""]),e.exports=t},192:function(e,t,o){"use strict";var r=o(234),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?s:a[e.$$typeof]||n}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var l=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,o,r){if("string"!=typeof o){if(m){var n=p(o);n&&n!==m&&e(t,n,r)}var s=d(o);u&&(s=s.concat(u(o)));for(var a=c(t),f=c(o),g=0;g<s.length;++g){var b=s[g];if(!(i[b]||r&&r[b]||f&&f[b]||a&&a[b])){var v=h(o,b);try{l(t,b,v)}catch(e){}}}return t}return t}},193:function(e,t,o){"use strict";(function(e,r){var n,i=o(239);n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var s=Object(i.a)(n);t.a=s}).call(this,o(100),o(238)(e))},194:function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return u}));var r,n=o(87),i=o(91),s=o(142),a=(o(393),o(108));!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(r||(r={}));let c=["#4788d9","#e6194b","#3cb44b","#0082c8","#f58231","#911eb4","#f032e6","#008080","#aa6e28","#800000","#808000","#000080","#000000"],l=0,d={};class u extends n.Component{constructor(e){super(e),this.handleImageLoadingError=this.handleImageLoadingError.bind(this),this.handleAvatarChangeImageClick=this.handleAvatarChangeImageClick.bind(this),this.state={hasFailedLoadingImage:!this.isAbsolutePath(this.props.user.avatarUrl)}}render(){return n.createElement("div",{className:i("avatar-container",{"avatar-large":this.props.size==r.Large,"avatar-medium":this.props.size==r.Medium})},this.state.hasFailedLoadingImage||!this.props.user.avatarUrl?n.createElement("span",{className:"avatar-image",style:{backgroundColor:(e=this.props.user.name,t=this.props.useDefaultColor,t?c[0]:d[e]?d[e]:(d[e]=c[l],++l>=c.length&&(l=0),d[e]))},title:this.props.user&&this.props.user.name},this.getInitials()):n.createElement("img",{className:"avatar-image",onError:this.handleImageLoadingError,alt:this.props.user.name,src:this.props.user.avatarUrl}),(this.props.isAuthor||this.props.isModerator)&&n.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"star","data-tip":this.props.isAuthor?"author":"moderator",className:"star-icon",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},n.createElement("path",{fill:"currentColor",d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"})),this.props.isCurrentUser&&null!=this.props.onChangeAvatar&&this.renderChangeAvatarButton(),this.renderOnlineStatusIfPossible(),this.renderDeleteLinkIfNecessary());var e,t}UNSAFE_componentWillReceiveProps(e){e.user.avatarUrl!=this.props.user.avatarUrl&&this.setState({hasFailedLoadingImage:""==e.user.avatarUrl})}renderChangeAvatarButton(){return n.createElement("div",{className:i("avatar-container-change-profile",{"change-profile-side-icon":this.props.size==r.Large}),onClick:this.handleAvatarChangeImageClick,"data-tip":"change your profile image"},n.createElement("i",{className:"fa fa-camera"}))}renderOnlineStatusIfPossible(){if(a.a.shouldShowOnlineStatus&&void 0!==!this.props.isOnline&&!this.props.isCurrentUser)return n.createElement("div",{className:i("user-online-status",{online:this.props.isOnline},{"user-online-status-large":this.props.size==r.Large},{"user-online-status-medium":this.props.size==r.Medium})})}renderDeleteLinkIfNecessary(){if(this.props.hasDelete)return n.createElement("span",{className:"avatar-delete-link",onClick:this.props.onDeleteAvatar},n.createElement("i",{className:"fa fa-trash"}),n.createElement("span",{className:"clickable-link-like"},"delete"))}handleImageLoadingError(){this.setState({hasFailedLoadingImage:!0})}getInitials(){const e=(this.props.user.name||"").trim();if(!e)return"NN";const t=e.split(/\s+/);return t&&0!=t.length?1==t.length?(t[0][0]||"").toUpperCase():(t[0][0]||"").toUpperCase()+(t[1][0]||"").toUpperCase():0}isAbsolutePath(e){return!!e&&(e||"").startsWith("http")}handleAvatarChangeImageClick(e){return e&&e.preventDefault(),e&&e.stopPropagation(),this.props.onChangeAvatar&&this.props.onChangeAvatar(),s.a.triggerEvent(document,"changeProfileImage"),!1}}},195:function(e,t){e.exports=function(e){function t(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,o){"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var o=Array.isArray(t)?t:t.split(","),r=e.name||"",n=e.type||"",i=n.replace(/\/.*$/,"");return o.some((function(e){var t=e.trim();return"."===t.charAt(0)?r.toLowerCase().endsWith(t.toLowerCase()):t.endsWith("/*")?i===t.replace(/\/.*$/,""):n===t}))}return!0}}])},214:function(e,t,o){"use strict";var r=o(87),n=o.n(r),i=o(98),s=o.n(i);function a(e,t,o,r){return new(o||(o=Promise))((function(n,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?n(e.value):new o((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function c(e,t){var o,r,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function l(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s}var d=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function u(e,t){var o=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var o=t.split(".").pop().toLowerCase(),r=d.get(o);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!=typeof o.path){var r=e.webkitRelativePath;Object.defineProperty(o,"path",{value:"string"==typeof t?t:"string"==typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return o}var h=[".DS_Store","Thumbs.db"];function p(e){return a(this,void 0,void 0,(function(){return c(this,(function(t){return[2,(o=e,o.dataTransfer&&e.dataTransfer?f(e.dataTransfer,e.type):m(e))];var o}))}))}function m(e){return(null!==e.target&&e.target.files?b(e.target.files):[]).map((function(e){return u(e)}))}function f(e,t){return a(this,void 0,void 0,(function(){var o;return c(this,(function(r){switch(r.label){case 0:return e.items?(o=b(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,o]:[4,Promise.all(o.map(v))]):[3,2];case 1:return[2,g(S(r.sent()))];case 2:return[2,g(b(e.files).map((function(e){return u(e)})))]}}))}))}function g(e){return e.filter((function(e){return-1===h.indexOf(e.name)}))}function b(e){for(var t=[],o=0;o<e.length;o++){var r=e[o];t.push(r)}return t}function v(e){if("function"!=typeof e.webkitGetAsEntry)return E(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?C(t):E(e)}function S(e){return e.reduce((function(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}(e,Array.isArray(t)?S(t):[t])}),[])}function E(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var o=u(t);return Promise.resolve(o)}function y(e){return a(this,void 0,void 0,(function(){return c(this,(function(t){return[2,e.isDirectory?C(e):w(e)]}))}))}function C(e){var t=e.createReader();return new Promise((function(e,o){var r=[];!function n(){var i=this;t.readEntries((function(t){return a(i,void 0,void 0,(function(){var i,s,a;return c(this,(function(c){switch(c.label){case 0:if(t.length)return[3,5];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return i=c.sent(),e(i),[3,4];case 3:return s=c.sent(),o(s),[3,4];case 4:return[3,6];case 5:a=Promise.all(t.map(y)),r.push(a),n(),c.label=6;case 6:return[2]}}))}))}),(function(e){o(e)}))}()}))}function w(e){return a(this,void 0,void 0,(function(){return c(this,(function(t){return[2,new Promise((function(t,o){e.file((function(o){var r=u(o,e.fullPath);t(r)}),(function(e){o(e)}))}))]}))}))}var T=o(195),O=o.n(T);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var o=[],r=!0,n=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(o.push(s.value),!t||o.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return o}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var x=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:"file-invalid-type",message:"File type must be ".concat(t)}},R=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," bytes")}},A=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," bytes")}},_={code:"too-many-files",message:"Too many files"};function F(e,t){var o="application/x-moz-file"===e.type||O()(e,t);return[o,o?null:x(t)]}function I(e,t,o){if(P(e.size))if(P(t)&&P(o)){if(e.size>o)return[!1,R(o)];if(e.size<t)return[!1,A(t)]}else{if(P(t)&&e.size<t)return[!1,A(t)];if(P(o)&&e.size>o)return[!1,R(o)]}return[!0,null]}function P(e){return null!=e}function N(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function M(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function L(e){e.preventDefault()}function D(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return function(e){for(var o=arguments.length,r=new Array(o>1?o-1:0),n=1;n<o;n++)r[n-1]=arguments[n];return t.some((function(t){return!N(e)&&t&&t.apply(void 0,[e].concat(r)),N(e)}))}}function U(e){return function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var o=[],r=!0,n=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(o.push(s.value),!t||o.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return o}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function B(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function V(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?B(o,!0).forEach((function(t){H(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):B(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function H(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function q(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var $=Object(r.forwardRef)((function(e,t){var o=e.children,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.accept,o=e.disabled,n=void 0!==o&&o,i=e.getFilesFromEvent,s=void 0===i?p:i,a=e.maxSize,c=void 0===a?1/0:a,l=e.minSize,d=void 0===l?0:l,u=e.multiple,h=void 0===u||u,m=e.maxFiles,f=void 0===m?0:m,g=e.onDragEnter,b=e.onDragLeave,v=e.onDragOver,S=e.onDrop,E=e.onDropAccepted,y=e.onDropRejected,C=e.onFileDialogCancel,w=e.preventDropOnDocument,T=void 0===w||w,O=e.noClick,x=void 0!==O&&O,R=e.noKeyboard,A=void 0!==R&&R,P=e.noDrag,B=void 0!==P&&P,$=e.noDragEventsBubbling,G=void 0!==$&&$,Q=Object(r.useRef)(null),Y=Object(r.useRef)(null),K=j(Object(r.useReducer)(W,z),2),J=K[0],X=K[1],Z=J.isFocused,ee=J.isFileDialogActive,te=J.draggedFiles,oe=Object(r.useCallback)((function(){Y.current&&(X({type:"openDialog"}),Y.current.value=null,Y.current.click())}),[X]),re=function(){ee&&setTimeout((function(){Y.current&&(Y.current.files.length||(X({type:"closeDialog"}),"function"==typeof C&&C()))}),300)};Object(r.useEffect)((function(){return window.addEventListener("focus",re,!1),function(){window.removeEventListener("focus",re,!1)}}),[Y,ee,C]);var ne=Object(r.useCallback)((function(e){Q.current&&Q.current.isEqualNode(e.target)&&(32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),oe()))}),[Q,Y]),ie=Object(r.useCallback)((function(){X({type:"focus"})}),[]),se=Object(r.useCallback)((function(){X({type:"blur"})}),[]),ae=Object(r.useCallback)((function(){x||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?oe():setTimeout(oe,0))}),[Y,x]),ce=Object(r.useRef)([]),le=function(e){Q.current&&Q.current.contains(e.target)||(e.preventDefault(),ce.current=[])};Object(r.useEffect)((function(){return T&&(document.addEventListener("dragover",L,!1),document.addEventListener("drop",le,!1)),function(){T&&(document.removeEventListener("dragover",L),document.removeEventListener("drop",le))}}),[Q,T]);var de=Object(r.useCallback)((function(e){e.preventDefault(),e.persist(),be(e),ce.current=[].concat(U(ce.current),[e.target]),M(e)&&Promise.resolve(s(e)).then((function(t){N(e)&&!G||(X({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),g&&g(e))}))}),[s,g,G]),ue=Object(r.useCallback)((function(e){if(e.preventDefault(),e.persist(),be(e),e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return M(e)&&v&&v(e),!1}),[v,G]),he=Object(r.useCallback)((function(e){e.preventDefault(),e.persist(),be(e);var t=ce.current.filter((function(e){return Q.current&&Q.current.contains(e)})),o=t.indexOf(e.target);-1!==o&&t.splice(o,1),ce.current=t,t.length>0||(X({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),M(e)&&b&&b(e))}),[Q,b,G]),pe=Object(r.useCallback)((function(e){e.preventDefault(),e.persist(),be(e),ce.current=[],M(e)&&Promise.resolve(s(e)).then((function(o){if(!N(e)||G){var r=[],n=[];o.forEach((function(e){var o=j(F(e,t),2),i=o[0],s=o[1],a=j(I(e,d,c),2),l=a[0],u=a[1];if(i&&l)r.push(e);else{var h=[s,u].filter((function(e){return e}));n.push({file:e,errors:h})}})),(!h&&r.length>1||h&&f>=1&&r.length>f)&&(r.forEach((function(e){n.push({file:e,errors:[_]})})),r.splice(0)),X({acceptedFiles:r,fileRejections:n,type:"setFiles"}),S&&S(r,n,e),n.length>0&&y&&y(n,e),r.length>0&&E&&E(r,e)}})),X({type:"reset"})}),[h,t,d,c,s,S,E,y,G]),me=function(e){return n?null:e},fe=function(e){return A?null:me(e)},ge=function(e){return B?null:me(e)},be=function(e){G&&e.stopPropagation()},ve=Object(r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,o=void 0===t?"ref":t,r=e.onKeyDown,i=e.onFocus,s=e.onBlur,a=e.onClick,c=e.onDragEnter,l=e.onDragOver,d=e.onDragLeave,u=e.onDrop,h=q(e,["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return V(H({onKeyDown:fe(D(r,ne)),onFocus:fe(D(i,ie)),onBlur:fe(D(s,se)),onClick:me(D(a,ae)),onDragEnter:ge(D(c,de)),onDragOver:ge(D(l,ue)),onDragLeave:ge(D(d,he)),onDrop:ge(D(u,pe))},o,Q),n||A?{}:{tabIndex:0},{},h)}}),[Q,ne,ie,se,ae,de,ue,he,pe,A,B,n]),Se=Object(r.useCallback)((function(e){e.stopPropagation()}),[]),Ee=Object(r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.refKey,r=void 0===o?"ref":o,n=e.onChange,i=e.onClick,s=q(e,["refKey","onChange","onClick"]),a=H({accept:t,multiple:h,type:"file",style:{display:"none"},onChange:me(D(n,pe)),onClick:me(D(i,Se)),autoComplete:"off",tabIndex:-1},r,Y);return V({},a,{},s)}}),[Y,t,h,pe,n]),ye=te.length,Ce=ye>0&&function(e){var t=e.files,o=e.accept,r=e.minSize,n=e.maxSize;return!(!e.multiple&&t.length>1)&&t.every((function(e){var t=k(F(e,o),1)[0],i=k(I(e,r,n),1)[0];return t&&i}))}({files:te,accept:t,minSize:d,maxSize:c,multiple:h});return V({},J,{isDragAccept:Ce,isDragReject:ye>0&&!Ce,isFocused:Z&&!n,getRootProps:ve,getInputProps:Ee,rootRef:Q,inputRef:Y,open:me(oe)})}(q(e,["children"])),s=i.open,a=q(i,["open"]);return Object(r.useImperativeHandle)(t,(function(){return{open:s}}),[s]),n.a.createElement(r.Fragment,null,o(V({},a,{open:s})))}));$.displayName="Dropzone",$.propTypes={children:s.a.func,accept:s.a.oneOfType([s.a.string,s.a.arrayOf(s.a.string)]),multiple:s.a.bool,preventDropOnDocument:s.a.bool,noClick:s.a.bool,noKeyboard:s.a.bool,noDrag:s.a.bool,noDragEventsBubbling:s.a.bool,minSize:s.a.number,maxSize:s.a.number,maxFiles:s.a.number,disabled:s.a.bool,getFilesFromEvent:s.a.func,onFileDialogCancel:s.a.func,onDragEnter:s.a.func,onDragLeave:s.a.func,onDragOver:s.a.func,onDrop:s.a.func,onDropAccepted:s.a.func,onDropRejected:s.a.func};t.a=$;var z={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function W(e,t){switch(t.type){case"focus":return V({},e,{isFocused:!0});case"blur":return V({},e,{isFocused:!1});case"openDialog":return V({},e,{isFileDialogActive:!0});case"closeDialog":return V({},e,{isFileDialogActive:!1});case"setDraggedFiles":var o=t.isDragActive;return V({},e,{draggedFiles:t.draggedFiles,isDragActive:o});case"setFiles":return V({},e,{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return V({},e,{isFileDialogActive:!1,isDragActive:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]});default:return e}}},215:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));const r=new class{constructor(){this.cacheMap={}}getProductToc(e,t,o,r,n){return o?this.getLivebookToc(e,t):r?this.getLivevideoToc(e,t):n?this.getPbcToc(e,t):Promise.resolve({})}getLivebookToc(e,t){return this.cacheMap[t]?this.cacheMap[t]:this.cacheMap[t]=new Promise((o,r)=>{e.ajax(e.getAbsoluteLivebookAwsUrl(`${t}/tocAndIndex.json`),e=>o(e.toc),e=>{delete this.cacheMap[t],r(e)})})}getLivevideoToc(e,t){return this.cacheMap[t]?this.cacheMap[t]:this.cacheMap[t]=new Promise((o,r)=>{e.ajax(e.getAbsoluteBackendLivevideoUrl("course/getToc"),e=>o(e),e=>{delete this.cacheMap[t],r(e)},{id:t},!0)})}getPbcToc(e,t){return this.cacheMap[t]?this.cacheMap[t]:this.cacheMap[t]=new Promise((o,r)=>{e.ajax(e.getAbsoluteBackendLivevideoUrl("course/getToc"),e=>o(e),e=>{delete this.cacheMap[t],r(e)},{id:t},!0)})}}},216:function(e,t,o){var r=o(242);e.exports={locale:r.locale,long:r.long,short:r.short,narrow:r.narrow,"short-time":o(247),"short-convenient":o(248),"long-time":o(249),"long-convenient":o(250),tiny:o(251),quantify:r.quantify}},233:function(e,t,o){"use strict";function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}const n=1/0;function i(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-n?"-0":t}(e)}function s(e){return"string"==typeof e}function a(e){return"number"==typeof e}function c(e){return null!=e}function l(e){return!e.trim().length}const d="Incorrect 'index' type",u=e=>`Invalid value for key ${e}`,h=e=>`Pattern length exceeds max of ${e}.`,p=e=>`Missing ${e} property in key`,m=e=>`Property 'weight' in key '${e}' must be a positive integer`,f=Object.prototype.hasOwnProperty;class g{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let o=b(e);t+=o.weight,this._keys.push(o),this._keyMap[o.id]=o,t+=o.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function b(e){let t=null,o=null,n=null,i=1;if(s(e)||r(e))n=e,t=v(e),o=S(e);else{if(!f.call(e,"name"))throw new Error(p("name"));const r=e.name;if(n=r,f.call(e,"weight")&&(i=e.weight)<=0)throw new Error(m(r));t=v(r),o=S(r)}return{path:t,id:o,weight:i,src:n}}function v(e){return r(e)?e:e.split(".")}function S(e){return r(e)?e.join("."):e}var E={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(e,t){let o=[],n=!1;const l=(e,t,d)=>{if(t[d]){const u=e[t[d]];if(!c(u))return;if(d===t.length-1&&(s(u)||a(u)))o.push(i(u));else if(r(u)){n=!0;for(let e=0,o=u.length;e<o;e+=1)l(u[e],t,d+1)}else t.length&&l(u,t,d+1)}else o.push(e)};return l(e,s(t)?t.split("."):t,0),n?o:o[0]},ignoreLocation:!1,ignoreFieldNorm:!1}};const y=/[^ ]+/g;class C{constructor({getFn:e=E.getFn}={}){this.norm=function(e=3){const t=new Map;return{get(o){const r=o.match(y).length;if(t.has(r))return t.get(r);const n=parseFloat((1/Math.sqrt(r)).toFixed(e));return t.set(r,n),n},clear(){t.clear()}}}(3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,s(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();s(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,o=this.size();t<o;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!c(e)||l(e))return;let o={v:e,i:t,n:this.norm.get(e)};this.records.push(o)}_addObject(e,t){let o={i:t,$:{}};this.keys.forEach((t,n)=>{let i=this.getFn(e,t.path);if(c(i))if(r(i)){let e=[];const t=[{nestedArrIndex:-1,value:i}];for(;t.length;){const{nestedArrIndex:o,value:n}=t.pop();if(c(n))if(s(n)&&!l(n)){let t={v:n,i:o,n:this.norm.get(n)};e.push(t)}else r(n)&&n.forEach((e,o)=>{t.push({nestedArrIndex:o,value:e})})}o.$[n]=e}else if(!l(i)){let e={v:i,n:this.norm.get(i)};o.$[n]=e}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}}function w(e,t,{getFn:o=E.getFn}={}){const r=new C({getFn:o});return r.setKeys(e.map(b)),r.setSources(t),r.create(),r}function T(e,t){const o=e.matches;t.matches=[],c(o)&&o.forEach(e=>{if(!c(e.indices)||!e.indices.length)return;const{indices:o,value:r}=e;let n={indices:o,value:r};e.key&&(n.key=e.key.src),e.idx>-1&&(n.refIndex=e.idx),t.matches.push(n)})}function O(e,t){t.score=e.score}function k(e,{errors:t=0,currentLocation:o=0,expectedLocation:r=0,distance:n=E.distance,ignoreLocation:i=E.ignoreLocation}={}){const s=t/e.length;if(i)return s;const a=Math.abs(r-o);return n?s+a/n:a?1:s}const x=32;function R(e,t,o,{location:r=E.location,distance:n=E.distance,threshold:i=E.threshold,findAllMatches:s=E.findAllMatches,minMatchCharLength:a=E.minMatchCharLength,includeMatches:c=E.includeMatches,ignoreLocation:l=E.ignoreLocation}={}){if(t.length>x)throw new Error(h(x));const d=t.length,u=e.length,p=Math.max(0,Math.min(r,u));let m=i,f=p;const g=a>1||c,b=g?Array(u):[];let v;for(;(v=e.indexOf(t,f))>-1;){let e=k(t,{currentLocation:v,expectedLocation:p,distance:n,ignoreLocation:l});if(m=Math.min(e,m),f=v+d,g){let e=0;for(;e<d;)b[v+e]=1,e+=1}}f=-1;let S=[],y=1,C=d+u;const w=1<<d-1;for(let r=0;r<d;r+=1){let i=0,a=C;for(;i<a;){k(t,{errors:r,currentLocation:p+a,expectedLocation:p,distance:n,ignoreLocation:l})<=m?i=a:C=a,a=Math.floor((C-i)/2+i)}C=a;let c=Math.max(1,p-a+1),h=s?u:Math.min(p+a,u)+d,v=Array(h+2);v[h+1]=(1<<r)-1;for(let i=h;i>=c;i-=1){let s=i-1,a=o[e.charAt(s)];if(g&&(b[s]=+!!a),v[i]=(v[i+1]<<1|1)&a,r&&(v[i]|=(S[i+1]|S[i])<<1|1|S[i+1]),v[i]&w&&(y=k(t,{errors:r,currentLocation:s,expectedLocation:p,distance:n,ignoreLocation:l}))<=m){if(m=y,(f=s)<=p)break;c=Math.max(1,2*p-f)}}if(k(t,{errors:r+1,currentLocation:p,expectedLocation:p,distance:n,ignoreLocation:l})>m)break;S=v}const T={isMatch:f>=0,score:Math.max(.001,y)};if(g){const e=function(e=[],t=E.minMatchCharLength){let o=[],r=-1,n=-1,i=0;for(let s=e.length;i<s;i+=1){let s=e[i];s&&-1===r?r=i:s||-1===r||((n=i-1)-r+1>=t&&o.push([r,n]),r=-1)}return e[i-1]&&i-r>=t&&o.push([r,i-1]),o}(b,a);e.length?c&&(T.indices=e):T.isMatch=!1}return T}function A(e){let t={};for(let o=0,r=e.length;o<r;o+=1){const n=e.charAt(o);t[n]=(t[n]||0)|1<<r-o-1}return t}class _{constructor(e,{location:t=E.location,threshold:o=E.threshold,distance:r=E.distance,includeMatches:n=E.includeMatches,findAllMatches:i=E.findAllMatches,minMatchCharLength:s=E.minMatchCharLength,isCaseSensitive:a=E.isCaseSensitive,ignoreLocation:c=E.ignoreLocation}={}){if(this.options={location:t,threshold:o,distance:r,includeMatches:n,findAllMatches:i,minMatchCharLength:s,isCaseSensitive:a,ignoreLocation:c},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(e,t)=>{this.chunks.push({pattern:e,alphabet:A(e),startIndex:t})},d=this.pattern.length;if(d>x){let e=0;const t=d%x,o=d-t;for(;e<o;)l(this.pattern.substr(e,x),e),e+=x;if(t){const e=d-x;l(this.pattern.substr(e),e)}}else l(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:o}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return o&&(t.indices=[[0,e.length-1]]),t}const{location:r,distance:n,threshold:i,findAllMatches:s,minMatchCharLength:a,ignoreLocation:c}=this.options;let l=[],d=0,u=!1;this.chunks.forEach(({pattern:t,alphabet:h,startIndex:p})=>{const{isMatch:m,score:f,indices:g}=R(e,t,h,{location:r+p,distance:n,threshold:i,findAllMatches:s,minMatchCharLength:a,includeMatches:o,ignoreLocation:c});m&&(u=!0),d+=f,m&&g&&(l=[...l,...g])});let h={isMatch:u,score:u?d/this.chunks.length:1};return u&&o&&(h.indices=l),h}}class F{constructor(e){this.pattern=e}static isMultiMatch(e){return I(e,this.multiRegex)}static isSingleMatch(e){return I(e,this.singleRegex)}search(){}}function I(e,t){const o=e.match(t);return o?o[1]:null}class P extends F{constructor(e,{location:t=E.location,threshold:o=E.threshold,distance:r=E.distance,includeMatches:n=E.includeMatches,findAllMatches:i=E.findAllMatches,minMatchCharLength:s=E.minMatchCharLength,isCaseSensitive:a=E.isCaseSensitive}={}){super(e),this._bitapSearch=new _(e,{location:t,threshold:o,distance:r,includeMatches:n,findAllMatches:i,minMatchCharLength:s,isCaseSensitive:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class N extends F{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,o=0;const r=[],n=this.pattern.length;for(;(t=e.indexOf(this.pattern,o))>-1;)o=t+n,r.push([t,o-1]);const i=!!r.length;return{isMatch:i,score:i?1:0,indices:r}}}const M=[class extends F{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},N,class extends F{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends F{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends F{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends F{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends F{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},P],L=M.length,D=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,U="|";const j=new Set([P.type,N.type]);class B{constructor(e,{isCaseSensitive:t=E.isCaseSensitive,includeMatches:o=E.includeMatches,minMatchCharLength:r=E.minMatchCharLength,findAllMatches:n=E.findAllMatches,location:i=E.location,threshold:s=E.threshold,distance:a=E.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:o,minMatchCharLength:r,findAllMatches:n,location:i,threshold:s,distance:a},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split(U).map(e=>{let o=e.trim().split(D).filter(e=>e&&!!e.trim()),r=[];for(let e=0,n=o.length;e<n;e+=1){const n=o[e];let i=!1,s=-1;for(;!i&&++s<L;){const e=M[s];let o=e.isMultiMatch(n);o&&(r.push(new e(o,t)),i=!0)}if(!i)for(s=-1;++s<L;){const e=M[s];let o=e.isSingleMatch(n);if(o){r.push(new e(o,t));break}}}return r})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let n=0,i=[],s=0;for(let r=0,a=t.length;r<a;r+=1){const a=t[r];i.length=0,n=0;for(let t=0,r=a.length;t<r;t+=1){const r=a[t],{isMatch:c,indices:l,score:d}=r.search(e);if(!c){s=0,n=0,i.length=0;break}if(n+=1,s+=d,o){const e=r.constructor.type;j.has(e)?i=[...i,...l]:i.push(l)}}if(n){let e={isMatch:!0,score:s/n};return o&&(e.indices=i),e}}return{isMatch:!1,score:1}}}const V=[];function H(e,t){for(let o=0,r=V.length;o<r;o+=1){let r=V[o];if(r.condition(e,t))return new r(e,t)}return new _(e,t)}const q={AND:"$and",OR:"$or"},$={PATH:"$path",PATTERN:"$val"},z=e=>!(!e[q.AND]&&!e[q.OR]),W=e=>!!e[$.PATH],G=e=>!r(e)&&function(e){return"object"==typeof e}(e)&&!z(e),Q=e=>({[q.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Y(e,t,{auto:o=!0}={}){const n=e=>{let i=Object.keys(e);const a=W(e);if(!a&&i.length>1&&!z(e))return n(Q(e));if(G(e)){const r=a?e[$.PATH]:i[0],n=a?e[$.PATTERN]:e[r];if(!s(n))throw new Error(u(r));const c={keyId:S(r),pattern:n};return o&&(c.searcher=H(n,t)),c}let c={children:[],operator:i[0]};return i.forEach(t=>{const o=e[t];r(o)&&o.forEach(e=>{c.children.push(n(e))})}),c};return z(e)||(e=Q(e)),n(e)}class K{constructor(e,t={},o){this.options={...E,...t},this.options.useExtendedSearch,this._keyStore=new g(this.options.keys),this.setCollection(e,o)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof C))throw new Error(d);this._myIndex=t||w(this.options.keys,this._docs,{getFn:this.options.getFn})}add(e){c(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let o=0,r=this._docs.length;o<r;o+=1){const r=this._docs[o];e(r,o)&&(this.removeAt(o),o-=1,t.push(r))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:o,includeScore:r,shouldSort:n,sortFn:i,ignoreFieldNorm:c}=this.options;let l=s(e)?s(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=E.ignoreFieldNorm}){e.forEach(e=>{let o=1;e.matches.forEach(({key:e,norm:r,score:n})=>{const i=e?e.weight:null;o*=Math.pow(0===n&&i?Number.EPSILON:n,(i||1)*(t?1:r))}),e.score=o})}(l,{ignoreFieldNorm:c}),n&&l.sort(i),a(t)&&t>-1&&(l=l.slice(0,t)),function(e,t,{includeMatches:o=E.includeMatches,includeScore:r=E.includeScore}={}){const n=[];o&&n.push(T);r&&n.push(O);return e.map(e=>{const{idx:o}=e,r={item:t[o],refIndex:o};return n.length&&n.forEach(t=>{t(e,r)}),r})}(l,this._docs,{includeMatches:o,includeScore:r})}_searchStringList(e){const t=H(e,this.options),{records:o}=this._myIndex,r=[];return o.forEach(({v:e,i:o,n:n})=>{if(!c(e))return;const{isMatch:i,score:s,indices:a}=t.searchIn(e);i&&r.push({item:e,idx:o,matches:[{score:s,value:e,norm:n,indices:a}]})}),r}_searchLogical(e){const t=Y(e,this.options),o=(e,t,r)=>{if(!e.children){const{keyId:o,searcher:n}=e,i=this._findMatches({key:this._keyStore.get(o),value:this._myIndex.getValueForItemAtKeyId(t,o),searcher:n});return i&&i.length?[{idx:r,item:t,matches:i}]:[]}switch(e.operator){case q.AND:{const n=[];for(let i=0,s=e.children.length;i<s;i+=1){const s=e.children[i],a=o(s,t,r);if(!a.length)return[];n.push(...a)}return n}case q.OR:{const n=[];for(let i=0,s=e.children.length;i<s;i+=1){const s=e.children[i],a=o(s,t,r);if(a.length){n.push(...a);break}}return n}}},r=this._myIndex.records,n={},i=[];return r.forEach(({$:e,i:r})=>{if(c(e)){let s=o(t,e,r);s.length&&(n[r]||(n[r]={idx:r,item:e,matches:[]},i.push(n[r])),s.forEach(({matches:e})=>{n[r].matches.push(...e)}))}}),i}_searchObjectList(e){const t=H(e,this.options),{keys:o,records:r}=this._myIndex,n=[];return r.forEach(({$:e,i:r})=>{if(!c(e))return;let i=[];o.forEach((o,r)=>{i.push(...this._findMatches({key:o,value:e[r],searcher:t}))}),i.length&&n.push({idx:r,item:e,matches:i})}),n}_findMatches({key:e,value:t,searcher:o}){if(!c(t))return[];let n=[];if(r(t))t.forEach(({v:t,i:r,n:i})=>{if(!c(t))return;const{isMatch:s,score:a,indices:l}=o.searchIn(t);s&&n.push({score:a,key:e,value:t,idx:r,norm:i,indices:l})});else{const{v:r,n:i}=t,{isMatch:s,score:a,indices:c}=o.searchIn(r);s&&n.push({score:a,key:e,value:r,norm:i,indices:c})}return n}}K.version="6.4.0",K.createIndex=w,K.parseIndex=function(e,{getFn:t=E.getFn}={}){const{keys:o,records:r}=e,n=new C({getFn:t});return n.setKeys(o),n.setIndexRecords(r),n},K.config=E,K.parseQuery=Y,function(...e){V.push(...e)}(B),t.a=K},234:function(e,t,o){"use strict";e.exports=o(235)},235:function(e,t,o){"use strict";
/** @license React v16.10.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,d=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,m=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,b=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.fundamental"):60117,S=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function y(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case h:case s:case c:case a:case m:return e;default:switch(e=e&&e.$$typeof){case d:case p:case l:return e;default:return t}}case b:case g:case i:return t}}}function C(e){return y(e)===h}t.typeOf=y,t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=d,t.ContextProvider=l,t.Element=n,t.ForwardRef=p,t.Fragment=s,t.Lazy=b,t.Memo=g,t.Portal=i,t.Profiler=c,t.StrictMode=a,t.Suspense=m,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===h||e===c||e===a||e===m||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===g||e.$$typeof===l||e.$$typeof===d||e.$$typeof===p||e.$$typeof===v||e.$$typeof===S||e.$$typeof===E)},t.isAsyncMode=function(e){return C(e)||y(e)===u},t.isConcurrentMode=C,t.isContextConsumer=function(e){return y(e)===d},t.isContextProvider=function(e){return y(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return y(e)===p},t.isFragment=function(e){return y(e)===s},t.isLazy=function(e){return y(e)===b},t.isMemo=function(e){return y(e)===g},t.isPortal=function(e){return y(e)===i},t.isProfiler=function(e){return y(e)===c},t.isStrictMode=function(e){return y(e)===a},t.isSuspense=function(e){return y(e)===m}},236:function(e,t,o){"use strict";e.exports=o(237)},237:function(e,t,o){"use strict";
/** @license React v16.11.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,d=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,m=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,b=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.fundamental"):60117,S=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function y(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case h:case s:case c:case a:case m:return e;default:switch(e=e&&e.$$typeof){case d:case p:case l:return e;default:return t}}case b:case g:case i:return t}}}function C(e){return y(e)===h}t.typeOf=y,t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=d,t.ContextProvider=l,t.Element=n,t.ForwardRef=p,t.Fragment=s,t.Lazy=b,t.Memo=g,t.Portal=i,t.Profiler=c,t.StrictMode=a,t.Suspense=m,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===h||e===c||e===a||e===m||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===g||e.$$typeof===l||e.$$typeof===d||e.$$typeof===p||e.$$typeof===v||e.$$typeof===S||e.$$typeof===E)},t.isAsyncMode=function(e){return C(e)||y(e)===u},t.isConcurrentMode=C,t.isContextConsumer=function(e){return y(e)===d},t.isContextProvider=function(e){return y(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return y(e)===p},t.isFragment=function(e){return y(e)===s},t.isLazy=function(e){return y(e)===b},t.isMemo=function(e){return y(e)===g},t.isPortal=function(e){return y(e)===i},t.isProfiler=function(e){return y(e)===c},t.isStrictMode=function(e){return y(e)===a},t.isSuspense=function(e){return y(e)===m}},238:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},239:function(e,t,o){"use strict";function r(e){var t,o=e.Symbol;return"function"==typeof o?o.observable?t=o.observable:(t=o("observable"),o.observable=t):t="@@observable",t}o.d(t,"a",(function(){return r}))},240:function(e,t,o){var r=o(88),n=o(241);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},241:function(e,t,o){(t=o(89)(!1)).push([e.i,".time-ago-label{color:gray}\n",""]),e.exports=t},242:function(e,t,o){e.exports={locale:"en",long:o(243),short:o(244),narrow:o(245),quantify:o(246)}},243:function(e){e.exports=JSON.parse('{"year":{"previous":"last year","current":"this year","next":"next year","past":{"one":"{0} year ago","other":"{0} years ago"},"future":{"one":"in {0} year","other":"in {0} years"}},"quarter":{"previous":"last quarter","current":"this quarter","next":"next quarter","past":{"one":"{0} quarter ago","other":"{0} quarters ago"},"future":{"one":"in {0} quarter","other":"in {0} quarters"}},"month":{"previous":"last month","current":"this month","next":"next month","past":{"one":"{0} month ago","other":"{0} months ago"},"future":{"one":"in {0} month","other":"in {0} months"}},"week":{"previous":"last week","current":"this week","next":"next week","past":{"one":"{0} week ago","other":"{0} weeks ago"},"future":{"one":"in {0} week","other":"in {0} weeks"}},"day":{"previous":"yesterday","current":"today","next":"tomorrow","past":{"one":"{0} day ago","other":"{0} days ago"},"future":{"one":"in {0} day","other":"in {0} days"}},"hour":{"current":"this hour","past":{"one":"{0} hour ago","other":"{0} hours ago"},"future":{"one":"in {0} hour","other":"in {0} hours"}},"minute":{"current":"this minute","past":{"one":"{0} minute ago","other":"{0} minutes ago"},"future":{"one":"in {0} minute","other":"in {0} minutes"}},"second":{"current":"now","past":{"one":"{0} second ago","other":"{0} seconds ago"},"future":{"one":"in {0} second","other":"in {0} seconds"}}}')},244:function(e){e.exports=JSON.parse('{"year":{"previous":"last yr.","current":"this yr.","next":"next yr.","past":"{0} yr. ago","future":"in {0} yr."},"quarter":{"previous":"last qtr.","current":"this qtr.","next":"next qtr.","past":{"one":"{0} qtr. ago","other":"{0} qtrs. ago"},"future":{"one":"in {0} qtr.","other":"in {0} qtrs."}},"month":{"previous":"last mo.","current":"this mo.","next":"next mo.","past":"{0} mo. ago","future":"in {0} mo."},"week":{"previous":"last wk.","current":"this wk.","next":"next wk.","past":"{0} wk. ago","future":"in {0} wk."},"day":{"previous":"yesterday","current":"today","next":"tomorrow","past":{"one":"{0} day ago","other":"{0} days ago"},"future":{"one":"in {0} day","other":"in {0} days"}},"hour":{"current":"this hour","past":"{0} hr. ago","future":"in {0} hr."},"minute":{"current":"this minute","past":"{0} min. ago","future":"in {0} min."},"second":{"current":"now","past":"{0} sec. ago","future":"in {0} sec."}}')},245:function(e){e.exports=JSON.parse('{"year":{"previous":"last yr.","current":"this yr.","next":"next yr.","past":"{0} yr. ago","future":"in {0} yr."},"quarter":{"previous":"last qtr.","current":"this qtr.","next":"next qtr.","past":{"one":"{0} qtr. ago","other":"{0} qtrs. ago"},"future":{"one":"in {0} qtr.","other":"in {0} qtrs."}},"month":{"previous":"last mo.","current":"this mo.","next":"next mo.","past":"{0} mo. ago","future":"in {0} mo."},"week":{"previous":"last wk.","current":"this wk.","next":"next wk.","past":"{0} wk. ago","future":"in {0} wk."},"day":{"previous":"yesterday","current":"today","next":"tomorrow","past":{"one":"{0} day ago","other":"{0} days ago"},"future":{"one":"in {0} day","other":"in {0} days"}},"hour":{"current":"this hour","past":"{0} hr. ago","future":"in {0} hr."},"minute":{"current":"this minute","past":"{0} min. ago","future":"in {0} min."},"second":{"current":"now","past":"{0} sec. ago","future":"in {0} sec."}}')},246:function(e,t){e.exports=function(e){var t=!String(e).split(".")[1];return 1==e&&t?"one":"other"}},247:function(e){e.exports=JSON.parse('{"year":"{0} yr.","month":"{0} mo.","week":"{0} wk.","day":{"one":"{0} day","other":"{0} days"},"hour":"{0} hr.","minute":"{0} min.","second":"{0} sec.","now":"now"}')},248:function(e){e.exports=JSON.parse('{"year":{"previous":"last yr.","current":"this yr.","next":"next yr.","past":"{0} yr. ago","future":"in {0} yr."},"quarter":{"previous":"last qtr.","current":"this qtr.","next":"next qtr.","past":{"one":"{0} qtr. ago","other":"{0} qtrs. ago"},"future":{"one":"in {0} qtr.","other":"in {0} qtrs."}},"month":{"previous":"last mo.","current":"this mo.","next":"next mo.","past":"{0} mo. ago","future":"in {0} mo."},"week":{"previous":"last wk.","current":"this wk.","next":"next wk.","past":"{0} wk. ago","future":"in {0} wk."},"day":{"previous":"yesterday","current":"today","next":"tomorrow","past":{"one":"{0} day ago","other":"{0} days ago"},"future":{"one":"in {0} day","other":"in {0} days"}},"hour":{"current":"this hour","past":"{0} hr. ago","future":"in {0} hr."},"minute":{"current":"this minute","past":"{0} min. ago","future":"in {0} min."},"second":{"current":"now","past":"{0} sec. ago","future":"in {0} sec."},"now":{"future":"in a moment","past":"just now"}}')},249:function(e){e.exports=JSON.parse('{"year":{"one":"{0} year","other":"{0} years"},"month":{"one":"{0} month","other":"{0} months"},"week":{"one":"{0} week","other":"{0} weeks"},"day":{"one":"{0} day","other":"{0} days"},"hour":{"one":"{0} hour","other":"{0} hours"},"minute":{"one":"{0} minute","other":"{0} minutes"},"second":{"one":"{0} second","other":"{0} seconds"},"now":{"future":"in a moment","past":"just now"}}')},250:function(e){e.exports=JSON.parse('{"year":{"previous":"last year","current":"this year","next":"next year","past":{"one":"a year ago","other":"{0} years ago"},"future":{"one":"in a year","other":"in {0} years"}},"quarter":{"previous":"last quarter","current":"this quarter","next":"next quarter","past":{"one":"a quarter ago","other":"{0} quarters ago"},"future":{"one":"in a quarter","other":"in {0} quarters"}},"month":{"previous":"last month","current":"this month","next":"next month","past":{"one":"a month ago","other":"{0} months ago"},"future":{"one":"in a month","other":"in {0} months"}},"week":{"previous":"last week","current":"this week","next":"next week","past":{"one":"a week ago","other":"{0} weeks ago"},"future":{"one":"in a week","other":"in {0} weeks"}},"day":{"previous":"yesterday","current":"today","next":"tomorrow","past":{"one":"a day ago","other":"{0} days ago"},"future":{"one":"in a day","other":"in {0} days"}},"hour":{"current":"this hour","past":{"one":"an hour ago","other":"{0} hours ago"},"future":{"one":"in an hour","other":"in {0} hours"}},"minute":{"current":"this minute","past":{"one":"a minute ago","other":"{0} minutes ago"},"future":{"one":"in a minute","other":"in {0} minutes"}},"second":{"current":"now","past":{"one":"a second ago","other":"{0} seconds ago"},"future":{"one":"in a second","other":"in {0} seconds"}},"now":{"future":"in a moment","past":"just now"}}')},251:function(e){e.exports=JSON.parse('{"year":"{0}yr","month":"{0}mo","week":"{0}wk","day":"{0}d","hour":"{0}h","minute":"{0}m","second":"{0}s","now":"now"}')},252:function(e,t,o){e.exports=o(253)},253:function(e,t,o){!function(t){var r=-1,n=function(e){return e.every=function(t,o,n){e._time(),n||(n=o,o=null);var i=r+=1;return e._timers[i]={visible:t,hidden:o,callback:n},e._run(i,!1),e.isSupported()&&e._listen(),i},e.stop=function(t){return!!e._timers[t]&&(e._stop(t),delete e._timers[t],!0)},e._timers={},e._time=function(){e._timed||(e._timed=!0,e._wasHidden=e.hidden(),e.change((function(){e._stopRun(),e._wasHidden=e.hidden()})))},e._run=function(o,r){var n,i=e._timers[o];if(e.hidden()){if(null===i.hidden)return;n=i.hidden}else n=i.visible;var s=function(){i.last=new Date,i.callback.call(t)};if(r){var a=new Date-i.last;n>a?i.delay=setTimeout((function(){i.id=setInterval(s,n),s()}),n-a):(i.id=setInterval(s,n),s())}else i.id=setInterval(s,n)},e._stop=function(t){var o=e._timers[t];clearInterval(o.id),clearTimeout(o.delay),delete o.id,delete o.delay},e._stopRun=function(t){var o=e.hidden(),r=e._wasHidden;if(o&&!r||!o&&r)for(var n in e._timers)e._stop(n),e._run(n,!o)},e};e.exports?e.exports=n(o(182)):n(t.Visibility||o(182))}(window)},254:function(e,t,o){"use strict";o.d(t,"a",(function(){return d}));var r=o(87),n=o(91),i=o(396),s=o.n(i),a=o(106),c=o(214),l=(o(183),o(397),function(e,t,o,r){return new(o||(o=Promise))((function(n,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))});class d extends r.Component{constructor(e){super(e),this.onImageLoaded=(e,t)=>{this.imageRef=e,this.imageRef.setAttribute&&this.imageRef.setAttribute("crossOrigin","anonymous")},this.onCropComplete=(e,t)=>{this.makeClientCrop(e,t)},this.handleActionClicked=this.handleActionClicked.bind(this),this.handleFilesDropped=this.handleFilesDropped.bind(this),this.handleFileUploaded=this.handleFileUploaded.bind(this),this.onImageLoaded=this.onImageLoaded.bind(this),this.onCropComplete=this.onCropComplete.bind(this),this.onCropChange=this.onCropChange.bind(this),this.state={imageUrl:"",imageLoading:!1,crop:{aspect:this.props.aspectRatio,x:0,y:0,width:this.props.maxWidth||50}}}componentDidMount(){this.hasBeenMounted=!0}componentWillUnmount(){this.hasBeenMounted=!1,this.imageRef=null,this.fileUrl=null,this.imageName=""}render(){return r.createElement(a.b,{mainContainerClassName:this.props.mainContainerClassName,title:this.props.title||"upload image",isOpen:this.props.isShown,onClose:this.props.onClose,theme:a.a.standard,onActionClicked:this.handleActionClicked,onCancelationClicked:this.props.onClose,actionMessageHTML:this.state.isPerformingAction?'adding <i class="fa fa-circle-notch fa-spin fa-fw"></i>':"add"},r.createElement("div",{className:"social-modal-form image-upload-form",ref:e=>this.root=e},this.state.imageUrl?this.generateImagePreview():r.createElement(c.a,{accept:"image/png, image/jpeg, image/jpg",onDrop:this.handleFilesDropped,multiple:!1},({getRootProps:e,getInputProps:t,isDragActive:o,isDragAccept:n,isDragReject:i})=>r.createElement("div",Object.assign({},e(),{className:"dropzone image-upload-container"}),r.createElement("input",Object.assign({},t())),this.state.imageLoading?"Please wait...":"Drop an image here (or click to select files to upload)."))))}generateImagePreview(){return this.props.aspectRatio?r.createElement("div",{className:"social-modal-cropp-container"},r.createElement("div",{className:"social-modal-cropp-column"},r.createElement("div",null,"Original"),r.createElement(s.a,{src:this.state.imageUrl,crop:this.state.crop,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange})),r.createElement("div",{className:"social-modal-cropp-column"},r.createElement("div",null,"Preview"),this.state.croppedImageUrl&&r.createElement("img",{className:n({"social-modal-form-round-image":this.props.isRoundImagePreview}),alt:"cropped image",crossOrigin:"anonymous",style:{maxWidth:"100%"},src:this.state.croppedImageUrl}))):r.createElement("img",{className:"social-modal-form-image",crossOrigin:"anonymous",src:this.state.imageUrl,alt:"image"})}handleFilesDropped(e){if(null==e||0===e.length)return;if(!this.hasBeenMounted)return!1;let t=e[0];const o=new FileReader;this.setState({imageLoading:!0}),o.onload=()=>{let e=o.result.split(","),r=e[0],n=e[1];this.imageName=t.name,this.props.forcedFileName&&(this.imageName=this.replaceFileName(this.imageName)),this.props.aspectRatio?this.handleFileUploaded(r+","+n):null!=this.props.uploadImage?this.props.uploadImage(n,this.imageName,this.handleFileUploaded,r):window.handleUploadImageToS3&&window.handleUploadImageToS3(n,this.imageName,this.handleFileUploaded,r)},o.onabort=()=>{if(!this.hasBeenMounted)return!1;this.setState({imageLoading:!1})},o.onerror=()=>{if(!this.hasBeenMounted)return!1;this.setState({imageLoading:!1})},o.readAsDataURL(t)}handleFileUploaded(e){if(!this.hasBeenMounted)return!1;this.setState({imageUrl:e,imageLoading:!1})}handleActionClicked(){this.props.onAccept&&this.root&&(this.state.isPerformingAction||(this.state.croppedImageUrl?this.saveCroppedImageAndClose():this.state.imageUrl&&(this.props.onAccept&&this.props.onAccept(this.state.imageUrl),this.setState({imageLoading:!1,imageUrl:"",croppedImageUrl:""}))))}saveCroppedImageAndClose(){let e=(this.state.croppedImageUrl||"").split(","),t=e[0],o=e[1];const r=e=>{this.setState(Object.assign(Object.assign({},this.state),{isPerformingAction:!1})),this.props.onAccept&&this.props.onAccept(e)};let n=!1;null!=this.props.uploadImage?(this.props.uploadImage(o,this.imageName,r,t),n=!0):window.handleUploadImageToS3&&(window.handleUploadImageToS3(o,this.imageName,r,t),n=!0),n&&this.setState(Object.assign(Object.assign({},this.state),{isPerformingAction:n}))}replaceFileName(e){try{if(this.props.forcedFileName){const t=e.lastIndexOf(".");return-1==t?e:e.replace(e.substr(0,t),this.props.forcedFileName)}}catch(e){}return e}onCropChange(e){this.setState(Object.assign(Object.assign({},this.state),{crop:e}))}makeClientCrop(e,t){return l(this,void 0,void 0,(function*(){if(this.imageRef&&e.width&&e.height){const t=yield this.getCroppedImg(this.imageRef,e);this.setState(Object.assign(Object.assign({},this.state),{croppedImageUrl:t}))}}))}getCroppedImg(e,t){const o=document.createElement("canvas"),r=e.naturalWidth/e.width,n=e.naturalHeight/e.height;return o.width=t.width,o.height=t.height,o.getContext("2d").drawImage(e,t.x*r,t.y*n,t.width*r,t.height*n,0,0,t.width,t.height),new Promise((e,t)=>{o.toBlob(t=>{this.blobToDataURL(t,t=>e(t))},"image/jpeg")})}blobToDataURL(e,t){const o=new FileReader;o.onload=function(e){t(e.target.result)},o.readAsDataURL(e)}}},323:function(e,t,o){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}var n=o(87),i=n.useLayoutEffect,s=function(e){var t=Object(n.useRef)(e);return i((function(){t.current=e})),t},a=function(e,t){"function"!=typeof e?e.current=t:e(t)},c=function(e,t){var o=Object(n.useRef)();return Object(n.useCallback)((function(r){e.current=r,o.current&&a(o.current,null),o.current=t,t&&a(t,r)}),[t])},l={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},d=function(e){Object.keys(l).forEach((function(t){e.style.setProperty(t,l[t],"important")}))},u=null,h=function(e,t){var o=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?o+t.borderSize:o-t.paddingSize};var p=function(){},m=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"],f=!!document.documentElement.currentStyle,g=function(e,t){var o=e.cacheMeasurements,i=e.maxRows,a=e.minRows,l=e.onChange,g=void 0===l?p:l,b=e.onHeightChange,v=void 0===b?p:b,S=function(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]);var E,y=void 0!==S.value,C=Object(n.useRef)(null),w=c(C,t),T=Object(n.useRef)(0),O=Object(n.useRef)(),k=function(){var e=C.current,t=o&&O.current?O.current:function(e){var t=window.getComputedStyle(e);if(null===t)return null;var o,r=(o=t,m.reduce((function(e,t){return e[t]=o[t],e}),{})),n=r.boxSizing;return""===n?null:(f&&"border-box"===n&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px"),{sizingStyle:r,paddingSize:parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),borderSize:parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth)})}(e);if(t){O.current=t;var r=function(e,t,o,r){void 0===o&&(o=1),void 0===r&&(r=1/0),u||((u=document.createElement("textarea")).setAttribute("tab-index","-1"),u.setAttribute("aria-hidden","true"),d(u)),null===u.parentNode&&document.body.appendChild(u);var n=e.paddingSize,i=e.borderSize,s=e.sizingStyle,a=s.boxSizing;Object.keys(s).forEach((function(e){var t=e;u.style[t]=s[t]})),d(u),u.value=t;var c=h(u,e);u.value="x";var l=u.scrollHeight-n,p=l*o;"border-box"===a&&(p=p+n+i),c=Math.max(p,c);var m=l*r;return"border-box"===a&&(m=m+n+i),[c=Math.min(m,c),l]}(t,e.value||e.placeholder||"x",a,i),n=r[0],s=r[1];T.current!==n&&(T.current=n,e.style.setProperty("height",n+"px","important"),v(n,{rowHeight:s}))}};return Object(n.useLayoutEffect)(k),E=s(k),Object(n.useEffect)((function(){var e=function(e){E.current(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(n.createElement)("textarea",r({},S,{onChange:function(e){y||k(),g(e)},ref:w}))},b=Object(n.forwardRef)(g);t.a=b},392:function(e,t,o){"use strict";o.d(t,"a",(function(){return b}));var r=o(136),n=o(156),i=o(137),s=o(157),a=o(17),c=o(117),l=o(132),d=o(93),u=o(108),h=o(215);const p="General",m="Errata",f="Author Online Forum Legacy Posts",g="Group chat";class b{constructor(e,t){this.groupChatThreadName=g,this.productCommentsMap={},this.sourceApp=e,this.deploymentType=t,this.webUtils=new c.a(a.c.getConfig(e,t)),u.a.setSourceApp(e),u.a.setDeploymentType(t)}notifyAuthor(e,t,o){return new Promise((r,n)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/notifyAuthors"),()=>r(),()=>{alert("Error notifying author about a post. Please try later."),n()},{userId:e&&e.id,commentId:t&&t.id,message:o},!1,!0)})}saveEmailNotificationChoice(e){return new Promise((t,o)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/setRecieveEmailNotifications"),()=>t(),()=>o(),{value:e},!1,!0)})}createDiscussionVisitInfo(e){return new Promise((t,o)=>{this.isSendingDiscussionVisitInfo?setTimeout(()=>{this.sendDiscussionVisitInfo(e,t,o)},500):this.sendDiscussionVisitInfo(e,t,o)})}sendDiscussionVisitInfo(e,t,o){this.isSendingDiscussionVisitInfo=!0,this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/discussionVisitInfo/createDiscussionVisitInfo"),()=>{this.isSendingDiscussionVisitInfo=!1,t()},()=>{this.isSendingDiscussionVisitInfo=!1,o()},{bookManningId:e},!1,!0)}getForumVisitInfo(){return new Promise((e,t)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/discussionVisitInfo/getDiscussionVisitInfo"),t=>{for(const o in t)"string"==typeof t[o].lastVisitDate&&(t[o].lastVisitDate=new Date(t[o].lastVisitDate)),t[o].visitedElements||(t[o].visitedElements={}),e(t)},e=>t(e),{},!1,!0)})}getNotifications(){return this.notificationsPromise?this.notificationsPromise:this.notificationsPromise=new Promise((e,t)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/getNotifications"),t=>{this.notificationsPromise=null;const o=this.getThreadsFromComments(t);e(o.map(e=>(e.isOpen=!0,new r.a(e.productTitle,new l.c(e.productExternalId,e.element,e.location,this.extractBaseLink(e.link),e.meapVersion),[e],{},{}))))},e=>{t(e),this.notificationsPromise=null},{},!1,!0)})}markAsSeen(e){return e&&0!=e.length?new Promise((t,o)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/markAsSeen"),()=>t(),e=>o(e),{commentIds:e},!1,!0)}):Promise.resolve()}getFullPathToLocationForum(e,t,o,n,i,s){return new Promise((a,c)=>{this.getProductForum(e).then(c=>{const d={locationForum:null,elementForum:null,productForum:c},h=c.elementForums.find(e=>e.element==t);null!=h?(d.elementForum=h.forum,d.locationForum=new r.a(o,new l.c(e,t,o,n,i),h.forum.threads.filter(e=>e.location==o||s&&e.location==s),c.authorIdMap,c.moderatorIdMap)):(d.elementForum=new r.a(u.a.adjustElementTitle(t),new l.c(e,t,"",n,i),[],c.authorIdMap,c.moderatorIdMap),d.locationForum=new r.a(o,new l.c(e,t,o,n,i),[],c.authorIdMap,c.moderatorIdMap)),a(d)}).catch(e=>c(e))})}getProductForums(e,t,o){const r={},n=this.sourceApp==a.b.livevideo,i=this.sourceApp==a.b.pbc;return n&&(r.onlyLiveVideos=!u.a.shouldShowLivebooks()),i&&(r.onlyLiveProjects=!0,r.courseId=o),r.onlyLiveVideos||r.onlyLiveProjects||null==e||null==t||(r.startDate=d.a.formatDate(e<t?e:t),r.endDate=d.a.formatDate(e>t?e:t)),new Promise((e,t)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/getProductsWithComments"),t=>{if(!t||!t.length)return void e([]);let o=t.map(e=>new l.e(e.productId,e.productExternalId,0,e.productSlug,e.productTitle,e.commentCount,0,d.a.getDateFromString(e.lastCommentDate),[],e.isLiveBook,e.isLiveVideo,e.isLiveProject));r.onlyLiveProjects&&(o=o.filter(e=>e.isLiveProject)),o.sort((e,t)=>e.lastCommentDate>t.lastCommentDate?-1:e.lastCommentDate<t.lastCommentDate?1:0),e(o)},e=>t(e),r,!1,!0)})}search(e,t){return new Promise((o,r)=>{const n={query:e,productExternalId:t&&t.productExternalId};u.a.groupId&&(n.groupId=u.a.groupId),this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/search"),e=>{const r=this.getProductForumsFromComments(t&&t.productId,t&&t.productExternalId,t&&t.productMeapVersion,t&&t.productTitle,t&&t.productSlug,e,[],[],[],{},t&&t.isLivebook,t&&t.isLivevideo,t&&t.isLiveProject);o(r.allThreads)},e=>r(e),n,!1,!0)})}refreshProductForum(e){return this.getProductForum(e)}getProductForum(e){return new Promise((t,o)=>{this.getProductComments(e).then(e=>{const o=new l.e(e.productId,e.productExternalId,e.productMeapVersion,e.productSlug,e.productTitle,e.numberOfComments,0,e.lastCommentDate,e.elementForums,e.isLiveBook,e.isLiveVideo,e.isLiveProject);o.authorIdMap=e.authorIdMap,o.moderatorIdMap=e.moderatorIdMap,t(o)}).catch(e=>o(e))})}getProductElementParagraphCommentCountMap(e,t){return new Promise((o,r)=>{this.getRawProductElementComments(e,t).then(e=>{const t={};if(e&&e.comments)for(const o of e.comments)t[o.location]||(t[o.location]=0),t[o.location]++;o(t)}).catch(e=>r(e))})}getRawProductElementComments(e,t){return new Promise((o,r)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/getProductElementComments"),e=>o(e),e=>r(e),{productExternalId:e,element:t},!1,!0)})}getProductComments(e){const t=`${e}-${u.a.groupId||""}`;return this.productCommentsMap[t]?this.productCommentsMap[t]:this.productCommentsMap[t]=new Promise((o,r)=>{this.getRawProductComments(e).then(r=>{r.isLiveProject&&(this.groupChatThreadName=g),this.getProductToc(e,r.isLiveBook,r.isLiveVideo,r.isLiveProject).then(n=>{const i=this.getProductForumsFromComments(r.productId,e,r.productMeapVersion,r.productTitle,r.productSlug,r.comments,r.authorIds,r.moderatorIds,r.onlineIds,this.buildElementFullNameMapFromToc(n),r.isLiveBook,r.isLiveVideo,r.isLiveProject);delete this.productCommentsMap[t],o(i)}).catch(n=>{const i=this.getProductForumsFromComments(r.productId,e,r.productMeapVersion,r.productTitle,r.productSlug,r.comments,r.authorIds,r.moderatorIds,r.onlineIds,{},r.isLiveBook,r.isLiveVideo,r.isLiveProject);delete this.productCommentsMap[t],o(i)})}).catch(e=>{delete this.productCommentsMap[t],r(e)})})}buildElementFullNameMapFromToc(e){const t={};if(!e)return t;try{if(e.chapters||e.frontMatter||e.backMatter){let o=e.chapters;if(!o){o=[];for(const t of e.parts)o.push(...t.chapters)}const r=[...e.frontMatter||[],...o||[],...e.backMatter||[]];for(const e of r)t[e.shortName]=e.title}else if(e&&e.length)for(const o of e)if(o.link&&(t[(o.link||"").replace("search/","")]=o.title),o.children&&o.children.length)for(const e of o.children)e.link&&(t[(e.link||"").replace("search/","")]=e.title)}catch(e){console.log("Error building element full name map")}return t}getRawProductComments(e){const t={productExternalId:e};return u.a.groupId&&(t.groupId=u.a.groupId),new Promise((e,o)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/getProductComments"),t=>e(t),e=>o(e),t,!1,!0)})}getProductToc(e,t,o,r){return h.a.getProductToc(new c.a(a.c.getConfig(this.sourceApp,this.deploymentType)),e,t,o,r)}getThreadsFromComments(e){const t=[];if(!e||!e.length)return t;const o={},r={},s={};e.sort((e,t)=>+e.id-+t.id);for(const a of e)if(!s[a.id])if(s[a.id]=!0,a.parent){const e=new i.a(a.id,a.text,this.getUser(r,a),a.voteScore,d.a.getDateFromString(a.dateCreated),d.a.getDateFromString(a.lastUpdated),a.link||"","isSeen"in a?!!a.isSeen:void 0,void 0,a.disableVoting||!1);e.productId=a.productId,e.oldForumId=a.oldForumId;const t=o[a.parent.id];null!=t&&t instanceof n.a&&t.posts.push(e)}else{const e=new n.a(a.id,a.title,a.text,this.getUser(r,a),a.voteScore,d.a.getDateFromString(a.dateCreated),d.a.getDateFromString(a.lastUpdated),a.link||"",!!a.isEditingSuggestion,[],a.disableVoting||!1);t.push(e),e.productId=a.productId,e.element=a.element,e.location=a.location,e.productExternalId=a.productExternalId,e.oldForumId=a.oldForumId,o[e.id]=e}return t}getProductForumsFromComments(e,t,o,s,a,c,h,b,v,S={},E,y,C){const w={productId:e,productExternalId:t,productMeapVersion:o,productTitle:s,productSlug:a,meapVersion:"",numberOfComments:0,lastCommentDate:null,elementLocationsForums:{},authorIdMap:d.a.getMapFromArray(h),moderatorIdMap:d.a.getMapFromArray(b),allThreads:[],elementForums:[],isLiveBook:E,isLiveVideo:y,isLiveProject:C},T={},O={},k={};w.numberOfComments=c.length,c.sort((e,t)=>+e.id-+t.id);for(const e of c)if(e.parent){const t=new i.a(e.id,e.text,this.getUser(k,e),e.voteScore,d.a.getDateFromString(e.dateCreated),d.a.getDateFromString(e.lastUpdated),e.link||"",!!e.isSeen,!!e.isEditingSuggestion,e.disableVoting||!1);t.meapVersion=e.meapVersion,t.productId=e.productId;const o=T[e.parent.id];null!=o&&o instanceof n.a&&o.posts.push(t)}else{const i=new n.a(e.id,e.title,e.text,this.getUser(k,e),e.voteScore,d.a.getDateFromString(e.dateCreated),d.a.getDateFromString(e.lastUpdated),e.link||"",!!e.isEditingSuggestion,[],e.disableVoting||!1);(!w.lastCommentDate||w.lastCommentDate<i.dateCreated)&&(w.lastCommentDate=i.dateCreated),i.productId=e.productId,i.element=e.element,i.location=e.location,i.meapVersion=e.meapVersion,i.oldForumId=e.oldForumId,T[i.id]=i,w.allThreads.push(i);const s=e.oldForumId?f:e.element||p,a=e.location||"",c=e.oldForumId?"":this.extractBaseLink(e.link||"");w.elementLocationsForums[s]||(w.elementLocationsForums[s]={}),O[s]||(O[s]=new l.a(s,S[s]||s,new r.a(u.a.adjustElementTitle(S[s]||s),new l.c(t,s,"",c,o),[],w.authorIdMap,w.moderatorIdMap),new Date(1970))),i.isEditingSuggestion&&u.a.shouldShowErrata&&(O[m]||(O[m]=new l.a(m,m,new r.a(m,new l.c(t,m,"",c,o),[],w.authorIdMap,w.moderatorIdMap),new Date(1970))),O[m].forum.threads.push(i)),w.elementLocationsForums[s][a]||(w.elementLocationsForums[s][a]=new r.a(a,new l.c(t,s,a,c,o),[],w.authorIdMap,w.moderatorIdMap)),w.elementLocationsForums[s][a].threads.push(i),O[s].forum.threads.push(i)}const x=this.groupChatThreadName||g;C&&u.a.shouldShowGroupChat?O[x]||(O[x]=new l.a(x,x,new r.a(x,new l.c(t,x,"","",""),[],w.authorIdMap,w.moderatorIdMap),new Date(1970))):delete O[x];const R=p;O[R]||(O[R]=new l.a(R,R,new r.a(R,new l.c(t,"","","",""),[],w.authorIdMap,w.moderatorIdMap),new Date(1970))),u.a.shouldShowErrata?O[m]?O[m].keepUniqueThreads():O[m]=new l.a(m,m,new r.a(m,new l.c(t,m,"","",""),[],w.authorIdMap,w.moderatorIdMap),new Date(1970)):delete O[m];for(const e in O){const t=O[e];if(t&&t.forum.threads){let e=t.lastCommentDate;for(const o of t.forum.threads)o.dateCreated>e&&(e=o.dateCreated),null!=o.posts&&1==o.posts.length&&o.posts[0].dateCreated>e&&(e=o.posts[0].dateCreated),o.posts.sort((t,o)=>(t.dateCreated>e&&(e=t.dateCreated),o.dateCreated>e&&(e=o.dateCreated),t.dateCreated>o.dateCreated?1:t.dateCreated<o.dateCreated?-1:0));t.lastCommentDate=e}}return w.elementForums=d.a.getArrayFromMap(O),w}extractBaseLink(e){return(e||"").replace(/\/comment-[0-9]+/i,"")}getUser(e,t){if(!e[t.userId]){const o=t.displayName||`${t.userFirstName} ${t.userLastName}`;e[t.userId]=new s.a(t.userId,o,t.avatarUrl||"")}return e[t.userId]}createThread(e){const t=this.getAdjustedForumLocation(),o={productExternalId:t.productExternalId,element:t.element,location:t.location,link:encodeURI(t.baseLink||""),title:e.title,text:e.text};return o.element!=g||u.a.groupId?(t.meapVersion&&"0"!=t.meapVersion&&(o.meapVersion=t.meapVersion),o.element!=p&&u.a.groupId&&(o.groupId=u.a.groupId),new Promise((e,t)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/create"),o=>{o.success?(null==o.comment&&t("Couldn't create comment"),e({id:o.comment.id,link:o.comment.link})):t(o.reason)},e=>t(e),o,!1,!0)})):(alert("Cannot add thread when not in a group. Try later."),Promise.reject())}createPost(e,t){const o=this.getAdjustedForumLocation(),r={productId:e.productId||"",productExternalId:e.productExternalId||o&&o.productExternalId,element:e.element||o&&o.element,location:e.location||o&&o.location,title:"",text:t.text,link:this.removeCommentIdSegment(e.link)||o&&o.baseLink||"",parent:e.id};if(r.element==g&&!u.a.groupId)return alert("Cannot add post when not in a group. Try later."),Promise.reject();const n=e.meapVersion||o&&o.meapVersion;return n&&"0"!=n&&(r.meapVersion=n),r.element!=p&&u.a.groupId&&(r.groupId=u.a.groupId),new Promise((e,t)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/create"),o=>{o.success?(null==o.comment&&t("Couldn't create comment"),e({id:o.comment.id,link:o.comment.link})):t(o.reason)},e=>t(e),r,!1,!0)})}getAdjustedForumLocation(){const e=u.a.getCurrentLocation();return this.sourceApp!=a.b.pbc||null==e||e.element!=g&&e.element!=p||(e.location=document.location.pathname),e}deletePost(e){return new Promise((t,o)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/delete"),e=>{e&&e.success?t():o("error when deleting post")},e=>o(e),{id:e.id},!1,!0)})}saveEditedPost(e){return new Promise((t,o)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/update"),e=>{e&&e.success?t():o("error when updating post")},e=>o(e),{id:e.id,text:e.text,title:e.title},!1,!0)})}votePost(e,t,o){return new Promise((e,r)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/vote"),t=>e(t),e=>r(e),{id:t.id,vote:o>0?1:-1},!1,!0)})}revokeVote(e,t){return new Promise((e,o)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/revokeVote"),t=>e(t),e=>o(e),{id:t.id},!1,!0)})}toggleEditSuggestion(e,t,o){return new Promise((e,r)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/toggleEditingSuggestion"),t=>e(t&&t.isEditingSuggestion),e=>r(e),{id:t,isEditingSuggestion:o},!1,!0)})}toggleSpam(e,t,o){return new Promise((e,r)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/toggleSpam"),t=>e(t),e=>r(e),{id:t,isSpam:o},!1,!0)})}clearSpamFlags(e){return new Promise((t,o)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/clearSpamFlags"),e=>t(),e=>o(e),{commentId:e},!1,!0)})}getVotes(e){return new Promise((t,o)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/getVotes"),e=>t(e),e=>o(e),{userId:e},!1,!0)})}getUserSpamFlags(e){return new Promise((t,o)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/getUserSpamFlags"),e=>t(e),e=>o(e),{userId:e},!1,!0)})}getUsersCommentInfo(){return new Promise((e,t)=>{this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/comment/getUsersCommentInfo"),t=>e(t),e=>t(e),{},!1,!0)})}removeCommentIdSegment(e){if(!e)return e;const t=e.indexOf("/comment-");return-1!=t?e.substr(0,t):e}}},393:function(e,t,o){var r=o(88),n=o(394);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},394:function(e,t,o){(t=o(89)(!1)).push([e.i,".avatar-container{width:36px;height:36px;line-height:36px;text-align:center;color:white;margin:0 10px 0 0;user-select:none;position:relative}.avatar-container.avatar-large{width:90px;height:90px;line-height:90px}.avatar-container.avatar-large .avatar-image,.avatar-container.avatar-large .avatar-container-change-profile{border-radius:50%;width:90px;height:90px;line-height:90px}.avatar-container.avatar-medium{width:60px;height:60px;line-height:60px}.avatar-container.avatar-medium .avatar-image,.avatar-container.avatar-medium .avatar-container-change-profile{border-radius:50%;width:60px;height:60px;line-height:60px}.avatar-container .star-icon{position:absolute;color:#fecb2f;bottom:0;right:0;width:14px}.avatar-container .avatar-image,.avatar-container .avatar-container-change-profile{border-radius:50%;width:36px;height:36px;line-height:36px;display:inline-block}.avatar-container .avatar-container-change-profile{position:absolute;top:0;left:0;right:0;bottom:0;display:none;align-items:center;justify-content:center;background-color:rgba(0,0,0,0.5);color:white;cursor:pointer}.avatar-container .avatar-container-change-profile.change-profile-side-icon{display:flex;bottom:0;right:0;top:unset;left:unset;width:25px;height:25px;background-color:gray}.avatar-container .avatar-container-change-profile.change-profile-side-icon:hover{background-color:#737373}.avatar-container .avatar-container-change-profile.change-profile-side-icon:active{background-color:#676767}.avatar-container:hover .avatar-container-change-profile{display:flex}.avatar-container .user-online-status{position:absolute;bottom:0;right:0;width:10px;height:10px;background-color:gray;border:2px solid white;border-radius:50%}.avatar-container .user-online-status.online{background-color:#68c693}.avatar-container .user-online-status-large{width:20px;height:20px;bottom:3px;right:3px}.avatar-container .user-online-status-medium{width:15px;height:15px;bottom:1px;right:1px}.avatar-container .avatar-delete-link{display:inline-flex;line-height:1;bottom:5px;position:absolute;color:gray;z-index:1;right:0;transform:translateX(120%);align-items:center}.avatar-container .clickable-link-like{cursor:pointer;color:inherit;text-decoration:none;padding:0.5em}.avatar-container .clickable-link-like:hover{text-decoration:underline}.avatar-container .clickable-link-like.selected{text-decoration:underline}\n",""]),e.exports=t},395:function(e,t,o){(t=o(89)(!1)).push([e.i,".social-modal-form .post-root-container{padding:1em 0}.social-modal-form label{display:flex;margin-bottom:1em;line-height:1.2;align-items:center}.social-modal-form label .label-text{display:inline-block;width:65px}.social-modal-form label>input{flex:1;font-size:inherit;line-height:inherit;margin:0.5em;height:auto}.social-modal-form .image-upload-container{display:flex;align-items:center;justify-content:center;border:2px black dashed;padding:2em;text-align:center;margin-bottom:1.5em;outline:none}.social-modal-form .social-modal-form-image{max-width:100%;max-height:85vh;text-align:center;display:block;margin:1.5em auto}.social-modal-form .social-modal-form-round-image{border-radius:50%}.social-modal-form .social-modal-cropp-container{display:flex;margin-bottom:0.5em}.social-modal-form .social-modal-cropp-container .social-modal-cropp-column{flex:1 1 0;text-align:center}.social-modal-form .social-modal-cropp-container .social-modal-cropp-column+.social-modal-cropp-column{margin-left:0.5em}.social-modal-form.image-upload-form .social-modal-form-image{max-height:60vh}.social-email-notifications-form label{cursor:pointer;user-select:none}.social-email-notifications-form label input{margin-left:0;margin-right:0.5em}\n",""]),e.exports=t},396:function(e,t,o){var r;e.exports=(r=o(87),function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}([function(e,t,o){e.exports=o(2)()},function(e,t){e.exports=r},function(e,t,o){"use strict";var r=o(3);function n(){}function i(){}i.resetWarningCache=n,e.exports=function(){function e(e,t,o,n,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var o={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:n};return o.PropTypes=o,o}},function(e,t,o){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return R})),o.d(t,"Component",(function(){return R})),o.d(t,"makeAspectCrop",(function(){return T})),o.d(t,"containCrop",(function(){return x}));var r=o(1),n=o.n(r),i=o(0),s=o.n(i);function a(e){var t,o,r="";if(e)if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(o=a(e[t]))&&(r&&(r+=" "),r+=o);else for(t in e)e[t]&&(o=a(t))&&(r&&(r+=" "),r+=o);else"boolean"==typeof e||e.call||(r&&(r+=" "),r+=e);return r}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function g(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){b(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function b(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var S=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return S=!0,!0}}))}catch(e){}function E(e){var t,o;if(e.touches){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],r=!0,n=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(o.push(s.value),!t||o.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.touches,1)[0];t=r.pageX,o=r.pageY}else t=e.pageX,o=e.pageY;return{x:t,y:o}}function y(e,t,o){return Math.min(Math.max(e,t),o)}function C(e){return e&&!isNaN(e.width)&&!isNaN(e.height)}function w(e){return"n"===e?"s":"ne"===e?"sw":"e"===e?"w":"se"===e?"nw":"s"===e?"n":"sw"===e?"ne":"w"===e?"e":"nw"===e?"se":e}function T(e,t,o){if(isNaN(e.aspect))return console.warn("`crop.aspect` should be a number in order to make an aspect crop",e),e;var r=g({unit:"px",x:0,y:0},e);return e.width&&(r.height=r.width/e.aspect),e.height&&(r.width=r.height*e.aspect),r.y+r.height>o&&(r.height=o-r.y,r.width=r.height*e.aspect),r.x+r.width>t&&(r.width=t-r.x,r.height=r.width/e.aspect),r}function O(e,t,o){return"%"===e.unit?e:{unit:"%",aspect:e.aspect,x:e.x/t*100,y:e.y/o*100,width:e.width/t*100,height:e.height/o*100}}function k(e,t,o){return e.unit?"px"===e.unit?e:{unit:"px",aspect:e.aspect,x:e.x*t/100,y:e.y*o/100,width:e.width*t/100,height:e.height*o/100}:g({},e,{unit:"px"})}function x(e,t,o,r){var n=k(t,o,r),i=k(e,o,r),s=g({},n);if(!n.aspect)return n.x<0?(s.x=0,s.width+=n.x):n.x+n.width>o&&(s.width=o-n.x),n.y+n.height>r&&(s.height=r-n.y),s;var a=!1;n.x<0?(s.x=0,s.width+=n.x,s.height=s.width/n.aspect,a=!0):n.x+n.width>o&&(s.width=o-n.x,s.height=s.width/n.aspect,a=!0),a&&i.y>s.y&&(s.y=n.y+(n.height-s.height));var c=!1;return s.y+s.height>r&&(s.height=r-n.y,s.width=s.height*n.aspect,c=!0),c&&i.x>s.x&&(s.x=n.x+(n.width-s.width)),s}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(s,e);var t,o,r,i=(t=s,function(){var e,o=p(t);if(h()){var r=p(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return d(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return b(u(e=i.call.apply(i,[this].concat(o))),"window","undefined"!=typeof window?window:{}),b(u(e),"document","undefined"!=typeof document?document:{}),b(u(e),"state",{}),b(u(e),"onCropMouseTouchDown",(function(t){var o=e.props,r=o.crop,n=o.disabled,i=e.mediaDimensions,s=k(r,i.width,i.height);if(!n){t.preventDefault();var a=E(t);e.componentRef.setActive?e.componentRef.setActive({preventScroll:!0}):e.componentRef.focus({preventScroll:!0});var c,l=t.target.dataset.ord,d="nw"===l||"w"===l||"sw"===l,u="nw"===l||"n"===l||"ne"===l;s.aspect&&(c=e.getElementOffset(e.cropSelectRef)),e.evData={clientStartX:a.x,clientStartY:a.y,cropStartWidth:s.width,cropStartHeight:s.height,cropStartX:d?s.x+s.width:s.x,cropStartY:u?s.y+s.height:s.y,xInversed:d,yInversed:u,xCrossOver:d,yCrossOver:u,startXCrossOver:d,startYCrossOver:u,isResize:t.target.dataset.ord,ord:l,cropOffset:c},e.mouseDownOnCrop=!0,e.setState({cropIsActive:!0})}})),b(u(e),"onComponentMouseTouchDown",(function(t){var o=e.props,r=o.crop,n=o.disabled,i=o.locked,s=o.keepSelection,a=o.onChange,c=e.mediaWrapperRef.firstChild;if(t.target===c&&c.contains(t.target)&&!(n||i||s&&C(r))){t.preventDefault();var l=E(t);e.componentRef.setActive?e.componentRef.setActive({preventScroll:!0}):e.componentRef.focus({preventScroll:!0});var d=e.getElementOffset(e.mediaWrapperRef),u=l.x-d.left,h=l.y-d.top,p={unit:"px",aspect:r?r.aspect:void 0,x:u,y:h,width:0,height:0};e.evData={clientStartX:l.x,clientStartY:l.y,cropStartWidth:p.width,cropStartHeight:p.height,cropStartX:p.x,cropStartY:p.y,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},e.mouseDownOnCrop=!0;var m=e.mediaDimensions,f=m.width,g=m.height;a(k(p,f,g),O(p,f,g)),e.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}})),b(u(e),"onDocMouseTouchMove",(function(t){var o=e.props,r=o.crop,n=o.disabled,i=o.onChange,s=o.onDragStart;if(!n&&e.mouseDownOnCrop){t.preventDefault(),e.dragStarted||(e.dragStarted=!0,s(t));var a,c=u(e).evData,l=E(t);if(c.isResize&&r.aspect&&c.cropOffset&&(l.y=e.straightenYPath(l.x)),c.xDiff=l.x-c.clientStartX,c.yDiff=l.y-c.clientStartY,(a=c.isResize?e.resizeCrop():e.dragCrop())!==r){var d=e.mediaDimensions,h=d.width,p=d.height;i(k(a,h,p),O(a,h,p))}}})),b(u(e),"onComponentKeyDown",(function(t){var o=e.props,r=o.crop,n=o.disabled,i=o.onChange,a=o.onComplete;if(!n){var c=t.key,l=!1;if(C(r)){var d=e.makeNewCrop(),u=t.shiftKey?s.nudgeStepLarge:s.nudgeStep;if("ArrowLeft"===c?(d.x-=u,l=!0):"ArrowRight"===c?(d.x+=u,l=!0):"ArrowUp"===c?(d.y-=u,l=!0):"ArrowDown"===c&&(d.y+=u,l=!0),l){t.preventDefault();var h=e.mediaDimensions,p=h.width,m=h.height;d.x=y(d.x,0,p-d.width),d.y=y(d.y,0,m-d.height);var f=k(d,p,m),g=O(d,p,m);i(f,g),a(f,g)}}}})),b(u(e),"onDocMouseTouchEnd",(function(t){var o=e.props,r=o.crop,n=o.disabled,i=o.onComplete,s=o.onDragEnd;if(!n&&e.mouseDownOnCrop){e.mouseDownOnCrop=!1,e.dragStarted=!1;var a=e.mediaDimensions,c=a.width,l=a.height;s(t),i(k(r,c,l),O(r,c,l)),e.setState({cropIsActive:!1,newCropIsBeingDrawn:!1})}})),b(u(e),"onMediaLoaded",(function(){var t=e.props,o=t.onComplete,r=t.onChange,n=e.createNewCrop(),i=n.pixelCrop,s=n.percentCrop;r(i,s),o(i,s)})),e}return o=s,(r=[{key:"componentDidMount",value:function(){if(this.document.addEventListener){var e=!!S&&{passive:!1};this.document.addEventListener("mousemove",this.onDocMouseTouchMove,e),this.document.addEventListener("touchmove",this.onDocMouseTouchMove,e),this.document.addEventListener("mouseup",this.onDocMouseTouchEnd,e),this.document.addEventListener("touchend",this.onDocMouseTouchEnd,e),this.document.addEventListener("touchcancel",this.onDocMouseTouchEnd,e),this.componentRef.addEventListener("medialoaded",this.onMediaLoaded)}}},{key:"componentWillUnmount",value:function(){this.document.removeEventListener&&(this.document.removeEventListener("mousemove",this.onDocMouseTouchMove),this.document.removeEventListener("touchmove",this.onDocMouseTouchMove),this.document.removeEventListener("mouseup",this.onDocMouseTouchEnd),this.document.removeEventListener("touchend",this.onDocMouseTouchEnd),this.document.removeEventListener("touchcancel",this.onDocMouseTouchEnd),this.componentRef.removeEventListener("medialoaded",this.onMediaLoaded))}},{key:"componentDidUpdate",value:function(e){var t=this.props.crop;if(this.imageRef&&e.crop!==t&&t.aspect&&(t.width&&!t.height||!t.width&&t.height)){var o=this.imageRef,r=o.width,n=o.height,i=T(this.makeNewCrop(),r,n),s=k(i,r,n),a=O(i,r,n);this.props.onChange(s,a),this.props.onComplete(s,a)}}},{key:"createNewCrop",value:function(){var e=this.mediaDimensions,t=e.width,o=e.height,r=function(e,t,o){return!e.aspect||e.width&&e.height?e:T(e,t,o)}(this.makeNewCrop(),t,o);return{pixelCrop:k(r,t,o),percentCrop:O(r,t,o)}}},{key:"onImageLoad",value:function(e){var t=this.props,o=t.onComplete,r=t.onChange;if(!1!==(0,t.onImageLoaded)(e)){var n=this.createNewCrop(),i=n.pixelCrop,s=n.percentCrop;r(i,s),o(i,s)}}},{key:"getDocumentOffset",value:function(){var e=this.document.documentElement||{},t=e.clientTop,o=void 0===t?0:t,r=e.clientLeft;return{clientTop:o,clientLeft:void 0===r?0:r}}},{key:"getWindowOffset",value:function(){var e=this.window,t=e.pageYOffset,o=void 0===t?0:t,r=e.pageXOffset;return{pageYOffset:o,pageXOffset:void 0===r?0:r}}},{key:"getElementOffset",value:function(e){var t=e.getBoundingClientRect(),o=this.getDocumentOffset(),r=this.getWindowOffset();return{top:t.top+r.pageYOffset-o.clientTop,left:t.left+r.pageXOffset-o.clientLeft}}},{key:"getCropStyle",value:function(){var e=this.makeNewCrop(this.props.crop?this.props.crop.unit:"px");return{top:"".concat(e.y).concat(e.unit),left:"".concat(e.x).concat(e.unit),width:"".concat(e.width).concat(e.unit),height:"".concat(e.height).concat(e.unit)}}},{key:"getNewSize",value:function(){var e,t=this.props,o=t.crop,r=t.minWidth,n=t.maxWidth,i=t.minHeight,s=t.maxHeight,a=this.evData,c=this.mediaDimensions,l=c.width,d=c.height,u=a.cropStartWidth+a.xDiff;return a.xCrossOver&&(u=Math.abs(u)),u=y(u,r,n||l),e=o.aspect?u/o.aspect:a.cropStartHeight+a.yDiff,a.yCrossOver&&(e=Math.min(Math.abs(e),a.cropStartY)),e=y(e,i,s||d),o.aspect&&(u=y(e*o.aspect,0,l)),{width:u,height:e}}},{key:"dragCrop",value:function(){var e=this.makeNewCrop(),t=this.evData,o=this.mediaDimensions,r=o.width,n=o.height;return e.x=y(t.cropStartX+t.xDiff,0,r-e.width),e.y=y(t.cropStartY+t.yDiff,0,n-e.height),e}},{key:"resizeCrop",value:function(){var e=this.evData,t=this.makeNewCrop(),o=e.ord;e.xInversed&&(e.xDiff-=2*e.cropStartWidth,e.xDiffPc-=2*e.cropStartWidth),e.yInversed&&(e.yDiff-=2*e.cropStartHeight,e.yDiffPc-=2*e.cropStartHeight);var r=this.getNewSize(),n=e.cropStartX,i=e.cropStartY;e.xCrossOver&&(n=t.x+(t.width-r.width)),e.yCrossOver&&(i=!1===e.lastYCrossover?t.y-r.height:t.y+(t.height-r.height));var a=this.mediaDimensions,c=a.width,l=a.height,d=x(this.props.crop,{unit:t.unit,x:n,y:i,width:r.width,height:r.height,aspect:t.aspect},c,l);return t.aspect||s.xyOrds.indexOf(o)>-1?(t.x=d.x,t.y=d.y,t.width=d.width,t.height=d.height):s.xOrds.indexOf(o)>-1?(t.x=d.x,t.width=d.width):s.yOrds.indexOf(o)>-1&&(t.y=d.y,t.height=d.height),e.lastYCrossover=e.yCrossOver,this.crossOverCheck(),t}},{key:"straightenYPath",value:function(e){var t,o,r=this.evData,n=r.ord,i=r.cropOffset,s=r.cropStartWidth,a=r.cropStartHeight;return"nw"===n||"se"===n?(t=a/s,o=i.top-i.left*t):(t=-a/s,o=i.top+(a-i.left*t)),t*e+o}},{key:"createCropSelection",value:function(){var e=this,t=this.props,o=t.disabled,r=t.locked,i=t.renderSelectionAddon,s=t.ruleOfThirds,a=this.getCropStyle();return n.a.createElement("div",{ref:function(t){return e.cropSelectRef=t},style:a,className:"ReactCrop__crop-selection",onMouseDown:this.onCropMouseTouchDown,onTouchStart:this.onCropMouseTouchDown,tabIndex:"0"},!o&&!r&&n.a.createElement("div",{className:"ReactCrop__drag-elements"},n.a.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),n.a.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),n.a.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),n.a.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),n.a.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw"}),n.a.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n"}),n.a.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne"}),n.a.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e"}),n.a.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se"}),n.a.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s"}),n.a.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw"}),n.a.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w"})),i&&n.a.createElement("div",{className:"ReactCrop__selection-addon",onMouseDown:function(e){return e.stopPropagation()}},i(this.state)),s&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),n.a.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}},{key:"makeNewCrop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"px",t=g({},s.defaultCrop,{},this.props.crop),o=this.mediaDimensions,r=o.width,n=o.height;return"px"===e?k(t,r,n):O(t,r,n)}},{key:"crossOverCheck",value:function(){var e=this.evData,t=this.props,o=t.minWidth,r=t.minHeight;!o&&(!e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff>=0||e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff<=0)&&(e.xCrossOver=!e.xCrossOver),!r&&(!e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff>=0||e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff<=0)&&(e.yCrossOver=!e.yCrossOver);var n=e.xCrossOver!==e.startXCrossOver,i=e.yCrossOver!==e.startYCrossOver;e.inversedXOrd=!!n&&w(e.ord),e.inversedYOrd=!!i&&w(e.ord)}},{key:"render",value:function(){var e=this,t=this.props,o=t.children,r=t.circularCrop,i=t.className,s=t.crossorigin,c=t.crop,l=t.disabled,d=t.locked,u=t.imageAlt,h=t.onImageError,p=t.renderComponent,m=t.src,f=t.style,g=t.imageStyle,b=t.ruleOfThirds,v=this.state,S=v.cropIsActive,E=v.newCropIsBeingDrawn,y=C(c)&&this.componentRef?this.createCropSelection():null,w=function(){for(var e,t=0,o="";t<arguments.length;)(e=a(arguments[t++]))&&(o&&(o+=" "),o+=e);return o}("ReactCrop",i,{"ReactCrop--active":S,"ReactCrop--disabled":l,"ReactCrop--locked":d,"ReactCrop--new-crop":E,"ReactCrop--fixed-aspect":c&&c.aspect,"ReactCrop--circular-crop":c&&r,"ReactCrop--rule-of-thirds":c&&b,"ReactCrop--invisible-crop":!this.dragStarted&&c&&!c.width&&!c.height});return n.a.createElement("div",{ref:function(t){e.componentRef=t},className:w,style:f,onTouchStart:this.onComponentMouseTouchDown,onMouseDown:this.onComponentMouseTouchDown,tabIndex:"0",onKeyDown:this.onComponentKeyDown},n.a.createElement("div",{ref:function(t){e.mediaWrapperRef=t}},p||n.a.createElement("img",{ref:function(t){return e.imageRef=t},crossOrigin:s,className:"ReactCrop__image",style:g,src:m,onLoad:function(t){return e.onImageLoad(t.target)},onError:h,alt:u})),o,y)}},{key:"mediaDimensions",get:function(){var e=this.mediaWrapperRef;return{width:e.clientWidth,height:e.clientHeight}}}])&&l(o.prototype,r),s}(r.PureComponent);R.xOrds=["e","w"],R.yOrds=["n","s"],R.xyOrds=["nw","ne","se","sw"],R.nudgeStep=.2,R.nudgeStepLarge=2,R.defaultCrop={x:0,y:0,width:0,height:0,unit:"px"},R.propTypes={className:s.a.string,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]),circularCrop:s.a.bool,crop:s.a.shape({aspect:s.a.number,x:s.a.number,y:s.a.number,width:s.a.number,height:s.a.number,unit:s.a.oneOf(["px","%"])}),crossorigin:s.a.string,disabled:s.a.bool,locked:s.a.bool,imageAlt:s.a.string,imageStyle:s.a.shape({}),keepSelection:s.a.bool,minWidth:s.a.number,minHeight:s.a.number,maxWidth:s.a.number,maxHeight:s.a.number,onChange:s.a.func.isRequired,onImageError:s.a.func,onComplete:s.a.func,onImageLoaded:s.a.func,onDragStart:s.a.func,onDragEnd:s.a.func,src:s.a.string.isRequired,style:s.a.shape({}),renderComponent:s.a.node,renderSelectionAddon:s.a.func,ruleOfThirds:s.a.bool},R.defaultProps={circularCrop:!1,className:void 0,crop:void 0,crossorigin:void 0,disabled:!1,locked:!1,imageAlt:"",maxWidth:void 0,maxHeight:void 0,minWidth:0,minHeight:0,keepSelection:!1,onComplete:function(){},onImageError:function(){},onImageLoaded:function(){},onDragStart:function(){},onDragEnd:function(){},children:void 0,style:void 0,renderComponent:void 0,imageStyle:void 0,renderSelectionAddon:void 0,ruleOfThirds:!1}}]))},397:function(e,t,o){var r=o(88),n=o(398);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},398:function(e,t,o){(t=o(89)(!1)).push([e.i,".ReactCrop{position:relative;display:inline-block;cursor:crosshair;overflow:hidden;max-width:100%}.ReactCrop:focus{outline:none}.ReactCrop--disabled,.ReactCrop--locked{cursor:inherit}.ReactCrop__image{display:block;max-width:100%;touch-action:manipulation}.ReactCrop__crop-selection{position:absolute;top:0;left:0;transform:translate3d(0, 0, 0);box-sizing:border-box;cursor:move;box-shadow:0 0 0 9999em rgba(0,0,0,0.5);touch-action:manipulation;border:1px solid;border-image-source:url(\"data:image/gif;base64,R0lGODlhCgAKAJECAAAAAP///////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI5RDc5MTFDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI5RDc5MTBDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoAAgAsAAAAAAoACgAAAhWEERkn7W3ei7KlagMWF/dKgYeyGAUAIfkEBQoAAgAsAAAAAAoACgAAAg+UYwLJ7RnQm7QmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYgLJHdiinNSAVfOEKoUCACH5BAUKAAIALAAAAAAKAAoAAAIRVISAdusPo3RAzYtjaMIaUQAAIfkEBQoAAgAsAAAAAAoACgAAAg+MDiem7Q8bSLFaG5il6xQAIfkEBQoAAgAsAAAAAAoACgAAAg+UYRLJ7QnQm7SmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYBLJDdiinNSEVfOEKoECACH5BAUKAAIALAAAAAAKAAoAAAIRFISBdusPo3RBzYsjaMIaUQAAOw==\");border-image-slice:1;border-image-repeat:repeat}.ReactCrop--disabled .ReactCrop__crop-selection{cursor:inherit}.ReactCrop--circular-crop .ReactCrop__crop-selection{border-radius:50%;box-shadow:0px 0px 1px 1px white,0 0 0 9999em rgba(0,0,0,0.5)}.ReactCrop--invisible-crop .ReactCrop__crop-selection{display:none}.ReactCrop__rule-of-thirds-vt::before,.ReactCrop__rule-of-thirds-vt::after,.ReactCrop__rule-of-thirds-hz::before,.ReactCrop__rule-of-thirds-hz::after{content:'';display:block;position:absolute;background-color:rgba(255,255,255,0.4)}.ReactCrop__rule-of-thirds-vt::before,.ReactCrop__rule-of-thirds-vt::after{width:1px;height:100%}.ReactCrop__rule-of-thirds-vt::before{left:33.3333%;left:calc(100% / 3)}.ReactCrop__rule-of-thirds-vt::after{left:66.6666%;left:calc(100% / 3 * 2)}.ReactCrop__rule-of-thirds-hz::before,.ReactCrop__rule-of-thirds-hz::after{width:100%;height:1px}.ReactCrop__rule-of-thirds-hz::before{top:33.3333%;top:calc(100% / 3)}.ReactCrop__rule-of-thirds-hz::after{top:66.6666%;top:calc(100% / 3 * 2)}.ReactCrop__drag-handle{position:absolute}.ReactCrop__drag-handle::after{position:absolute;content:'';display:block;width:10px;height:10px;background-color:rgba(0,0,0,0.2);border:1px solid rgba(255,255,255,0.7);box-sizing:border-box;outline:1px solid transparent}.ReactCrop .ord-nw{top:0;left:0;margin-top:-5px;margin-left:-5px;cursor:nw-resize}.ReactCrop .ord-nw::after{top:0;left:0}.ReactCrop .ord-n{top:0;left:50%;margin-top:-5px;margin-left:-5px;cursor:n-resize}.ReactCrop .ord-n::after{top:0}.ReactCrop .ord-ne{top:0;right:0;margin-top:-5px;margin-right:-5px;cursor:ne-resize}.ReactCrop .ord-ne::after{top:0;right:0}.ReactCrop .ord-e{top:50%;right:0;margin-top:-5px;margin-right:-5px;cursor:e-resize}.ReactCrop .ord-e::after{right:0}.ReactCrop .ord-se{bottom:0;right:0;margin-bottom:-5px;margin-right:-5px;cursor:se-resize}.ReactCrop .ord-se::after{bottom:0;right:0}.ReactCrop .ord-s{bottom:0;left:50%;margin-bottom:-5px;margin-left:-5px;cursor:s-resize}.ReactCrop .ord-s::after{bottom:0}.ReactCrop .ord-sw{bottom:0;left:0;margin-bottom:-5px;margin-left:-5px;cursor:sw-resize}.ReactCrop .ord-sw::after{bottom:0;left:0}.ReactCrop .ord-w{top:50%;left:0;margin-top:-5px;margin-left:-5px;cursor:w-resize}.ReactCrop .ord-w::after{left:0}.ReactCrop__disabled .ReactCrop__drag-handle{cursor:inherit}.ReactCrop__drag-bar{position:absolute}.ReactCrop__drag-bar.ord-n{top:0;left:0;width:100%;height:6px;margin-top:-3px}.ReactCrop__drag-bar.ord-e{right:0;top:0;width:6px;height:100%;margin-right:-3px}.ReactCrop__drag-bar.ord-s{bottom:0;left:0;width:100%;height:6px;margin-bottom:-3px}.ReactCrop__drag-bar.ord-w{top:0;left:0;width:6px;height:100%;margin-left:-3px}.ReactCrop--new-crop .ReactCrop__drag-bar,.ReactCrop--new-crop .ReactCrop__drag-handle,.ReactCrop--fixed-aspect .ReactCrop__drag-bar{display:none}.ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-n,.ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-e,.ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-s,.ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-w{display:none}@media (pointer: coarse){.ReactCrop .ord-n,.ReactCrop .ord-e,.ReactCrop .ord-s,.ReactCrop .ord-w{display:none}.ReactCrop__drag-handle{width:24px;height:24px}}\n",""]),e.exports=t},592:function(e,t,o){var r=o(88),n=o(723);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},60:function(e,t,o){"use strict";o.r(t),o.d(t,"DiscussionParagraphNotifications",(function(){return c}));var r=o(392),n=o(6),i=o(164),s=o(17),a=o(3);const c=new class{constructor(){this.socialWebProvider=new r.a(s.b.livebook,a.a.getDeploymentType())}initialize(e,t){n.a.isLoggedIn().then(()=>this._initialize(e,t)).catch(()=>this._initialize(e,t))}_initialize(e,t,o){null==e||null==t||t.reviewVersion||this.socialWebProvider.getProductElementParagraphCommentCountMap(e.shortName,null!=t?t.shortName:o).then(o=>{if(null!=e&&null!=t)for(const e in o){if(!e)continue;const t=$(`[data-hash=${e}], [refid='${e}']`);if(t.length>0){const r=t[0];i.a.createParagraphBubble(r),$(document).trigger("paragraphButtonsSetForumCount",[r.paragraphBubble,o[e]])}}})}}},685:function(e,t,o){"use strict";o.d(t,"a",(function(){return D}));var r="en",n={};function i(){return r}function s(e){return n[e]}function a(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).localeMatcher||"lookup";switch(t){case"lookup":case"best fit":return c(e);default:throw new RangeError('Invalid "localeMatcher" option: '.concat(t))}}function c(e){if(s(e))return e;for(var t=e.split("-");e.length>1;)if(t.pop(),s(e=t.join("-")))return e}function l(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var u=["second","minute","hour","day","week","month","quarter","year"],h=["auto","always"],p=["long","short","narrow"],m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"numeric","always"),d(this,"style","long"),d(this,"localeMatcher","lookup");var r=o.numeric,n=o.style,s=o.localeMatcher;if(r){if(h.indexOf(r)<0)throw new RangeError('Invalid "numeric" option: '.concat(r));this.numeric=r}if(n){if(p.indexOf(n)<0)throw new RangeError('Invalid "style" option: '.concat(n));this.style=n}if(s&&(this.localeMatcher=s),"string"==typeof t&&(t=[t]),t.push(i()),this.locale=e.supportedLocalesOf(t,{localeMatcher:this.localeMatcher})[0],!this.locale)throw new TypeError("No supported locale was found");this.locale=a(this.locale,{localeMatcher:this.localeMatcher}),"undefined"!=typeof Intl&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale))}var t,o,r;return t=e,(o=[{key:"format",value:function(e,t){return this.getRule(e,t).replace("{0}",this.formatNumber(Math.abs(e)))}},{key:"formatToParts",value:function(e,t){var o=this.getRule(e,t),r=o.indexOf("{0}");if(r<0)return[{type:"literal",value:o}];var n=[];return r>0&&n.push({type:"literal",value:o.slice(0,r)}),n.push({unit:t,type:"integer",value:this.formatNumber(Math.abs(e))}),r+"{0}".length<o.length-1&&n.push({type:"literal",value:o.slice(r+"{0}".length)}),n}},{key:"getRule",value:function(e,t){if(u.indexOf(t)<0)throw new RangeError("Unknown time unit: ".concat(t,"."));var o=s(this.locale)[this.style][t];if("auto"===this.numeric)if(-2===e||-1===e){var r=o["previous".concat(-1===e?"":"-"+Math.abs(e))];if(r)return r}else if(1===e||2===e){var n=o["next".concat(1===e?"":"-"+Math.abs(e))];if(n)return n}else if(0===e&&o.current)return o.current;var i=o[e<=0?"past":"future"];if("string"==typeof i)return i;var a=s(this.locale).quantify,c=a&&a(Math.abs(e));return i[c=c||"other"]||i.other}},{key:"formatNumber",value:function(e){return this.numberFormat?this.numberFormat.format(e):String(e)}},{key:"resolvedOptions",value:function(){return{locale:this.locale,style:this.style,numeric:this.numeric}}}])&&l(t.prototype,o),r&&l(t,r),e}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}m.supportedLocalesOf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.filter((function(e){return a(e,t)}))},m.addLocale=function(e){if(!e)throw new Error("No locale data passed");n[e.locale]=e},m.setDefaultLocale=function(e){r=e},m.getDefaultLocale=i;var b=function(){function e(){var t,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r={},(o="cache")in(t=this)?Object.defineProperty(t,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[o]=r}var t,o,r;return t=e,(o=[{key:"get",value:function(){for(var e=this.cache,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];for(var n=0;n<o.length;n++){var i=o[n];if("object"!==f(e))return;e=e[i]}return e}},{key:"put",value:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];for(var r=t.pop(),n=t.pop(),i=this.cache,s=0;s<t.length;s++){var a=t[s];"object"!==f(i[a])&&(i[a]={}),i=i[a]}return i[n]=r}}])&&g(t.prototype,o),r&&g(t,r),e}(),v=86400;function S(e,t){var o=e,r=Array.isArray(o),n=0;for(o=r?o:o[Symbol.iterator]();;){var i;if(r){if(n>=o.length)break;i=o[n++]}else{if((n=o.next()).done)break;i=n.value}var s=i;if(s.unit===t)return s}}function E(e){return e instanceof Date?e:new Date(e)}var y=[{factor:1,unit:"now"},{threshold:1,threshold_for_now:45,factor:1,unit:"second"},{threshold:45,factor:60,unit:"minute"},{threshold:150,factor:60,granularity:5,unit:"minute"},{threshold:1350,factor:1800,unit:"half-hour"},{threshold:2550,threshold_for_minute:3150,factor:3600,unit:"hour"},{threshold:73800,factor:v,unit:"day"},{threshold:475200,factor:7*v,unit:"week"},{threshold:2116800,factor:2630016,unit:"month"},{threshold:27615168,factor:31556952,unit:"year"}];function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y;if(0!==(r=function(e,t){return e.filter((function(e){var o=e.unit;return!o||t.indexOf(o)>=0}))}(r,o)).length){var n=function e(t,o,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(Math.abs(t)<function(e,t,o,r){var n;e&&(e.id||e.unit)&&(n=t["threshold_for_".concat(e.id||e.unit)]);void 0===n&&(n=t.threshold);"function"==typeof n&&(n=n(o,r));if(e&&"number"!=typeof n){var i=C(n);throw new Error('Each step of a gradation must have a threshold defined except for the first one. Got "'.concat(n,'", ').concat(i,". Step: ").concat(JSON.stringify(t)))}return n}(r[n-1],r[n],o,t<0))return n-1;if(n===r.length-1)return n;return e(t,o,r,n+1)}(e,t,r),i=r[n];if(-1!==n){if(i.granularity)if(0===Math.round(Math.abs(e)/i.factor/i.granularity)*i.granularity&&n>0)return r[n-1];return i}}}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){return"object"===("undefined"==typeof Intl?"undefined":T(Intl))&&"function"==typeof Intl.DateTimeFormat}var k={gradation:y,flavour:["long-convenient","long"],units:["now","minute","hour","day","week","month","year"]},x=[{factor:1,unit:"now"},{threshold:.5,factor:1,unit:"second"},{threshold:59.5,factor:60,unit:"minute"},{threshold:3570,factor:3600,unit:"hour"},{threshold:84600,factor:v,unit:"day"},{threshold:561600,factor:7*v,unit:"week"},{threshold:2116800,factor:2630016,unit:"month"},{threshold:30245184,factor:31556952,unit:"year"}];function R(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),r.forEach((function(t){A(e,t,o[t])}))}return e}function A(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var _={},F={gradation:[R({},S(x,"minute"),{threshold:59.5}),R({},S(x,"hour"),{threshold:3570}),{threshold:84600,format:function(e,t){if(O())return _[t]||(_[t]={}),_[t].this_year||(_[t].this_year=new Intl.DateTimeFormat(t,{month:"short",day:"numeric"})),_[t].this_year.format(E(e))}},{threshold:function(e,t){return t?(new Date(new Date(e).getFullYear()+1,0).getTime()-e)/1e3:(e-new Date(new Date(e).getFullYear(),0).getTime())/1e3},format:function(e,t){if(O())return _[t]||(_[t]={}),_[t].other||(_[t].other=new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"})),_[t].other.format(E(e))}}],flavour:["tiny","short-time","narrow","short"]},I={gradation:y,flavour:"long-time",units:["now","minute","hour","day","week","month","year"]},P={};function N(e){return P[e]}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t&&(t=[t]),this.locale=function(e,t){var o=e,r=Array.isArray(o),n=0;for(o=r?o:o[Symbol.iterator]();;){var i;if(r){if(n>=o.length)break;i=o[n++]}else{if((n=o.next()).done)break;i=n.value}var s=i;if(t(s))return s;for(var a=s.split("-");a.length>1;)if(a.pop(),t(s=a.join("-")))return s}throw new Error("No locale data has been registered for any of the locales: ".concat(e.join(", ")))}(t.concat(m.getDefaultLocale()),N),"undefined"!=typeof Intl&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale)),this.relativeTimeFormatCache=new b}var t,o,r;return t=e,(o=[{key:"format",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;if("string"==typeof t)switch(t){case"twitter":t=F;break;case"time":t=I;break;default:t=k}var o=U(e),r=o.date,n=o.time,i=this.getLocaleData(t.flavour),s=i.flavour,a=i.localeData,c=t.now||Date.now(),l=(c-n)/1e3;if(t.custom){var d=t.custom({now:c,date:r,time:n,elapsed:l,locale:this.locale});if(void 0!==d)return d}var u=j(a,t.units);if(0===u.length)return console.error('Units "'.concat(u.join(", "),'" were not found in locale data for "').concat(this.locale,'".')),"";var h=w(l,c,u,t.gradation);if(!h)return"";if(h.format)return h.format(r||n,this.locale);var p=h.unit,m=h.factor,f=h.granularity,g=Math.abs(l)/m;if(f&&(g=Math.round(g/f)*f),"now"===p)return B(a,-1*Math.sign(l));switch(s){case"long":case"short":case"narrow":return this.getFormatter(s).format(-1*Math.sign(l)*Math.round(g),p);default:return this.formatValue(-1*Math.sign(l)*Math.round(g),p,a)}}},{key:"formatValue",value:function(e,t,o){return this.getRule(e,t,o).replace("{0}",this.formatNumber(Math.abs(e)))}},{key:"getRule",value:function(e,t,o){var r=o[t];if("string"==typeof r)return r;var n=r[e<=0?"past":"future"]||r;if("string"==typeof n)return n;var i=N(this.locale).quantify,s=i&&i(Math.abs(e));return n[s=s||"other"]||n.other}},{key:"formatNumber",value:function(e){return this.numberFormat?this.numberFormat.format(e):String(e)}},{key:"getFormatter",value:function(e){return this.relativeTimeFormatCache.get(this.locale,e)||this.relativeTimeFormatCache.put(this.locale,e,new m(this.locale,{style:e}))}},{key:"getLocaleData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=N(this.locale);"string"==typeof e&&(e=[e]);var o=e=e.concat("long"),r=Array.isArray(o),n=0;for(o=r?o:o[Symbol.iterator]();;){var i;if(r){if(n>=o.length)break;i=o[n++]}else{if((n=o.next()).done)break;i=n.value}var s=i;if(t[s])return{flavour:s,localeData:t[s]}}}}])&&L(t.prototype,o),r&&L(t,r),e}();function U(e){if(e.constructor===Date||"object"===M(t=e)&&"function"==typeof t.getTime)return{date:e,time:e.getTime()};var t;if("number"==typeof e)return{time:e};throw new Error("Unsupported relative time formatter input: ".concat(M(e),", ").concat(e))}function j(e,t){var o=Object.keys(e);return t&&(o=t.filter((function(e){return o.indexOf(e)>=0}))),(!t||t.indexOf("now")>=0)&&o.indexOf("now")<0&&e.second.current&&o.unshift("now"),o}function B(e,t){return e.now?"string"==typeof e.now?e.now:t<=0?e.now.past:e.now.future:e.second.current}D.getDefaultLocale=m.getDefaultLocale,D.setDefaultLocale=m.setDefaultLocale,D.addLocale=function(e){!function(e){if(!e)throw new Error("[javascript-time-ago] No locale data passed.");P[e.locale]=e}(e),m.addLocale(e)},D.locale=D.addLocale},703:function(e,t,o){var r=o(88),n=o(704);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},704:function(e,t,o){(t=o(89)(!1)).push([e.i,".product-forum-root{font-size:14px;color:#333333;background-color:white;border-left:1px solid lightgray;display:flex;flex-direction:column;height:100%}.product-forum-root .clickable-link-like{cursor:pointer}.product-forum-root .clickable-link-like:hover{text-decoration:underline}.product-forum-root .forum-loading-container{text-align:center;border-top:1px solid lightgray}.product-forum-root:not(.forum-header-showing-search)>.social-message-container{border-top:1px solid lightgray}.product-forum-root>.social-scrollable-container{flex:1 1 auto;overflow-y:auto;overscroll-behavior-y:none;-webkit-overflow-scrolling:touch;-ms-scroll-chaining:none}.product-forum-root a{color:#3C67A2}.product-forum-root>ul,.product-forum-root .social-scrollable-container ul{list-style:none;margin:0;padding:0}.product-forum-root .user-comment-content-container .user-comment-text-container ul{list-style:disc;padding-left:2em}.product-forum-root ul{font-size:inherit}.product-forum-root p{font-size:inherit;line-height:inherit}.product-forum-root code{color:#333;background-color:initial;border:none;border-width:1px;padding:0}.product-forum-root .non-selectable{color:gray;font-size:80%;user-select:none;cursor:default}.product-forum-root .discussions-button{display:inline-block;text-align:center;color:#3c3c3c;background-color:white;padding:0.5em 1em;user-select:none;cursor:pointer;font-weight:400}.product-forum-root .thread-post-summary-root .thread-post-summary-open-thread-link{display:flex;align-items:center;cursor:pointer;user-select:none}.product-forum-root .thread-post-summary-root .thread-post-summary-open-thread-link .avatar-container{margin-right:0;width:20px;height:20px;line-height:20px;font-size:70%}.product-forum-root .thread-post-summary-root .thread-post-summary-open-thread-link .avatar-container .avatar-image{width:20px;height:20px;line-height:20px}.product-forum-root .thread-post-summary-root .thread-post-summary-open-thread-link .avatar-container .user-online-status{width:7px;height:7px;border-width:1px}.product-forum-root .thread-post-summary-root .thread-post-summary-open-thread-link:hover .clickable-link-like{text-decoration:underline}.product-forum-root .label-separator{margin:0 0.4em}.product-forum-root a{color:#3C67A2;text-decoration:none}.product-forum-root .user-comment-content-container .post-input-root{padding:0.5em 0 0.5em 0.5em;border-top:none;margin-bottom:0}.product-forum-root .post-root-container .post-input-root{padding:0}.product-forum-root .syncing-frame{position:absolute;top:0;left:0;right:0;bottom:0}.product-forum-root .product-forum-summary-title .label-separator,.product-forum-root .element-forum-title .label-separator{margin:0 0.25em}.product-forum-root .thread-root-container,.product-forum-root .post-input-root,.product-forum-root .forum-header-root .forum-header-input-container,.product-forum-root .thread-input-root,.product-forum-root .threads-summary-root{padding-left:1em;padding-right:1em}.product-forum-root .forum-header-root .forum-header,.product-forum-root .product-forum-summary-root,.product-forum-root .element-forum-root,.product-forum-root .social-message-container,.product-forum-root .social-search-link,.product-forum-root .toggle-livebooks-link{padding:1em}.product-forum-root .post-input-root,.product-forum-root .thread-input-root{margin-bottom:1em;padding-top:1em}.product-forum-root .post-input-sign-in-root,.product-forum-root .thread-input-sign-in-root{padding:0.5em 0;margin-bottom:0}.product-forum-root .thread-root-container,.product-forum-root .threads-summary-root{padding-top:1em}.product-forum-root .thread-root-container:last-child,.product-forum-root .threads-summary-root:last-child{padding-bottom:1em}.product-forum-root .forum-loading-container{padding-top:1em}.product-forum-root .user-comment-root-container .avatar-container,.product-forum-root .post-input-content-container>.avatar-container,.product-forum-root .thread-input-root>.avatar-container{margin-right:1em}.product-forum-root .element-forum-root:nth-child(2n),.product-forum-root .product-forum-summary-root:nth-child(2n){background-color:#f8f8f8}.product-forum-root .element-forum-root:nth-child(2n):hover,.product-forum-root .product-forum-summary-root:nth-child(2n):hover{background-color:#dfdfdf}.product-forum-root .element-forum-root:nth-child(2n+1),.product-forum-root .product-forum-summary-root:nth-child(2n+1){background-color:#e8e8e8}.product-forum-root .element-forum-root:nth-child(2n+1):hover,.product-forum-root .product-forum-summary-root:nth-child(2n+1):hover{background-color:#dbdbdb}.product-forum-root .social-message-container{padding:1em;font-style:italic;color:gray}.product-forum-root .loading-more-results{padding:1em;color:gray;user-select:none;display:flex;align-items:center;justify-content:center}.product-forum-root .social-search-link,.product-forum-root .toggle-livebooks-link{padding:1em;cursor:pointer;color:gray;user-select:none}.product-forum-root .social-search-link:hover,.product-forum-root .toggle-livebooks-link:hover{text-decoration:underline}.product-forum-root .toggle-livebooks-link{text-align:center;background-color:#3C67A2;color:white}.product-forum-root .forum-footer-commands-container{padding:1em;background-color:#3C67A2;color:white;cursor:pointer;user-select:none;text-align:center}.product-forum-root .forum-footer-commands-container:active{background:#2e4f7d}.product-forum-root .forum-footer-commands-container:hover{text-decoration:underline}.forum-not-seen-indicator{position:absolute;top:0.5em;right:0.5em;min-width:0.5em;min-height:0.5em;border-radius:50%;background-color:#67a73d}.forum-not-seen-indicator.extra-noticable-indicator{background-color:#e44e46}.discussion-sign-in-container{display:flex;align-items:center;justify-content:center}.discussion-sign-in-container>.discussion-sign-in-button{background-color:#3C67A2;color:white;padding:0.5em 1em;cursor:pointer;user-select:none}.discussion-sign-in-container>.discussion-sign-in-button:hover{background-color:#355b8f}.discussion-sign-in-container>.discussion-sign-in-button:active{background-color:#2e4f7d}.discussion-not-allowed-container{display:flex;align-items:center;justify-content:center}.discussion-not-allowed-container>.discussion-not-allowed-container-button{background-color:#975050;color:white;padding:0.5em 1em;cursor:no-drop;user-select:none}.discussion-not-allowed-container>.discussion-not-allowed-container-button:hover{background-color:#a76464}.discussion-not-allowed-container>.discussion-not-allowed-container-button:active{background-color:#8d4848}@supports (-webkit-touch-callout: none){.previewable-markdown-editor-root textarea,.thread-input-root .thread-input-title-input,.social-modal-form input,.forum-header-root .forum-header-input-container input{font-size:16px !important}}\n",""]),e.exports=t},705:function(e,t,o){var r=o(88),n=o(706);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},706:function(e,t,o){(t=o(89)(!1)).push([e.i,".element-forum-root{cursor:pointer;position:relative;display:flex;justify-content:space-between;align-items:center}.element-forum-root a{text-decoration:none}.element-forum-root .element-forum-minimize-button{cursor:pointer;float:right}.element-forum-root .element-forum-footer{font-size:80%}.element-forum-root .inconspicuous-text{color:gray}\n",""]),e.exports=t},707:function(e,t,o){var r=o(88),n=o(708);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},708:function(e,t,o){(t=o(89)(!1)).push([e.i,".notifications-indicator-root{position:relative;background-color:#e44e46;width:1.3em;height:1.3em;border-radius:50%;-webkit-user-select:none;-moz-user-select:moz-none;-ms-user-select:none;user-select:none;cursor:pointer;color:white;display:inline-block;margin-left:0.5em}.notifications-indicator-root:active{background-color:#d8291f}.notifications-indicator-root .notifications-indicator-label{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);font-size:80%;line-height:0}\n",""]),e.exports=t},709:function(e,t,o){var r=o(88),n=o(710);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},710:function(e,t,o){(t=o(89)(!1)).push([e.i,".forum-header-sort-tooltip-item{text-align:center;color:white;cursor:pointer;user-select:none;font-size:12px;line-height:20px;padding:2px}.forum-header-sort-tooltip-item.selected{font-weight:700;text-decoration:underline}.forum-header-sort-tooltip-item:hover{background-color:#666}.forum-header-root.forum-header-showing-search{border-bottom:1px solid lightgray}.forum-header-root .forum-header{display:flex;justify-content:space-between;align-items:center;background-color:#3C67A2;color:white}.forum-header-root .forum-header-middle-container{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.forum-header-root .forum-header-sort{cursor:pointer;font-size:80%;user-select:none;color:#d8e1eb;margin-left:0.25em}.forum-header-root .forum-header-sort:hover{text-decoration:underline}.forum-header-root .forum-header-title{font-weight:bold;margin:0 0.5em}.forum-header-root .forum-header-title a{color:white;text-decoration:underline}.forum-header-root .forum-header-input-container{padding:0.5em;display:flex}.forum-header-root .forum-header-input-container input{margin:0;width:100%;font-size:inherit;line-height:1.5;outline:none;border:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.forum-header-root .forum-header-input-container .search-icon{padding:0.5em;margin-right:-0.5em;cursor:pointer}.forum-header-root .forum-header-button{cursor:pointer;font-size:120%}.forum-header-root .fa-window-minimize,.forum-header-root .fa-window-maximize{margin-right:0.5em}.forum-header-root .forum-header-left-side-container{display:flex;align-items:center}.forum-header-root .forum-header-left-side-container .forum-header-empty-icon{margin-left:0.5em}.forum-header-root .forum-header-right-side-container{display:flex;align-items:center}.forum-header-root .forum-header-right-side-container .forum-header-empty-icon{margin-right:0.5em}.forum-header-root .forum-header-empty-icon{width:1.3em;height:1.3em;display:inline-block}\n",""]),e.exports=t},711:function(e,t,o){var r=o(88),n=o(712);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},712:function(e,t,o){(t=o(89)(!1)).push([e.i,".product-forum-summary-root{position:relative;cursor:pointer;display:flex;justify-content:space-between;align-items:center}.product-forum-summary-root .product-forum-summary-footer{font-size:80%}\n",""]),e.exports=t},713:function(e,t,o){var r=o(88),n=o(714);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},714:function(e,t,o){(t=o(89)(!1)).push([e.i,".thread-root-container{position:relative}.thread-root-container.is-being-synced{opacity:0.5}.thread-root-container>.post-input-root,.thread-root-container>.thread-input-root{margin-bottom:0;padding:0;border-top:none}\n",""]),e.exports=t},715:function(e,t,o){var r=o(88),n=o(716);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},716:function(e,t,o){(t=o(89)(!1)).push([e.i,".post-footer-root{font-size:80%;color:gray;text-align:left;position:relative;padding-left:0.9em;user-select:none}.post-footer-root .clickable-link-like{color:inherit;text-decoration:none;padding:0.5em;margin:-0.5em}.post-footer-root .clickable-link-like:hover{text-decoration:underline}.post-footer-root .clickable-link-like.selected{text-decoration:underline}.post-footer-root .post-footer-upvote-counter{position:absolute;top:0;right:0;font-weight:bold;font-size:14px;padding:0.2em 0.5em;margin:0 0.5em;background-color:#f3f3f3;user-select:none;display:inline-block;transform:translateY(-50%)}.post-footer-root .post-footer-upvote-counter.negative{background-color:#BE6464;color:white}.post-footer-root .post-footer-upvote-counter.positive{background-color:#67a73d;color:white}.post-footer-root .post-footer-votes-icon{margin-right:0.5em}@media screen and (max-width: 400px){.post-footer-root .post-footer-votes-icon{display:none}}.post-footer-root .clickable-link-like.selected .upvote-downvote-icon,.post-footer-root .clickable-link-like.selected .edit-suggestion-icon{color:black}.post-footer-root .clickable-link-like.selected .spam-icon{color:red}.post-footer-root .clickable-link-like.not-clickable{cursor:default}@media screen and (max-width: 500px){.post-footer-root .post-footer-spam-container{display:none}}.post-footer-root .post-footer-spam-container i{cursor:pointer}.post-footer-root .upvote-downvote-icon{display:none;color:gray}.post-footer-root .go-to-location-icon{display:none}@media screen and (max-width: 600px){.post-footer-root .go-to-location-label{display:none}.post-footer-root .go-to-location-icon{display:inline-block}}@media screen and (max-width: 400px){.post-footer-root .upvote-downvote-label{display:none}.post-footer-root .upvote-downvote-icon{display:inline-block}}.discussions-container-small .post-footer-root .go-to-location-label{display:none}.discussions-container-small .post-footer-root .go-to-location-icon{display:inline-block}\n",""]),e.exports=t},717:function(e,t,o){var r=o(88),n=o(718);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},718:function(e,t,o){(t=o(89)(!1)).push([e.i,".post-root-container{padding:0.5em 0 0.5em 0.5em}.post-root-container>.post-input-root{margin-bottom:0}.post-root-container.is-being-synced{opacity:0.5}\n",""]),e.exports=t},721:function(e,t,o){var r=o(88),n=o(722);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},722:function(e,t,o){(t=o(89)(!1)).push([e.i,".user-comment-root-container{display:flex;width:100%}.user-comment-root-container .user-comment-content-container{flex:1}.user-comment-root-container .user-comment-content-container p:first-of-type{margin-top:0}.user-comment-root-container .user-comment-content-container p:last-of-type{margin-bottom:0}.user-comment-root-container .user-comment-text-container img{width:100%;cursor:pointer}.user-comment-root-container .user-comment-text-container .label-separator{margin:0 0.25em}.user-comment-root-container .user-comment-text-container code{display:block;background-color:white;padding:0.5em}.user-comment-root-container .user-comment-thread-header{margin-bottom:0.5em}.user-comment-root-container .user-comment-thread-title{font-weight:bold;display:inline-block}.user-comment-root-container .user-comment-text-container{position:relative;background-color:#f3f3f3;padding:0.608em;border:1px solid transparent;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.user-comment-root-container .user-comment-text-container pre{white-space:pre-wrap}.user-comment-root-container .user-comment-text-container.emphasized{border-color:#fecb2f}\n",""]),e.exports=t},723:function(e,t,o){(t=o(89)(!1)).push([e.i,'.mde-header{flex-shrink:0;display:flex;flex-wrap:wrap;align-items:stretch;border-bottom:1px solid #c8ccd0;border-radius:2px 2px 0 0;background:#f9f9f9}.mde-header .mde-tabs{display:flex;flex-direction:row}.mde-header .mde-tabs button{border-radius:2px;margin:6px 3px;background-color:transparent;border:1px solid transparent;cursor:pointer}.mde-header .mde-tabs button:first-child{margin-left:6px}.mde-header .mde-tabs button.selected{border:1px solid #c8ccd0}.mde-header .svg-icon{width:1em;height:1em;display:inline-block;font-size:inherit;overflow:visible;vertical-align:-.125em}.mde-header ul.mde-header-group{margin:0;padding:10px;list-style:none;display:flex;flex-wrap:nowrap}.mde-header ul.mde-header-group.hidden{visibility:hidden}.mde-header ul.mde-header-group li.mde-header-item{display:inline-block;position:relative;margin:0 4px}.mde-header ul.mde-header-group li.mde-header-item button{text-align:left;cursor:pointer;height:22px;padding:4px;margin:0;border:none;background:none;color:#242729}@keyframes tooltip-appear{from{opacity:0}to{opacity:1}}.mde-header ul.mde-header-group li.mde-header-item button.tooltipped:hover::before{animation-name:tooltip-appear;animation-duration:0.2s;animation-delay:0.5s;animation-fill-mode:forwards;opacity:0;position:absolute;z-index:1000001;width:0;height:0;color:rgba(0,0,0,0.8);pointer-events:none;content:"";border:5px solid transparent;top:-5px;right:50%;bottom:auto;margin-right:-5px;border-top-color:rgba(0,0,0,0.8)}.mde-header ul.mde-header-group li.mde-header-item button.tooltipped:hover::after{animation-name:tooltip-appear;animation-duration:0.2s;animation-delay:0.5s;animation-fill-mode:forwards;font-size:11px;opacity:0;position:absolute;z-index:1000000;padding:5px 8px;color:#fff;pointer-events:none;content:attr(aria-label);background:rgba(0,0,0,0.8);border-radius:3px;right:50%;bottom:100%;transform:translateX(50%);margin-bottom:5px;white-space:nowrap}.mde-textarea-wrapper{position:relative}.mde-textarea-wrapper textarea.mde-text{width:100%;border:0;padding:10px;vertical-align:top;resize:none;overflow-y:auto}.mde-preview .mde-preview-content{padding:10px}.mde-preview .mde-preview-content p,.mde-preview .mde-preview-content blockquote,.mde-preview .mde-preview-content ul,.mde-preview .mde-preview-content ol,.mde-preview .mde-preview-content dl,.mde-preview .mde-preview-content table,.mde-preview .mde-preview-content pre{margin-top:0;margin-bottom:16px}.mde-preview .mde-preview-content h1,.mde-preview .mde-preview-content h2,.mde-preview .mde-preview-content h3{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25;border-bottom:1px solid #eee;padding-bottom:0.3em}.mde-preview .mde-preview-content h1{font-size:1.6em}.mde-preview .mde-preview-content h2{font-size:1.4em}.mde-preview .mde-preview-content h3{font-size:1.2em}.mde-preview .mde-preview-content ul,.mde-preview .mde-preview-content ol{padding-left:2em}.mde-preview .mde-preview-content blockquote{margin-left:0;padding:0 1em;color:#777;border-left:0.25em solid #ddd}.mde-preview .mde-preview-content blockquote>:first-child{margin-top:0}.mde-preview .mde-preview-content blockquote>:last-child{margin-bottom:0}.mde-preview .mde-preview-content code{padding:0.2em 0 0.2em 0;margin:0;font-size:90%;background-color:rgba(0,0,0,0.04);border-radius:3px}.mde-preview .mde-preview-content code::before,.mde-preview .mde-preview-content code::after{letter-spacing:-0.2em;content:"\\00a0"}.mde-preview .mde-preview-content pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.mde-preview .mde-preview-content pre code{display:inline;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.mde-preview .mde-preview-content pre code::before,.mde-preview .mde-preview-content pre code::after{content:none}.mde-preview .mde-preview-content pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.mde-preview .mde-preview-content a{color:#4078c0;text-decoration:none}.mde-preview .mde-preview-content a:hover{text-decoration:underline}.mde-preview .mde-preview-content>*:first-child{margin-top:0 !important}.mde-preview .mde-preview-content>*:last-child{margin-bottom:0 !important}.mde-preview .mde-preview-content::after{display:table;clear:both;content:""}.mde-preview .mde-preview-content table{display:block;width:100%;border-spacing:0;border-collapse:collapse}.mde-preview .mde-preview-content table thead th{font-weight:bold}.mde-preview .mde-preview-content table th,.mde-preview .mde-preview-content table td{padding:6px 13px;border:1px solid #c8ccd0}.react-mde{border:1px solid #c8ccd0;border-radius:2px}.react-mde *{box-sizing:border-box}.react-mde .grip{border-top:1px solid #c8ccd0;background-color:#f9f9f9;text-align:center;height:10px;color:black;cursor:s-resize}.react-mde .grip .icon{height:10px}.react-mde .invisible{display:none}ul.mde-suggestions{position:absolute;min-width:180px;padding:0;margin:20px 0 0;list-style:none;cursor:pointer;background:#fff;border:1px solid #c8ccd0;border-radius:3px;box-shadow:0 1px 5px rgba(27,31,35,0.15)}ul.mde-suggestions li{padding:4px 8px;border-bottom:1px solid #e1e4e8}ul.mde-suggestions li:first-child{border-top-left-radius:2px;border-top-right-radius:2px}ul.mde-suggestions li:last-child{border-bottom-right-radius:2px;border-bottom-left-radius:2px}ul.mde-suggestions li:hover,ul.mde-suggestions li[aria-selected=true]{color:white;background-color:#0366d6}\n',""]),e.exports=t},724:function(e,t,o){var r=o(88),n=o(725);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},725:function(e,t,o){(t=o(89)(!1)).push([e.i,".post-input-root{clear:both;display:block;width:100%;border-top:1px solid lightgray}.post-input-root .post-input-content-container{display:flex;width:100%}.post-input-root .post-input-content-container>*:last-child{flex:1}.post-input-root textarea,.post-input-root .previewable-markdown-editor-preview-container{padding:0 4em 0 2px}.post-input-root .post-input-content-container .previewable-markdown-editor-wrapper{padding:0.643em}@media screen and (max-width: 400px){.post-input-root .post-input-show-text-commands-icon{display:none}}.post-input-root .non-selectable{color:gray;font-size:80%}.post-input-root .text-edit-controls-root .text-edit-controls-commands-container{margin-left:50px;border:1px solid lightgray;border-bottom:none}\n",""]),e.exports=t},726:function(e,t,o){var r=o(88),n=o(727);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},727:function(e,t,o){(t=o(89)(!1)).push([e.i,'.previewable-markdown-editor-root .previewable-markdown-editor-wrapper{border:1px solid lightgray;position:relative;padding:0.5em;background:white}.previewable-markdown-editor-root .previewable-markdown-editor-wrapper.is-previewing{max-width:auto;overflow-x:auto}.previewable-markdown-editor-root .previewable-markdown-editor-wrapper.has-arrow-tip:after,.previewable-markdown-editor-root .previewable-markdown-editor-wrapper.has-arrow-tip:before{right:100%;top:18px;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.previewable-markdown-editor-root .previewable-markdown-editor-wrapper.has-arrow-tip:after{border-color:rgba(136,183,213,0);border-right-color:white;border-width:7px;margin-top:-7px}.previewable-markdown-editor-root .previewable-markdown-editor-wrapper.has-arrow-tip:before{border-color:rgba(194,225,245,0);border-right-color:#c8ccd0;border-width:8px;margin-top:-8px}.previewable-markdown-editor-root .previewable-markdown-editor-wrapper.has-error{border-color:red}.previewable-markdown-editor-root p:first-of-type{margin-top:0}.previewable-markdown-editor-root p:last-of-type{margin-bottom:0}.previewable-markdown-editor-root textarea,.previewable-markdown-editor-root .previewable-markdown-editor-preview-container{width:100%;resize:none;font-size:inherit;font-family:inherit;line-height:18px;outline:none;border:none;padding:0 4em 0 2px;margin:0;min-height:18px;box-shadow:none}.previewable-markdown-editor-root textarea:focus{background:initial}.previewable-markdown-editor-root .previewable-markdown-editor-preview-container img{width:100%}.previewable-markdown-editor-root .previewable-markdown-editor-preview-container-hidden,.previewable-markdown-editor-root .previewable-markdown-editor-textarea-container-hidden{display:none}.previewable-markdown-editor-root .previewable-markdown-editor-input-commands-container{position:absolute;bottom:0.5em;right:0.5em;color:#616770}.previewable-markdown-editor-root .previewable-markdown-editor-input-commands-container i{cursor:pointer;margin:0.1em 0.5em;line-height:18px}.previewable-markdown-editor-root .previewable-markdown-editor-input-commands-container i.selected{color:#333333}\n',""]),e.exports=t},728:function(e,t,o){var r=o(88),n=o(729);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},729:function(e,t,o){(t=o(89)(!1)).push([e.i,".text-edit-controls-root{transition:max-height 0.15s ease-in-out}.text-edit-controls-root .text-edit-controls-commands-container{background-color:#f9f9f9;padding:0.25em 0;overflow:hidden}.text-edit-controls-root .text-edit-controls-commands-container .fa{cursor:pointer;margin:0.5em}.text-edit-controls-root .text-edit-controls-preview-link{float:right;margin:0.2em 0.5em}@media screen and (max-width: 400px){.text-edit-controls-root{display:none}}\n",""]),e.exports=t},730:function(e,t,o){var r=o(88),n=o(731);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},731:function(e,t,o){(t=o(89)(!1)).push([e.i,".thread-post-summary-root{font-size:80%;padding-left:1em;margin-top:0.5em;display:flex;align-items:center}.thread-post-summary-root .open-thread-icon{margin-right:0.5em;transform:rotate(180deg);cursor:pointer}.thread-post-summary-root .thread-post-summary-user-name{margin-left:0.5em}@media screen and (max-width: 400px){.thread-post-summary-root .thread-post-summary-user-name{display:none}}.thread-post-summary-root .non-selectable{color:gray}.thread-post-summary-root>.clickable-link-like{display:flex;align-items:center}.thread-post-summary-root .avatar-container .star-icon{width:10px}\n",""]),e.exports=t},732:function(e,t,o){var r=o(88),n=o(733);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},733:function(e,t,o){(t=o(89)(!1)).push([e.i,'.thread-input-root{clear:both;display:flex;flex:none;border-top:1px solid lightgray}.thread-input-root .previewable-markdown-editor-root{margin-bottom:0.5em}.thread-input-root .previewable-markdown-editor-root textarea{line-height:20px;box-sizing:border-box}.thread-input-root .previewable-markdown-editor-preview-container{min-height:52px}.thread-input-root .thread-input-wrapper{position:relative;background:#f9f9f9;border:1px solid #c8ccd0;padding:1em}.thread-input-root .thread-input-wrapper:after,.thread-input-root .thread-input-wrapper:before{right:100%;top:18px;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.thread-input-root .thread-input-wrapper:after{border-color:rgba(136,183,213,0);border-right-color:#f9f9f9;border-width:7px;margin-top:-7px}.thread-input-root .thread-input-wrapper:before{border-color:rgba(194,225,245,0);border-right-color:#c8ccd0;border-width:8px;margin-top:-8px}.thread-input-root .thread-input-title-input{width:100%;font-size:inherit;font-family:inherit;line-height:20px;outline:none;border:1px solid lightgray;margin:0;padding:0.5em;box-shadow:none;box-sizing:border-box}@media screen and (max-width: 400px){.thread-input-root .thread-input-title-input{margin-bottom:0.5em}}.thread-input-root .thread-input-title-input.has-error{border-color:red}.thread-input-root>*:last-child{flex:1}.thread-input-root .thread-create-post-footer{display:flex;justify-content:space-between;align-items:center;background:#f9f9f9}.thread-input-root .thread-create-post-footer .clickable-link-like{margin-left:0.5em}@media screen and (max-width: 600px){.thread-input-root .thread-create-post-footer{font-size:80%}}@media screen and (max-width: 450px){.thread-input-root .thread-create-post-footer .info-link{display:none}}.thread-input-root .thread-create-post-footer .discussions-button{color:white;background-color:#3C67A2}.thread-input-root .thread-create-post-footer .discussions-button:hover{background-color:#355b8f}.thread-input-root .thread-create-post-footer .discussions-button:active{background-color:#27446a}\n',""]),e.exports=t},734:function(e,t,o){var r=o(88),n=o(735);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},735:function(e,t,o){(t=o(89)(!1)).push([e.i,".threads-summary-root{cursor:pointer;font-size:80%}.threads-summary-root .avatar-container{margin:0 0.5em;width:20px;height:20px;line-height:20px;display:inline-block;font-size:70%}.threads-summary-root .avatar-container .avatar-image{width:20px;height:20px;line-height:20px}.threads-summary-root .avatar-container .user-online-status{width:7px;height:7px;border-width:1px}.threads-summary-root:hover .clickable-link-like{text-decoration:underline}\n",""]),e.exports=t},736:function(e,t,o){var r=o(88),n=o(737);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},737:function(e,t,o){(t=o(89)(!1)).push([e.i,"#discussions-slide-menu{background-color:white}#discussions-slide-menu .forum-root-container>ul{padding:0 0.5em;overflow:auto;overscroll-behavior-y:none;-webkit-overflow-scrolling:touch}#discussions-slide-menu .forum-root-container>.post-input-root{padding:0.5em}#discussions-slide-menu .forum-root-container>hr{margin-top:0}#discussions-slide-menu textarea{transition:unset}\n",""]),e.exports=t},82:function(e,t,o){"use strict";o.r(t),o.d(t,"DiscussionsMenuClass",(function(){return no})),o.d(t,"DiscussionsMenu",(function(){return io}));var r=o(87),n=o.n(r),i=o(97),s=o(112),a=o(114);function c(e){return function(t){var o=t.dispatch,r=t.getState;return function(t){return function(n){return"function"==typeof n?n(o,r,e):t(n)}}}}var l=c();l.withExtraArgument=c;var d=l,u=o(91),h=o(154);o(703),o(705);class p extends r.Component{render(){return r.createElement("span",{className:"label-separator"}," · ")}}var m=o(158);o(707);class f extends r.Component{render(){return r.createElement(r.Fragment,null,r.createElement("span",{className:"notifications-indicator-root","data-for":"notification-indicator-tooltip","data-tip":this.props.tooltip||"view notifications",onClick:this.props.onClick},r.createElement("span",{className:"notifications-indicator-label"},this.props.count)))}}var g=o(108),b=o(116),v=o(104);class S extends r.Component{constructor(e){super(e),this.handleOpenElementForum=this.handleOpenElementForum.bind(this)}render(){const e=this.props.elementForum,t=e.forum.threads,o=this.countComments(t);let n=e.elementTitle||(e.element||"").replace("-"," ");this.props.productForum&&this.props.productForum.isLiveProject&&n&&(n=(n+"").replace(/^([\d]+[\.][\d]+[\.] )([\d]+[\.][\d]+[\.])/g,"$2"));const i=g.a.getElementForumLink(this.props.productForum,e);null!=t&&t.length;return r.createElement("div",{className:"element-forum-root",onClick:this.handleOpenElementForum},r.createElement("div",null,r.createElement("div",{className:"element-forum-header"},r.createElement("div",{className:"element-forum-title",title:n},r.createElement("a",{href:i,className:"dont-propagate-click",onClick:e=>e.preventDefault()},n))),r.createElement("div",{className:"element-forum-footer"},t[t.length-1]?r.createElement(r.Fragment,null,(!this.props.productForum.isLiveProject||n===v.b)&&r.createElement(r.Fragment,null,r.createElement("a",{href:i,onClick:e=>e.preventDefault()},o," ",o>1?"comments":"comment"),r.createElement(p,null)),r.createElement(m.a,{date:e.lastCommentDate})):r.createElement("span",{className:"inconspicuous-text"},"start a new thread in here"))),r.createElement("div",null,this.generateNotificationsContent()),!b.a.isTouch&&r.createElement(h.a,{effect:"solid",place:"top"}))}generateNotificationsContent(){return this.props.elementForum.numberOfNewComments>0?r.createElement(f,{count:this.props.elementForum.numberOfNewComments,tooltip:`${this.props.elementForum.numberOfNewComments} new comment${this.props.elementForum.numberOfNewComments>1?"s":""}`}):g.a.hasElementForumVisitNotifications(this.props.forumVisitInfo,this.props.productForum,this.props.elementForum)?r.createElement("div",{className:"forum-not-seen-indicator","data-tip":"contains new comments"}):void 0}handleOpenElementForum(){this.props.openElementForum&&this.props.openElementForum(this.props.elementForum)}countComments(e){let t=0;if(!e||0==e.length)return t;for(const o of e)t+=(null!=o.posts?o.posts.length:0)+1;return t}}var E=o(132),y=o(117);let C,w;var T,O={initializeWebUtils:e=>{C=new y.a(e)},initializeProvider:e=>{w=e},getWebUtils:()=>C,getProvider:()=>w},k=o(252);!function(e){e.INITIALIZE="INITIALIZE",e.SET_CURRENT_USER="SET_CURRENT_USER",e.SET_IS_LOADING="SET_IS_LOADING",e.SET_ELEMENT_FORUM="SET_ELEMENT_FORUM",e.CREATE_AND_SET_ELEMENT_FORUM="CREATE_AND_SET_ELEMENT_FORUM",e.SET_LOCATION_FORUM="SET_LOCATION_FORUM",e.FETCH_PRODUCT_FORUM="FETCH_PRODUCT_FORUM",e.FETCH_PRODUCT_FORUM_START="FETCH_PRODUCT_FORUM_START",e.FETCH_PRODUCT_FORUM_SUCCESS="FETCH_PRODUCT_FORUM_SUCCESS",e.FETCH_PRODUCT_FORUM_ERROR="FETCH_PRODUCT_FORUM_ERROR",e.FETCH_PRODUCT_FORUMS="FETCH_PRODUCTS_FORUMS",e.FETCH_PRODUCT_FORUMS_START="FETCH_PRODUCTS_FORUMS_START",e.FETCH_PRODUCT_FORUMS_SUCCESS="FETCH_PRODUCTS_FORUMS_SUCCESS",e.FETCH_PRODUCT_FORUMS_ERROR="FETCH_PRODUCTS_FORUMS_ERROR",e.FETCH_ADDITIONAL_PRODUCT_FORUMS="FETCH_ADDITIONAL_PRODUCTS",e.FETCH_ADDITIONAL_PRODUCT_FORUMS_START="FETCH_ADDITIONAL_PRODUCTS_START",e.FETCH_ADDITIONAL_PRODUCT_FORUMS_SUCCESS="FETCH_ADDITIONAL_PRODUCTS_SUCCESS",e.FETCH_ADDITIONAL_PRODUCT_FORUMS_ERROR="FETCH_ADDITIONAL_PRODUCTS_ERROR",e.REFRESH_ELEMENT_FORUM="REFRESH_CURRENT_FORUM",e.REFRESH_ELEMENT_FORUM_START="REFRESH_CURRENT_FORUM_START",e.REFRESH_ELEMENT_FORUM_SUCCESS="REFRESH_CURRENT_FORUM_SUCCESS",e.REFRESH_ELEMENT_FORUM_ERROR="REFRESH_CURRENT_FORUM_ERROR",e.REFRESH_ELEMENT_FORUM_SKIP="REFRESH_CURRENT_FORUM_SKIP",e.SEARCH="SEARCH",e.SEARCH_START="SEARCH_START",e.SEARCH_SUCCESS="SEARCH_SUCCESS",e.SEARCH_ERROR="SEARCH_ERROR",e.CLEAR_SEARCH="CLEAR_SEARCH",e.SET_SEARCH_QUERY="SET_SEARCH_QUERY",e.SET_SORT_TYPE="SET_SORT_TYPE",e.CLEAR_LOCATION_FORUM="CLEAR_LOCATION_FORUM",e.CLEAR_LOCATION_FORUM_CLEAR="CLEAR_LOCATION_FORUM_CLEAR",e.CLEAR_ELEMENT_FORUM="CLEAR_ELEMENT_FORUM",e.CLEAR_ELEMENT_FORUM_CLEAR="CLEAR_ELEMENT_FORUM_CLEAR",e.CLEAR_PRODUCT_FORUM="CLEAR_PRODUCT_FORUM",e.CLEAR_PRODUCT_FORUM_CLEAR="CLEAR_PRODUCT_FORUM_CLEAR",e.GO_TO_ROOT="GO_TO_ROOT",e.FETCH_FULL_PATH_TO_LOCATION_FORUM="FETCH_FULL_PATH_TO_LOCATION_FORUM",e.FETCH_FULL_PATH_TO_LOCATION_FORUM_START="FETCH_FULL_PATH_TO_LOCATION_FORUM_START",e.FETCH_FULL_PATH_TO_LOCATION_FORUM_SUCCESS="FETCH_FULL_PATH_TO_LOCATION_FORUM_SUCCESS",e.FETCH_FULL_PATH_TO_LOCATION_FORUM_ERROR="FETCH_FULL_PATH_TO_LOCATION_FORUM_ERROR",e.SET_VERTICAL_PADDING="SET_VERTICAL_PADDING",e.SHOW_COMMENT="SHOW_COMMENT",e.SET_DIRECT_NOTIFICATIONS="SET_DIRECT_NOTIFICATIONS",e.SET_FORUM_VISIT_INFO="SET_FORUM_VISIT_INFO",e.SHOW_ALL_NOTIFICATIONS_REQUESTED="SHOW_ALL_NOTIFICATIONS_REQUESTED",e.SHOW_ALL_NOTIFICATIONS_LOADING="SHOW_ALL_NOTIFICATIONS_LOADING",e.SHOW_ALL_NOTIFICATIONS="SHOW_ALL_NOTIFICATIONS",e.CLEAR_THREAD_NOTIFICATIONS="CLEAR_THREAD_NOTIFICATIONS",e.CLEAR_NOTIFICATIONS="CLEAR_NOTIFICATIONS",e.CHANGE_AVATAR_URL="CHANGE_AVATAR_URL",e.CHANGE_USER_GROUP_ID="CHANGE_GROUP_ID",e.SET_ONLINE_STATUS="SET_ONLINE_STATUS"}(T||(T={}));const x=(e,t)=>({type:T.SET_ELEMENT_FORUM,productForum:t,elementForum:e}),R=e=>({type:T.SHOW_COMMENT,commentId:e});const A=(e,t)=>({type:T.REFRESH_ELEMENT_FORUM_START,productExternalId:e,element:t}),_=e=>({type:T.REFRESH_ELEMENT_FORUM_SUCCESS,productForum:e}),F=()=>({type:T.REFRESH_ELEMENT_FORUM_SKIP}),I=()=>({type:T.REFRESH_ELEMENT_FORUM_ERROR}),P=e=>({type:T.FETCH_PRODUCT_FORUM_START,productExternalId:e}),N=e=>({type:T.FETCH_PRODUCT_FORUM_SUCCESS,productForum:e}),M=()=>({type:T.FETCH_PRODUCT_FORUM_ERROR}),L=e=>(t,o)=>{t(D()),O.getProvider().getProductForums(g.a.getTomorrowsDate(),g.a.paginationEndDate,e).then(e=>{t(U(e))}).catch(()=>{t(j())})},D=()=>({type:T.FETCH_PRODUCT_FORUMS_START}),U=e=>({type:T.FETCH_PRODUCT_FORUMS_SUCCESS,productForums:e}),j=()=>({type:T.FETCH_PRODUCT_FORUMS_ERROR});let B;const V=(e,t=!0)=>{t&&(g.a.paginationIncrement++,g.a.paginationStartDate=g.a.paginationEndDate,g.a.paginationEndDate=g.a.getNextEndDate(g.a.paginationStartDate,g.a.paginationIncrement)),O.getProvider().getProductForums(g.a.paginationStartDate,g.a.paginationEndDate).then(t=>{e(q(t))}).catch(()=>{e(z())})},H=()=>({type:T.FETCH_ADDITIONAL_PRODUCT_FORUMS_START}),q=e=>({type:T.FETCH_ADDITIONAL_PRODUCT_FORUMS_SUCCESS,productForums:e}),z=()=>({type:T.FETCH_ADDITIONAL_PRODUCT_FORUMS_ERROR}),W=()=>({type:T.CLEAR_LOCATION_FORUM_CLEAR}),G=()=>({type:T.CLEAR_ELEMENT_FORUM_CLEAR}),Q=()=>({type:T.CLEAR_PRODUCT_FORUM_CLEAR}),Y=(e,t)=>({type:T.SEARCH_START,productForum:t,query:e}),K=(e,t,o)=>({type:T.SEARCH_SUCCESS,query:e,results:t,productForum:o}),J=e=>({type:T.SEARCH_ERROR}),X=()=>({type:T.FETCH_FULL_PATH_TO_LOCATION_FORUM_START}),Z=(e,t,o)=>({type:T.FETCH_FULL_PATH_TO_LOCATION_FORUM_SUCCESS,locationForum:e,elementForum:t,productForum:o}),ee=()=>({type:T.FETCH_FULL_PATH_TO_LOCATION_FORUM_ERROR}),te=e=>({type:T.SHOW_ALL_NOTIFICATIONS_LOADING,notificationForums:e}),oe=e=>({type:T.SHOW_ALL_NOTIFICATIONS,notificationForums:e});var re={initialize:(e,t)=>({type:T.INITIALIZE,user:e,verticalPadding:t}),setCurrentUser:e=>({type:T.SET_CURRENT_USER,user:e}),setIsLoading:e=>({type:T.SET_IS_LOADING,isLoading:e}),setSearchQuery:e=>({type:T.SET_SEARCH_QUERY,searchQuery:e}),setSortType:e=>({type:T.SET_SORT_TYPE,sortType:e}),setElementForum:x,createAndSetElementForum:(e,t,o,r)=>({type:T.CREATE_AND_SET_ELEMENT_FORUM,productForum:r,element:e,elementTitle:t,meapVersion:o}),clearElementForum:e=>(t,o)=>{t(G()),O.getProvider().getProductForum(e).then(e=>{t(N(e))}).catch(e=>{console.log("fetchProductForumError",e),t(M())})},clearElementForumClear:G,setLocationForum:e=>({type:T.SET_LOCATION_FORUM,locationForum:e}),clearLocationForum:(e,t)=>(o,r)=>{o(W()),O.getProvider().getProductForum(e).then(e=>{const r=e.elementForums.find(e=>e.element==t);o(x(r,e))}).catch(e=>{console.log("fetchProductForumError",e),o(M())})},clearLocationForumClear:W,fetchProductForum:e=>(t,o)=>{t(P(e)),O.getProvider().getProductForum(e).then(e=>{t(N(e))}).catch(e=>{console.log("fetchProductForumError",e),t(M())})},fetchProductForumStart:P,fetchProductForumSuccess:N,fetchProductForumError:M,fetchProductForums:L,fetchProductForumsStart:D,fetchProductForumsSuccess:U,fetchProductForumsError:j,fetchAdditionalProductForums:(e=!0)=>(t,o)=>{t(H()),clearTimeout(B),B=setTimeout(()=>{V(t,e)},2e3)},fetchAdditionalProductForumsStart:H,fetchAdditionalProductForumsSuccess:q,fetchAdditionalProductForumsError:z,clearProductForum:e=>(t,o)=>{t(Q()),O.getProvider().getProductForums(g.a.getTomorrowsDate(),g.a.paginationEndDate,e).then(e=>{t(U(e))}).catch(()=>{t(j())})},clearProductForumClear:Q,search:(e,t)=>(o,r)=>{o(Y(e,t)),O.getProvider().search(e,t).then(r=>{o(K(e,r,t))}).catch(()=>{o(J(t))})},searchStart:Y,searchSuccess:K,searchError:J,clearSearch:()=>({type:T.CLEAR_SEARCH}),goToRootAndLoadProductForums:()=>(e,t)=>{e((()=>({type:T.GO_TO_ROOT}))()),e(L())},fetchFullPathToLocationForum:(e,t,o,r,n,i)=>(s,a)=>{s(X()),O.getProvider().getFullPathToLocationForum(e,t,o,r,n,i).then(e=>{s(Z(e.locationForum,e.elementForum,e.productForum))}).catch(()=>{s(ee())})},fetchFullPathToLocationForumStart:X,fetchFullPathToLocationForumSuccess:Z,fetchFullPathToLocationForumError:ee,setVerticalPadding:e=>({type:T.SET_VERTICAL_PADDING,verticalPadding:e}),fetchProductForumAndShowComment:(e,t)=>(o,r)=>{o(P(e)),O.getProvider().getProductForum(e).then(e=>{o(N(e));const r=e.elementForums.find(e=>null!=e&&null!=e.forum&&e.forum.containsThreadOrPostWithId(t));null!=r&&o(x(r,e)),o(R(t))}).catch(e=>{console.log("fetchProductForumError",e),o(M())})},fetchFullPathToLocationForumAndShowComment:(e,t,o,r,n,i,s)=>(a,c)=>{a(X()),O.getProvider().getFullPathToLocationForum(e,t,o,r,n,i).then(e=>{a(Z(e.locationForum,e.elementForum,e.productForum)),a(R(s))}).catch(()=>{a(ee())}),a(P(e))},fetchProductAndElementForum:(e,t,o,r)=>(n,i)=>{n(P(e)),O.getProvider().getProductForum(e).then(i=>{n(N(i));let s=i.elementForums.find(e=>null!=e&&e.element==t);null==s&&(s=new E.a(t,o||t,new E.b(g.a.adjustElementTitle(o||t),new E.c(e,t,"","",r),[],i.authorIdMap,i.moderatorIdMap),new Date(1970)),i.elementForums.push(s)),n(x(s,i))}).catch(e=>{console.log("fetchProductForumError",e),n(M())})},setDirectNotifications:(e,t)=>({type:T.SET_DIRECT_NOTIFICATIONS,notificationForums:e,updateCurrentlyDisplayedForum:t}),showNotificationsRequested:e=>(t,o)=>{t(te(e)),setTimeout(()=>{t(oe(e))},500)},showNotificationsLoading:te,showAllNotifications:oe,clearNotifications:()=>({type:T.CLEAR_NOTIFICATIONS}),clearThreadNotifications:e=>({type:T.CLEAR_THREAD_NOTIFICATIONS,threadIds:e}),setForumVisitInfo:e=>({type:T.SET_FORUM_VISIT_INFO,forumVisitInfo:e}),changeAvatarUrl:e=>({type:T.CHANGE_AVATAR_URL,avatarUrl:e}),refreshElementForum:(e,t,o)=>(o,r)=>{const n=function(e){const t={},o=null!=e.locationForumStore&&e.locationForumStore.getState(),r=null!=e.elementForumStore&&e.elementForumStore.getState(),n=o&&o.forum,i=r&&r.forum;if(null==n&&null==i)return t;return(n||i).threads.forEach(e=>{e.isOpen&&(t[e.id]=!0)}),t}(r()),i=function(e){const t={},o=null!=e.locationForumStore&&e.locationForumStore.getState(),r=null!=e.elementForumStore&&e.elementForumStore.getState(),n=o&&o.forum,i=r&&r.forum;if(null==n&&null==i)return t;return(n||i).threads.forEach(e=>{e.isBeingEdited&&(t[e.id]=!0),e.posts&&e.posts.length&&e.posts.forEach(e=>{e.isBeingEdited&&(t[e.id]=!0)})}),t}(r());o(A(e,t)),"visible"==k.state()?O.getProvider().refreshProductForum(e).then(e=>{let r=e.elementForums.find(e=>null!=e&&e.element==t);r&&r.forum&&r.forum.threads&&(r.forum.threads.forEach(e=>{n[e.id]&&(e.isOpen=!0),i[e.id]&&(e.isBeingEdited=!0),e.posts&&e.posts.length&&e.posts.forEach(e=>{i[e.id]&&(e.isBeingEdited=!0)})}),o(x(r,e))),setTimeout(()=>{o(_(e))},16)}).catch(()=>{o(I())}):setTimeout(()=>{o(F())},16)},refreshProductForumSkip:F},ne=o(189);function ie(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e){return function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function he(e,t,o,r,n){var i=n.offsetX,s=n.offsetY,a=r?8:0,c=o.split(" "),l=e.top+e.height/2,d=e.left+e.width/2,u=t.height,h=t.width,p=l-u/2,m=d-h/2,f="",g="0%",b="0%";switch(c[0]){case"top":p-=u/2+e.height/2+a,f="rotate(45deg)",g="100%",b="50%";break;case"bottom":p+=u/2+e.height/2+a,f="rotate(225deg)",b="50%";break;case"left":m-=h/2+e.width/2+a,f=" rotate(-45deg)",b="100%",g="50%";break;case"right":m+=h/2+e.width/2+a,f="rotate(135deg)",g="50%"}switch(c[1]){case"top":p=e.top,g="".concat(e.height/2,"px");break;case"bottom":p=e.top-u+e.height,g="".concat(u-e.height/2,"px");break;case"left":m=e.left,b="".concat(e.width/2,"px");break;case"right":m=e.left-h+e.width,b="".concat(h-e.width/2,"px")}return{top:p="top"===c[0]?p-s:p+s,left:m="left"===c[0]?m-i:m+i,transform:f,arrowLeft:b,arrowTop:g}}var pe={popupContent:{tooltip:{position:"absolute",zIndex:"2",width:"200px",background:"rgb(255, 255, 255)",border:"1px solid rgb(187, 187, 187)",boxShadow:"rgba(0, 0, 0, 0.2) 0px 1px 3px",padding:"5px"},modal:{position:"relative",background:"rgb(255, 255, 255)",width:"50%",margin:"auto",border:"1px solid rgb(187, 187, 187)",padding:"5px"}},popupArrow:{height:"10px",width:"10px",position:"absolute",background:"rgb(255, 255, 255)",transform:"rotate(45deg)",margin:"-5px",zIndex:"-1",boxShadow:"rgba(0, 0, 0, 0.2) 1px 1px 1px"},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0"},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",background:"rgba(0, 0, 0,0.5)",display:"flex",zIndex:"999"}}},me=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom","center center"],fe=function(e){function t(e){var o;!
/*!
 * reactjs-popup v1.5.0
 * (c) 2019-present Youssouf EL AZIZI <youssoufelazizi@gmail.com>
 * Released under the MIT License.
 */
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?de(e):t}(this,ce(t).call(this,e)),se(de(o),"repositionOnResize",(function(){o.setPosition()})),se(de(o),"onEscape",(function(e){"Escape"===e.key&&o.closePopup()})),se(de(o),"lockScroll",(function(){var e=o.props.lockScroll;o.state.modal&&e&&(document.getElementsByTagName("body")[0].style.overflow="hidden")})),se(de(o),"resetScroll",(function(){var e=o.props.lockScroll;o.state.modal&&e&&(document.getElementsByTagName("body")[0].style.overflow="auto")})),se(de(o),"togglePopup",(function(e){e.persist(),o.state.isOpen?o.closePopup(e):o.openPopup(e)})),se(de(o),"openPopup",(function(e){var t=o.props,r=t.disabled,n=t.onOpen;o.state.isOpen||r||(n(e),o.setState({isOpen:!0},(function(){o.setPosition(),o.lockScroll()})))})),se(de(o),"closePopup",(function(e){var t=o.props.onClose;o.state.isOpen&&(t(e),o.setState({isOpen:!1},(function(){o.resetScroll()})))})),se(de(o),"onMouseEnter",(function(){clearTimeout(o.timeOut);var e=o.props.mouseEnterDelay;o.timeOut=setTimeout((function(){return o.openPopup()}),e)})),se(de(o),"onMouseLeave",(function(){clearTimeout(o.timeOut);var e=o.props.mouseLeaveDelay;o.timeOut=setTimeout((function(){return o.closePopup()}),e)})),se(de(o),"getTooltipBoundary",(function(){var e=o.props.keepTooltipInside,t={top:0,left:0,width:window.innerWidth,height:window.innerHeight};"string"==typeof e&&(t=document.querySelector(e).getBoundingClientRect());return t})),se(de(o),"setPosition",(function(){var e=o.state,t=e.modal,r=e.isOpen;if(!t&&r){var n=o.props,i=n.arrow,s=n.position,a=n.offsetX,c=n.offsetY,l=n.keepTooltipInside,d=n.arrowStyle,u=n.className,h=o.HelperEl.getBoundingClientRect(),p=o.TriggerEl.getBoundingClientRect(),m=o.ContentEl.getBoundingClientRect(),f=o.getTooltipBoundary(),g=Array.isArray(s)?s:[s];(l||Array.isArray(s))&&(g=[].concat(ue(g),me));var b=function(e,t,o,r,n,i){for(var s,a=n.offsetX,c=n.offsetY,l=0;l<o.length;){var d={top:(s=he(e,t,o[l],r,{offsetX:a,offsetY:c})).top,left:s.left,width:t.width,height:t.height};if(!(d.top<=i.top||d.left<=i.left||d.top+d.height>=i.top+i.height||d.left+d.width>=i.left+i.width))break;l++}return s}(p,m,g,i,{offsetX:a,offsetY:c},f);o.ContentEl.style.top="".concat(b.top-h.top,"px"),o.ContentEl.style.left="".concat(b.left-h.left,"px"),i&&(o.ArrowEl.style.transform=b.transform,o.ArrowEl.style["-ms-transform"]=b.transform,o.ArrowEl.style["-webkit-transform"]=b.transform,o.ArrowEl.style.top=d.top||b.arrowTop,o.ArrowEl.style.left=d.left||b.arrowLeft,o.ArrowEl.classList.add("popup-arrow"),""!==u&&o.ArrowEl.classList.add("".concat(u,"-arrow"))),"static"!==window.getComputedStyle(o.TriggerEl,null).getPropertyValue("position")&&""!==window.getComputedStyle(o.TriggerEl,null).getPropertyValue("position")||(o.TriggerEl.style.position="relative")}})),se(de(o),"addWarperAction",(function(){var e=o.props,t=e.contentStyle,r=e.className,n=e.on,i=o.state.modal,s=i?pe.popupContent.modal:pe.popupContent.tooltip,a={className:"popup-content ".concat(""!==r?"".concat(r,"-content"):""),style:Object.assign({},s,t),ref:o.setContentRef,onClick:function(e){e.stopPropagation()}};return!i&&n.indexOf("hover")>=0&&(a.onMouseEnter=o.onMouseEnter,a.onMouseLeave=o.onMouseLeave),a})),se(de(o),"renderTrigger",(function(){for(var e={key:"T",ref:o.setTriggerRef},t=o.props,r=t.on,i=t.trigger,s=o.state.isOpen,a=Array.isArray(r)?r:[r],c=0,l=a.length;c<l;c++)switch(a[c]){case"click":e.onClick=o.togglePopup;break;case"hover":e.onMouseEnter=o.onMouseEnter,e.onMouseLeave=o.onMouseLeave;break;case"focus":e.onFocus=o.onMouseEnter}return"function"==typeof i?!!i&&n.a.cloneElement(i(s),e):!!i&&n.a.cloneElement(i,e)})),se(de(o),"renderContent",(function(){var e=o.props,t=e.arrow,r=e.arrowStyle,i=e.children,s=o.state,a=s.modal,c=s.isOpen;return n.a.createElement("div",ae({},o.addWarperAction(),{key:"C"}),t&&!a&&n.a.createElement("div",{ref:o.setArrowRef,style:Object.assign({},pe.popupArrow,r)}),"function"==typeof i?i(o.closePopup,c):i)})),o.setTriggerRef=function(e){return o.TriggerEl=e},o.setContentRef=function(e){return o.ContentEl=e},o.setArrowRef=function(e){return o.ArrowEl=e},o.setHelperRef=function(e){return o.HelperEl=e},o.timeOut=0;var r=e.open,i=e.modal,s=e.defaultOpen,a=e.trigger;return o.state={isOpen:r||s,modal:!!i||!a},o}var o,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,e),o=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.closeOnEscape,o=e.defaultOpen,r=e.repositionOnResize;o&&this.setPosition(),t&&window.addEventListener("keyup",this.onEscape),r&&window.addEventListener("resize",this.repositionOnResize)}},{key:"componentDidUpdate",value:function(e){var t=this.props,o=t.open,r=t.disabled,n=this.state.isOpen;e.open!==o&&(o?this.openPopup():this.closePopup(void 0,!0)),e.disabled!==r&&r&&n&&this.closePopup()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeOut);var e=this.props,t=e.closeOnEscape,o=e.repositionOnResize;t&&window.removeEventListener("keyup",this.onEscape),o&&window.removeEventListener("resize",this.repositionOnResize),this.resetScroll()}},{key:"render",value:function(){var e=this.props,t=e.overlayStyle,o=e.closeOnDocumentClick,r=e.className,i=e.on,s=(e.trigger,this.state),a=s.modal,c=s.isOpen,l=c&&!(i.indexOf("hover")>=0),d=a?pe.overlay.modal:pe.overlay.tooltip;return[this.renderTrigger(),c&&n.a.createElement("div",{key:"H",style:{position:"absolute",top:"0px",left:"0px"},ref:this.setHelperRef}),l&&n.a.createElement("div",{key:"O",className:"popup-overlay ".concat(""!==r?"".concat(r,"-overlay"):""),style:Object.assign({},d,t),onClick:o?this.closePopup:void 0},a&&this.renderContent()),c&&!a&&this.renderContent()]}}])&&ie(o.prototype,r),i&&ie(o,i),t}(n.a.PureComponent);se(fe,"defaultProps",{trigger:null,onOpen:function(){},onClose:function(){},defaultOpen:!1,open:!1,disabled:!1,closeOnDocumentClick:!0,repositionOnResize:!0,closeOnEscape:!0,on:["click"],contentStyle:{},arrowStyle:{},overlayStyle:{},className:"",position:"bottom center",modal:!1,lockScroll:!1,arrow:!0,offsetX:0,offsetY:0,mouseEnterDelay:100,mouseLeaveDelay:100,keepTooltipInside:!1});var ge=fe;o(709);class be extends r.Component{constructor(e){super(e),this.handleRootReady=this.handleRootReady.bind(this),this.handleSearchClick=this.handleSearchClick.bind(this),this.handleClearSearchClick=this.handleClearSearchClick.bind(this),this.handleKeyPress=this.handleKeyPress.bind(this),this.handleSetSearchQuery=this.handleSetSearchQuery.bind(this),this.handleSetSortType=this.handleSetSortType.bind(this),this.toggleSortTooltip=this.toggleSortTooltip.bind(this),this.handlePopupClick=this.handlePopupClick.bind(this),this.handlePopupRef=this.handlePopupRef.bind(this),this.state={isSortTooltipOpened:!1}}componentDidUpdate(e,t){this.props.hasBackButton===e.hasBackButton&&this.props.leftIconTooltip===e.leftIconTooltip&&this.props.isLiveProject===e.isLiveProject||h.a.rebuild()}render(){let e=this.props.leftIconTooltip;return r.createElement("div",{className:u("forum-header-root",{"forum-header-showing-search":this.props.isShowingSearchResults}),ref:this.handleRootReady},r.createElement("div",{className:"forum-header"},r.createElement("span",{className:"forum-header-left-side-container"},this.props.hasBackButton?r.createElement("i",{className:"fa fa-fw fa-arrow-left back-button forum-header-button",onClick:this.props.onBack,"data-place":"right","data-tip":e,"data-for":"forum-header-tooltip"}):r.createElement("i",{className:u("fa fa-fw",{"fa-comments forum-header-button":this.props.hasRootIcon}),"data-place":"right","data-tip":e,"data-for":"forum-header-tooltip",onClick:this.props.onGoToRoot}),this.props.notificationsCount&&this.props.notificationsCount>0?r.createElement(f,{count:this.props.notificationsCount,onClick:this.props.onShowNotifications}):r.createElement("span",{className:"forum-header-empty-icon"})),r.createElement("span",{className:"forum-header-middle-container"},r.createElement("span",{className:"forum-header-title",dangerouslySetInnerHTML:{__html:this.props.title}}),this.props.offerSearch&&!this.props.isShowingSearchResults&&!this.props.isLoading&&r.createElement(ge,{ref:this.handlePopupRef,trigger:()=>r.createElement("span",{className:"forum-header-sort",onClick:this.toggleSortTooltip},"sort ",r.createElement("i",{className:"fa fa-sort","aria-hidden":"true"})),position:"bottom center",open:this.state.isSortTooltipOpened,contentStyle:{border:"none",background:"black",width:"auto"},arrowStyle:{background:"black"},onOpen:this.props.onRequiresAllResults},r.createElement("div",{onClick:this.handlePopupClick},r.createElement("div",{className:u("forum-header-sort-tooltip-item",{selected:this.props.sortType==ne.a.MostRecent}),onClick:this.handleSetSortType,"data-value":ne.a.MostRecent}," date "),r.createElement("div",{className:u("forum-header-sort-tooltip-item",{selected:this.props.sortType==ne.a.Alphabetical}),onClick:this.handleSetSortType,"data-value":ne.a.Alphabetical}," alphabetical "),!this.props.isLiveProject&&r.createElement("div",{className:u("forum-header-sort-tooltip-item",{selected:this.props.sortType==ne.a.CommentCount}),onClick:this.handleSetSortType,"data-value":ne.a.CommentCount}," number of comments ")))),r.createElement("span",{className:"forum-header-right-side-container"},r.createElement("span",{className:"forum-header-empty-icon"}),g.a.shouldShowMaximizeButton&&r.createElement("i",{className:"fa fa-window-maximize forum-header-button",onClick:this.props.onMaximize,"data-place":"left","data-tip":"maximize discussions","data-for":"forum-header-tooltip"}),g.a.shouldShowMinimizeButton&&r.createElement("i",{className:"fa fa-window-minimize forum-header-button",onClick:this.props.onMinimize,"data-place":"left","data-tip":"minimize discussions","data-for":"forum-header-tooltip"}),!this.props.disableClose&&r.createElement("i",{className:"fa fa-times forum-header-button",onClick:this.props.onClose,"data-place":"left","data-tip":"close discussion","data-for":"forum-header-tooltip"}))),this.props.offerSearch&&r.createElement("div",{className:"forum-header-input-container"},r.createElement("input",{onFocus:this.props.onRequiresAllResults,value:this.props.searchQuery||"",placeholder:this.props.searchPlaceholder,className:"forum-header-search-input",onKeyPress:this.handleKeyPress,onChange:this.handleSetSearchQuery}),this.props.isShowingSearchResults?r.createElement("i",{className:"fa fa-times search-icon",onClick:this.handleClearSearchClick,"data-place":"left","data-tip":"clear search","data-for":"forum-header-tooltip"}):r.createElement("i",{className:"fa fa-search search-icon",onClick:this.handleSearchClick,"data-place":"left","data-tip":"search","data-for":"forum-header-tooltip"})),!b.a.isTouch&&r.createElement(h.a,{effect:"solid",place:"top",id:"forum-header-tooltip",html:!0}))}handleRootReady(e){this.root=e}handlePopupRef(e){this.popup=e}handlePopupClick(){this.popup&&this.popup.closePopup(),this.setState(Object.assign(Object.assign({},this.state),{isSortTooltipOpened:!1}))}handleClearSearchClick(){this.props.onClearSearch&&this.props.onClearSearch()}handleSetSearchQuery(e){this.props.onSetSearchQuery&&this.props.onSetSearchQuery(e.target.value)}handleSetSortType(e){const t=e.target;this.setState(Object.assign(Object.assign({},this.state),{isSortTooltipOpened:!1})),this.props.onSetSortType&&this.props.onSetSortType(t.getAttribute("data-value"))}handleSearchClick(){this.triggerOnSearchIfNeeded()}handleKeyPress(e){"Enter"==e.key&&this.triggerOnSearchIfNeeded()}triggerOnSearchIfNeeded(){if(!this.root)return;const e=this.root.querySelector(".forum-header-search-input");if(!e)return;const t=(e.value||"").trim();t&&this.props.onSearch&&this.props.onSearch(t)}toggleSortTooltip(){this.state.isSortTooltipOpened||this.props.onRequiresAllResults&&this.props.onRequiresAllResults(),this.setState(Object.assign(Object.assign({},this.state),{isSortTooltipOpened:!this.state.isSortTooltipOpened}))}}o(711);var ve,Se=o(17);class Ee extends r.Component{constructor(e){super(e),this.handleProductForumSelected=this.handleProductForumSelected.bind(this)}render(){return r.createElement("div",{className:"product-forum-summary-root",onClick:this.handleProductForumSelected},r.createElement("div",{className:"product-forum-summary-container"},r.createElement("div",{className:"product-forum-summary-title",title:this.props.productForum.productTitle},r.createElement("a",{href:g.a.getProductForumLink(this.props.productForum),className:"dont-propagate-click",onClick:e=>e.preventDefault()},this.props.productForum.productTitle)),g.a.getSourceApp()!=Se.b.pbc&&r.createElement("div",{className:"product-forum-summary-footer"},r.createElement("span",{className:"clickable-link-like"},this.props.productForum.numberOfComments," ",this.props.productForum.numberOfComments>1?"comments":"comment"),r.createElement(p,null),r.createElement(m.a,{date:this.props.productForum.lastCommentDate}))),r.createElement("div",{className:"product-forum-summary-notifications"},this.generateNotificationsIndicator()))}generateNotificationsIndicator(){return this.props.productForum.numberOfNewComments>0?r.createElement(f,{count:this.props.productForum.numberOfNewComments,tooltip:`${this.props.productForum.numberOfNewComments} new comment${this.props.productForum.numberOfNewComments>1?"s":""}`}):g.a.hasProductForumVisitNotifications(this.props.forumVisitInfo,this.props.productForum)?r.createElement("div",{className:"forum-not-seen-indicator","data-tip":"contains new comments"}):void 0}handleProductForumSelected(){this.props.onProductForumSelected&&this.props.onProductForumSelected(this.props.productForum)}}!function(e){e.SET_FORUM="SET_FORUM",e.SET_PRODUCT_FORUM="SET_PRODUCT_FORUM",e.SET_CURRENT_USER="SET_CURRENT_USER",e.SET_AUTHORS_AND_MODERATORS="SET_AUTHORS_AND_MODERATORS",e.SET_TITLE="SET_TITLE",e.OPEN_THREAD="OPEN_THREAD",e.CLOSE_THREAD="CLOSE_THREAD",e.CREATE_THREAD="CREATE_THREAD",e.CREATE_THREAD_START="CREATE_THREAD_START",e.CREATE_THREAD_SUCCESS="CREATE_THREAD_SUCCESS",e.CREATE_THREAD_ERROR="CREATE_THREAD_ERROR",e.DELETE_POST="DELETE_POST",e.DELETE_POST_START="DELETE_POST_START",e.DELETE_POST_SUCCESS="DELETE_POST_SUCCESS",e.DELETE_POST_ERROR="DELETE_POST_ERROR",e.CREATE_POST="CREATE_POST",e.CREATE_POST_START="CREATE_POST_START",e.CREATE_POST_SUCCESS="CREATE_POST_SUCCESS",e.CREATE_POST_ERROR="CREATE_POST_ERROR",e.START_EDIT_POST="START_EDIT_POST",e.CANCEL_EDIT_POST="CANCEL_EDIT_POST",e.SAVE_EDIT_POST="SAVE_EDIT_POST",e.SAVE_EDIT_POST_START="SAVE_EDIT_POST_START",e.SAVE_EDIT_POST_SUCCESS="SAVE_EDIT_POST_SUCCESS",e.SAVE_EDIT_POST_ERROR="SAVE_EDIT_POST_ERROR",e.VOTE_POST="VOTE_POST",e.VOTE_POST_START="VOTE_POST_START",e.VOTE_POST_SUCCESS="VOTE_POST_SUCCESS",e.VOTE_POST_ERROR="VOTE_POST_ERROR",e.REVOKE_VOTE_POST="REVOKE_VOTE_POST",e.REVOKE_VOTE_POST_START="REVOKE_VOTE_POST_START",e.REVOKE_VOTE_POST_SUCCESS="REVOKE_VOTE_POST_SUCCESS",e.REVOKE_VOTE_POST_ERROR="REVOKE_VOTE_POST_ERROR",e.TOGGLE_SPAM="TOGGLE_SPAM",e.TOGGLE_SPAM_START="TOGGLE_SPAM_START",e.TOGGLE_SPAM_SUCCESS="TOGGLE_SPAM_SUCCESS",e.TOGGLE_SPAM_ERROR="TOGGLE_SPAM_ERROR",e.TOGGLE_EDITING_SUGGESTION="TOGGLE_EDITING_SUGGESTION",e.TOGGLE_EDITING_SUGGESTION_START="TOGGLE_EDITING_SUGGESTION_START",e.TOGGLE_EDITING_SUGGESTION_SUCCESS="TOGGLE_EDITING_SUGGESTION_SUCCESS",e.TOGGLE_EDITING_SUGGESTION_ERROR="TOGGLE_EDITING_SUGGESTION_ERROR",e.NOTIFICATIONS_ARRIVED="NOTIFICATIONS_ARRIVED",e.REMOVE_THREADS="REMOVE_THREADS",e.CHANGE_AVATAR_URL="CHANGE_AVATAR_URL",e.NOTIFY_AUTHOR="NOTIFY_AUTHOR",e.CHANGE_USER_GROUP_ID="CHANGE_GROUP_ID"}(ve||(ve={}));const ye=(e,t,o={})=>Object.assign({type:ve.CREATE_THREAD_START,title:e,text:t},o),Ce=(e,t,o,r={})=>Object.assign({type:ve.CREATE_THREAD_SUCCESS,thread:e,id:t,link:o},r),we=(e,t={})=>Object.assign({type:ve.CREATE_THREAD_ERROR,thread:e},t),Te=(e,t,o={})=>Object.assign({type:ve.DELETE_POST_START,thread:e,post:t},o),Oe=(e,t,o={})=>Object.assign({type:ve.DELETE_POST_SUCCESS,thread:e,post:t},o),ke=(e,t,o={})=>Object.assign({type:ve.DELETE_POST_ERROR,thread:e,post:t},o),xe=(e,t,o={})=>Object.assign({type:ve.CREATE_POST_START,thread:e,text:t},o),Re=(e,t,o,r,n={})=>Object.assign({type:ve.CREATE_POST_SUCCESS,thread:e,post:t,id:o,link:r},n),Ae=(e,t,o={})=>Object.assign({type:ve.CREATE_POST_ERROR,thread:e,post:t},o),_e=(e,t,o,r,n={})=>Object.assign({type:ve.SAVE_EDIT_POST_START,thread:e,post:t,text:o,title:r},n),Fe=(e,t,o={})=>Object.assign({type:ve.SAVE_EDIT_POST_SUCCESS,thread:e,post:t},o),Ie=(e,t,o,r,n,i,s={})=>Object.assign({type:ve.SAVE_EDIT_POST_ERROR,thread:e,post:t,oldText:o,newText:r,oldTitle:n,newTitle:i},s),Pe=(e,t,o,r={})=>Object.assign({type:ve.VOTE_POST_START,thread:e,post:t,amount:o},r),Ne=(e,t,o,r,n,i={})=>Object.assign({type:ve.VOTE_POST_SUCCESS,thread:e,post:t,totalAmount:o,userVoteAmount:r,userVotes:n},i),Me=(e,t,o={})=>Object.assign({type:ve.VOTE_POST_ERROR,thread:e,post:t},o),Le=(e,t,o={})=>Object.assign({type:ve.REVOKE_VOTE_POST_START,thread:e,post:t},o),De=(e,t,o,r,n={})=>Object.assign({type:ve.REVOKE_VOTE_POST_SUCCESS,thread:e,post:t,totalAmount:o,votes:r},n),Ue=(e,t,o={})=>Object.assign({type:ve.REVOKE_VOTE_POST_ERROR,thread:e,post:t},o),je=(e,t,o,r={})=>Object.assign({type:ve.TOGGLE_SPAM_START,user:e,thread:t,post:o},r),Be=(e,t,o,r,n={})=>Object.assign({type:ve.TOGGLE_SPAM_SUCCESS,user:e,thread:t,post:o,spamCommentIds:r},n),Ve=(e,t,o={})=>Object.assign({type:ve.TOGGLE_SPAM_ERROR,thread:e,post:t},o),He=(e,t,o,r={})=>Object.assign({type:ve.TOGGLE_EDITING_SUGGESTION_START,user:e,thread:t,post:o},r),qe=(e,t,o,r,n={})=>Object.assign({type:ve.TOGGLE_EDITING_SUGGESTION_SUCCESS,user:e,thread:t,post:o,isEditingSuggestion:r},n),$e=(e,t,o={})=>Object.assign({type:ve.TOGGLE_EDITING_SUGGESTION_ERROR,thread:e,post:t},o);var ze={setForum:e=>({type:ve.SET_FORUM,forum:e}),setCurrentUser:e=>({type:ve.SET_CURRENT_USER,user:e}),setAuthorsAndModerators:(e,t)=>({type:ve.SET_AUTHORS_AND_MODERATORS,authorIdMap:e,moderatorIdMap:t}),setTitle:e=>({type:ve.SET_TITLE,title:e}),openThread:(e,t={})=>Object.assign({type:ve.OPEN_THREAD,thread:e},t),closeThread:(e,t={})=>Object.assign({type:ve.CLOSE_THREAD,thread:e},t),createThread:(e,t,o={})=>(r,n)=>{r(ye(e,t,o));let i=null;if(null!=o.elementForum){i=n().productForum.elementForums.find(e=>e.element==o.elementForum.element).forum}else{i=n().forum}const s=i.threads.find(e=>e.isBeingSynced&&e.text===t&&+e.id<0);O.getProvider().createThread(s).then(e=>{r(Ce(s,e.id,e.link,o))}).catch(()=>{r(we(s,o))})},createThreadStart:ye,createThreadSuccess:Ce,createThreadError:we,deletePost:(e,t,o={})=>(r,n)=>{r(Te(e,t));let i=null;if(null!=o.elementForum){i=n().productForum.elementForums.find(e=>e.element==o.elementForum.element).forum}else{i=n().forum}const s=i.threads.find(t=>t.id==e.id),a=t instanceof E.f?s:s.posts.find(e=>e.id==t.id);O.getProvider().deletePost(a||s).then(()=>{r(Oe(s,a,o))}).catch(()=>{r(ke(s,a,o))})},deletePostStart:Te,deletePostSuccess:Oe,deletePostError:ke,createPost:(e,t,o={})=>(r,n)=>{let i;if(r(xe(e,t)),null!=o.elementForum){i=n().productForum.elementForums.find(e=>e.element==o.elementForum.element).forum}else{i=n().forum}const s=i.threads.find(t=>t.id==e.id),a=s.posts.find(e=>e.isBeingSynced&&e.text==t&&+e.id<0);O.getProvider().createPost(e,a).then(e=>{r(Re(s,a,e.id,e.link,o))}).catch(()=>{r(Ae(s,a,o))})},createPostStart:xe,createPostSuccess:Re,createPostError:Ae,startEditPost:(e,t,o={})=>Object.assign({type:ve.START_EDIT_POST,thread:e,post:t},o),cancelEditPost:(e,t,o={})=>Object.assign({type:ve.CANCEL_EDIT_POST,thread:e,post:t},o),saveEditPost:(e,t,o,r,n={})=>(i,s)=>{i(_e(e,t,o,r));let a=null;if(null!=n.elementForum){a=s().productForum.elementForums.find(e=>e.element==n.elementForum.element).forum}else{a=s().forum}const c=a.threads.find(t=>t.id==e.id),l=t instanceof E.f?c:c.posts.find(e=>e.isBeingSynced&&e.id==t.id);O.getProvider().saveEditedPost(l).then(()=>{i(Fe(c,l,n))}).catch(()=>{i(Ie(c,t,t.text,o,t.title,r,n))})},saveEditPostStart:_e,saveEditPostSuccess:Fe,saveEditPostError:Ie,votePost:(e,t,o,r,n={})=>(i,s)=>{let a;if(i(Pe(t,o,r)),null!=n.elementForum){a=s().productForum.elementForums.find(e=>e.element==n.elementForum.element).forum}else{a=s().forum}const c=a.threads.find(e=>e.id==t.id),l=o instanceof E.f?c:c.posts.find(e=>e.id==o.id);O.getProvider().votePost(e,l,r).then(e=>{i(Ne(c,l,e.voteScore,r,e.votes,n))}).catch(()=>{i(Me(c,o,n))})},votePostStart:Pe,votePostSuccess:Ne,votePostError:Me,revokeVotePost:(e,t,o,r={})=>(n,i)=>{let s;if(n(Le(t,o)),null!=r.elementForum){s=i().productForum.elementForums.find(e=>e.element==r.elementForum.element).forum}else{s=i().forum}const a=s.threads.find(e=>e.id==t.id),c=o instanceof E.f?a:a.posts.find(e=>e.id==o.id);O.getProvider().revokeVote(e,c).then(e=>{n(De(a,c,e.voteScore,e.votes,r))}).catch(()=>{n(Ue(a,o,r))})},revokeVotePostStart:Le,revokeVotePostSuccess:De,revokeVotePostError:Ue,toggleSpam:(e,t,o,r={})=>(n,i)=>{let s;if(n(je(e,t,o)),null!=r.elementForum){s=i().productForum.elementForums.find(e=>e.element==r.elementForum.element).forum}else{s=i().forum}const a=s.threads.find(e=>e.id==t.id),c=o instanceof E.f?a:a.posts.find(e=>e.id==o.id);O.getProvider().toggleSpam(e,c.id,!g.a.hasAlreadyBeenMarkedAsSpam(e,c)).then(t=>{n(Be(e,a,c,t.spamCommentIds,r))}).catch(()=>{n(Ve(a,o,r))})},toggleSpamStart:je,toggleSpamSuccess:Be,toggleSpamError:Ve,toggleEditingSuggestion:(e,t,o,r={})=>(n,i)=>{let s;if(n(He(e,t,o)),null!=r.elementForum){s=i().productForum.elementForums.find(e=>e.element==r.elementForum.element).forum}else{s=i().forum}const a=s.threads.find(e=>e.id==t.id),c=o instanceof E.f?a:a.posts.find(e=>e.id==o.id);O.getProvider().toggleEditSuggestion(e,c.id,!c.isEditingSuggestion).then(t=>{n(qe(e,a,c,t,r))}).catch(()=>{n($e(a,o,r))})},toggleEditingSuggestionStart:He,toggleEditingSuggestionSuccess:qe,toggleEditingSuggestionError:$e,notificationsArrived:e=>({type:ve.NOTIFICATIONS_ARRIVED,notificationForums:e}),removeThreads:e=>({type:ve.REMOVE_THREADS,threads:e}),changeAvatarUrl:(e,t)=>({type:ve.CHANGE_AVATAR_URL,user:e,avatarUrl:t}),notifyAuthor:(e,t,o)=>({type:ve.NOTIFY_AUTHOR,user:e,post:t,message:o})},We=(o(713),o(715),o(142)),Ge=o(93);class Qe extends r.Component{constructor(e){super(e),this.handleToggleThread=this.handleToggleThread.bind(this),this.handleDeleteClick=this.handleDeleteClick.bind(this),this.handleReplyClicked=this.handleReplyClicked.bind(this),this.handleEditClick=this.handleEditClick.bind(this),this.handleUpVoteClick=this.handleUpVoteClick.bind(this),this.handleDownVoteClick=this.handleDownVoteClick.bind(this),this.handleToggleSpam=this.handleToggleSpam.bind(this),this.handleNotifyAuthor=this.handleNotifyAuthor.bind(this),this.handleEditingSuggestionToggle=this.handleEditingSuggestionToggle.bind(this)}render(){const e=this.props.post instanceof E.f,t=e?this.props.post.posts:[],o=this.props.post.id,n=[];if(e){const e=this.props.post;null==this.props.currentUser||e.isBeingEdited||(n.push(r.createElement("span",{className:"clickable-link-like",key:`${o}-reply`,onClick:this.handleReplyClicked},"reply")),n.push(r.createElement(p,{key:`${o}-sep-2`})))}if(this.props.post.isBeingEdited)n.push(r.createElement("span",{className:"clickable-link-like",key:`${o}-save`,onClick:this.props.onSaveRequested},"save")),n.push(r.createElement(p,{key:`${o}-sep-3`})),n.push(r.createElement("span",{className:"clickable-link-like",key:`${o}-cancel`,onClick:this.props.onCancelRequested},"cancel (esc)"));else{!this.props.post.link||this.props.post.link.startsWith("/comment-")||this.props.post.link.includes("/null/?")||(n.push(r.createElement("a",{className:"open-post-location-link",href:this.props.post.link,key:`${o}-location`},r.createElement("span",{className:"go-to-location-label"},"go to location"),r.createElement("i",{className:"go-to-location-icon fa fa-map-marker","data-tip":"go to location"}))),n.push(r.createElement(p,{key:`${o}-sep-7`}))),null!=this.props.currentUser&&(this.props.post.user.id==this.props.currentUser.id?0==t.length&&(n.push(r.createElement("span",{className:"clickable-link-like",key:`${o}-edit`,onClick:this.handleEditClick},"edit")),n.push(r.createElement(p,{key:`${o}-sep-3`})),n.push(r.createElement("span",{className:"clickable-link-like",key:`${o}-delete`,onClick:this.handleDeleteClick},"delete")),n.push(r.createElement(p,{key:`${o}-sep-4`}))):this.props.disableVoting||(n.push(r.createElement("span",{key:`${o}-upvote`,className:u("clickable-link-like",{selected:this.hasAlreadyBeenUpvoted()}),onClick:this.handleUpVoteClick},r.createElement("span",{className:"upvote-downvote-label"},"upvote"),r.createElement("i",{className:"upvote-downvote-icon fa fa-thumbs-up","data-tip":"upvote"}))),n.push(r.createElement(p,{key:`${o}-sep-5`})),n.push(r.createElement("span",{key:`${o}-downvote`,className:u("clickable-link-like",{selected:this.hasAlreadyBeenDownvoted()}),onClick:this.handleDownVoteClick},r.createElement("span",{className:"upvote-downvote-label"},"downvote"),r.createElement("i",{className:"upvote-downvote-icon fa fa-thumbs-down","data-tip":"downvote"}))),n.push(r.createElement(p,{key:`${o}-sep-6`}))));let e=!1;if(this.props.post.dateCreated&&Ge.a.daysFromNow(this.props.post.dateCreated)<62&&(n.push(r.createElement(m.a,{key:`${o}-time`,date:this.props.post.dateCreated})),e=!0),null!=this.props.currentUser&&this.props.post.user.id!=this.props.currentUser.id){const t=this.hasAlreadyBeenMarkedAsSpam(),o=t?"not spam":"report spam";n.push(r.createElement("span",{className:"post-footer-spam-container",key:"post-footer-spam"},e&&r.createElement(p,null),r.createElement("span",{className:u("clickable-link-like",{selected:t}),onClick:this.handleToggleSpam},r.createElement("i",{className:"fa fa-exclamation-triangle spam-icon","aria-hidden":"true","data-tip":o}))))}const i=g.a.canModerateInProduct(this.props.currentUser,this.props.post.productId),s=this.props.post.isEditingSuggestion,a=i&&!this.props.isAuthor;if((i||this.props.post.isEditingSuggestion)&&(n.push(r.createElement(p,{key:`${o}-sep-8`})),n.push(r.createElement("span",{className:u("edit-suggestion-link clickable-link-like",{selected:this.props.post.isEditingSuggestion,"not-clickable":!i}),key:`${o}-edit-suggestion`,onClick:this.handleEditingSuggestionToggle,"data-tip":i?s?"unmark suggestion":"acknowledge suggestion":s?"suggestion acknowledged":""},r.createElement("i",{className:"fa fa-check-circle edit-suggestion-icon","aria-hidden":"true"})))),this.props.post.isSyncingVotes)0!=this.props.post.votes&&null!=this.props.post.votes&&n.push(r.createElement("span",{className:u("post-footer-upvote-counter"),key:`${o}-upvotes`},r.createElement("i",{className:"fa fa-spinner fa-spin"})));else if(0!=this.props.post.votes&&null!=this.props.post.votes){const e=this.props.post.votes;n.push(r.createElement("span",{className:u("post-footer-upvote-counter",{negative:e<0,positive:e>0}),key:`${o}-upvotes`},r.createElement("i",{className:u("fa post-footer-votes-icon",{"fa-thumbs-down":e<0,"fa-thumbs-up":e>0}),"aria-hidden":"true"}),this.props.post.votes))}a&&(n.push(r.createElement(p,{key:`${o}-sep-9`})),n.push(r.createElement("span",{className:"notify-author-link clickable-link-like",key:`${o}-notify-author`,onClick:this.handleNotifyAuthor,"data-tip":"notify author"},r.createElement("i",{className:"fa fa-envelope notify-author-icon","aria-hidden":"true"}))))}return r.createElement("div",{className:"post-footer-root",ref:e=>this.root=e},n)}handleToggleThread(){this.props.post instanceof E.f&&(this.props.post.isOpen?this.props.onCloseRequested&&this.props.onCloseRequested(this.props.post):this.props.onOpenRequested&&this.props.onOpenRequested(this.props.post))}handleDeleteClick(){this.props.onDeletePostRequested&&this.props.onDeletePostRequested(this.props.post)}handleEditClick(){this.props.onStartEdit&&this.props.onStartEdit(this.props.post)}handleReplyClicked(){if(this.props.post instanceof E.f)if(this.props.post.isOpen){const e=We.a.closest(this.root,".thread-root-container");if(null!=e){const t=e.querySelector("input, textarea");null!=t&&t.focus()}}else this.props.onOpenRequested&&this.props.onOpenRequested(this.props.post)}handleUpVoteClick(){this.hasAlreadyBeenUpvoted()?this.props.onRevokeVoteRequested&&this.props.onRevokeVoteRequested(this.props.post):this.props.onVoteRequested&&this.props.onVoteRequested(this.props.post,1)}handleDownVoteClick(){this.hasAlreadyBeenDownvoted()?this.props.onRevokeVoteRequested&&this.props.onRevokeVoteRequested(this.props.post):this.props.onVoteRequested&&this.props.onVoteRequested(this.props.post,-1)}hasAlreadyBeenUpvoted(){const e=this.props.post,t=this.props.currentUser.votes.find(t=>t.commentId==e.id);return null!=t&&t.isUpVote}hasAlreadyBeenDownvoted(){const e=this.props.post,t=this.props.currentUser.votes.find(t=>t.commentId==e.id);return null!=t&&!t.isUpVote}handleToggleSpam(){this.props.onToggleSpamRequested&&this.props.onToggleSpamRequested(this.props.post)}hasAlreadyBeenMarkedAsSpam(){return g.a.hasAlreadyBeenMarkedAsSpam(this.props.currentUser,this.props.post)}handleNotifyAuthor(){this.props.onNotifyAuthorRequested&&this.props.onNotifyAuthorRequested(this.props.currentUser,this.props.post)}handleEditingSuggestionToggle(){g.a.canModerateInProduct(this.props.currentUser,this.props.post.productId)&&this.props.onToggleEditingSuggestionRequested&&this.props.onToggleEditingSuggestionRequested(this.props.post)}}o(717);var Ye=o(102),Ke=o(194);o(721);class Je extends r.Component{constructor(e){super(e),this.handleCommentTextRef=this.handleCommentTextRef.bind(this),this.handleRootClick=this.handleRootClick.bind(this)}render(){return r.createElement("div",{className:"user-comment-root-container"},r.createElement(Ke.b,{onChangeAvatar:this.props.onChangeAvatar,isCurrentUser:this.isCommentByCurrentUser(),user:this.props.post.user,isAuthor:g.a.isAuthor(this.props.post.user,this.props.authorIdMap),isModerator:g.a.isModerator(this.props.post.user,this.props.moderatorIdMap),isOnline:g.a.isOnline(this.props.post.user)}),r.createElement("div",{className:"user-comment-content-container"},r.createElement("div",{className:u("user-comment-text-container",{"has-not-been-seen":this.props.isUnseen}),ref:this.handleCommentTextRef},this.renderContent(),this.props.isUnseen&&r.createElement("div",{className:"forum-not-seen-indicator extra-noticable-indicator","data-tip":this.props.post instanceof E.f?"contains new comments":"new comment"})),this.props.children))}renderContent(){const e=this.props.post;return e instanceof E.f&&e.title?r.createElement(r.Fragment,null,r.createElement("div",{className:"user-comment-thread-header"},r.createElement("span",null,e.user.name,": ")," ",r.createElement("span",{className:"user-comment-thread-title"},e.title)),r.createElement(Ye.a,{source:e.text,html_in_markdown:!1})):r.createElement(Ye.a,{source:g.a.expendCommentWithUserText(e.text,e.user.name),html_in_markdown:!1})}handleCommentTextRef(e){this.textRoot=e}componentDidMount(){null!=this.textRoot&&this.textRoot.addEventListener("click",this.handleRootClick)}componentWillUnmount(){null!=this.textRoot&&this.textRoot.removeEventListener("click",this.handleRootClick)}handleRootClick(e){const t=e.target;null!=t&&"IMG"==t.tagName&&this.props.onLargeImageRequested&&this.props.onLargeImageRequested(t.src)}isCommentByCurrentUser(){return null!=this.props.currentUser&&null!=this.props.post&&null!=this.props.post.user&&this.props.currentUser.id==this.props.post.user.id}}o(592),o(724);var Xe=o(106);o(183);class Ze extends r.Component{constructor(e){super(e),this.handleActionClicked=this.handleActionClicked.bind(this)}render(){return r.createElement(Xe.b,{title:"add a link",isOpen:this.props.isShown,onClose:this.props.onClose,theme:Xe.a.standard,onActionClicked:this.handleActionClicked,onCancelationClicked:this.props.onClose,actionMessageHTML:"add"},r.createElement("form",{className:"social-modal-form",ref:e=>this.root=e},r.createElement("label",null,r.createElement("span",{className:"label-text"},"Link text:"),r.createElement("input",{className:"social-modal-form-link-text",type:"text",defaultValue:this.props.defaultValue||""})),r.createElement("label",null,r.createElement("span",{className:"label-text"},"Link url:"),r.createElement("input",{className:"social-modal-form-link-url",type:"text"}))))}handleActionClicked(){if(!this.props.onAccept||!this.root)return;let e=this.root.querySelector(".social-modal-form-link-url").value;0!=e.indexOf("http://")&&0!=e.indexOf("https://")&&(e="http://"+e),this.props.onAccept(this.root.querySelector(".social-modal-form-link-text").value,e)}}var et=o(254),tt=o(323);o(726);class ot extends r.Component{constructor(e){super(e),this.handleTextAreaChange=this.handleTextAreaChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleRootRef=this.handleRootRef.bind(this),this.handleRootClick=this.handleRootClick.bind(this),this.state={value:this.props.initialText||""}}render(){const e=u({"previewable-markdown-editor-preview-container":!0,"previewable-markdown-editor-preview-container-hidden":!this.props.isPreviewing}),t=u({"previewable-markdown-editor-textarea-container-hidden":this.props.isPreviewing});return r.createElement("div",{className:u("previewable-markdown-editor-root"),ref:this.handleRootRef},r.createElement("div",{className:u("previewable-markdown-editor-wrapper",{"has-arrow-tip":this.props.hasTip,"has-error":this.props.hasError,"is-previewing":this.props.isPreviewing})},r.createElement(r.Fragment,null,r.createElement(Ye.a,{className:e,source:g.a.expendCommentWithUserText(this.state.value,this.props.user&&this.props.user.name),html_in_markdown:!1}),r.createElement(tt.a,{className:t,ref:e=>this.textArea=e,placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleTextAreaChange,onKeyDown:this.handleKeyDown,minRows:this.props.minRows||1,maxRows:this.props.maxRows||5})),this.props.hasTextareaCommands&&r.createElement("div",{className:"previewable-markdown-editor-input-commands-container"},r.createElement("i",{className:u("fa fa-font post-input-show-text-commands-icon",{selected:this.props.isShowingTextEditor}),"data-tip":"toggle text edit controls","aria-hidden":"true",onClick:this.props.onTextEditToggle}),r.createElement("i",{className:`fa ${this.props.saveIcon||"fa-paper-plane"}`,"data-tip":this.props.saveLabel,title:this.props.saveLabel,onClick:this.props.onSave,"aria-hidden":"true"}))),this.props.isEditing&&r.createElement(Qe,{post:this.props.post,currentUser:this.props.user,isAuthor:g.a.isAuthor(this.props.user,this.props.authorIdMap),disableVoting:this.props.post.disableVoting,onSaveRequested:this.props.onSave,onCancelRequested:this.props.onCancel}))}handleRootRef(e){this.root=e}componentDidMount(){null!=this.root&&this.root.addEventListener("click",this.handleRootClick),this.props.dontFocusOnMounted||this.textArea&&this.textArea.focus()}componentWillUnmount(){null!=this.root&&this.root.removeEventListener("click",this.handleRootClick)}handleRootClick(e){const t=e.target;null!=t&&"IMG"==t.tagName&&t.src&&this.props.onLargeImageRequested&&this.props.onLargeImageRequested(t.src)}getText(){return this.textArea.value.trim()}clearText(){this.setState(Object.assign(Object.assign({},this.state),{value:""}))}getSelectedText(){return this.textArea.value.substring(this.textArea.selectionStart,this.textArea.selectionEnd)}focus(){this.textArea.focus()}insertTextAtLocation(e,t="",o={}){const r=this.textArea;let n=r.selectionStart,i=r.selectionEnd,s="";if(o.insertAtStartOfLine){const e=r.value;for(let t=n;t>=0;t--)if(t<=0||"\n"==e[t]){n=t;break}}n!=i&&(s=r.value.substring(n,i)),o.ignoreCurrentSelection&&(s="");const a=r.value.substring(0,n)+(n==i&&o.insertEmptyLineIfNoSelection?"\n\n":"")+e;this.setState(Object.assign(Object.assign({},this.state),{value:a+s+t+r.value.substring(i)}));let c=a.length+(s.length?s.length+t.length:0);setTimeout(()=>{console.log(c),r.selectionEnd=c,r.focus()},16)}handleTextAreaChange(e){this.setState(Object.assign(Object.assign({},this.state),{value:e.target.value}))}handleKeyDown(e){const t=e.keyCode||e.which;13==t&&(e.metaKey||e.ctrlKey)?this.props.onSave&&this.props.onSave():27==t?this.props.onCancel&&this.props.onCancel():9!=t||e.shiftKey||(e.preventDefault(),this.insertTextAtLocation("\t",""))}}o(728);class rt extends r.Component{constructor(e){super(e)}render(){return r.createElement("div",{className:"text-edit-controls-root",style:{maxHeight:this.props.isShowingTextEditor?"70px":0}},r.createElement("div",{className:"text-edit-controls-commands-container"},r.createElement("i",{className:"fa fa-bold","data-tip":"bold","aria-hidden":"true",onClick:this.props.onBoldClick}),r.createElement("i",{className:"fa fa-italic","data-tip":"italic","aria-hidden":"true",onClick:this.props.onItalicClick}),r.createElement("i",{className:"fa fa-link","data-tip":"add a link","aria-hidden":"true",style:{marginLeft:"1.5em"},onClick:this.props.onAddLinkClick}),r.createElement("i",{className:"fa fa-quote-right","data-tip":"quote","aria-hidden":"true",onClick:this.props.onAddQuoteClick}),r.createElement("i",{className:"fa fa-code","data-tip":"code fragment","aria-hidden":"true",onClick:this.props.onAddCodeClick}),r.createElement("i",{className:"fa fa-picture-o","data-tip":"insert image","aria-hidden":"true",onClick:this.props.onAddImageClick}),r.createElement("span",{className:"text-edit-controls-preview-link clickable-link-like",tabIndex:-1,onClick:this.props.onTogglePreviewClick},this.props.isPreviewing?"code":"preview")))}}class nt extends r.Component{constructor(e){super(e),this.handleCancelClick=this.handleCancelClick.bind(this),this.triggerSave=this.triggerSave.bind(this),this.handleTextEditToggle=this.handleTextEditToggle.bind(this),this.handleHeaderClick=this.handleHeaderClick.bind(this),this.handleBoldClick=this.handleBoldClick.bind(this),this.handleItalicClick=this.handleItalicClick.bind(this),this.handleStrikethroughClick=this.handleStrikethroughClick.bind(this),this.handleAddLinkClick=this.handleAddLinkClick.bind(this),this.handleAddQuoteClick=this.handleAddQuoteClick.bind(this),this.handleAddCodeClick=this.handleAddCodeClick.bind(this),this.handleAddImageClick=this.handleAddImageClick.bind(this),this.handleAddUnorderedListClick=this.handleAddUnorderedListClick.bind(this),this.handleAddOrderedListClick=this.handleAddOrderedListClick.bind(this),this.handleTogglePreviewClick=this.handleTogglePreviewClick.bind(this),this.handleAddLinkConfirmed=this.handleAddLinkConfirmed.bind(this),this.handleAddLinkClosed=this.handleAddLinkClosed.bind(this),this.handleAddImageConfirmed=this.handleAddImageConfirmed.bind(this),this.handleAddImageClosed=this.handleAddImageClosed.bind(this),this.state={isShowingTextEditor:!1,isPreviewing:!1}}render(){return null==this.props.user?r.createElement("div",{className:"post-input-root post-input-sign-in-root"},r.createElement("div",{className:"discussion-sign-in-container"},r.createElement("div",{className:"discussion-sign-in-button"},"sign in to join the discussion"))):this.props.disablePosting?r.createElement("div",{className:"post-input-root post-input-sign-in-root"},r.createElement("div",{className:"discussion-not-allowed-container"},r.createElement("div",{className:"discussion-not-allowed-container-button"},this.props.disablePostingMessage||"You are not allowed to post here"))):r.createElement("div",{className:"post-input-root",ref:e=>this.root=e,onClick:this.props.onClick},r.createElement(rt,{isShowingTextEditor:this.state.isShowingTextEditor,isPreviewing:this.state.isPreviewing,onBoldClick:this.handleBoldClick,onItalicClick:this.handleItalicClick,onAddLinkClick:this.handleAddLinkClick,onAddQuoteClick:this.handleAddQuoteClick,onAddCodeClick:this.handleAddCodeClick,onAddImageClick:this.handleAddImageClick,onTogglePreviewClick:this.handleTogglePreviewClick}),r.createElement("div",{className:"post-input-content-container"},r.createElement(Ke.b,{onChangeAvatar:this.props.onChangeAvatar,isCurrentUser:!0,user:this.props.user,isAuthor:g.a.isAuthor(this.props.user,this.props.authorIdMap),isModerator:g.a.isModerator(this.props.user,this.props.moderatorIdMap),isOnline:g.a.isOnline(this.props.user)}),r.createElement(ot,{ref:e=>this.previewableMarkdownEditor=e,user:this.props.user,post:this.props.post,initialText:this.props.initialText,isPreviewing:this.state.isPreviewing,isShowingTextEditor:this.state.isShowingTextEditor,placeholder:this.props.placeholder,hasTip:!0,hasTextareaCommands:!this.props.dontShowCommands,dontFocusOnMounted:this.props.dontFocusOnInput,isEditing:this.props.isEditing,saveLabel:this.props.saveLabel,authorIdMap:this.props.authorIdMap,onCancel:this.handleCancelClick,onSave:this.triggerSave,onTextEditToggle:this.handleTextEditToggle,onLargeImageRequested:this.props.onLargeImageRequested})))}handleCancelClick(){this.props.onCancel&&this.props.onCancel()}triggerSave(){this.previewableMarkdownEditor.getText().length>5e3?alert("Comment is too long, maximum length is 5000 characters."):0!=this.previewableMarkdownEditor.getText().trim().length&&(this.props.onSave&&this.props.onSave(this.previewableMarkdownEditor.getText()),this.previewableMarkdownEditor.clearText())}handleTextEditToggle(){this.props.onTextEditToggle?this.props.onTextEditToggle():this.setState(Object.assign(Object.assign({},this.state),{isShowingTextEditor:!this.state.isShowingTextEditor}))}handleHeaderClick(){this.previewableMarkdownEditor.insertTextAtLocation("# ","",{insertAtStartOfLine:!0})}handleBoldClick(){this.previewableMarkdownEditor.insertTextAtLocation("**","**")}handleItalicClick(){this.previewableMarkdownEditor.insertTextAtLocation("*","*")}handleStrikethroughClick(){this.previewableMarkdownEditor.insertTextAtLocation("~~","~~")}handleAddLinkClick(){this.root&&this.renderAddLinkModal(!0,this.previewableMarkdownEditor.getSelectedText())}handleAddLinkConfirmed(e,t){this.previewableMarkdownEditor.insertTextAtLocation(`[${e}](${t})`,"",{ignoreCurrentSelection:!0}),this.renderAddLinkModal(!1)}renderAddLinkModal(e,t=""){i.render(r.createElement(Ze,{isShown:e,defaultValue:t,onAccept:this.handleAddLinkConfirmed,onClose:this.handleAddLinkClosed}),document.getElementById("full-screen-modal"))}handleAddImageClick(){this.renderUploadImageModal(!0)}renderUploadImageModal(e){i.render(r.createElement(et.a,{isShown:e,onAccept:this.handleAddImageConfirmed,onClose:this.handleAddImageClosed}),document.getElementById("full-screen-modal"))}handleAddImageConfirmed(e){this.previewableMarkdownEditor.insertTextAtLocation(`![](${e})`),this.renderUploadImageModal(!1)}handleAddImageClosed(){this.renderUploadImageModal(!1)}handleAddQuoteClick(){this.previewableMarkdownEditor.insertTextAtLocation(">","",{insertAtStartOfLine:!0})}handleAddCodeClick(){this.previewableMarkdownEditor.insertTextAtLocation("`","`")}handleAddUnorderedListClick(){this.previewableMarkdownEditor.insertTextAtLocation("- ","",{insertAtStartOfLine:!0})}handleAddOrderedListClick(){this.previewableMarkdownEditor.insertTextAtLocation("1. ","",{insertAtStartOfLine:!0})}handleTogglePreviewClick(){this.setState(Object.assign(Object.assign({},this.state),{isPreviewing:!this.state.isPreviewing}))}handleAddLinkClosed(){this.renderAddLinkModal(!1)}}class it extends r.Component{constructor(e){super(e),this.handlePostEdit=this.handlePostEdit.bind(this),this.handlePostEditCancel=this.handlePostEditCancel.bind(this),this.handlePostSave=this.handlePostSave.bind(this)}render(){return r.createElement("div",{className:u("post-root-container",{"is-being-synced":this.props.post&&this.props.post.isBeingSynced}),"data-comment-id":this.props.post.id},this.props.post.isBeingEdited?r.createElement(nt,{post:this.props.post,initialText:this.props.post.text,user:this.props.currentUser,saveIcon:"fa-check",saveLabel:"save",onSave:this.handlePostSave,onCancel:this.handlePostEditCancel,isEditing:this.props.post.isBeingEdited,authorIdMap:this.props.authorIdMap,moderatorIdMap:this.props.moderatorIdMap,onChangeAvatar:this.props.onChangeAvatar,onLargeImageRequested:this.props.onLargeImageRequested}):r.createElement(Je,{currentUser:this.props.currentUser,post:this.props.post,onLargeImageRequested:this.props.onLargeImageRequested,onChangeAvatar:this.props.onChangeAvatar,isUnseen:this.props.isUnseen,authorIdMap:this.props.authorIdMap,moderatorIdMap:this.props.moderatorIdMap},r.createElement(Qe,{post:this.props.post,isAuthor:g.a.isAuthor(this.props.currentUser,this.props.authorIdMap),disableVoting:this.props.post.disableVoting,currentUser:this.props.currentUser,onStartEdit:this.handlePostEdit,onDeletePostRequested:this.props.onDeletePostRequested,onVoteRequested:this.props.onVoteRequested,onNotifyAuthorRequested:this.props.onNotifyAuthorRequested,onRevokeVoteRequested:this.props.onRevokeVoteRequested,onToggleSpamRequested:this.props.onToggleSpamRequested,onToggleEditingSuggestionRequested:this.props.onToggleEditingSuggestionRequested})),this.props.post.isBeingSynced&&r.createElement("div",{className:"syncing-frame"}))}handlePostEdit(){this.props.onEditRequested&&this.props.onEditRequested(this.props.post)}handlePostEditCancel(){this.props.onEditCancelRequested&&this.props.onEditCancelRequested(this.props.post)}handlePostSave(e){this.props.onSaveRequested&&this.props.onSaveRequested(this.props.post,e)}}o(730);class st extends r.Component{constructor(e){super(e),this.handleOpenThread=this.handleOpenThread.bind(this)}render(){const e=this.props.thread;if(null==e||null==e.posts||0==e.posts.length)return null;const t=e.posts[e.posts.length-1];return r.createElement("div",{className:"thread-post-summary-root"},r.createElement("i",{className:"fa fa-reply open-thread-icon","aria-hidden":"true",onClick:this.handleOpenThread}),r.createElement("span",{className:"thread-post-summary-open-thread-link",onClick:this.handleOpenThread},r.createElement(Ke.b,{user:t.user,isAuthor:g.a.isAuthor(t.user,this.props.authorIdMap),isModerator:g.a.isModerator(t.user,this.props.moderatorIdMap),isOnline:g.a.isOnline(t.user)}),r.createElement("span",{className:"clickable-link-like thread-post-summary-user-name"},t.user.name," replied"),"  ·  ",r.createElement("span",{className:"clickable-link-like"},e.posts.length," ",e.posts.length>1?"responses":"response")),r.createElement(p,null),r.createElement(m.a,{date:t.dateCreated}))}handleOpenThread(){this.props.onOpenRequested&&this.props.onOpenRequested(this.props.thread)}}o(732);class at extends r.Component{constructor(e){super(e),this.handleCancelClick=this.handleCancelClick.bind(this),this.triggerSave=this.triggerSave.bind(this),this.handleTitleChange=this.handleTitleChange.bind(this),this.handleHeaderClick=this.handleHeaderClick.bind(this),this.handleBoldClick=this.handleBoldClick.bind(this),this.handleItalicClick=this.handleItalicClick.bind(this),this.handleStrikethroughClick=this.handleStrikethroughClick.bind(this),this.handleAddLinkClick=this.handleAddLinkClick.bind(this),this.handleAddQuoteClick=this.handleAddQuoteClick.bind(this),this.handleAddCodeClick=this.handleAddCodeClick.bind(this),this.handleAddImageClick=this.handleAddImageClick.bind(this),this.handleAddUnorderedListClick=this.handleAddUnorderedListClick.bind(this),this.handleAddOrderedListClick=this.handleAddOrderedListClick.bind(this),this.handleTogglePreviewClick=this.handleTogglePreviewClick.bind(this),this.handleAddLinkConfirmed=this.handleAddLinkConfirmed.bind(this),this.handleAddLinkClosed=this.handleAddLinkClosed.bind(this),this.handleAddImageConfirmed=this.handleAddImageConfirmed.bind(this),this.handleAddImageClosed=this.handleAddImageClosed.bind(this),this.state={title:this.props.thread?this.props.thread.title:"",isPreviewing:!1,shouldShowMarkdownError:!1,shouldShowTitleError:!1}}render(){if(null==this.props.user)return r.createElement("div",{className:"thread-input-root thread-input-sign-in-root"},r.createElement("div",{className:"discussion-sign-in-container"},r.createElement("div",{className:"discussion-sign-in-button"},"sign in to join the discussion")));if(this.props.disablePosting)return r.createElement("div",{className:"thread-input-root thread-input-sign-in-root"},r.createElement("div",{className:"discussion-not-allowed-container"},r.createElement("div",{className:"discussion-not-allowed-container-button"},this.props.disablePostingMessage||"You are not allowed to post here")));let e="Ask a question or share an example. Please, stay with the subject of this book.";return this.props.isLiveProject?e="Ask a question or share an example. Please stay within the subject of this project.":this.props.isLivevideo&&(e="Ask a question or share an example. Please, stay with the subject of this course."),r.createElement("div",{className:"thread-input-root",ref:e=>this.root=e},r.createElement(Ke.b,{onChangeAvatar:this.props.onChangeAvatar,isCurrentUser:!0,user:this.props.user,isAuthor:g.a.isAuthor(this.props.user,this.props.authorIdMap),isModerator:g.a.isModerator(this.props.user,this.props.moderatorIdMap),isOnline:g.a.isOnline(this.props.user)}),r.createElement("div",{className:"thread-input-wrapper"},r.createElement("input",{className:u("thread-input-title-input",{"has-error":this.state.shouldShowTitleError}),placeholder:"subject",value:this.state.title,onChange:this.handleTitleChange,ref:e=>this.titleInput=e}),r.createElement(rt,{isShowingTextEditor:!0,isPreviewing:this.state.isPreviewing,onBoldClick:this.handleBoldClick,onItalicClick:this.handleItalicClick,onAddLinkClick:this.handleAddLinkClick,onAddQuoteClick:this.handleAddQuoteClick,onAddCodeClick:this.handleAddCodeClick,onAddImageClick:this.handleAddImageClick,onTogglePreviewClick:this.handleTogglePreviewClick}),r.createElement(ot,{ref:e=>this.previewableMarkdownEditor=e,initialText:null!=this.props.thread?this.props.thread.text:"",saveLabel:this.props.saveLabel,isPreviewing:this.state.isPreviewing,isShowingTextEditor:!0,hasError:this.state.shouldShowMarkdownError,onCancel:this.handleCancelClick,onSave:this.triggerSave,placeholder:e,user:this.props.user,authorIdMap:this.props.authorIdMap,dontFocusOnMounted:!0,onLargeImageRequested:this.props.onLargeImageRequested,minRows:4}),r.createElement("div",{className:"thread-create-post-footer"},this.props.isEditing?r.createElement("span",{className:"clickable-link-like",tabIndex:-1,onClick:this.props.onCancel},"cancel"):r.createElement("a",{href:"https://guides.github.com/features/mastering-markdown/",className:"info-link",target:"_blank",tabIndex:-1},"style with markdown"),r.createElement("div",null,this.props.hasCancel&&r.createElement("span",{className:"discussions-button",onClick:this.handleCancelClick},"cancel"),r.createElement("span",{className:"discussions-button",onClick:this.triggerSave}," ",this.props.saveLabel||"save")))))}componentDidMount(){this.titleInput&&this.titleInput.focus()}handleTitleChange(e){this.setState(Object.assign(Object.assign({},this.state),{title:e.target.value,shouldShowTitleError:!1}))}handleCancelClick(){this.props.onCancel&&this.props.onCancel()}triggerSave(){if(0!=(this.titleInput.value||"").trim().length){if(this.titleInput.value.length>255)return alert("Title too long, maximum length is 255 characters."),void this.setState(Object.assign(Object.assign({},this.state),{shouldShowTitleError:!0}));if(0!=this.previewableMarkdownEditor.getText().trim().length){if(this.previewableMarkdownEditor.getText().length>5e3)return alert("Comment too long, maximum length is 5000 characters."),void this.setState(Object.assign(Object.assign({},this.state),{shouldShowMarkdownError:!0}));this.props.onSave&&this.props.onSave(this.titleInput.value,this.previewableMarkdownEditor.getText()),this.previewableMarkdownEditor.clearText(),this.previewableMarkdownEditor.focus(),this.setState(Object.assign(Object.assign({},this.state),{title:""}))}else this.setState(Object.assign(Object.assign({},this.state),{shouldShowMarkdownError:!0}))}else this.setState(Object.assign(Object.assign({},this.state),{shouldShowTitleError:!0}))}handleHeaderClick(){this.previewableMarkdownEditor.insertTextAtLocation("# ","",{insertAtStartOfLine:!0})}handleBoldClick(){this.previewableMarkdownEditor.insertTextAtLocation("**","**")}handleItalicClick(){this.previewableMarkdownEditor.insertTextAtLocation("*","*")}handleStrikethroughClick(){this.previewableMarkdownEditor.insertTextAtLocation("~~","~~")}handleAddLinkClick(){this.root&&this.renderAddLinkModal(!0,this.previewableMarkdownEditor.getSelectedText())}handleAddLinkConfirmed(e,t){this.previewableMarkdownEditor.insertTextAtLocation(`[${e}](${t})`,"",{ignoreCurrentSelection:!0}),this.renderAddLinkModal(!1)}renderAddLinkModal(e,t=""){i.render(r.createElement(Ze,{isShown:e,defaultValue:t,onAccept:this.handleAddLinkConfirmed,onClose:this.handleAddLinkClosed}),document.getElementById("full-screen-modal"))}handleAddImageClick(){this.renderUploadImageModal(!0)}renderUploadImageModal(e){i.render(r.createElement(et.a,{isShown:e,onAccept:this.handleAddImageConfirmed,onClose:this.handleAddImageClosed}),document.getElementById("full-screen-modal"))}handleAddImageConfirmed(e){this.previewableMarkdownEditor.insertTextAtLocation(`![](${e})`),this.renderUploadImageModal(!1)}handleAddImageClosed(){this.renderUploadImageModal(!1)}handleAddQuoteClick(){this.previewableMarkdownEditor.insertTextAtLocation(">","",{insertAtStartOfLine:!0})}handleAddCodeClick(){this.previewableMarkdownEditor.insertTextAtLocation("`","`",{insertEmptyLineIfNoSelection:!0})}handleAddUnorderedListClick(){this.previewableMarkdownEditor.insertTextAtLocation("- ","",{insertAtStartOfLine:!0})}handleAddOrderedListClick(){this.previewableMarkdownEditor.insertTextAtLocation("1. ","",{insertAtStartOfLine:!0})}handleTogglePreviewClick(){this.setState(Object.assign(Object.assign({},this.state),{isPreviewing:!this.state.isPreviewing}))}handleAddLinkClosed(){this.renderAddLinkModal(!1)}}class ct extends r.Component{constructor(e){super(e),this.handleOpenThread=this.handleOpenThread.bind(this),this.handleCloseThread=this.handleCloseThread.bind(this),this.handlePostEdit=this.handlePostEdit.bind(this),this.handlePostSave=this.handlePostSave.bind(this),this.handlePostEditCancel=this.handlePostEditCancel.bind(this),this.handleDeletePostRequested=this.handleDeletePostRequested.bind(this),this.handleCreatePost=this.handleCreatePost.bind(this),this.handleThreadSave=this.handleThreadSave.bind(this),this.handleThreadEditCancel=this.handleThreadEditCancel.bind(this),this.handleVoteRequested=this.handleVoteRequested.bind(this),this.handleRevokeVoteRequested=this.handleRevokeVoteRequested.bind(this),this.handleThreadPostSave=this.handleThreadPostSave.bind(this),this.handleToggleSpamRequested=this.handleToggleSpamRequested.bind(this),this.handleToggleEditingSuggestionRequested=this.handleToggleEditingSuggestionRequested.bind(this),this.state={}}render(){return r.createElement("li",{className:u("thread-root-container",{"is-being-synced":this.props.thread&&this.props.thread.isBeingSynced}),"data-comment-id":this.props.thread.id},!this.props.thread.isBeingEdited&&r.createElement(Je,{currentUser:this.props.currentUser,post:this.props.thread,onLargeImageRequested:this.props.onLargeImageRequested,onChangeAvatar:this.props.onChangeAvatar,isUnseen:this.props.isUnseen,authorIdMap:this.props.authorIdMap,moderatorIdMap:this.props.moderatorIdMap},r.createElement(Qe,{post:this.props.thread,currentUser:this.props.currentUser,isAuthor:g.a.isAuthor(this.props.currentUser,this.props.authorIdMap),disableVoting:this.props.thread.disableVoting,onOpenRequested:this.handleOpenThread,onCloseRequested:this.handleCloseThread,onStartEdit:this.handlePostEdit,onDeletePostRequested:this.props.onDeleteRequested,onVoteRequested:this.handleVoteRequested,onNotifyAuthorRequested:this.props.onNotifyAuthorRequested,onRevokeVoteRequested:this.handleRevokeVoteRequested,onToggleSpamRequested:this.handleToggleSpamRequested,onToggleEditingSuggestionRequested:this.handleToggleEditingSuggestionRequested}),this.props.thread.isOpen?r.createElement("div",null,this.props.thread.posts.map(e=>r.createElement(it,{post:e,key:e.id,currentUser:this.props.currentUser,authorIdMap:this.props.authorIdMap,moderatorIdMap:this.props.moderatorIdMap,isUnseen:this.props.isUnseen&&!e.isSeen,canEdit:null!=this.props.currentUser&&e.user.id==this.props.currentUser.id,onEditRequested:this.handlePostEdit,onEditCancelRequested:this.handlePostEditCancel,onSaveRequested:this.handlePostSave,onDeletePostRequested:this.handleDeletePostRequested,onVoteRequested:this.handleVoteRequested,onNotifyAuthorRequested:this.props.onNotifyAuthorRequested,onRevokeVoteRequested:this.handleRevokeVoteRequested,onToggleSpamRequested:this.handleToggleSpamRequested,onLargeImageRequested:this.props.onLargeImageRequested,onChangeAvatar:this.props.onChangeAvatar})),this.props.currentUser&&r.createElement(nt,{placeholder:"reply",user:this.props.currentUser,authorIdMap:this.props.authorIdMap,moderatorIdMap:this.props.moderatorIdMap,dontFocusOnInput:this.props.dontFocusOnInput||b.a.isTouch,saveLabel:"reply",onSave:this.handleCreatePost,onLargeImageRequested:this.props.onLargeImageRequested,onChangeAvatar:this.props.onChangeAvatar})):r.createElement(st,{thread:this.props.thread,authorIdMap:this.props.authorIdMap,moderatorIdMap:this.props.moderatorIdMap,onOpenRequested:this.handleOpenThread})),this.props.thread.isBeingEdited&&r.createElement(at,{initialText:this.props.thread.text,user:this.props.currentUser,thread:this.props.thread,isEditing:this.props.thread.isBeingEdited,saveLabel:"save",onSave:this.handleThreadSave,onCancel:this.handleThreadEditCancel,onChangeAvatar:this.props.onChangeAvatar}),this.props.thread.isBeingSynced&&r.createElement("div",{className:"syncing-frame"}))}handleOpenThread(e){this.props.onOpenRequested&&this.props.onOpenRequested(e)}handleCloseThread(e){this.props.onCloseRequested&&this.props.onCloseRequested(e)}handleThreadPostSave(e){this.props.onSaveEditPostRequested(this.props.thread,this.props.thread,e,"")}handleThreadSave(e,t){this.props.onSaveEditPostRequested(this.props.thread,this.props.thread,t,e)}handleThreadEditCancel(){this.props.onCancelEditPostRequested(this.props.thread,this.props.thread)}handlePostSave(e,t){this.props.onSaveEditPostRequested(this.props.thread,e,t)}handleCreatePost(e){this.props.onCreatePostRequested(this.props.thread,e)}handlePostEdit(e){this.props.onStartEditPostRequested&&this.props.onStartEditPostRequested(this.props.thread,e)}handlePostEditCancel(e){this.props.onCancelEditPostRequested(this.props.thread,e)}handleDeletePostRequested(e){this.props.onDeletePostRequested(this.props.thread,e)}handleVoteRequested(e,t){this.props.onVoteRequested(this.props.thread,e,t)}handleToggleSpamRequested(e){this.props.onToggleSpamRequested(this.props.thread,e)}handleToggleEditingSuggestionRequested(e){this.props.onToggleEditingSuggestionRequested(this.props.thread,e)}handleRevokeVoteRequested(e){this.props.onRevokeVoteRequested(this.props.thread,e)}}var lt;o(734);!function(e){e.EDIT_SUGGESTION="EDIT_SUGGESTION",e.OLD_MEAP_VERSIONS="OLD_MEAP_VERSIONS"}(lt||(lt={}));class dt extends r.Component{constructor(e){super(e)}render(){const e=this.props.threads,t=g.a.getUniqueUsers(e);return t.length?r.createElement("div",{className:"threads-summary-root",onClick:this.props.onExpandRequested},this.props.summaryType==lt.EDIT_SUGGESTION&&r.createElement("span",{className:"clickable-link-like"},"show editing suggestions by"),this.props.summaryType==lt.OLD_MEAP_VERSIONS&&r.createElement("span",{className:"clickable-link-like"},"show comments from this book's other MEAP versions by "),r.createElement(Ke.b,{user:t[0]}),t.length>=2&&r.createElement("span",{className:"clickable-link-like"},`and ${t.length-1} more`)):null}}class ut extends r.Component{constructor(e){super(e),this.handleOpenThreadRequested=this.handleOpenThreadRequested.bind(this),this.handleCloseThreadRequested=this.handleCloseThreadRequested.bind(this),this.handleDeleteThreadRequested=this.handleDeleteThreadRequested.bind(this),this.handleVoteRequested=this.handleVoteRequested.bind(this),this.handleRevokeVoteRequested=this.handleRevokeVoteRequested.bind(this),this.handleToggleSpam=this.handleToggleSpam.bind(this),this.handleToggleEditingSuggestion=this.handleToggleEditingSuggestion.bind(this),this.handleRootRef=this.handleRootRef.bind(this),this.handleCollapsedThreadsToggle=this.handleCollapsedThreadsToggle.bind(this),this.handleCollapsedMeapThreadsToggle=this.handleCollapsedMeapThreadsToggle.bind(this),this.handleNotifyAuthor=this.handleNotifyAuthor.bind(this),this.state={fullyShowEditSuggestionThreads:this.threadsContainCommentToShow(this.props.commentIdToShow),fullyShowOlderMeapVersionsThreads:this.threadsContainCommentToShow(this.props.commentIdToShow)}}threadsContainCommentToShow(e){return!!e&&(null!=this.props.forum&&null!=this.props.forum.threads.find(t=>t.containsCommentId(e)))}render(){return r.createElement("ul",{className:u({"social-scrollable-container":!this.props.isntSocialScrollableContainer}),ref:this.handleRootRef},this.renderContent(this.props.forum.threads,this.props.productForum?this.props.productForum.productMeapVersion:0))}renderContent(e,t){if(null==e||0==e.length)return r.createElement("div",{className:"social-message-container"},null!=this.props.currentUser?"Start a thread by using the input fields below!":"Sign in below to start a discussion");if(this.props.dontCollapseEditingSuggestions)return this.renderFullThreads(e);const o=e.filter(e=>(!this.shouldThreadBeSummarized(e)||this.state.fullyShowEditSuggestionThreads)&&(!this.shouldThreadBeSummarizedByMeapVersion(e,t)||this.state.fullyShowOlderMeapVersionsThreads)),n=e.filter(e=>this.shouldThreadBeSummarized(e)),i=e.filter(e=>this.shouldThreadBeSummarizedByMeapVersion(e,t));return r.createElement(r.Fragment,null,this.renderFullThreads(o),this.renderThreadsSummaryByMeapVersion(this.state.fullyShowOlderMeapVersionsThreads?[]:i),this.shouldShowThreadsSummaryLink(e,t)&&this.renderThreadsSummary(this.state.fullyShowEditSuggestionThreads?[]:n),this.state.fullyShowOlderMeapVersionsThreads&&i.length>0&&r.createElement("div",{className:"threads-summary-root"},r.createElement("span",{className:"clickable-link-like",onClick:this.handleCollapsedMeapThreadsToggle},"hide comments for older MEAP versions")),this.shouldShowThreadsSummaryLink(e,t)&&this.state.fullyShowEditSuggestionThreads&&n.length>0&&r.createElement("div",{className:"threads-summary-root"},r.createElement("span",{className:"clickable-link-like",onClick:this.handleCollapsedThreadsToggle},"hide editing suggestions")))}shouldShowThreadsSummaryLink(e,t){return e.filter(e=>!this.shouldThreadBeSummarizedByMeapVersion(e,t)||this.state.fullyShowOlderMeapVersionsThreads).length>0}shouldThreadBeSummarized(e){return!g.a.canModerateInProduct(this.props.currentUser,e.productId)&&e.isEditingSuggestion}shouldThreadBeSummarizedByMeapVersion(e,t){return!g.a.canModerateInProduct(this.props.currentUser,e.productId)&&(!isNaN(parseInt(e.meapVersion))&&+e.meapVersion<t)}renderFullThreads(e){return Ge.a.getUniqueItems(e,"id").map(e=>r.createElement(ct,{key:e.id,onOpenRequested:this.handleOpenThreadRequested,onCloseRequested:this.handleCloseThreadRequested,onDeleteRequested:this.handleDeleteThreadRequested,thread:e,currentUser:this.props.currentUser,authorIdMap:this.props.authorIdMap,moderatorIdMap:this.props.moderatorIdMap,isUnseen:-1!=(this.props.unseenThreadIds||[]).indexOf(e.id),dontFocusOnInput:this.props.dontFocusOnInput||b.a.isTouch,onCreatePostRequested:this.props.createPost,onStartEditPostRequested:this.props.startEditPost,onCancelEditPostRequested:this.props.cancelEditPost,onSaveEditPostRequested:this.props.saveEditPost,onDeletePostRequested:this.props.deletePost,onVoteRequested:this.handleVoteRequested,onNotifyAuthorRequested:this.handleNotifyAuthor,onToggleSpamRequested:this.handleToggleSpam,onToggleEditingSuggestionRequested:this.handleToggleEditingSuggestion,onRevokeVoteRequested:this.handleRevokeVoteRequested,onLargeImageRequested:this.props.onLargeImageRequested,onChangeAvatar:this.props.onChangeAvatar}))}renderThreadsSummary(e){return r.createElement(dt,{threads:e,summaryType:lt.EDIT_SUGGESTION,onExpandRequested:this.handleCollapsedThreadsToggle})}renderThreadsSummaryByMeapVersion(e){return r.createElement(dt,{threads:e,summaryType:lt.OLD_MEAP_VERSIONS,onExpandRequested:this.handleCollapsedMeapThreadsToggle})}UNSAFE_componentWillReceiveProps(e){this.trackNotSeenThreads(),this.props.commentIdToShow!=e.commentIdToShow&&this.threadsContainCommentToShow(e.commentIdToShow)&&this.setState(Object.assign(Object.assign({},this.state),{fullyShowEditSuggestionThreads:!0}))}handleRootRef(e){if(this.root=e,this.trackNotSeenThreads(),null!=this.root&&g.a.shouldScrollToEndOfThreads){const e=this.root.querySelector(".thread-root-container:last-child");null!=e&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}}trackNotSeenThreads(){this.props.trackSeenComments&&this.props.unseenThreadIds&&0!=this.props.unseenThreadIds.length&&(clearTimeout(this.notSeenTimeout),this.root&&(this.notSeenTimeout=setTimeout(()=>{const e=this.getNotSeenIds();e.length&&(this.props.clearThreadNotifications&&this.props.clearThreadNotifications(e),O.getProvider().markAsSeen(e))},1e3)))}getNotSeenIds(){if(null==this.root)return[];const e=this.root.querySelectorAll(".forum-not-seen-indicator"),t=[];for(let o=0;o<e.length;o++){const r=e[o],n=We.a.closest(r,".thread-root-container");if(null!=n){const e=+n.getAttribute("data-comment-id");!Number.isNaN(e)&&e>0&&-1==t.indexOf(e)&&t.push(e)}}return t}handleOpenThreadRequested(e){this.props.openThread&&this.props.openThread(this.props.forum,e)}handleCloseThreadRequested(e){this.props.closeThread&&this.props.closeThread(this.props.forum,e)}handleDeleteThreadRequested(e){this.props.deletePost&&this.props.deletePost(e,e)}handleVoteRequested(e,t,o){this.props.vote&&this.props.vote(this.props.currentUser,e,t,o)}handleRevokeVoteRequested(e,t){this.props.revokeVote&&this.props.revokeVote(this.props.currentUser,e,t)}handleToggleSpam(e,t){this.props.toggleSpam&&this.props.toggleSpam(this.props.currentUser,e,t)}handleToggleEditingSuggestion(e,t){this.props.toggleEditSuggestion&&this.props.toggleEditSuggestion(this.props.currentUser,e,t)}handleNotifyAuthor(e,t){this.props.notifyAuthor&&this.props.notifyAuthor(e,t)}handleCollapsedThreadsToggle(){this.setState({fullyShowEditSuggestionThreads:!this.state.fullyShowEditSuggestionThreads})}handleCollapsedMeapThreadsToggle(){this.setState({fullyShowOlderMeapVersionsThreads:!this.state.fullyShowOlderMeapVersionsThreads})}}class ht extends r.Component{constructor(e){super(e)}render(){return r.createElement(Xe.b,{title:"",isOpen:this.props.isShown,onClose:this.props.onClose,theme:Xe.a.standard},r.createElement("div",{className:"social-modal-form",ref:e=>this.root=e},r.createElement("img",{className:"social-modal-form-image",src:this.props.imageUrl,alt:"image"})))}}class pt extends r.Component{constructor(e){super(e),this.handleSendClick=this.handleSendClick.bind(this)}render(){return r.createElement(Xe.b,{title:"",isOpen:this.props.isShown,onClose:this.props.onClose,theme:Xe.a.standard,actionMessageHTML:"send",onActionClicked:this.handleSendClick},r.createElement("div",{className:"social-modal-form",ref:e=>this.root=e},r.createElement("div",null,"Notify author about this post:"),r.createElement(it,{post:this.props.post,currentUser:null,isUnseen:!1,authorIdMap:{},moderatorIdMap:{}}),"Note:",r.createElement("textarea",{rows:6,style:{display:"block",width:"100%",margin:"1em 0"}})))}handleSendClick(){const e=null!=this.root?this.root.querySelector("textarea").value:"";this.props.onNotifyAuthor(this.props.user,this.props.post,e),this.props.onClose&&this.props.onClose()}}class mt extends r.Component{constructor(e){super(e),this.handleNewThreadSave=this.handleNewThreadSave.bind(this),this.handleOpenThread=this.handleOpenThread.bind(this),this.handleCloseThread=this.handleCloseThread.bind(this),this.handleCreatePost=this.handleCreatePost.bind(this),this.handleStartEditPost=this.handleStartEditPost.bind(this),this.handleCancelEditPost=this.handleCancelEditPost.bind(this),this.handleSaveEditPost=this.handleSaveEditPost.bind(this),this.handleDeletePost=this.handleDeletePost.bind(this),this.handleVote=this.handleVote.bind(this),this.handleRevokeVote=this.handleRevokeVote.bind(this),this.handleToggleSpam=this.handleToggleSpam.bind(this),this.handleToggleEditingSuggestion=this.handleToggleEditingSuggestion.bind(this),this.handleNewThreadPostSave=this.handleNewThreadPostSave.bind(this),this.handleLargeImageRequested=this.handleLargeImageRequested.bind(this),this.handleCloseModal=this.handleCloseModal.bind(this),this.handleNotificationsArrived=this.handleNotificationsArrived.bind(this),this.handlePostInputClick=this.handlePostInputClick.bind(this),this.handleNotifyAuthor=this.handleNotifyAuthor.bind(this),this.state={isShowingFullThreadInput:!1}}render(){return r.createElement(r.Fragment,null,this.props.isLoading&&r.createElement("div",{className:"forum-loading-container"},r.createElement("i",{className:"fa fa-circle-notch fa-spin fa-3x fa-fw"})),!this.props.isLoading&&this.props.forum&&this.props.forum.threads&&r.createElement(ut,{forum:this.props.forum,productForum:this.props.productForum,commentIdToShow:this.props.commentIdToShow,authorIdMap:this.props.forum.authorIdMap,moderatorIdMap:this.props.forum.moderatorIdMap,currentUser:this.props.currentUser,dontFocusOnInput:this.props.dontFocusOnInput,isntSocialScrollableContainer:this.props.isntSocialScrollableContainer,dontCollapseEditingSuggestions:this.props.dontCollapseEditingSuggestions,openThread:this.handleOpenThread,closeThread:this.handleCloseThread,createPost:this.handleCreatePost,startEditPost:this.handleStartEditPost,cancelEditPost:this.handleCancelEditPost,saveEditPost:this.handleSaveEditPost,deletePost:this.handleDeletePost,vote:this.handleVote,revokeVote:this.handleRevokeVote,toggleSpam:this.handleToggleSpam,toggleEditSuggestion:this.handleToggleEditingSuggestion,unseenThreadIds:this.props.unseenThreadIds,onLargeImageRequested:this.handleLargeImageRequested,onChangeAvatar:this.props.onChangeAvatarRequested,trackSeenComments:this.props.trackSeenComments,clearThreadNotifications:this.props.clearThreadNotifications,notifyAuthor:this.handleNotifyAuthor}),!this.props.dontAllowNewThreadCreation&&null!=this.props.forum&&(this.state.isShowingFullThreadInput?r.createElement(at,{user:this.props.currentUser,authorIdMap:this.props.forum.authorIdMap,moderatorIdMap:this.props.forum.moderatorIdMap,saveLabel:"create thread",onSave:this.handleNewThreadSave,onLargeImageRequested:this.handleLargeImageRequested,onChangeAvatar:this.props.onChangeAvatarRequested,disablePosting:this.props.disablePosting,disablePostingMessage:this.props.disablePostingMessage,isLivebook:this.props.isLivebook,isLivevideo:this.props.isLivevideo,isLiveProject:this.props.isLiveProject}):r.createElement(nt,{user:this.props.currentUser,authorIdMap:this.props.forum.authorIdMap,moderatorIdMap:this.props.forum.moderatorIdMap,saveLabel:"create thread",placeholder:"create thread",onSave:this.handleNewThreadPostSave,onClick:this.handlePostInputClick,dontFocusOnInput:!0,dontShowCommands:!b.a.isTouch,onLargeImageRequested:this.handleLargeImageRequested,onChangeAvatar:this.props.onChangeAvatarRequested,disablePosting:this.props.disablePosting,disablePostingMessage:this.props.disablePostingMessage})))}handlePostInputClick(){b.a.isTouch||this.setState(Object.assign(Object.assign({},this.state),{isShowingFullThreadInput:!this.state.isShowingFullThreadInput}))}handleLargeImageRequested(e){i.render(r.createElement(ht,{imageUrl:e,isShown:!0,onClose:this.handleCloseModal}),document.getElementById("full-screen-modal"))}handleCloseModal(){try{i.unmountComponentAtNode(document.getElementById("full-screen-modal"))}catch(e){console.log("Cannot unmount view image close")}}handleNotifyAuthor(e,t){i.render(r.createElement(pt,{user:e,post:t,isShown:!0,onClose:this.handleCloseModal,onNotifyAuthor:(e,t,o)=>this.props.notifyAuthor&&this.props.notifyAuthor(e,t,o)}),document.getElementById("full-screen-modal"))}handleNewThreadPostSave(e){(e||"").trim()&&this.props.createThread&&this.props.createThread("",e,this.getForumContext())}handleNewThreadSave(e,t){this.props.createThread&&this.props.createThread(e,t,this.getForumContext()),b.a.isTouch||this.setState(Object.assign(Object.assign({},this.state),{isShowingFullThreadInput:!1}))}handleOpenThread(e,t){this.props.openThread&&this.props.openThread(t,this.getForumContext())}handleCloseThread(e,t){this.props.closeThread&&this.props.closeThread(t,this.getForumContext())}handleCreatePost(e,t){this.props.createPost&&this.props.createPost(e,t,this.getForumContext())}handleStartEditPost(e,t){this.props.startEditPost&&this.props.startEditPost(e,t,this.getForumContext())}handleCancelEditPost(e,t){this.props.cancelEditPost&&this.props.cancelEditPost(e,t,this.getForumContext())}handleSaveEditPost(e,t,o,r){this.props.saveEditPost&&this.props.saveEditPost(e,t,o,r,this.getForumContext())}handleDeletePost(e,t){this.props.deletePost&&this.props.deletePost(e,t,this.getForumContext())}handleVote(e,t,o,r){this.props.vote&&this.props.vote(e,t,o,r,this.getForumContext())}handleRevokeVote(e,t,o){this.props.revokeVote&&this.props.revokeVote(e,t,o,this.getForumContext())}handleToggleSpam(e,t,o){this.props.toggleSpam&&this.props.toggleSpam(e,t,o,this.getForumContext())}handleToggleEditingSuggestion(e,t,o){this.props.toggleEditingSuggestion&&this.props.toggleEditingSuggestion(e,t,o,this.getForumContext())}handleNotificationsArrived(e){this.props.notificationsArrived&&this.props.notificationsArrived(e)}getForumContext(){return{forum:this.props.forum}}}var ft=Object(a.b)((e,t)=>({forum:e&&e.forum,currentUser:e&&e.currentUser&&e.currentUser,title:e&&e.title}),e=>Object.assign({},Object(s.b)({openThread:ze.openThread,closeThread:ze.closeThread,createThread:ze.createThread,createPost:ze.createPost,startEditPost:ze.startEditPost,cancelEditPost:ze.cancelEditPost,saveEditPost:ze.saveEditPost,deletePost:ze.deletePost,vote:ze.votePost,revokeVote:ze.revokeVotePost,toggleSpam:ze.toggleSpam,toggleEditingSuggestion:ze.toggleEditingSuggestion,notificationsArrived:ze.notificationsArrived,notifyAuthor:ze.notifyAuthor},e)))(mt),gt=o(107);const bt="Author Online Forum Legacy Posts",vt=200;class St extends r.Component{constructor(e){super(e),this.lastScrollTop=0,this.handleOpenElementForum=this.handleOpenElementForum.bind(this),this.handleProductForumSelected=this.handleProductForumSelected.bind(this),this.handleBackClick=this.handleBackClick.bind(this),this.handleSearch=this.handleSearch.bind(this),this.handleClearSearch=this.handleClearSearch.bind(this),this.handleGoToRoot=this.handleGoToRoot.bind(this),this.handleRootLoaded=this.handleRootLoaded.bind(this),this.handleThreadOpened=this.handleThreadOpened.bind(this),this.handleSetSearchQuery=this.handleSetSearchQuery.bind(this),this.handleSetSortType=this.handleSetSortType.bind(this),this.onSearchLinkClick=this.onSearchLinkClick.bind(this),this.onProductForumsContainerScroll=this.onProductForumsContainerScroll.bind(this),this.handleRequiresAllResults=this.handleRequiresAllResults.bind(this),g.a.on(ve.OPEN_THREAD,this.handleThreadOpened),this.canToggleLivebooks=g.a.getSourceApp()==Se.b.livevideo||g.a.getSourceApp()==Se.b.demo,this.state={showLivebooks:this.canToggleLivebooks&&g.a.shouldShowLivebooks()},this.toggleShowLivebooks=this.toggleShowLivebooks.bind(this)}render(){const e=this.determineHasBackButton(),t=!e&&g.a.getSourceApp()!=Se.b.pbc,o=this.shouldOfferSearch();return r.createElement("div",{className:"product-forum-root",ref:this.handleRootLoaded},r.createElement(be,{title:this.getForumTitle(),offerSearch:o,searchPlaceholder:this.getSearchPlaceholder(o),hasBackButton:e,hasRootIcon:t,leftIconTooltip:this.getLeftIconTooltip(t),notificationsCount:this.props.notificationsCount,onBack:this.handleBackClick,onClose:this.props.onClose,onMaximize:this.props.onMaximize,onMinimize:this.props.onMinimize,onSearch:this.handleSearch,onGoToRoot:this.handleGoToRoot,onShowNotifications:this.props.onShowNotifications,isShowingSearchResults:null!=this.props.searchResultsForum,isLoading:this.props.isLoading,onClearSearch:this.handleClearSearch,searchQuery:this.props.searchQuery,onSetSearchQuery:this.handleSetSearchQuery,sortType:this.props.sortType,onSetSortType:this.handleSetSortType,onRequiresAllResults:this.handleRequiresAllResults,disableClose:this.props.disableClose,isLiveProject:this.props.productForum&&this.props.productForum.isLiveProject}),this.generateContent(),this.props.isShowingNotificationsForum&&r.createElement("div",{className:"forum-footer-commands-container",onClick:this.props.clearNotifications},"close notifications"),!b.a.isTouch&&r.createElement(h.a,{effect:"solid",place:"top"}))}componentDidUpdate(e,t){var o,r;if(this.props.hasOnlyGeneral&&!this.props.isLoading&&this.props.currentUser&&!this.props.isShowingElementForum){let e=null===(r=null===(o=this.props.productForum)||void 0===o?void 0:o.elementForums)||void 0===r?void 0:r.find(e=>"General"==e.element);e&&this.props.selectElementForum&&this.props.selectElementForum(e,this.props.productForum)}}handleRootLoaded(e){this.root=e}shouldOfferSearch(){return!(this.props.isShowingNotificationsForum||this.props.isShowingLocationForum||this.props.isShowingElementForum)&&(null==this.props.productForum||null!=this.props.productForum.elementForums&&0!=this.props.productForum.elementForums.length)}getSearchPlaceholder(e){return e?this.props.isShowingElementForum||null!=this.props.productForum?`search comments in ${this.props.productForum.productTitle}`:"find a book/video or search all comments":""}getLeftIconTooltip(e){if(this.props.isShowingNotificationsForum)return"clear notifications";if(null!=this.props.searchResultsForum)return"clear search";if(this.props.isShowingLocationForum){const e=this.props.elementForumStore&&this.props.elementForumStore.getState().forum;return null!=e?`back to ${e.title}`:"back"}return this.props.isShowingElementForum?null!=this.props.productForum?`back to ${this.props.productForum.productTitle}`:"back":null!=this.props.productForum?"back to discussion":null!=this.props.productForums&&this.props.productForums.length?"reload discussion":e?"show discussion":void 0}getForumTitle(){if(this.props.isShowingNotificationsForum)return"notifications";if(null!=this.props.searchResultsForum)return this.props.searchResultsForum.title;const e=this.props.locationForumStore&&this.props.locationForumStore.getState()&&this.props.locationForumStore.getState().forum,t=this.props.elementForumStore&&this.props.elementForumStore.getState()&&this.props.elementForumStore.getState().forum;if(this.props.isShowingLocationForum){const o=null!=e?g.a.getFromLocationReplacementMap(e.title):null;return(null!=t?`${this.getElementTitleAsLink(t)}`:"")+(null!=o?`, ${o}`:"")+(null!=this.props.productForum?`: ${gt.a.getShortTitle(this.props.productForum.productTitle)}`:"")}if(this.props.isShowingElementForum){let e="";return this.props.hasOnlyGeneral||(e+=this.getElementTitleAsLink(t)+": "),e+=null!=this.props.productForum?`${gt.a.getShortTitle(this.props.productForum.productTitle)}`:""}return null!=this.props.productForum?gt.a.getShortTitle(this.props.productForum.productTitle):g.a.getDefaultForumTitle()}getElementTitleAsLink(e){let t=e&&e.title;return t&&this.props.productForum&&this.props.productForum.isLiveProject&&(t=(t+"").replace(/^([\d]+[\.][\d]+[\.] )/g,"")),e&&e.forumLocation&&e.title!=bt&&e.forumLocation.baseLink?`<a href="${e.forumLocation.baseLink}">${t}</a>`:null!=e?t:""}determineHasBackButton(){if(this.props.hasOnlyGeneral)return!1;const e=this.props.elementForumStore&&this.props.elementForumStore.getState()&&this.props.elementForumStore.getState().forum;return!!(null!=this.props.searchResultsForum||this.props.isShowingLocationForum&&null!=e||this.props.isShowingElementForum&&null!=this.props.productForum||null!=this.props.productForum&&null!=this.props.productForums||this.props.isShowingNotificationsForum)&&(g.a.getSourceApp()!=Se.b.pbc||this.props.isShowingElementForum&&null!=this.props.productForum&&null!=this.props.productForum&&null!=this.props.productForums)}generateContent(){var e,t,o,n,i,s,c,l,d;if(this.props.isLoading)return r.createElement("div",{className:"forum-loading-container"},r.createElement("i",{className:"fa fa-circle-notch fa-spin fa-3x fa-fw"}));if(this.props.isShowingNotificationsForum)return r.createElement("div",{className:"social-scrollable-container"},this.props.notificationStores.map(e=>{var t,o,n;const i=e&&e.getState()&&e.getState().forum;return null==i?null:r.createElement(a.a,{store:e,key:this.getNotificationsForumLocationId(i)},r.createElement(ft,{dontAllowNewThreadCreation:!0,unseenThreadIds:this.getUnseenThreadIds(),dontFocusOnInput:!0,onChangeAvatarRequested:this.props.onChangeAvatarRequested,disablePosting:this.props.disablePosting,disablePostingMessage:this.props.disablePostingMessage,isLivebook:null===(t=this.props.productForum)||void 0===t?void 0:t.isLivebook,isLivevideo:null===(o=this.props.productForum)||void 0===o?void 0:o.isLivevideo,isLiveProject:null===(n=this.props.productForum)||void 0===n?void 0:n.isLiveProject}))}));if(null!=this.props.searchResultsForum){const n=[];if(null==this.props.productForum&&null!=this.props.productForums&&this.props.productForums.length>0){let e=g.a.getMatchingProductForums(this.props.productForums,this.props.searchQuery);null!=e&&e.length>0&&n.push(this.generateProductForums(!0))}return null!=this.props.searchResultsForum.threads&&this.props.searchResultsForum.threads.length&&n.push(r.createElement(a.a,{key:"search-results-posts",store:this.props.searchForumStore},r.createElement(ft,{isntSocialScrollableContainer:!0,dontAllowNewThreadCreation:!0,onChangeAvatarRequested:this.props.onChangeAvatarRequested,disablePosting:this.props.disablePosting,disablePostingMessage:this.props.disablePostingMessage,isLivebook:null===(e=this.props.productForum)||void 0===e?void 0:e.isLivebook,isLivevideo:null===(t=this.props.productForum)||void 0===t?void 0:t.isLivevideo,isLiveProject:null===(o=this.props.productForum)||void 0===o?void 0:o.isLiveProject}))),n.length>0?r.createElement("div",{className:"social-scrollable-container"},n):r.createElement("span",{className:"social-message-container"},"We couldn't find any comments matching your query.")}if(this.props.isShowingLocationForum)return r.createElement(a.a,{store:this.props.locationForumStore,key:"location-forum-provider"},r.createElement(ft,{commentIdToShow:this.props.commentIdToShow,unseenThreadIds:this.getUnseenThreadIds(),key:"location-forum",trackSeenComments:!0,clearThreadNotifications:this.props.clearThreadNotifications,onChangeAvatarRequested:this.props.onChangeAvatarRequested,disablePosting:this.props.disablePosting,disablePostingMessage:this.props.disablePostingMessage,isLivebook:null===(n=this.props.productForum)||void 0===n?void 0:n.isLivebook,isLivevideo:null===(i=this.props.productForum)||void 0===i?void 0:i.isLivevideo,isLiveProject:null===(s=this.props.productForum)||void 0===s?void 0:s.isLiveProject}));if(this.props.isShowingElementForum)return r.createElement(a.a,{store:this.props.elementForumStore,key:"element-forum-provider"},r.createElement(ft,{commentIdToShow:this.props.commentIdToShow,productForum:this.props.productForum,unseenThreadIds:this.getUnseenThreadIds(),key:"element-forum",trackSeenComments:!0,clearThreadNotifications:this.props.clearThreadNotifications,dontCollapseEditingSuggestions:this.isErrataElementForum(),onChangeAvatarRequested:this.props.onChangeAvatarRequested,disablePosting:this.props.disablePosting,disablePostingMessage:this.props.disablePostingMessage,isLivebook:null===(c=this.props.productForum)||void 0===c?void 0:c.isLivebook,isLivevideo:null===(l=this.props.productForum)||void 0===l?void 0:l.isLivevideo,isLiveProject:null===(d=this.props.productForum)||void 0===d?void 0:d.isLiveProject}));if(null!=this.props.productForum){let e=this.props.productForum.elementForums;const t=null!=e&&e.length>0;return g.a.sortElementForums(e,this.props.sortType),r.createElement("div",{className:"social-scrollable-container"},t&&e.map(e=>r.createElement(S,{key:e.element,forumVisitInfo:this.props.forumVisitInfo,elementForum:e,productForum:this.props.productForum,openElementForum:this.handleOpenElementForum})))}return null!=this.props.productForums&&this.props.productForums.length>0?this.generateProductForums():r.createElement("div",{className:"social-message-container social-message-container-no-product"},"To create a comment, go to a product and attach a comment next to any paragraph.")}generateProductForums(e){let t=g.a.getMatchingProductForums(this.props.productForums,this.props.searchQuery);g.a.sortProductForums(t,this.props.sortType);const o=this.canToggleLivebooks&&!e&&g.a.getSourceApp()!=Se.b.pbc;return o&&(t=this.state.showLivebooks?t:t.filter(e=>!e.isLivebook)),r.createElement(r.Fragment,null,r.createElement("div",{key:"product-forums",className:u({"social-scrollable-container":!e}),onScroll:this.onProductForumsContainerScroll},t.map(e=>r.createElement(Ee,{key:e.productExternalId,productForum:e,forumVisitInfo:this.props.forumVisitInfo,onProductForumSelected:this.handleProductForumSelected})),this.props.searchQuery&&!e&&r.createElement("div",{key:"social-large-search",className:"social-search-link",onClick:this.onSearchLinkClick},"search all comments for ",r.createElement("em",null,this.props.searchQuery)),!e&&this.props.isLoadingMoreProductResults&&r.createElement("div",{key:"loading-more-results",className:"loading-more-results"},r.createElement("i",{className:"fa fa-fw fa-circle-notch fa-2x fa-spin"}))),o&&r.createElement("div",{key:"toggle-livebooks",className:"toggle-livebooks-link",onClick:this.toggleShowLivebooks},this.state.showLivebooks?"hide":"show"," livebooks"))}getUnseenThreadIds(){const e=[];if(!this.props.notificationStores||!this.props.notificationStores.length)return e;for(const t of this.props.notificationStores){const o=t&&t.getState();if(!o)continue;const r=o.forum;if(null!=r)for(const t of r.threads)e.push(t.id)}return e}isErrataElementForum(){if(null==this.props.elementForumStore)return!1;const e=this.props.elementForumStore.getState();return null!=e&&(null!=e.forum&&0==(e.forum.title||"").toLowerCase().indexOf("errata"))}handleOpenElementForum(e){this.props.selectElementForum&&this.props.selectElementForum(e,this.props.productForum)}handleProductForumSelected(e){this.props.selectProductForum&&this.props.selectProductForum(e.productExternalId)}handleClearSearch(){this.props.clearSearch&&this.props.clearSearch()}handleGoToRoot(){this.props.goToRoot&&this.props.goToRoot()}handleBackClick(){if(this.props.isShowingNotificationsForum&&this.props.clearNotifications&&this.props.clearNotifications(),null!=this.props.searchResultsForum)this.props.clearSearch&&this.props.clearSearch();else if(this.props.isShowingLocationForum){const e=this.props.elementForumStore&&this.props.elementForumStore.getState(),t=e&&e.forum;null!=t&&null!=t.forumLocation?this.props.clearLocationForum&&this.props.clearLocationForum(this.props.productForum.productExternalId,t.forumLocation.element):this.props.clearElementForum&&this.props.clearElementForum(this.props.productForum.productExternalId)}else this.props.isShowingElementForum?this.props.clearElementForum&&this.props.clearElementForum(this.props.productForum.productExternalId):null!=this.props.productForum&&this.props.clearProductForum&&this.props.clearProductForum(this.props.courseId)}handleSearch(e){this.props.search(e,this.props.productForum)}onSearchLinkClick(){this.props.search(this.props.searchQuery,this.props.productForum)}handleSetSearchQuery(e){this.props.setSearchQuery(e)}handleSetSortType(e){this.props.setSortType(e)}getNotificationsForumLocationId(e){return`notifications-forum-${e&&e.getCommentIds().join("-")||Date.now()}`}handleThreadOpened(...e){if(null==this.props.currentUser)return;const t=(e||[]).filter(e=>e.containsUnseen());0!=t.length&&this.props.clearThreadNotifications&&this.props.clearThreadNotifications(t.map(e=>e.id))}toggleShowLivebooks(){g.a.storeShouldShowLivebooks(!this.state.showLivebooks);const e=!this.state.showLivebooks;this.setState({showLivebooks:!this.state.showLivebooks}),e&&this.props.goToRoot&&this.props.goToRoot()}onProductForumsContainerScroll(e){const t=e.target,o=t.scrollTop>this.lastScrollTop;this.lastScrollTop=t.scrollTop,t.offsetHeight+t.scrollTop+vt>=t.scrollHeight&&!this.props.isLoadingMoreProductResults&&!this.props.hasRunOutOfProductsToLoad&&o&&this.props.fetchAdditionalProducts&&this.props.fetchAdditionalProducts(!0)}handleRequiresAllResults(){this.shouldOfferSearch()&&!this.props.isShowingElementForum&&null!=!this.props.productForum&&null!=g.a.paginationEndDate&&g.a.paginationEndDate.getFullYear()>1990&&(g.a.paginationStartDate=new Date,g.a.paginationEndDate=new Date(1990,0),this.props.fetchAdditionalProducts&&this.props.fetchAdditionalProducts(!1))}}var Et=Object(a.b)((e,t)=>({isShowingNotificationsForum:e&&e.isShowingNotificationsForum,isShowingLocationForum:e&&e.isShowingLocationForum,isShowingElementForum:e&&e.isShowingElementForum,productForum:e&&e.productForum,productForums:e&&e.productForums,searchResultsForum:e&&e.searchResultsForum,currentUser:e&&e.currentUser&&e.currentUser,isLoading:e&&e.isLoading,verticalPadding:e&&e.verticalPadding,commentIdToShow:e&&e.commentIdToShow,notificationsCount:e&&e.notificationsCount,forumVisitInfo:e&&e.forumVisitInfo,notificationStores:e&&e.notificationStores,locationForumStore:e&&e.locationForumStore,elementForumStore:e&&e.elementForumStore,searchForumStore:e&&e.searchForumStore,searchQuery:e&&e.searchQuery,sortType:e&&e.sortType,isLoadingMoreProductResults:e&&e.isLoadingMoreProductResults,hasRunOutOfProductsToLoad:e&&e.hasRunOutOfProductsToLoad}),e=>Object.assign({},Object(s.b)({selectElementForum:re.setElementForum,selectProductForum:re.fetchProductForum,clearProductForum:re.clearProductForum,clearElementForum:re.clearElementForum,clearLocationForum:re.clearLocationForum,search:re.search,setSearchQuery:re.setSearchQuery,clearSearch:re.clearSearch,goToRoot:re.goToRootAndLoadProductForums,clearNotifications:re.clearNotifications,clearThreadNotifications:re.clearThreadNotifications,setSortType:re.setSortType,fetchAdditionalProducts:re.fetchAdditionalProductForums},e)))(St);let yt=0,Ct=0;const wt=window.$;function Tt(e,t){try{switch(t.type){case ve.CREATE_THREAD_SUCCESS:case ve.CREATE_POST_SUCCESS:case ve.DELETE_POST_SUCCESS:case ve.REVOKE_VOTE_POST_SUCCESS:case ve.VOTE_POST_SUCCESS:wt&&wt(document).trigger("socialEvent",[t.type,t.forum&&t.forum.forumLocation||t.elementForum&&t.elementForum.forum&&t.elementForum.forum.forumLocation,t.elementForum&&t.elementForum.elementTitle||t.forum&&t.forum.title])}}catch(e){}switch(t.type){case ve.SET_FORUM:return Object.assign(Object.assign({},e),{forum:t.forum});case ve.SET_CURRENT_USER:return Object.assign(Object.assign({},e),{currentUser:t.user});case ve.SET_TITLE:return Object.assign(Object.assign({},e),{title:t.title});case ve.OPEN_THREAD:case ve.CLOSE_THREAD:return function(e,t){const o=E.f.createCopy(t.thread,!1);o.isOpen=!t.thread.isOpen;const r=e.forum.threads.concat([]);return r.splice(r.indexOf(t.thread),1,o),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,r)})}(e,t);case ve.CREATE_THREAD_START:return function(e,t){const o=new E.f(`-${++yt}`,t.title,t.text,e.currentUser,0,new Date,new Date,"",!1,[]);return o.isBeingSynced=!0,Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,e.forum.threads.concat([o]))})}(e,t);case ve.CREATE_THREAD_SUCCESS:return function(e,t){const o=E.f.createCopy(t.thread);o.id=t.id,o.isBeingSynced=!1,o.link=t.link;const r=e.forum.threads.concat([]);return r.splice(r.indexOf(t.thread),1,o),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,r)})}(e,t);case ve.CREATE_THREAD_ERROR:return function(e,t){const o=e.forum.threads.concat([]);return o.splice(o.indexOf(t.thread)),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case ve.DELETE_POST_START:return function(e,t){const o=e.forum.threads.concat([]),r=E.f.createCopy(t.thread);if(t.post instanceof E.f)r.isBeingSynced=!0;else{const e=E.d.createCopy(t.post);e.isBeingSynced=!0,r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case ve.DELETE_POST_SUCCESS:return function(e,t){const o=e.forum.threads.concat([]);if(t.post instanceof E.f)o.splice(o.indexOf(t.thread),1);else{const e=E.f.createCopy(t.thread);e.posts.splice(e.posts.indexOf(t.post),1),o.splice(o.indexOf(t.thread),1,e)}return Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case ve.DELETE_POST_ERROR:return function(e,t){const o=e.forum.threads.concat([]),r=E.f.createCopy(t.thread);if(t.post instanceof E.f)r.isBeingSynced=!1;else{const e=E.d.createCopy(t.post);e.isBeingSynced=!1,r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case ve.CREATE_POST_START:return function(e,t){const o=E.f.createCopy(t.thread),r=new E.d(`-${++Ct}`,t.text,e.currentUser,0,new Date,new Date);r.isBeingSynced=!0,o.posts.push(r),o.isOpen=!0;const n=e.forum.threads.concat([]);return n.splice(n.indexOf(t.thread),1,o),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,n)})}(e,t);case ve.CREATE_POST_SUCCESS:return function(e,t){const o=E.f.createCopy(t.thread);o.isOpen=!0,o.link=t.link;const r=E.d.createCopy(t.post);r.isBeingSynced=!1,r.id=t.id,o.posts.splice(o.posts.indexOf(t.post),1,r);const n=e.forum.threads.concat([]);return n.splice(n.indexOf(t.thread),1,o),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,n)})}(e,t);case ve.CREATE_POST_ERROR:return function(e,t){const o=E.f.createCopy(t.thread);o.posts.splice(o.posts.indexOf(t.post),1),o.isOpen=t.thread.isOpen;const r=e.forum.threads.concat([]);return r.splice(r.indexOf(t.thread),1,o),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,r)})}(e,t);case ve.START_EDIT_POST:return function(e,t){let o=e.forum.threads.concat([]);const r=t.thread,n=E.f.createCopy(r);if(t.post instanceof E.f)n.isBeingEdited=!0;else{const e=E.d.createCopy(t.post);e.isBeingEdited=!0,n.posts.splice(n.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(r),1,n),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case ve.CANCEL_EDIT_POST:return function(e,t){let o=e.forum.threads.concat([]);const r=t.thread,n=E.f.createCopy(r);if(t.post instanceof E.f)n.isBeingEdited=!1;else{const e=E.d.createCopy(t.post);e.isBeingEdited=!1,n.posts.splice(n.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(r),1,n),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case ve.SAVE_EDIT_POST_START:return function(e,t){let o=e.forum.threads.concat([]);const r=t.thread,n=E.f.createCopy(r);if(t.post instanceof E.f)n.isBeingEdited=!1,n.isBeingSynced=!0,n.text=t.text,n.title=t.title;else{const e=E.d.createCopy(t.post);e.text=t.text,e.isBeingEdited=!1,e.isBeingSynced=!0,n.posts.splice(n.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(r),1,n),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case ve.SAVE_EDIT_POST_SUCCESS:return function(e,t){let o=e.forum.threads.concat([]);const r=t.thread,n=E.f.createCopy(r);if(t.post instanceof E.f)n.isBeingSynced=!1,n.isBeingEdited=!1;else{const e=E.d.createCopy(t.post);e.isBeingSynced=!1,e.isBeingEdited=!1,n.posts.splice(n.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(r),1,n),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case ve.SAVE_EDIT_POST_ERROR:return function(e,t){let o=e.forum.threads.concat([]);const r=t.thread,n=E.f.createCopy(r);if(t.post instanceof E.f)n.isBeingEdited=!0,n.isBeingSynced=!1,n.text=t.oldText;else{const e=E.d.createCopy(t.post);e.text=t.oldText,e.isBeingEdited=!0,e.isBeingSynced=!1,n.posts.splice(n.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(r),1,n),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case ve.VOTE_POST_START:return function(e,t){let o=e.forum.threads.concat([]);const r=E.f.createCopy(t.thread),n=E.g.createCopy(e.currentUser);if(t.post instanceof E.f)r.isBeingSynced=!0,r.isSyncingVotes=!0;else{const e=E.d.createCopy(t.post);e.isBeingSynced=!0,e.isSyncingVotes=!0,r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o),currentUser:n})}(e,t);case ve.VOTE_POST_SUCCESS:return function(e,t){let o=e.forum.threads.concat([]);const r=E.f.createCopy(t.thread),n=E.g.createCopy(e.currentUser);if(t.post instanceof E.f)r.votes=t.totalAmount,r.isBeingSynced=!1,r.isSyncingVotes=!1,Ot(n,r,t.userVoteAmount);else{const e=E.d.createCopy(t.post);e.votes=t.totalAmount,e.isBeingSynced=!1,e.isSyncingVotes=!1,Ot(n,e,t.userVoteAmount),r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o),currentUser:n})}(e,t);case ve.VOTE_POST_ERROR:return function(e,t){let o=e.forum.threads.concat([]);const r=E.f.createCopy(t.thread),n=E.g.createCopy(e.currentUser);if(t.post instanceof E.f)r.isBeingSynced=!1,r.isSyncingVotes=!1;else{const e=E.d.createCopy(t.post);e.isBeingSynced=!1,e.isSyncingVotes=!1,r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o),currentUser:n})}(e,t);case ve.REVOKE_VOTE_POST_START:return function(e,t){let o=e.forum.threads.concat([]);const r=E.f.createCopy(t.thread),n=E.g.createCopy(e.currentUser);if(t.post instanceof E.f)r.isBeingSynced=!0,r.isSyncingVotes=!0;else{const e=E.d.createCopy(t.post);e.isBeingSynced=!0,e.isSyncingVotes=!0,r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o),currentUser:n})}(e,t);case ve.REVOKE_VOTE_POST_SUCCESS:return function(e,t){let o=e.forum.threads.concat([]);const r=E.f.createCopy(t.thread),n=E.g.createCopy(e.currentUser);if(t.post instanceof E.f)r.votes=t.totalAmount,r.isBeingSynced=!1,r.isSyncingVotes=!1,n.votes=t.votes;else{const e=E.d.createCopy(t.post);e.votes=t.totalAmount,e.isBeingSynced=!1,e.isSyncingVotes=!1,n.votes=t.votes,r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o),currentUser:n})}(e,t);case ve.REVOKE_VOTE_POST_ERROR:return function(e,t){let o=e.forum.threads.concat([]);const r=E.f.createCopy(t.thread),n=E.g.createCopy(e.currentUser);if(t.post instanceof E.f)r.isBeingSynced=!1,r.isSyncingVotes=!1;else{const e=E.d.createCopy(t.post);e.isBeingSynced=!1,e.isSyncingVotes=!1,r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o),currentUser:n})}(e,t);case ve.TOGGLE_SPAM_START:return function(e,t){let o=e.forum.threads.concat([]);const r=E.f.createCopy(t.thread),n=E.g.createCopy(e.currentUser);if(t.post instanceof E.f)r.isBeingSynced=!0;else{const e=E.d.createCopy(t.post);e.isBeingSynced=!0,r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o),currentUser:n})}(e,t);case ve.TOGGLE_SPAM_SUCCESS:return function(e,t){let o=e.forum.threads.concat([]);const r=E.f.createCopy(t.thread),n=E.g.createCopy(e.currentUser);if(t.post instanceof E.f)r.isBeingSynced=!1,n.spamCommentIds=t.spamCommentIds;else{const e=E.d.createCopy(t.post);e.isBeingSynced=!1,n.spamCommentIds=t.spamCommentIds,r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o),currentUser:n})}(e,t);case ve.TOGGLE_SPAM_ERROR:return function(e,t){let o=e.forum.threads.concat([]);const r=E.f.createCopy(t.thread),n=E.g.createCopy(e.currentUser);if(t.post instanceof E.f)r.isBeingSynced=!1;else{const e=E.d.createCopy(t.post);e.isBeingSynced=!1,r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o),currentUser:n})}(e,t);case ve.NOTIFICATIONS_ARRIVED:return function(e,t){const o=g.a.getAllThreads(t.notificationForums),r=[],n=[];for(const t of e.forum.threads){const e=o.find(e=>e.id==t.id);e?(r.push(E.f.createCopy(e)),n.push(e)):r.push(t)}if(!n.length)return e;return Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,r)})}(e,t);case ve.TOGGLE_EDITING_SUGGESTION_START:return function(e,t){let o=e.forum.threads.concat([]);const r=E.f.createCopy(t.thread),n=E.g.createCopy(e.currentUser);if(t.post instanceof E.f)r.isBeingSynced=!0;else{const e=E.d.createCopy(t.post);e.isBeingSynced=!0,r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o),currentUser:n})}(e,t);case ve.TOGGLE_EDITING_SUGGESTION_SUCCESS:return function(e,t){let o=e.forum.threads.concat([]);const r=E.f.createCopy(t.thread);if(t.post instanceof E.f)r.isBeingSynced=!1,r.isEditingSuggestion=t.isEditingSuggestion;else{const e=E.d.createCopy(t.post);e.isBeingSynced=!1,e.isEditingSuggestion=t.isEditingSuggestion,r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case ve.TOGGLE_EDITING_SUGGESTION_ERROR:return function(e,t){let o=e.forum.threads.concat([]);const r=E.f.createCopy(t.thread);if(t.post instanceof E.f)r.isBeingSynced=!1;else{const e=E.d.createCopy(t.post);e.isBeingSynced=!1,r.posts.splice(r.posts.indexOf(t.post),1,e)}return o.splice(o.indexOf(t.thread),1,r),Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case ve.REMOVE_THREADS:return function(e,t){const o=t.threads||[],r=e.forum.threads.filter(e=>!o.find(t=>t.id==e.id));return Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,r)})}(e,t);case ve.CHANGE_AVATAR_URL:return function(e,t){const o=[];if(null==e||null==e.forum)return e;for(const r of e.forum.threads)if(r.containsCommentsByUser(t.user)){const e=E.f.createCopy(r),n=[];for(const o of e.posts)if(o.isCreatedByUser(t.user)){const e=E.d.createCopy(o);e.user=t.user,n.push(e)}else n.push(o);e.posts=n,e.isCreatedByUser(t.user)&&(e.user=t.user),o.push(e)}else o.push(r);return Object.assign(Object.assign({},e),{forum:E.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case ve.NOTIFY_AUTHOR:return function(e,t){return O.getProvider().notifyAuthor(t.user,t.post,t.message),Object.assign({},e)}(e,t);default:return e}}function Ot(e,t,o){const r=e.votes.find(e=>e.commentId==t.id);r?r.isUpVote?o<0?r.isUpVote=!1:e.votes.splice(e.votes.indexOf(r),1):o>0?r.isUpVote=!0:e.votes.splice(e.votes.indexOf(r),1):e.votes.push({commentId:t.id,isUpVote:o>0})}function kt(e){return e=>t=>{const o=e(t);switch(t.type){case ve.CREATE_THREAD_ERROR:null!=document.activeElement&&(document.activeElement.value=t.thread.text);break;case ve.CREATE_POST_ERROR:null!=document.activeElement&&(document.activeElement.value=t.post.text);break;case ve.SAVE_EDIT_POST_ERROR:if(null!=document.activeElement){document.activeElement.value=t.newText,Object.getOwnPropertyDescriptor(HTMLTextAreaElement.prototype,"value").set.call(document.activeElement,t.newText),We.a.triggerTextAreaChange(document.activeElement)}}return o}}function xt(e){return e=>t=>{const o=e(t);switch(t.type){case ve.CREATE_THREAD_SUCCESS:Rt(t.thread.id);break;case ve.CREATE_POST_SUCCESS:Rt(t.post.id)}return o}}function Rt(e){try{const t=document.querySelector(`[data-comment-id='${e}']`);if(!t)return;t.scrollIntoView({behavior:"smooth"})}catch(e){}}function At(e){return e=>t=>{const o=e(t);switch(t.type){case ve.OPEN_THREAD:!function(e){g.a.trigger(e.type,[e.thread])}(t);break;case ve.CREATE_POST_SUCCESS:case ve.CREATE_THREAD_SUCCESS:g.a.trigger(t.type,[t.id]);break;case ve.CREATE_POST_START:case ve.CREATE_THREAD_START:case ve.CREATE_POST_ERROR:case ve.CREATE_THREAD_ERROR:g.a.trigger(t.type,[])}return o}}const _t={searchQuery:null,notificationStores:null,locationForumStore:null,elementForumStore:null,searchForumStore:null,forumVisitInfo:null};function Ft(e=_t,t){switch(t.type){case T.INITIALIZE:return function(e,t){const o=Object(s.d)(Tt,Object(s.a)(d,kt,xt,At)),r=Object(s.d)(Tt,Object(s.a)(d)),n=Object(s.d)(Tt,Object(s.a)(d,kt,xt,At));null!=t.user&&(o.dispatch(ze.setCurrentUser(t.user)),n.dispatch(ze.setCurrentUser(t.user)));return Object.assign(Object.assign({},e),{isLoadingMoreProductResults:!1,hasRunOutOfProductsToLoad:!1,sortType:ne.a.MostRecent,currentUser:t.user,verticalPadding:t.verticalPadding,elementForumStore:o,searchForumStore:r,locationForumStore:n})}(e,t);case T.SET_CURRENT_USER:return function(e,t){null!=t.user&&(e.elementForumStore&&e.elementForumStore.dispatch(ze.setCurrentUser(t.user)),e.locationForumStore&&e.locationForumStore.dispatch(ze.setCurrentUser(t.user)),e.searchForumStore&&e.searchForumStore.dispatch(ze.setCurrentUser(t.user)));return Object.assign(Object.assign({},e),{currentUser:t.user})}(e,t);case T.CHANGE_AVATAR_URL:return function(e,t){const o=Object.assign(Object.assign({},e.currentUser),{avatarUrl:t.avatarUrl});null!=e.elementForumStore&&(e.elementForumStore.dispatch(ze.changeAvatarUrl(o,t.avatarUrl)),e.elementForumStore.dispatch(ze.setCurrentUser(o)));null!=e.locationForumStore&&(e.locationForumStore.dispatch(ze.changeAvatarUrl(o,t.avatarUrl)),e.locationForumStore.dispatch(ze.setCurrentUser(o)));null!=e.searchForumStore&&(e.searchForumStore.dispatch(ze.changeAvatarUrl(o,t.avatarUrl)),e.searchForumStore.dispatch(ze.setCurrentUser(o)));return Object.assign(Object.assign({},e),{currentUser:o})}(e,t);case T.CREATE_AND_SET_ELEMENT_FORUM:return function(e,t){let o=t.productForum.elementForums&&t.productForum.elementForums.find(e=>e.element==t.element),r=t.productForum;null==o&&(o=new E.a(t.element,t.elementTitle,new E.b(g.a.adjustElementTitle(t.elementTitle),new E.c(t.productForum.productExternalId,t.element,"","",t.meapVersion),[],t.productForum.authorIdMap,t.productForum.moderatorIdMap),new Date(1970)),(r=E.e.createCopy(r)).elementForums.push(o));null!=o&&(e.elementForumStore.dispatch(ze.setForum(o.forum)),g.a.setCurrentLocation(o.forum.forumLocation));let n=e.forumVisitInfo;null!=n&&n[t.productForum.productId]&&((n=Object.assign({},e.forumVisitInfo))[t.productForum.productId]={lastVisitDate:n[t.productForum.productId].lastVisitDate,visitedElements:Object.assign({},n[t.productForum.productId].visitedElements||{})},n[t.productForum.productId].visitedElements[t.element]=!0);return Object.assign(Object.assign({},e),{productForum:r,searchQuery:"",isShowingElementForum:!0,isShowingLocationForum:!1,title:o.elementTitle,isLoading:!1,forumVisitInfo:n})}(e,t);case T.SET_ELEMENT_FORUM:return function(e,t){let o=t.elementForum;null!=o&&(e.elementForumStore&&e.elementForumStore.dispatch(ze.setForum(o.forum)),g.a.setCurrentLocation(o.forum.forumLocation));let r=e.forumVisitInfo;null!=r&&r[t.productForum.productId]&&((r=Object.assign({},e.forumVisitInfo))[t.productForum.productId]={lastVisitDate:r[t.productForum.productId].lastVisitDate,visitedElements:Object.assign({},r[t.productForum.productId].visitedElements||{})},r[t.productForum.productId].visitedElements[t.elementForum.element]=!0);return Object.assign(Object.assign({},e),{searchQuery:"",isShowingElementForum:!0,isShowingLocationForum:!1,title:o.elementTitle,isLoading:!1,forumVisitInfo:r})}(e,t);case T.SET_LOCATION_FORUM:return function(e,t){null!=t.locationForum&&(e.locationForumStore.dispatch(ze.setForum(t.locationForum)),g.a.setCurrentLocation(t.locationForum.forumLocation));return Object.assign(Object.assign({},e),{isShowingLocationForum:!0})}(e,t);case T.FETCH_PRODUCT_FORUM_START:return function(e,t){return Object.assign(Object.assign({},e),{searchQuery:"",searchResultsForum:null,isLoading:!0})}(e);case T.FETCH_PRODUCT_FORUM_SUCCESS:return function(e,t){let o=t.productForum;const r=Ut(e).filter(e=>e.forumLocation.productExternalId==o.productExternalId);r.length>0&&(o=Lt(o,r));return Object.assign(Object.assign({},e),{productForum:o,isLoading:!1,title:t.productForum.productTitle})}(e,t);case T.FETCH_PRODUCT_FORUM_ERROR:return function(e,t){return Object.assign(Object.assign({},e),{productForum:null,isLoading:!1,title:g.a.getDefaultForumTitle()})}(e);case T.FETCH_PRODUCT_FORUMS_START:return function(e,t){return Object.assign(Object.assign({},e),{isLoading:!0,title:g.a.getDefaultForumTitle()})}(e);case T.FETCH_PRODUCT_FORUMS_SUCCESS:return function(e,t){let o=t.productForums;const r=Ut(e);r.length>0&&(o=Mt(o,r));return Object.assign(Object.assign({},e),{productForums:o,isLoading:!1,title:g.a.getDefaultForumTitle()})}(e,t);case T.FETCH_PRODUCT_FORUMS_ERROR:return function(e,t){return Object.assign(Object.assign({},e),{productForums:[],isLoading:!1,title:g.a.getDefaultForumTitle()})}(e);case T.FETCH_ADDITIONAL_PRODUCT_FORUMS_START:return function(e,t){return Object.assign(Object.assign({},e),{isLoading:!1,isLoadingMoreProductResults:!0})}(e);case T.FETCH_ADDITIONAL_PRODUCT_FORUMS_SUCCESS:return function(e,t){let o=e.productForums.concat([]),r=t.productForums;const n=Ut(e);n.length>0&&(r=Mt(r,n));const i={};if(null!=o&&o.length>0)for(const e of o)i[e.productId]=!0;for(const e of r)i[e.productId]||(i[e.productId]=!0,o.push(e));return Object.assign(Object.assign({},e),{productForums:o,isLoadingMoreProductResults:!1,hasRunOutOfProductsToLoad:null==r||0==r.length})}(e,t);case T.FETCH_ADDITIONAL_PRODUCT_FORUMS_ERROR:return function(e,t){return Object.assign(Object.assign({},e),{isLoadingMoreProductResults:!1})}(e);case T.REFRESH_ELEMENT_FORUM_START:case T.REFRESH_ELEMENT_FORUM_SUCCESS:case T.REFRESH_ELEMENT_FORUM_SKIP:case T.REFRESH_ELEMENT_FORUM_ERROR:return function(e,t){return Object.assign({},e)}(e);case T.CLEAR_LOCATION_FORUM_CLEAR:return Object.assign(Object.assign({},e),{isShowingLocationForum:!1,isLoading:!0});case T.CLEAR_ELEMENT_FORUM_CLEAR:return Object.assign(Object.assign({},e),{isShowingLocationForum:!1,isShowingElementForum:!1,title:null!=e.productForum&&e.productForum.productTitle||g.a.getDefaultForumTitle(),isLoading:!0});case T.CLEAR_PRODUCT_FORUM_CLEAR:return function(e,t){return Object.assign(Object.assign({},e),{productForum:null,title:g.a.getDefaultForumTitle(),forumVisitInfo:It(e),isLoading:!0})}(e);case T.SEARCH_START:return Object.assign(Object.assign({},e),{isLoading:!0,searchResultsForum:null});case T.SEARCH_SUCCESS:return function(e,t){const o=new E.b("search results",null,t.results,{},{});return e.searchForumStore.dispatch(ze.setForum(o)),e.searchForumStore.dispatch(ze.setCurrentUser(e.currentUser)),Object.assign(Object.assign({},e),{isLoading:!1,searchResultsForum:o})}(e,t);case T.SEARCH_ERROR:return Object.assign(Object.assign({},e),{isLoading:!1,searchResultsForum:null});case T.CLEAR_SEARCH:return Object.assign(Object.assign({},e),{searchQuery:"",isLoading:!1,searchResultsForum:null});case T.SET_SEARCH_QUERY:return Object.assign(Object.assign({},e),{searchQuery:t.searchQuery});case T.GO_TO_ROOT:return function(e,t){return Object.assign(Object.assign({},e),{isShowingLocationForum:!1,isShowingElementForum:!1,productForum:null,productForums:null,isLoading:!0,searchResultsForum:null,forumVisitInfo:It(e)})}(e);case T.FETCH_FULL_PATH_TO_LOCATION_FORUM_START:return Object.assign(Object.assign({},e),{isLoading:!0,searchResultsForum:null});case T.FETCH_FULL_PATH_TO_LOCATION_FORUM_SUCCESS:return function(e,t){let o=t.locationForum,r=t.elementForum,n=t.productForum;const i=Ut(e).filter(e=>e.forumLocation.productExternalId==t.productForum.productExternalId);i.length>0&&(null!=o&&(o=Dt(o,i)),null!=r&&(r=Dt(r,i)),null!=n&&(n=Lt(n,i)));null!=o&&null!=e.locationForumStore&&(e.locationForumStore.dispatch(ze.setForum(o)),g.a.setCurrentLocation(o.forumLocation));null!=r&&null!=e.elementForumStore&&e.elementForumStore.dispatch(ze.setForum(r));return Object.assign(Object.assign({},e),{isLoading:!1,isShowingLocationForum:null!=o,isShowingElementForum:null!=r,productForum:n})}(e,t);case T.FETCH_FULL_PATH_TO_LOCATION_FORUM_ERROR:return Object.assign(Object.assign({},e),{isLoading:!1});case T.SET_VERTICAL_PADDING:return Object.assign(Object.assign({},e),{verticalPadding:t.verticalPadding});case T.SHOW_COMMENT:return function(e,t){return Object.assign(Object.assign({},e),{commentIdToShow:t.commentId})}(e,t);case T.SET_SORT_TYPE:return function(e,t){return Object.assign(Object.assign({},e),{sortType:t.sortType})}(e,t);case T.SET_DIRECT_NOTIFICATIONS:return function(e,t){return Pt(e,t.notificationForums,t.updateCurrentlyDisplayedForum)}(e,t);case T.SHOW_ALL_NOTIFICATIONS_LOADING:return Object.assign(Object.assign({},e),{isShowingNotificationsForum:!1,isLoading:!0});case T.SHOW_ALL_NOTIFICATIONS:return function(e,t){let o=e.productForum,r=e.productForums;null!=o&&(o=Nt(o));null!=r&&(r=r.map(e=>Nt(e)));return Object.assign(Object.assign({},e),{productForum:o,productForums:r,isShowingNotificationsForum:!0,isLoading:!1})}(e);case T.CLEAR_NOTIFICATIONS:return function(e,t){return Object.assign(Object.assign({},Pt(e,[])),{isShowingNotificationsForum:!1})}(e);case T.CLEAR_THREAD_NOTIFICATIONS:return function(e,t){const o=e.notificationStores||[],r=[],n=(t.threadIds||[]).map(e=>+e),i=(t.threadIds||[]).map(e=>e+"");for(const e of o){if(null==e)continue;const t=e.getState().forum,o=t.threads.filter(e=>-1!=n.indexOf(e.id)||-1!=i.indexOf(e.id));o.length>0?o.length<t.threads.length&&e.dispatch(ze.removeThreads(o)):r.push(e)}return Pt(e,r.map(e=>e.getState().forum))}(e,t);case T.SET_FORUM_VISIT_INFO:return function(e,t){return Object.assign(Object.assign({},e),{forumVisitInfo:t.forumVisitInfo})}(e,t)}return e}function It(e){let t=e.forumVisitInfo;return null!=t&&null!=e.productForum&&t[e.productForum.productId]&&((t=Object.assign({},t))[e.productForum.productId]={lastVisitDate:new Date,visitedElements:t[e.productForum.productId].visitedElements}),t}function Pt(e,t,o=!0){const r=e.notificationStores||[],n=g.a.getNotificationsCount(t),i=t.map(t=>{let o=r.find(e=>g.a.areTwoForumsSame(e.getState().forum,t));return null==o&&(null==(o=r.find(e=>g.a.twoForumsShareTheSameRootThread(e.getState().forum,t)))&&(o=Object(s.d)(Tt,Object(s.a)(d,kt,xt))).dispatch(ze.setCurrentUser(e.currentUser)),o.dispatch(ze.setForum(t))),o});let a=e.locationForumStore&&e.locationForumStore.getState().forum,c=e.elementForumStore&&e.elementForumStore.getState().forum,l=e.productForum,u=e.productForums;return o&&(null!=a&&(a=Dt(a,t),null!=e.locationForumStore&&e.locationForumStore.getState().forum!=a&&e.locationForumStore.dispatch(ze.setForum(a))),null!=c&&(c=Dt(c,t),null!=e.elementForumStore&&e.elementForumStore.getState().forum!=c&&e.elementForumStore.dispatch(ze.setForum(c))),null!=l&&(l=Lt(l,t)),null!=u&&(u=Mt(u,t))),Object.assign(Object.assign({},e),{notificationsCount:n,notificationStores:i,isShowingLocationForum:e.isShowingLocationForum,isShowingElementForum:e.isShowingElementForum,productForum:l,productForums:u})}function Nt(e){if(null==e||!e.numberOfNewComments)return e;const t=E.e.createCopy(e);return t.numberOfNewComments=0,t.elementForums=function(e){const t=[];for(const o of e)if(o.numberOfNewComments){const e=E.a.createCopy(o);e.numberOfNewComments=0,t.push(e)}else t.push(o);return t}(e.elementForums),t}function Mt(e,t){return e.map(e=>Lt(e,t))}function Lt(e,t){const o=t.filter(t=>t.forumLocation.productExternalId==e.productExternalId);return 0!=o.length||e.numberOfNewComments?((e=E.e.createCopy(e)).numberOfNewComments=g.a.getNotificationsCount(o),null!=e.elementForums&&(e.elementForums=function(e,t){const o=[];for(const r of e){const e=t.filter(e=>e.forumLocation.element==r.element);if(0!=e.length||r.numberOfNewComments){const t=E.a.createCopy(r);t.forum=Dt(t.forum,e),t.numberOfNewComments=g.a.getNotificationsCount(e),o.push(t)}else o.push(r)}return o}(e.elementForums,o)),e):e}function Dt(e,t){if(!e||!e.forumLocation)return e;const o=e.forumLocation,r=t.filter(e=>{const t=e.forumLocation;return!!t&&(t.productExternalId==o.productExternalId&&(t.element||"general").toLowerCase()==(o.element||"general").toLowerCase())});if(0==r.length)return e;const n=E.b.createCopy(e);return n.threads=function(e,t){const o=[],r=[],n={};for(const e of t){for(const t of e.threads)n[t.id]=t;r.push(...e.threads)}for(const t of e){const e=n[t.id];if(null==e){const e=E.f.createCopy(t);e.isOpen=!1,o.push(e)}else{const t=E.f.createCopy(e);t.isOpen=!0,o.push(t)}}return o}(n.threads,r),n}function Ut(e){return e&&e.notificationStores&&e.notificationStores.length?e.notificationStores.map(e=>e.getState().forum):[]}let jt=!1,Bt="";function Vt(e){return t=>o=>{o.type==T.CLEAR_NOTIFICATIONS&&null!=e&&function(e,t){const o=g.a.getAllThreads((e.notificationStores||[]).map(e=>e.getState().forum)).map(e=>e.id);o.length&&O.getProvider().markAsSeen(o)}(e.getState());const r=t(o);switch(o.type){case T.CLEAR_SEARCH:const e=document.querySelector(".forum-header-search-input");e&&(e.value="");break;case T.SHOW_COMMENT:!function(e){try{const t=document.querySelector(`[data-comment-id='${e}'] .user-comment-text-container`);if(null!=t){if(g.a.getSourceApp()!=Se.b.livevideo&&g.a.getSourceApp()!=Se.b.pbc||null==window.jQuery)t.scrollIntoView();else{const e=window.jQuery(".social-scrollable-container");e.animate({scrollTop:e.scrollTop()+window.jQuery(t).offset().top},1e3)}t.classList.add("emphasized"),setTimeout(()=>{t.classList.remove("emphasized")},3e3)}}catch(e){}}(o.commentId);break;case T.SET_ELEMENT_FORUM:case T.SET_LOCATION_FORUM:g.a.trigger("VIEWING_FORUM_START",[]);break;case T.CLEAR_ELEMENT_FORUM:case T.CLEAR_ELEMENT_FORUM_CLEAR:case T.CLEAR_LOCATION_FORUM:case T.CLEAR_LOCATION_FORUM_CLEAR:case T.CLEAR_PRODUCT_FORUM:case T.CLEAR_PRODUCT_FORUM_CLEAR:g.a.trigger("VIEWING_FORUM_STOP",[]);break;case T.REFRESH_ELEMENT_FORUM_START:!function(){const e=document.querySelector(".social-scrollable-container");if(jt=We.a.isScrolledToBottom(e),e){const t=e.querySelector(".thread-root-container:last-of-type");Bt=null!=t?t.getAttribute("data-comment-id"):""}}();break;case T.REFRESH_ELEMENT_FORUM_SKIP:case T.REFRESH_ELEMENT_FORUM_SUCCESS:!function(){if(jt){const e=document.querySelector(".social-scrollable-container");if(e){const t=e.querySelector(".thread-root-container:last-of-type"),o=null!=t?t.getAttribute("data-comment-id"):"";Bt!=o&&We.a.scrollElementTop(e,We.a.getTopOffsetForBottomPosition(e),250)}}}();case T.REFRESH_ELEMENT_FORUM_ERROR:g.a.trigger(o.type,[])}return r}}var Ht=o(21),qt=o(9),$t=o(1),zt=o(39),Wt=o(166),Gt=o(4),Qt=o(0),Yt=o(14);o(736);class Kt extends r.Component{constructor(e){super(e),this.handleActionClicked=this.handleActionClicked.bind(this)}render(){return r.createElement(Xe.b,{title:"email notifications",isOpen:this.props.isShown,onClose:this.props.onClose,theme:Xe.a.standard,onActionClicked:this.handleActionClicked,onCancelationClicked:this.props.onClose,actionMessageHTML:"save"},r.createElement("form",{ref:e=>this.root=e,className:"social-email-notifications-form"},r.createElement("label",null,r.createElement("input",{type:"checkbox"}),r.createElement("span",null,"email me when someone replies to my comment"))))}handleActionClicked(){this.props.onAccept&&this.props.onAccept(this.root.querySelector("input").checked)}}var Jt=o(15);class Xt extends r.Component{constructor(e){super(e)}render(){return r.createElement(Xe.b,{title:"Code of Conduct",isOpen:this.props.isShown,onClose:this.props.onClose,theme:Xe.a.standard,onActionClicked:this.props.onClose,actionMessageHTML:"ok"},r.createElement("p",null,"The Manning forums are a place for readers and computer scientists to engage in technological discussions, specifically as they relate to the content we publish. We expect users to treat each other with respect and to make meaningful contributions to these discussions."),r.createElement("p",null,"Advertising by anyone other than Manning or our authors is strictly prohibited on our forums. Any advertisements for goods or services, including training or seminars, will be treated as spam."),r.createElement("p",null,"We reserve the right to moderate or remove content that we deem inappropriate or to ban or delete users who, at our sole discretion, we determine to be abusive or not conducive to an engaging and respectful environment."))}}var Zt=o(10),eo=o(2);const to=new class{showProfileImageUploadModal(){this.getSource().then(({ProfileImageUploadModal:e})=>{e.show()})}getSource(){return this.sourcePromise||(this.sourcePromise=eo.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return o.e(66).then(o.bind(null,1214))}};var oo=o(6),ro=o(60);window.handleUploadImageToS3=function(e,t,o,r){$t.a.postToOurBackend($t.a.getAbsoluteUrl("api/comment/uploadImage"),e=>o(e.url),e=>o(""),{imageName:t,imageBase64Content:e})};class no{constructor(){this.commentIdForOpening="",this.userDataFetched=!1,this.handleForumClose=this.handleForumClose.bind(this),this.handleForumSlideMenuBeginOpening=this.handleForumSlideMenuBeginOpening.bind(this),this.handleSocialEvent=this.handleSocialEvent.bind(this),this.handlePostCreated=this.handlePostCreated.bind(this),this.handleInitialize=this.handleInitialize.bind(this),this.handleAvatarChange=this.handleAvatarChange.bind(this),this.handleAvatarUrlUpdate=this.handleAvatarUrlUpdate.bind(this),this.socialWebProvider=ro.DiscussionParagraphNotifications.socialWebProvider,O.initializeProvider(this.socialWebProvider),this.productForumStore=Object(s.d)(Ft,Object(s.a)(d,kt,Vt,e=>e=>t=>{const o=e(t);return t.type==T.FETCH_PRODUCT_FORUM_SUCCESS&&oo.a.isCurrentlyLoggedIn()&&this.socialWebProvider.createDiscussionVisitInfo(t.productForum.productId).then(()=>{}).catch(e=>console.log("Error saving discussion visit info")),o})),this.setHeightConstraints(),this.$discussionsSlideMenu=$("#discussions-slide-menu"),0==this.$discussionsSlideMenu.length&&($(document.body).append('<div id="discussions-slide-menu" class="text-slide-menu text-slide-menu-right"></div>'),this.$discussionsSlideMenu=$("#discussions-slide-menu")),this.discussionsSlideMenu=new Wt.a(this.$discussionsSlideMenu,$(null),{beforeOpenCallback:this.handleForumSlideMenuBeginOpening,beforeOutsideClickCloseCallback:()=>{return 0!=this.$discussionsSlideMenu.find(".previewable-markdown-editor-root textarea, .thread-input-title-input").filter((e,t)=>{return""!=$(t).val().trim()}).length},sidePadding:-45,dontOpenWhenDisconnected:!0}),$(document).on("socialEvent",this.handleSocialEvent).on("initializeRequested",this.handleInitialize).on("requestAvatarUrlUpdate",(e,t)=>this.handleAvatarUrlUpdate(t)).on("forumOpened",()=>{setTimeout(()=>{oo.a.isCurrentlyLoggedIn()&&!Jt.a.get("discussions-code-of-conduct-shown")&&(Jt.a.set("discussions-code-of-conduct-shown",!0),this.renderCodeOfConductModal())},1e3)}),g.a.on("CREATE_POST_SUCCESS",this.handlePostCreated),g.a.on("CREATE_THREAD_SUCCESS",this.handlePostCreated),g.a.shouldShowOnlineStatus=!1}handleInitialize(e,t,o,r){this._initialize(t,o,r)}initialize(e,t,o,r){oo.a.isLoggedIn().then(()=>this._initialize(e,t,o,r)).catch(()=>this._initialize(e,t,o,r))}_initialize(e,t,o,r){this.book=e,this.bookElement=t,this.discussionsSlideMenu.isOpened()&&this.discussionsSlideMenu.adjustMainBookContentContainerPosition(),null==this.book||null==this.bookElement||this.bookElement.reviewVersion?this.socialWebProvider.getProductForums(g.a.getTomorrowsDate(),g.a.getNextEndDate()).then(e=>{null!=this.book&&null!=this.bookElement||this.productForumStore.dispatch(re.fetchProductForumsSuccess(e)),r&&this.open()}):this.socialWebProvider.getProductComments(this.book.shortName).then(n=>{if(null==this.book||null==this.bookElement)return;if(this.book!=e||this.bookElement!=t)return;const i=new E.e(n.productId,n.productExternalId,+n.meapVersion,n.productSlug,n.productTitle,n.numberOfComments,0,n.lastCommentDate,n.elementForums,!0,!1,!1),s=Zt.a.isDiscussionErrata(o)?i.elementForums.find(e=>"Errata"==e.element):i.elementForums.find(e=>null!=this.bookElement&&e.element==this.bookElement.shortName);this.discussionsSlideMenu.isOpened()||(null!=s?this.productForumStore.dispatch(re.setElementForum(s,i)):this.productForumStore.dispatch(re.fetchProductForumSuccess(i)),r&&this.open())}).catch(e=>{console.log(e)}),this.userDataFetched||this.fetchUserData(),this.discussionsSlideMenu.isOpened()&&this.discussionsSlideMenu.handleResize()}clean(){this.book=null,this.bookElement=null,this.commentIdForOpening=""}open(){this.discussionsSlideMenu.open(),$(document).trigger("discussionMenuOpened")}isOpened(){return this.discussionsSlideMenu.isOpened()}close(){this.closeParagraphSideMenu(),this.closeSlideMenu()}fetchUserData(){Yt.a.getUserDetails().then(e=>{if(!e)return this.currentUser=null,void this.productForumStore.dispatch(re.initialize(this.currentUser,this.getHeightConstraints()));this.currentUser=e,this.socialWebProvider.getUsersCommentInfo().then(e=>{this.currentUser.votes=e.votes||[],this.currentUser.spamCommentIds=e.spamCommentIds||[],this.currentUser.commentIds=e.commentIds||[],this.currentUser.authorizedProductIds=this.createAuthorizedProductsMap(e.authorizedProductIds),this.productForumStore.dispatch(re.initialize(this.currentUser,this.getHeightConstraints())),this.userDataFetched=!0}).catch(e=>{this.currentUser.votes=[],this.currentUser.spamCommentIds=[],this.currentUser.commentIds=[],this.productForumStore.dispatch(re.initialize(this.currentUser,this.getHeightConstraints()))})}).catch(e=>{this.currentUser=null,this.productForumStore.dispatch(re.initialize(this.currentUser,this.getHeightConstraints()))})}setHeightConstraints(){this.productForumStore.dispatch(re.setVerticalPadding(this.getHeightConstraints()))}getHeightConstraints(){let e=qt.a.getTopNavBarHeight()+qt.a.getFooterHeight();return Qt.b.isApp()||!Qt.b.isAndroid()&&!Qt.b.isIOS()||(e+=70),e}markAsSpam(e){return this.socialWebProvider.toggleSpam(this.currentUser,e,!0)}clearSpamFlags(e){return this.socialWebProvider.clearSpamFlags(e)}markAsEditSuggestion(e){return this.socialWebProvider.toggleEditSuggestion(this.currentUser,e,!0)}showCommentWhenReady(e,t,o,r){null!=this.book?(this.discussionsSlideMenu.isOpened()||r||Ht.a.showTemporaryNotification("opening up comment..."),this.socialWebProvider.getProductComments(this.book&&this.book.shortName).then(t=>{const n=t.elementLocationsForums[this.bookElement&&this.bookElement.shortName];let i=this.getCommentIdLocation(n,e);if(!i&&r&&(i=$(".readable-text").attr("data-hash")||$(".readable-text").attr("refid")),i){const t=document.querySelector(`[data-hash='${i}'], [refid='${i}']`);if(!t)return this.discussionsSlideMenu.isOpened()||r||(this.commentIdForOpening=e,$(document).trigger("forumOpened"),this.open()),void(o&&o());zt.a.scrollToElement(t,()=>{!this.discussionsSlideMenu.isOpened()&&!r&&this.openParagraphSideMenu(t.paragraphBubble,e),$(t).addClass("paragraph-focused"),Gt.a.setTimeout(()=>{$(t).removeClass("paragraph-focused")},2e3),o&&o()})}else this.discussionsSlideMenu.isOpened()||r||(this.commentIdForOpening=e,$(document).trigger("forumOpened"),this.open()),o&&o()}).catch(e=>{Ht.a.showTemporaryNotification("Error opening comment, try later."),o&&o()})):t<5&&Gt.a.setTimeout(()=>{this.showCommentWhenReady(e,t+1,o)},1e3)}getCommentIdLocation(e,t){if(!e)return"";for(const o in e){const r=e[o];if(r&&r.threads)for(let e=0;e<r.threads.length;e++){const n=r.threads[e];if(n&&n.id==t)return o;for(let e=0;e<n.posts.length;e++){const r=n.posts[e];if(r&&r.id==t)return o}}}return""}openParagraphSideMenu(e,t){if(!e)return;$(document).trigger("requestSelectForumsBubble",[e]),this.selectedParagraphButton=e;const o=$(this.selectedParagraphButton.paragraph),n=o.attr("data-hash")||o.attr("refid");g.a.addLocationReplacementMapItem(n,`¶${o.attr("refid")}`),t?this.productForumStore.dispatch(re.fetchFullPathToLocationForumAndShowComment(this.book.shortName,this.bookElement.shortName,n,this.getCurrentBaseLink(),this.bookElement.meapVersion,o.attr("refid"),t)):this.productForumStore.dispatch(re.fetchFullPathToLocationForum(this.book.shortName,this.bookElement.shortName,n,this.getCurrentBaseLink(),this.bookElement.meapVersion,o.attr("refid"))),i.render(r.createElement(a.a,{store:this.productForumStore},r.createElement(Et,{onClose:this.handleForumClose,onChangeAvatarRequested:this.handleAvatarChange})),this.$discussionsSlideMenu.get(0),()=>{$(document).trigger("forumOpened"),this.open()})}renderCodeOfConductModal(e=!0){e?i.render(r.createElement(Xt,{isShown:e,onClose:()=>this.renderCodeOfConductModal(!1)}),document.getElementById("full-screen-modal")):i.unmountComponentAtNode(document.getElementById("full-screen-modal"))}closeParagraphSideMenu(){this.discussionsSlideMenu.close(),$(document).trigger("requestDeselectForumsBubble",this.selectedParagraphButton),this.selectedParagraphButton=null}handleSocialEvent(e,t,o,r){null!=this.book&&null!=this.bookElement&&o&&o.productExternalId==this.book.shortName&&o.element==this.bookElement.shortName&&null!=this.selectedParagraphButton&&this.synchronizeParagraphCount(o,t)}synchronizeParagraphCount(e,t){t=t||"";const o=$(this.selectedParagraphButton.paragraph),r=o.attr("data-hash")||o.attr("refid");if(e.location!=r)return;let n=+$(this.selectedParagraphButton).find(".comment-count-container").text()||0;-1!=t.toLowerCase().indexOf("create")?n++:-1!=t.toLowerCase().indexOf("delete")&&n--,$(document).trigger("paragraphButtonsSetForumCount",[this.selectedParagraphButton,n])}handleForumClose(){this.close()}getCommentCount(e){let t=0;for(const o of e.threads)t+=o.posts.length+1;return t}handleForumSlideMenuBeginOpening(){null==this.book||null==this.bookElement||this.bookElement.reviewVersion?this.productForumStore.dispatch(re.fetchProductForums()):this.commentIdForOpening?(this.productForumStore.dispatch(re.fetchProductForumAndShowComment(this.book.shortName,this.commentIdForOpening)),this.commentIdForOpening=""):this.productForumStore.dispatch(re.fetchProductForum(this.book.shortName)),i.render(r.createElement(a.a,{store:this.productForumStore},r.createElement(Et,{onClose:this.handleForumClose,onChangeAvatarRequested:this.handleAvatarChange})),this.$discussionsSlideMenu.get(0)),$(document).trigger("forumOpened")}closeSlideMenu(){this.discussionsSlideMenu.close()}getCurrentBaseLink(){return this.book?`/book/${this.book.slug}/${this.bookElement.shortName}`:""}handlePostCreated(e){null!=this.currentUser&&(null==this.currentUser.commentIds||0==this.currentUser.commentIds.length?(this.currentUser.commentIds=[e],Jt.a.get("discussions-email-notifications-offered")||(Jt.a.set("discussions-email-notifications-offered",!0),this.renderEmailNotificationConfirmationModal())):this.currentUser.commentIds.push(e))}renderEmailNotificationConfirmationModal(e=!0){e?i.render(r.createElement(Kt,{isShown:e,onAccept:e=>{this.saveEmailNotification(e),this.renderEmailNotificationConfirmationModal(!1)},onClose:()=>{this.saveEmailNotification(!1),this.renderEmailNotificationConfirmationModal(!1)}}),document.getElementById("full-screen-modal")):i.unmountComponentAtNode(document.getElementById("full-screen-modal"))}saveEmailNotification(e){$(document).trigger("requestUpdateReceiveCommentNotificationEmails",e)}createAuthorizedProductsMap(e){const t={};if(!e||!e.length)return t;for(const o of e)t[o]=!0;return t}handleAvatarChange(){to.showProfileImageUploadModal()}handleAvatarUrlUpdate(e){this.currentUser=Object.assign(Object.assign({},this.currentUser),{avatarUrl:e}),this.productForumStore.dispatch(re.changeAvatarUrl(e))}}const io=new no},88:function(e,t,o){"use strict";var r,n=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var o=document.querySelector(t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}e[t]=o}return e[t]}}(),s=[];function a(e){for(var t=-1,o=0;o<s.length;o++)if(s[o].identifier===e){t=o;break}return t}function c(e,t){for(var o={},r=[],n=0;n<e.length;n++){var i=e[n],c=t.base?i[0]+t.base:i[0],l=o[c]||0,d="".concat(c," ").concat(l);o[c]=l+1;var u=a(d),h={css:i[1],media:i[2],sourceMap:i[3]};-1!==u?(s[u].references++,s[u].updater(h)):s.push({identifier:d,updater:g(h,t),references:1}),r.push(d)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var n=o.nc;n&&(r.nonce=n)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var s=i(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,o,r){var n=o?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(t,n);else{var i=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function p(e,t,o){var r=o.css,n=o.media,i=o.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,f=0;function g(e,t){var o,r,n;if(t.singleton){var i=f++;o=m||(m=l(t)),r=h.bind(null,o,i,!1),n=h.bind(null,o,i,!0)}else o=l(t),r=p.bind(null,o,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(o)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var o=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<o.length;r++){var n=a(o[r]);s[n].references--}for(var i=c(e,t),l=0;l<o.length;l++){var d=a(o[l]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}o=i}}}},89:function(e,t,o){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o=function(e,t){var o=e[1]||"",r=e[3];if(!r)return o;if(t&&"function"==typeof btoa){var n=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),i=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[o].concat(i).concat([n]).join("\n")}var s,a,c;return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(o,"}"):o})).join("")},t.i=function(e,o,r){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(r)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(n[s]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);r&&n[c[0]]||(o&&(c[2]?c[2]="".concat(o," and ").concat(c[2]):c[2]=o),t.push(c))}},t}}}]);
//# sourceMappingURL=discussionModule.chunk.js.map?7925b37cbc58aba9c0cd