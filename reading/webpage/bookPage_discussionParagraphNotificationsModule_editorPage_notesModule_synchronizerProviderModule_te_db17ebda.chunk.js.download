(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{141:function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var s=o(0),i=o(165),n=o(181),r=o(145),h=o(8),a=o(1);class d{fetchTextAddons(e){return new Promise((t,o)=>{a.a.getFromOurBackend(a.a.getAbsoluteUrl("api/textAddon/fetchTextAddonsForUsersBook"),e=>t(e),e=>o(e),{bookShortName:e.book.shortName})})}addBookmarks(e,t){return t&&0!=t.length?new Promise((o,s)=>{a.a.postToOurBackend(a.a.getAbsoluteUrl("api/bookmarks/addBookmarks"),e=>{const s=e;for(let e=0;e<s.length;e++)t[e].id=s[e];o(t)},e=>s(e),{bookmarks:JSON.stringify(t),bookShortName:e.book.shortName})}):Promise.resolve([])}addBookmark(e,t,o,s,i){const r=new n.a(-1,e.shortName,e.ordinal,t,o,s,i,Date.now(),e.meapVersion);return r.isBeingSynced=!0,new Promise((n,h)=>{a.a.postToOurBackend(a.a.getAbsoluteUrl("api/bookmarks/addBookmark"),e=>{r.id=e.bookmarkID,r.isBeingSynced=!1,n(r)},e=>{r.isBeingSynced=!1,h(e)},{book:e.book.shortName,bookElement:e.shortName,productId:e.book.manningId,bookElementOrdinal:e.ordinal,contentID:t,contentHash:o,bookmarkedText:s,contentLocation:i,meapVersion:e.meapVersion})})}removeBookmark(e,t=0){return new Promise((e,o)=>{a.a.postToOurBackend(a.a.getAbsoluteUrl("api/bookmarks/removeBookmark"),t=>e(!0),e=>{console.log("Error when syncing bookmark",e),o(e)},{bookmarkID:t})})}addHighlight(e,t,o,s){const i=new r.b(-1,e.book.shortName,e.shortName,e.ordinal,e.meapVersion,o,t,Date.now(),s);return i.isBeingSynced=!0,new Promise((n,r)=>{a.a.postToOurBackend(a.a.getAbsoluteUrl("api/highlight/createHighlight"),e=>{i.id=e.id,i.isBeingSynced=!1,n(i)},e=>{console.log("Error when syncing highlight",e),i.isBeingSynced=!1,r(e)},{bookShortName:e.book.shortName,productId:e.book.manningId,bookElementShortName:e.shortName,bookElementOrdinal:e.ordinal,meapVersion:e.meapVersion,highlightedParagraphsJson:JSON.stringify(t),offset:s,color:o})})}removeHighlight(e,t){return new Promise((e,o)=>{a.a.postToOurBackend(a.a.getAbsoluteUrl("api/highlight/deleteHighlight"),t=>e(!0),e=>o(e),{highlightID:t})})}changeHighlightColor(e,t,o){return t&&o?new Promise((s,i)=>{a.a.postToOurBackend(a.a.getAbsoluteUrl("api/highlight/changeColor"),e=>s(!0),e=>i(e),{bookShortName:e.book.shortName,highlightID:t,color:o})}):Promise.reject("No highlight to change color to")}addNote(e,t,o,s,n,r,h,d){const m=new i.a(-1,e.shortName,e.ordinal,t,o,s,n,r,Date.now(),e.meapVersion,e.reviewVersion);return m.isBeingSynced=!0,new Promise((i,l)=>{a.a.postToOurBackend(a.a.getAbsoluteUrl("api/note/createNote"),e=>{m.id=e.id,m.isBeingSynced=!1,i(m)},e=>{console.log("Error when syncing note",e),m.isBeingSynced=!1,l(e)},{book:e.book.shortName,productId:e.book.manningId,bookElement:e.shortName,bookElementOrdinal:e.ordinal,contentItemID:t,contentHash:o,annotatedText:s,noteText:n,contentLocation:r,meapVersion:h,reviewVersion:d})})}addNotes(e,t){return t&&0!=t.length?new Promise((o,s)=>{a.a.postToOurBackend(a.a.getAbsoluteUrl("api/notes/addNotes"),e=>{const s=e;for(let e=0;e<s.length;e++)t[e].id=s[e];o(!0)},e=>s(e),{notes:JSON.stringify(t),bookShortName:e.book.shortName})}):Promise.resolve(!0)}removeNote(e,t){return new Promise((e,o)=>{if(!t)return console.log("When removing note, cannot find note with id"),void o("Cannot find note to remove");a.a.postToOurBackend(a.a.getAbsoluteUrl("api/note/removeNote"),t=>e(!0),e=>o(e),{noteID:t},!1)})}editNote(e,t,o){return new Promise((e,s)=>{if(!t)return console.log("When editing note, cannot find note with id"),void s("Cannot find note with id");a.a.postToOurBackend(a.a.getAbsoluteUrl("api/note/editNote"),t=>e(!0),e=>{console.log("Error when syncing note",e),s(e)},{noteID:t,noteText:o},!1)})}syncTextAddonsWithServer(e){return e?new Promise((t,o)=>a.a.postToOurBackend(a.a.getAbsoluteUrl("api/textAddon/syncTextAddons"),()=>t(!0),e=>{document.dispatchEvent(new CustomEvent("sync-error",{detail:{error:e}})),o(!1)},e,!0,!0,!1,!0)):Promise.resolve(!0)}}var m=o(5);class l{constructor(){this.webService=new d}getUniqueTextAddonId(){let e=parseInt(m.a.getItem("TEXT_ADDON_COUNTER")||"0");return e=Number.isNaN(e)?0:e,e--,m.a.setItem("TEXT_ADDON_COUNTER",e),e}fetchTextAddons(e){return s.b.isConnected()?new Promise((t,o)=>{this.webService.fetchTextAddons(e).then(o=>{this.storeTextAddons(e,o),t(o)}).catch(s=>{this.loadTextAddons(e).then(e=>t(e)).catch(e=>o(e))})}):new Promise((t,o)=>this.loadTextAddons(e).then(e=>{t(e)}).catch(e=>o(e)))}loadTextAddons(e){return new Promise((t,o)=>{this.getUtils().readFile(this.getUtils().getTextAddonsLocation(e.book.shortName)).then(e=>{t(e?JSON.parse(e):{bookmarks:[],notes:[],highlights:[]})}).catch(e=>t({bookmarks:[],notes:[],highlights:[]}))})}loadSyncTextAddons(){return new Promise((e,t)=>{const o=this.getUtils().getSyncTextAddonsLocation();this.getUtils().readFile(o).then(t=>{if(t){const o=JSON.parse(t);e(o||{})}else e({})}).catch(t=>e({}))})}storeTextAddons(e,t){this.getUtils().writeToFile(this.getUtils().getTextAddonsLocation(e.book.shortName),JSON.stringify(t))}storeSyncTextAddons(e){this.getUtils().writeToFile(this.getUtils().getSyncTextAddonsLocation(),JSON.stringify(e))}addBookmark(e,t,o,i,n){return s.b.isConnected()?new Promise((s,r)=>{this.webService.addBookmark(e,t,o,i,n).then(t=>{this.storeBookmark(e,t),s(t)}).catch(h=>{this.addBookmarkToDevice(e,t,o,i,n).then(e=>s(e)).catch(e=>r(e))})}):this.addBookmarkToDevice(e,t,o,i,n)}addNote(e,t,o,i,n,r,h,a){return s.b.isConnected()?new Promise((s,d)=>{this.webService.addNote(e,t,o,i,n,r,h,a).then(t=>{this.storeNote(e,t),s(t)}).catch(m=>{this.addNoteToDevice(e,t,o,i,n,r,h,a).then(e=>s(e)).catch(e=>d(e))})}):this.addNoteToDevice(e,t,o,i,n,r,h,a)}addHighlight(e,t,o,i){return s.b.isConnected()?new Promise((s,n)=>{this.webService.addHighlight(e,t,o,i).then(t=>{this.storeHighlight(e,t),s(t)}).catch(r=>{this.addHighlightToDevice(e,t,o,i).then(e=>s(e)).catch(e=>n(e))})}):this.addHighlightToDevice(e,t,o,i)}addBookmarkToDevice(e,t,o,s,i){return new Promise((r,h)=>{const a=new n.a(this.getUniqueTextAddonId(),e.shortName,e.ordinal,t,o,s,i,Date.now(),e.meapVersion);a.hasNotBeenStoredOnServer=!0,this.storeBookmark(e,a),r(a)})}addNoteToDevice(e,t,o,s,n,r,h,a){return new Promise((h,a)=>{const d=new i.a(this.getUniqueTextAddonId(),e.shortName,e.ordinal,t,o,s,n,r,Date.now(),e.meapVersion,e.reviewVersion);d.hasNotBeenStoredOnServer=!0,this.storeNote(e,d),h(d)})}addHighlightToDevice(e,t,o,s){return new Promise((i,n)=>{const h=new r.b(this.getUniqueTextAddonId(),e.book.shortName,e.shortName,e.ordinal,e.meapVersion,o,t,Date.now(),s);h.hasNotBeenStoredOnServer=!0,this.storeHighlight(e,h),i(h)})}removeBookmark(e,t){return s.b.isConnected()?new Promise((o,s)=>{this.webService.removeBookmark(e,t).then(()=>{this.removeBookmarkFromDevice(e,t),o(!0)}).catch(i=>{this.scheduleBookmarkForDeviceDeletion(e,t).then(e=>o(e)).catch(e=>s(e))})}):(this.scheduleBookmarkForDeviceDeletion(e,t),this.removeBookmarkFromDevice(e,t))}removeNote(e,t){return s.b.isConnected()?new Promise((o,s)=>{this.webService.removeNote(e,t).then(()=>{this.removeNoteFromDevice(e,t),o(!0)}).catch(i=>{this.scheduleNoteForDeviceDeletion(e,t).then(e=>o(e)).catch(e=>s(e))})}):(this.scheduleNoteForDeviceDeletion(e,t),this.removeNoteFromDevice(e,t))}removeHighlight(e,t){return s.b.isConnected()?new Promise((o,s)=>{this.webService.removeHighlight(e,t).then(()=>{this.removeHighlightFromDevice(e,t),o(!0)}).catch(i=>{this.scheduleHighlightForDeviceDeletion(e,t).then(e=>o(e)).catch(e=>s(e))})}):(this.scheduleHighlightForDeviceDeletion(e,t),this.removeHighlightFromDevice(e,t))}removeBookmarkFromDevice(e,t){return new Promise((o,s)=>{this.loadTextAddons(e).then(s=>{h.a.removeItemFromArray(s.bookmarks,s.bookmarks.find(e=>e.id==t)),this.storeTextAddons(e,s),o(!0)})})}removeNoteFromDevice(e,t){return new Promise((o,s)=>{this.loadTextAddons(e).then(s=>{h.a.removeItemFromArray(s.notes,s.notes.find(e=>e.id==t)),this.storeTextAddons(e,s),o(!0)})})}removeHighlightFromDevice(e,t){return new Promise((o,s)=>{this.loadTextAddons(e).then(s=>{h.a.removeItemFromArray(s.highlights,s.highlights.find(e=>e.id==t)),this.storeTextAddons(e,s),o(!0)})})}scheduleBookmarkForDeviceDeletion(e,t){return new Promise((o,s)=>{const i=e.book.shortName;this.loadSyncTextAddons().then(e=>{let o=e[i]&&e[i].bookmarks,s=o&&o.find(e=>e.id==t);if(s)h.a.removeItemFromArray(e[i].bookmarks,s),this.storeSyncTextAddons(e);else{const e={id:t,operation:"delete"};this.addToSyncTextAddons(i,"bookmarks",e)}}),o(!0)})}scheduleNoteForDeviceDeletion(e,t){return new Promise((o,s)=>{this.loadSyncTextAddons().then(o=>{const s=e.book.shortName;let i=o[s]&&o[s].notes,n=i&&i.find(e=>e.id==t);if(n)h.a.removeItemFromArray(o[s].notes,n),this.storeSyncTextAddons(o);else{const o={id:t,operation:"delete"};this.addToSyncTextAddons(e.book.shortName,"notes",o)}}),o(!0)})}scheduleHighlightForDeviceDeletion(e,t){return new Promise((o,s)=>{this.loadSyncTextAddons().then(o=>{const s=e.book.shortName;let i=o[s]&&o[s].highlights,n=i&&i.find(e=>e.id==t);if(n)h.a.removeItemFromArray(o[s].notes,n),this.storeSyncTextAddons(o);else{const o={id:t,operation:"delete"};this.addToSyncTextAddons(e.book.shortName,"highlights",o)}}),o(!0)})}storeBookmark(e,t){this.loadTextAddons(e).then(o=>{o.bookmarks.push(t),this.storeTextAddons(e,o)});{let o=Object.assign({operation:"new"},t);this.addToSyncTextAddons(e.book.shortName,"bookmarks",o)}}storeNote(e,t){if(this.loadTextAddons(e).then(o=>{o.notes.push(t),this.storeTextAddons(e,o)}),!s.b.isConnected()){let o=Object.assign({operation:"new"},t);this.addToSyncTextAddons(e.book.shortName,"notes",o)}}storeHighlight(e,t){if(this.loadTextAddons(e).then(o=>{o.highlights.push(t),this.storeTextAddons(e,o)}),!s.b.isConnected()){let o=Object.assign({operation:"new"},t);this.addToSyncTextAddons(e.book.shortName,"highlights",o)}}addToSyncTextAddons(e,t,o){this.loadSyncTextAddons().then(s=>{let i=s[e]||{bookmarks:[],highlights:[],notes:[]};i[t].push(o),Object.assign(s,{[e]:i}),this.storeSyncTextAddons(s)})}changeHighlightColor(e,t,o){return s.b.isConnected()?new Promise((s,i)=>{this.webService.changeHighlightColor(e,t,o).then(i=>{this.saveHighlightColorChangeToDevice(e,t,o,!0),s(i)}).catch(n=>{this.saveHighlightColorChangeToDevice(e,t,o,!1).then(e=>s(e)).catch(e=>i(e))})}):(this.loadSyncTextAddons().then(s=>{const i=e.book.shortName;let n=(s[i]&&s[i].highlights).find(e=>e.id==t);if(n)n.color=o,this.storeSyncTextAddons(s);else{const s={id:t,color:o,operation:"edit"};this.addToSyncTextAddons(e.book.shortName,"highlights",s)}}),this.saveHighlightColorChangeToDevice(e,t,o,!1))}saveHighlightColorChangeToDevice(e,t,o,s){return new Promise((i,n)=>{this.loadTextAddons(e).then(n=>{const r=n.highlights.find(e=>e.id==t);null!=r&&(r.color=o,r.hasNotBeenEditedToServer=s),this.storeTextAddons(e,n),i(!0)})})}editNote(e,t,o){return s.b.isConnected()?new Promise((s,i)=>{this.webService.editNote(e,t,o).then(i=>{this.saveNoteTextChangeToDevice(e,t,o,!0),s(i)}).catch(n=>{this.saveNoteTextChangeToDevice(e,t,o,!1).then(e=>s(e)).catch(e=>i(e))})}):(this.loadSyncTextAddons().then(s=>{const i=e.book.shortName;let n=(s[i]&&s[i].notes).find(e=>e.id==t);if(n)n.text=o,this.storeSyncTextAddons(s);else{const s={id:t,text:o,operation:"edit"};this.addToSyncTextAddons(e.book.shortName,"notes",s)}}),this.saveNoteTextChangeToDevice(e,t,o,!1))}syncTextAddonsWithServer(){return new Promise((e,t)=>this.loadSyncTextAddons().then(o=>{Object.keys(o).length?this.webService.syncTextAddonsWithServer(o).then(t=>{this.getUtils().writeToFile(this.getUtils().getSyncTextAddonsLocation(),""),e(t)}).catch(e=>t(!1)):e(!0)}))}saveNoteTextChangeToDevice(e,t,o,s){return new Promise((i,n)=>{this.loadTextAddons(e).then(n=>{const r=n.notes.find(e=>e.id==t);null!=r&&(r.noteText=o,r.hasNotBeenEditedToServer=s),this.storeTextAddons(e,n),i(!0)})})}getUtils(){return window.fileSystemUtils}}const c=new class{constructor(){this.textAddonsServicePromise=new Promise((e,t)=>{s.b.loadDeviceInfo().then(t=>{e(function(e){switch(e){case s.a.Cordova:case s.a.Electron:return new l;case s.a.Browser:default:return new d}}(t.platform))}).catch(e=>t(e))}),$(document).on("appActivatedAfterLongTime",()=>{this.data=null,this.dataPromise=null,this.previousTextAddonsRequestInfo=null})}fetchTextAddons(e){return null!=this.dataPromise&&this.previousTextAddonsRequestInfo.bookShortName===e.book.shortName?this.previousTextAddonsRequestInfo.bookElementShortName===e.shortName?null!=this.data?Promise.resolve(this.data):this.dataPromise:this.adaptCurrentTextAddonsToNewBookElement(e):(this.previousTextAddonsRequestInfo={bookShortName:e.book.shortName,bookElementShortName:e.shortName},this.dataPromise=new Promise((t,o)=>{this.textAddonsServicePromise.then(o=>{o.fetchTextAddons(e).then(o=>{const s=o.notes.map(e=>i.a.fromJSON(e)),h=o.bookmarks.map(e=>n.a.fromJSON(e)),a=o.highlights.map(e=>r.b.fromJSON(e));this.data={notes:{bookNotes:s,bookElementNotes:s.filter(t=>t.bookElementShortName===e.shortName)},bookmarks:{bookBookmarks:h,bookElementBookmarks:h.filter(t=>t.bookElementShortName===e.shortName)},highlights:{bookHighlights:a,bookElementHighlights:a.filter(t=>t.bookElementShortName===e.shortName)}},t(this.data)}).catch(e=>t(this.data={notes:{bookNotes:[],bookElementNotes:[]},bookmarks:{bookBookmarks:[],bookElementBookmarks:[]},highlights:{bookHighlights:[],bookElementHighlights:[]}}))})}))}adaptCurrentTextAddonsToNewBookElement(e){return this.previousTextAddonsRequestInfo={bookShortName:e.book.shortName,bookElementShortName:e.shortName},null!=this.data?Promise.resolve(this.assignTextAddonData(this.data,e)):new Promise((t,o)=>{this.dataPromise.then(o=>t(this.assignTextAddonData(o,e))).catch(e=>o(e))})}assignTextAddonData(e,t){const o={notes:e.notes,bookmarks:e.bookmarks,highlights:e.highlights};return o.notes.bookElementNotes=e.notes.bookNotes.filter(e=>e.bookElementShortName===t.shortName),o.bookmarks.bookElementBookmarks=e.bookmarks.bookBookmarks.filter(e=>e.bookElementShortName===t.shortName),o.highlights.bookElementHighlights=e.highlights.bookHighlights.filter(e=>e.bookElementShortName===t.shortName),this.data=o}fetchHighlights(e){return new Promise((t,o)=>{this.fetchTextAddons(e).then(e=>t(e.highlights)).catch(e=>o(e))})}fetchBookmarks(e){return new Promise((t,o)=>{this.fetchTextAddons(e).then(e=>t(e.bookmarks)).catch(e=>o(e))})}fetchNotes(e){return new Promise((t,o)=>{this.fetchTextAddons(e).then(e=>t(e.notes)).catch(e=>o(e))})}addHighlight(e,t,o,s){return new Promise((i,n)=>{this.textAddonsServicePromise.then(r=>{r.addHighlight(e,t,o,s).then(e=>{null!=this.data&&null!=this.data.highlights&&(this.data.highlights.bookHighlights.push(e),this.data.highlights.bookElementHighlights.push(e)),i(e.id)}).catch(e=>n(e))})})}addBookmark(e,t,o,s,i){return new Promise((n,r)=>{this.textAddonsServicePromise.then(h=>{h.addBookmark(e,t,o,s,i).then(e=>{null!=this.data&&null!=this.data.bookmarks&&(this.data.bookmarks.bookBookmarks.push(e),this.data.bookmarks.bookElementBookmarks.push(e)),n(e.id)}).catch(e=>r(e))})})}addNote(e,t,o,s,i,n,r,h){return new Promise((a,d)=>{this.textAddonsServicePromise.then(m=>{m.addNote(e,t,o,s,i,n,r,h).then(e=>{null!=this.data&&null!=this.data.notes&&(this.data.notes.bookNotes.push(e),this.data.notes.bookElementNotes.push(e)),a(e.id)}).catch(e=>d(e))})})}removeHighlight(e,t){return new Promise((o,s)=>{this.textAddonsServicePromise.then(i=>{const n=this.data&&this.data.highlights.bookHighlights.find(e=>e.id==t);if(null==n)return Promise.resolve(!0);i.removeHighlight(e,t).then(e=>{e&&null!=this.data&&null!=this.data.highlights&&(h.a.removeItemFromArray(this.data.highlights.bookHighlights,n),h.a.removeItemFromArray(this.data.highlights.bookElementHighlights,n)),o(e)}).catch(e=>{s(e)})})})}removeBookmarkByContentID(e,t){return new Promise((o,s)=>{this.textAddonsServicePromise.then(i=>{const n=this.data&&this.data.bookmarks.bookBookmarks.find(e=>e.contentID==t);if(null==n)return Promise.resolve(!0);i.removeBookmark(e,n.id).then(e=>{e&&null!=this.data&&null!=this.data.bookmarks&&(h.a.removeItemFromArray(this.data.bookmarks.bookBookmarks,n),h.a.removeItemFromArray(this.data.bookmarks.bookElementBookmarks,n)),o(e)}).catch(e=>s(e))})})}removeBookmarkById(e,t){return new Promise((o,s)=>{this.textAddonsServicePromise.then(i=>{const n=this.data&&this.data.bookmarks.bookBookmarks.find(e=>e.id==t);if(null==n)return Promise.resolve(!0);i.removeBookmark(e,t).then(e=>{e&&null!=this.data&&null!=this.data.bookmarks&&(h.a.removeItemFromArray(this.data.bookmarks.bookBookmarks,n),h.a.removeItemFromArray(this.data.bookmarks.bookElementBookmarks,n)),o(e)}).catch(e=>s(e))})})}removeNote(e,t){return new Promise((o,s)=>{this.textAddonsServicePromise.then(i=>{const n=this.data&&this.data.notes.bookNotes.find(e=>e.id==t);if(null==n)return Promise.resolve(!0);i.removeNote(e,t).then(e=>{e&&null!=this.data&&null!=this.data.notes&&(h.a.removeItemFromArray(this.data.notes.bookNotes,n),h.a.removeItemFromArray(this.data.notes.bookElementNotes,n)),o(e)}).catch(e=>s(e))})})}changeHighlightColor(e,t,o){return e&&t&&o?new Promise((s,i)=>{this.textAddonsServicePromise.then(n=>{const r=this.data&&this.data.highlights.bookHighlights.find(e=>e.id==t);if(null==r)return Promise.resolve(!0);n.changeHighlightColor(e,t,o).then(e=>{e&&(r.color=o),s(e)}).catch(e=>i(e))})}):Promise.reject("")}editNote(e,t,o){return e&&t&&o?new Promise((s,i)=>{this.textAddonsServicePromise.then(n=>{const r=this.data&&this.data.notes.bookElementNotes.find(e=>e.id==t);if(null==r)return Promise.resolve(!0);n.editNote(e,t,o).then(e=>{e&&(r.noteText=o),s(e)}).catch(e=>i(e))})}):Promise.reject("")}syncTextAddonsWithServer(){return new Promise((e,t)=>this.textAddonsServicePromise.then(o=>o.syncTextAddonsWithServer().then(t=>e(t)).catch(e=>{console.error("Failed to synchronize text addons with server, error: ",e),t(!1)})))}}},145:function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"a",(function(){return i}));class s{constructor(e,t,o,s,i,n,r,h,a,d=!1,m=!1,l=!1){this.id=e,this.bookShortName=t,this.bookElementShortName=o,this.bookElementOrdinal=s,this.meapVersion=i,this.color=n,this.highlightedParagraphs=r,this.timestamp=h,this.offset=a,this.hasNotBeenStoredOnServer=d,this.shouldBeDeleted=m,this.hasNotBeenEditedToServer=l}static fromJSON(e){return new s(e.id,e.bookShortName,e.bookElementShortName,e.bookElementOrdinal,e.meapVersion,e.color,e.highlightedParagraphs.map(e=>i.fromJSON(e)),e.timeStamp||e.timeCreated,e.offset||0,e.hasNotBeenStoredOnServer||!1,e.shouldBeDeleted||!1,e.hasNotBeenEditedToServer||!1)}containsText(e){if(!e)return!1;if(null==this.highlightedParagraphs||0==this.highlightedParagraphs.length)return!1;for(const t of this.highlightedParagraphs)if(t&&t.selectedText&&t.selectedText.toLowerCase().indexOf(e.toLowerCase())>=0)return!0;return!1}}class i{constructor(e,t,o){this.ordinal=e,this.hash=t,this.selectedText=o}static fromJSON(e){return new i(e.ordinal,e.hash,e.selectedText)}}},165:function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));class s{constructor(e,t,o,s,i,n,r,h,a,d,m,l=!1,c=!1,k=!1){this.id=e,this.bookElementShortName=t,this.bookElementOrdinal=o||-1,this.contentID=s,this.contentHash=i,this.annotatedText=n,this.noteText=r,this.section=h,this.timestamp=a,this.meapVersion=d||0,this.reviewVersion=m||0,this.hasNotBeenStoredOnServer=l,this.shouldBeDeleted=c,this.hasNotBeenEditedToServer=k}static fromJSON(e){return new s(parseInt(e.id||e.noteID)||0,e.bookElementShortName,e.bookElementOrdinal,e.contentID||e.contentItemID,e.contentHash,e.annotatedText,e.noteText,e.section||e.contentLocation,e.timeCreated||e.timestamp,e.meapVersion,e.reviewVersion,!!e.hasNotBeenStoredOnServer,!!e.shouldBeDeleted,!!e.hasNotBeenEditedToServer)}}},181:function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));class s{constructor(e,t,o,s,i,n,r,h,a,d=!1,m=!1){this.id=e,this.contentID=s,this.contentHash=i,this.bookmarkedText=n,this.bookElementShortName=t,this.bookElementOrdinal=o,this.section=r,this.timestamp=h,this.meapVersion=a||0,this.hasNotBeenStoredOnServer=d,this.shouldBeDeleted=m}static fromJSON(e){return new s(parseInt(e.id||e.bookmarkID)||0,e.bookElementShortName,e.bookElementOrdinal,e.contentID||e.contentItemID,e.contentHash,e.bookmarkedText,e.section||e.contentLocation,e.timeCreated||e.timestamp,e.meapVersion,!!e.hasNotBeenStoredOnServer,!!e.shouldBeDeleted)}}}}]);
//# sourceMappingURL=bookPage~discussionParagraphNotificationsModule~editorPage~notesModule~synchronizerProviderModule~te~db17ebda.chunk.js.map?8fef4b4214bd4b2a589c