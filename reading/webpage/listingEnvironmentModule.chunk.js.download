(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{688:function(n,t,e){"use strict";e.r(t),e.d(t,"ListingEnvironments",(function(){return u}));var i=e(8),s=e(13),a=e(2),o=e(3);const r=new class{createRunnableListing(n,t,e){this.getSource().then(({RunnableListing:i})=>new i(n,t,e))}getSource(){return this.sourcePromise||(this.sourcePromise=a.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise}constructSourcePromise(){return e.e(72).then(e.bind(null,1229))}};var l=e(36);class c{constructor(n,t){this.listingEnvironmentElement=n,this.$listingEnvironment=$(n);const e=this.$listingEnvironment.is(".listing-runnable")&&(o.a.bookElement.isOpen||o.a.book.userOwnsBook);this.$listingEnvironment.append(function(n){return`<div class="listing-environment-container">\n<div class="listing-environment-toolbar">\n    <span class="listing-environment-runnable-script-container">\n        ${n?'\n  <a href="javascript:void(0)" class="button-toggle-result button"><span class="show-medium-up">show result</span> <i class="fal fa-eye show-small" aria-hidden="true"></i></a>\n  <span class="execution-environment-standard-mode-container">\n    <a href="javascript:void(0)" class="button-edit button"><span class="show-medium-up">edit</span> <i class="fal fa-pencil show-small" aria-hidden="true"></i></a>\n  </span>\n  \n  <span class="execution-environment-edit-mode-container">\n    <a href="javascript:void(0)" class="button-restore button"><span class="show-medium-up">back</span> <i class="fal fa-angle-double-left show-small" aria-hidden="true"></i></a>\n    <a href="javascript:void(0)" class="button-reset button"><span class="show-medium-up">reset</span> <i class="fal fa-undo show-small" aria-hidden="true"></i></a>\n    <a href="javascript:void(0)" class="button-run button"><span class="show-medium-up">run</span> <i class="fal fa-play show-small" aria-hidden="true"></i></a>\n  </span>\n</span>':""}\n      <span class="listing-environment-standard-mode-container">\n          <a href="javascript:void(0)" class="button-copy button radius"><span class="show-medium-up">copy</span> <i class="fal fa-clipboard show-small" aria-hidden="true"></i></a>\n      </span>\n</div>\n</div>`}(e)),n.paragraphBubbleToAppend&&(this.$listingEnvironment.find(".listing-environment-container").append(n.paragraphBubbleToAppend),delete n.paragraphBubbleToAppend),this.listingCode=this.removeStyleInfo(this.$listingEnvironment.find(".code-area").text()),e&&r.createRunnableListing(this.$listingEnvironment,this.listingCode,t),this.$buttonCopy=this.$listingEnvironment.find(".button-copy"),this.$buttonCopy.on("click",n=>this.fullyShow()),this.createClipboard()}fullyShow(){this.$listingEnvironment.removeClass("focus-off")}getSourceCode(){let n="";null!=this.listingEnvironmentElement.runnableScript&&(n=this.listingEnvironmentElement.runnableScript.getSourceCode());try{!n&&this.listingEnvironmentElement.annotatedListing&&(n=this.listingEnvironmentElement.annotatedListing.source)}catch(n){console.log(n)}try{return(n||this.listingCode||"").replace(/^PS C:\\>\s*/gm,"")}catch(t){return n||this.listingCode||""}}createClipboard(){a.a.loadClipboardCode().then(()=>this.initializeClipboard())}initializeClipboard(){try{const n=new window.Clipboard(this.$buttonCopy[0],{text:()=>this.getSourceCode()});n.on("success",n=>{$(document).trigger("requestNotification","Copied!"),n.clearSelection(),$(document.activeElement).blur(),l.a.processCodeCopiedAction(null!=o.a.bookElement?o.a.bookElement.shortName:"")}),n.on("error",n=>{$(document).trigger("requestNotification",this.getFallbackMessage(n.action)),$(document.activeElement).blur()})}catch(n){console.log("Failed to initialize clipboard")}}getFallbackMessage(n){var t="cut"===n?"X":"C";return/iPhone|iPad/i.test(navigator.userAgent)?"No support :(":/Mac/i.test(navigator.userAgent)?"Press âŒ˜-"+t+" to "+n:"Press Ctrl-"+t+" to "+n}removeStyleInfo(n){if(!n)return n;var t=n.indexOf("!@%STYLE%@!");return-1===t?n:n.substring(0,t)}}const u=new class{initialize(n){const t=$(".browsable-container .code-area");t.length&&t.each((n,t)=>{$(t).closest(".browsable-container").addClass("listing-container")}),$(".listing-container").length>0&&i.a.asyncEach($(".listing-container"),t=>new c(t,s.a.getCodeMirrorSyntaxHighlightMode(n,t.querySelector(".code-area").textContent)),()=>{},1)}}}}]);
//# sourceMappingURL=listingEnvironmentModule.chunk.js.map?135113ecd7c7194af9f8